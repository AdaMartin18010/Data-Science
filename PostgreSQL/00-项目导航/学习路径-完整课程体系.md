# PostgreSQL å®Œæ•´è¯¾ç¨‹ä½“ç³»

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-11-12
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: âœ… å·²åˆ›å»º
> **å¯¹æ ‡æ ‡å‡†**: MIT 6.830ã€Stanford CS145ã€Berkeley CS186

---

## ğŸ“‹ ç›®å½•

- [PostgreSQL å®Œæ•´è¯¾ç¨‹ä½“ç³»](#postgresql-å®Œæ•´è¯¾ç¨‹ä½“ç³»)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. è¯¾ç¨‹ä½“ç³»æ¦‚è¿°](#1-è¯¾ç¨‹ä½“ç³»æ¦‚è¿°)
  - [2. åŸºç¡€è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰](#2-åŸºç¡€è¯¾ç¨‹6å‘¨)
    - [2.1 Week 1: PostgreSQLåŸºç¡€](#21-week-1-postgresqlåŸºç¡€)
    - [2.2 Week 2: SQLè¯­è¨€](#22-week-2-sqlè¯­è¨€)
    - [2.3 Week 3: æ•°æ®æ¨¡å‹ä¸è®¾è®¡](#23-week-3-æ•°æ®æ¨¡å‹ä¸è®¾è®¡)
    - [2.4 Week 4: äº‹åŠ¡ä¸å¹¶å‘](#24-week-4-äº‹åŠ¡ä¸å¹¶å‘)
    - [2.5 Week 5: ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–](#25-week-5-ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–)
    - [2.6 Week 6: å­˜å‚¨ä¸å¤‡ä»½](#26-week-6-å­˜å‚¨ä¸å¤‡ä»½)
  - [3. è¿›é˜¶è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰](#3-è¿›é˜¶è¯¾ç¨‹6å‘¨)
    - [3.1 Week 7: é«˜çº§SQLç‰¹æ€§](#31-week-7-é«˜çº§sqlç‰¹æ€§)
    - [3.2 Week 8: æ‰©å±•ç³»ç»Ÿ](#32-week-8-æ‰©å±•ç³»ç»Ÿ)
    - [3.3 Week 9: å®‰å…¨ä¸è®¿é—®æ§åˆ¶](#33-week-9-å®‰å…¨ä¸è®¿é—®æ§åˆ¶)
    - [3.4 Week 10: é«˜å¯ç”¨ä¸å¤åˆ¶](#34-week-10-é«˜å¯ç”¨ä¸å¤åˆ¶)
    - [3.5 Week 11: æ€§èƒ½è°ƒä¼˜](#35-week-11-æ€§èƒ½è°ƒä¼˜)
    - [3.6 Week 12: ç›‘æ§ä¸è¯Šæ–­](#36-week-12-ç›‘æ§ä¸è¯Šæ–­)
  - [4. é«˜çº§è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰](#4-é«˜çº§è¯¾ç¨‹6å‘¨)
    - [4.1 Week 13: åˆ†å¸ƒå¼æ¶æ„](#41-week-13-åˆ†å¸ƒå¼æ¶æ„)
    - [4.2 Week 14: AIé›†æˆä¸å‘é‡æ•°æ®åº“](#42-week-14-aié›†æˆä¸å‘é‡æ•°æ®åº“)
    - [4.3 Week 15: æµå¤„ç†ä¸CEP](#43-week-15-æµå¤„ç†ä¸cep)
    - [4.4 Week 16: äº‘åŸç”Ÿéƒ¨ç½²](#44-week-16-äº‘åŸç”Ÿéƒ¨ç½²)
    - [4.5 Week 17: å®æˆ˜é¡¹ç›®å¼€å‘](#45-week-17-å®æˆ˜é¡¹ç›®å¼€å‘)
    - [4.6 Week 18: é¡¹ç›®æ€»ç»“ä¸ä¼˜åŒ–](#46-week-18-é¡¹ç›®æ€»ç»“ä¸ä¼˜åŒ–)
  - [5. å®æˆ˜é¡¹ç›®ï¼ˆ4å‘¨ï¼‰](#5-å®æˆ˜é¡¹ç›®4å‘¨)
    - [5.1 é¡¹ç›®1: è¯­ä¹‰æœç´¢ç³»ç»Ÿ](#51-é¡¹ç›®1-è¯­ä¹‰æœç´¢ç³»ç»Ÿ)
    - [5.2 é¡¹ç›®2: RAGçŸ¥è¯†åº“](#52-é¡¹ç›®2-ragçŸ¥è¯†åº“)
    - [5.3 é¡¹ç›®3: æ™ºèƒ½æ¨èç³»ç»Ÿ](#53-é¡¹ç›®3-æ™ºèƒ½æ¨èç³»ç»Ÿ)
  - [6. è¯¾ç¨‹ææ–™](#6-è¯¾ç¨‹ææ–™)
    - [6.1 å­¦ä¹ ç›®æ ‡](#61-å­¦ä¹ ç›®æ ‡)
    - [6.2 ç»ƒä¹ é¢˜](#62-ç»ƒä¹ é¢˜)
      - [é€‰æ‹©é¢˜](#é€‰æ‹©é¢˜)
      - [ç¼–ç¨‹é¢˜](#ç¼–ç¨‹é¢˜)
      - [è®¾è®¡é¢˜](#è®¾è®¡é¢˜)
    - [6.3 å®éªŒæŒ‡å¯¼](#63-å®éªŒæŒ‡å¯¼)
      - [å®éªŒ1: åŸºç¡€SQLæŸ¥è¯¢](#å®éªŒ1-åŸºç¡€sqlæŸ¥è¯¢)
      - [å®éªŒ2: å¤æ‚æŸ¥è¯¢å’Œä¼˜åŒ–](#å®éªŒ2-å¤æ‚æŸ¥è¯¢å’Œä¼˜åŒ–)
      - [Week 4: äº‹åŠ¡ä¸å¹¶å‘ç»ƒä¹ é¢˜](#week-4-äº‹åŠ¡ä¸å¹¶å‘ç»ƒä¹ é¢˜)
      - [Week 4: äº‹åŠ¡ä¸å¹¶å‘å®éªŒæŒ‡å¯¼](#week-4-äº‹åŠ¡ä¸å¹¶å‘å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: éš”ç¦»çº§åˆ«æµ‹è¯•](#å®éªŒ1-éš”ç¦»çº§åˆ«æµ‹è¯•)
      - [Week 5: ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–ç»ƒä¹ é¢˜](#week-5-ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–ç»ƒä¹ é¢˜)
      - [Week 5: ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–å®éªŒæŒ‡å¯¼](#week-5-ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: ç´¢å¼•æ€§èƒ½å¯¹æ¯”](#å®éªŒ1-ç´¢å¼•æ€§èƒ½å¯¹æ¯”)
      - [Week 7: é«˜çº§SQLç‰¹æ€§ç»ƒä¹ é¢˜](#week-7-é«˜çº§sqlç‰¹æ€§ç»ƒä¹ é¢˜)
      - [Week 7: é«˜çº§SQLç‰¹æ€§å®éªŒæŒ‡å¯¼](#week-7-é«˜çº§sqlç‰¹æ€§å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: çª—å£å‡½æ•°åº”ç”¨](#å®éªŒ1-çª—å£å‡½æ•°åº”ç”¨)
      - [Week 9: å®‰å…¨ä¸è®¿é—®æ§åˆ¶ç»ƒä¹ é¢˜](#week-9-å®‰å…¨ä¸è®¿é—®æ§åˆ¶ç»ƒä¹ é¢˜)
      - [Week 9: å®‰å…¨ä¸è®¿é—®æ§åˆ¶å®éªŒæŒ‡å¯¼](#week-9-å®‰å…¨ä¸è®¿é—®æ§åˆ¶å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: è¡Œçº§å®‰å…¨é…ç½®](#å®éªŒ1-è¡Œçº§å®‰å…¨é…ç½®)
      - [Week 13: åˆ†å¸ƒå¼æ¶æ„ç»ƒä¹ é¢˜](#week-13-åˆ†å¸ƒå¼æ¶æ„ç»ƒä¹ é¢˜)
      - [Week 13: åˆ†å¸ƒå¼æ¶æ„å®éªŒæŒ‡å¯¼](#week-13-åˆ†å¸ƒå¼æ¶æ„å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: Citusé›†ç¾¤éƒ¨ç½²](#å®éªŒ1-citusé›†ç¾¤éƒ¨ç½²)
      - [Week 14: AIé›†æˆä¸å‘é‡æ•°æ®åº“ç»ƒä¹ é¢˜](#week-14-aié›†æˆä¸å‘é‡æ•°æ®åº“ç»ƒä¹ é¢˜)
      - [Week 14: AIé›†æˆä¸å‘é‡æ•°æ®åº“å®éªŒæŒ‡å¯¼](#week-14-aié›†æˆä¸å‘é‡æ•°æ®åº“å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: å‘é‡æœç´¢å®ç°](#å®éªŒ1-å‘é‡æœç´¢å®ç°)
      - [Week 10: é«˜å¯ç”¨ä¸å¤åˆ¶ç»ƒä¹ é¢˜](#week-10-é«˜å¯ç”¨ä¸å¤åˆ¶ç»ƒä¹ é¢˜)
      - [Week 10: é«˜å¯ç”¨ä¸å¤åˆ¶å®éªŒæŒ‡å¯¼](#week-10-é«˜å¯ç”¨ä¸å¤åˆ¶å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: æµå¤åˆ¶é…ç½®](#å®éªŒ1-æµå¤åˆ¶é…ç½®)
      - [Week 11: æ€§èƒ½è°ƒä¼˜ç»ƒä¹ é¢˜](#week-11-æ€§èƒ½è°ƒä¼˜ç»ƒä¹ é¢˜)
      - [Week 11: æ€§èƒ½è°ƒä¼˜å®éªŒæŒ‡å¯¼](#week-11-æ€§èƒ½è°ƒä¼˜å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: å‚æ•°è°ƒä¼˜](#å®éªŒ1-å‚æ•°è°ƒä¼˜)
      - [Week 12: ç›‘æ§ä¸è¯Šæ–­ç»ƒä¹ é¢˜](#week-12-ç›‘æ§ä¸è¯Šæ–­ç»ƒä¹ é¢˜)
      - [Week 12: ç›‘æ§ä¸è¯Šæ–­å®éªŒæŒ‡å¯¼](#week-12-ç›‘æ§ä¸è¯Šæ–­å®éªŒæŒ‡å¯¼)
        - [å®éªŒ1: æ€§èƒ½ç›‘æ§éƒ¨ç½²](#å®éªŒ1-æ€§èƒ½ç›‘æ§éƒ¨ç½²)
    - [6.4 è€ƒè¯•é¢˜åº“](#64-è€ƒè¯•é¢˜åº“)
      - [ç¬¬ä¸€éƒ¨åˆ†ï¼šé€‰æ‹©é¢˜ï¼ˆ20åˆ†ï¼Œæ¯é¢˜2åˆ†ï¼‰](#ç¬¬ä¸€éƒ¨åˆ†é€‰æ‹©é¢˜20åˆ†æ¯é¢˜2åˆ†)
      - [ç¬¬äºŒéƒ¨åˆ†ï¼šå¡«ç©ºé¢˜ï¼ˆ20åˆ†ï¼Œæ¯ç©º2åˆ†ï¼‰](#ç¬¬äºŒéƒ¨åˆ†å¡«ç©ºé¢˜20åˆ†æ¯ç©º2åˆ†)
      - [ç¬¬ä¸‰éƒ¨åˆ†ï¼šç¼–ç¨‹é¢˜ï¼ˆ40åˆ†ï¼‰](#ç¬¬ä¸‰éƒ¨åˆ†ç¼–ç¨‹é¢˜40åˆ†)
      - [ç¬¬å››éƒ¨åˆ†ï¼šç®€ç­”é¢˜ï¼ˆ20åˆ†ï¼‰](#ç¬¬å››éƒ¨åˆ†ç®€ç­”é¢˜20åˆ†)
  - [7. å­¦ä¹ è·¯å¾„é€‰æ‹©](#7-å­¦ä¹ è·¯å¾„é€‰æ‹©)
    - [è·¯å¾„1: å¿«é€Ÿå…¥é—¨ï¼ˆ2å‘¨ï¼‰](#è·¯å¾„1-å¿«é€Ÿå…¥é—¨2å‘¨)
    - [è·¯å¾„2: ç³»ç»Ÿå­¦ä¹ ï¼ˆ12å‘¨ï¼‰](#è·¯å¾„2-ç³»ç»Ÿå­¦ä¹ 12å‘¨)
    - [è·¯å¾„3: å®Œæ•´è¯¾ç¨‹ï¼ˆ22å‘¨ï¼‰](#è·¯å¾„3-å®Œæ•´è¯¾ç¨‹22å‘¨)
    - [è·¯å¾„4: AIä¸“å®¶ï¼ˆ8å‘¨ï¼‰](#è·¯å¾„4-aiä¸“å®¶8å‘¨)
  - [8. ç›¸å…³æ–‡æ¡£](#8-ç›¸å…³æ–‡æ¡£)
  - [9. å‚è€ƒæ–‡çŒ®](#9-å‚è€ƒæ–‡çŒ®)

---

## 1. è¯¾ç¨‹ä½“ç³»æ¦‚è¿°

æœ¬è¯¾ç¨‹ä½“ç³»å¯¹æ ‡MIT 6.830ã€Stanford CS145ã€Berkeley CS186ç­‰é¡¶çº§å¤§å­¦æ•°æ®åº“è¯¾ç¨‹ï¼Œæä¾›ç³»ç»ŸåŒ–çš„PostgreSQLå­¦ä¹ è·¯å¾„ã€‚

**è¯¾ç¨‹ç»“æ„**ï¼š

- **åŸºç¡€è¯¾ç¨‹**ï¼ˆ6å‘¨ï¼‰: PostgreSQLåŸºç¡€ã€SQLã€æ•°æ®æ¨¡å‹ã€äº‹åŠ¡ã€ç´¢å¼•ã€å­˜å‚¨
- **è¿›é˜¶è¯¾ç¨‹**ï¼ˆ6å‘¨ï¼‰: é«˜çº§SQLã€æ‰©å±•ç³»ç»Ÿã€å®‰å…¨ã€é«˜å¯ç”¨ã€æ€§èƒ½è°ƒä¼˜ã€ç›‘æ§
- **é«˜çº§è¯¾ç¨‹**ï¼ˆ6å‘¨ï¼‰: åˆ†å¸ƒå¼æ¶æ„ã€AIé›†æˆã€æµå¤„ç†ã€äº‘åŸç”Ÿã€å®æˆ˜é¡¹ç›®
- **å®æˆ˜é¡¹ç›®**ï¼ˆ4å‘¨ï¼‰: ç«¯åˆ°ç«¯é¡¹ç›®å®ç°

**æ€»æ—¶é•¿**: 22å‘¨ï¼ˆçº¦5.5ä¸ªæœˆï¼‰

**éš¾åº¦ç­‰çº§**ï¼š

- â­ åŸºç¡€è¯¾ç¨‹ï¼šå…¥é—¨çº§
- â­â­ è¿›é˜¶è¯¾ç¨‹ï¼šè¿›é˜¶çº§
- â­â­â­ é«˜çº§è¯¾ç¨‹ï¼šé«˜çº§çº§

---

## 2. åŸºç¡€è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰

### 2.1 Week 1: PostgreSQLåŸºç¡€

**å­¦ä¹ ç›®æ ‡**ï¼š

- äº†è§£PostgreSQLå†å²å’Œç‰¹æ€§
- æŒæ¡PostgreSQLå®‰è£…å’Œé…ç½®
- ç†è§£PostgreSQLç³»ç»Ÿæ¶æ„
- ç†Ÿæ‚‰åŸºæœ¬æ“ä½œå’Œå·¥å…·

**æ ¸å¿ƒå†…å®¹**ï¼š

1. PostgreSQLå†å²ä¸å‘å±•
2. ç³»ç»Ÿæ¶æ„ä¸è®¾è®¡åŸç†
3. å®‰è£…ä¸é…ç½®
4. åŸºæœ¬æ“ä½œï¼ˆpsqlã€pgAdminï¼‰

**æ¨èæ–‡æ¡£**ï¼š

- [PostgreSQLå†å²ä¸å‘å±•](../01-æ ¸å¿ƒåŸºç¡€/01.00-PostgreSQLå†å²ä¸å‘å±•.md)
- [ç³»ç»Ÿæ¶æ„ä¸è®¾è®¡åŸç†](../01-æ ¸å¿ƒåŸºç¡€/01.01-ç³»ç»Ÿæ¶æ„ä¸è®¾è®¡åŸç†.md)
- [å•æœºéƒ¨ç½²ä¸é…ç½®](../04-éƒ¨ç½²è¿ç»´/04.01-å•æœºéƒ¨ç½²ä¸é…ç½®.md)

**å®è·µä»»åŠ¡**ï¼š

- å®‰è£…PostgreSQL 18
- åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
- ä½¿ç”¨psqlæ‰§è¡ŒåŸºæœ¬æ“ä½œ

### 2.2 Week 2: SQLè¯­è¨€

**å­¦ä¹ ç›®æ ‡**ï¼š

- æŒæ¡SQLåŸºç¡€è¯­æ³•
- ç†è§£SQLæ ‡å‡†
- ç†Ÿç»ƒä½¿ç”¨SELECTã€INSERTã€UPDATEã€DELETE
- æŒæ¡JOINã€èšåˆã€å­æŸ¥è¯¢

**æ ¸å¿ƒå†…å®¹**ï¼š

1. SQLè¯­è¨€è§„èŒƒä¸æ ‡å‡†
2. æ•°æ®æŸ¥è¯¢ï¼ˆSELECTï¼‰
3. æ•°æ®ä¿®æ”¹ï¼ˆINSERTã€UPDATEã€DELETEï¼‰
4. JOINæ“ä½œ
5. èšåˆå‡½æ•°å’Œåˆ†ç»„

**æ¨èæ–‡æ¡£**ï¼š

- [SQLè¯­è¨€è§„èŒƒä¸æ ‡å‡†](../01-æ ¸å¿ƒåŸºç¡€/01.03-SQLè¯­è¨€è§„èŒƒä¸æ ‡å‡†.md)

**å®è·µä»»åŠ¡**ï¼š

- åˆ›å»ºç¤ºä¾‹æ•°æ®åº“
- ç¼–å†™å¤æ‚SQLæŸ¥è¯¢
- ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

### 2.3 Week 3: æ•°æ®æ¨¡å‹ä¸è®¾è®¡

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£å…³ç³»æ•°æ®æ¨¡å‹
- æŒæ¡æ•°æ®åº“è®¾è®¡æ–¹æ³•
- å­¦ä¹ èŒƒå¼ç†è®º
- å®è·µæ•°æ®åº“è®¾è®¡

**æ ¸å¿ƒå†…å®¹**ï¼š

1. å…³ç³»æ•°æ®æ¨¡å‹ä¸ç†è®º
2. æ•°æ®åº“è®¾è®¡æ–¹æ³•
3. èŒƒå¼ç†è®º
4. ERæ¨¡å‹è®¾è®¡

**æ¨èæ–‡æ¡£**ï¼š

- [å…³ç³»æ•°æ®æ¨¡å‹ä¸ç†è®º](../01-æ ¸å¿ƒåŸºç¡€/01.02-å…³ç³»æ•°æ®æ¨¡å‹ä¸ç†è®º.md)

**å®è·µä»»åŠ¡**ï¼š

- è®¾è®¡ä¸€ä¸ªå®Œæ•´çš„æ•°æ®åº“
- åº”ç”¨èŒƒå¼ç†è®º
- åˆ›å»ºè¡¨ç»“æ„

### 2.4 Week 4: äº‹åŠ¡ä¸å¹¶å‘

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£ACIDç‰¹æ€§
- æŒæ¡äº‹åŠ¡ç®¡ç†
- ç†è§£MVCCæœºåˆ¶
- å­¦ä¹ å¹¶å‘æ§åˆ¶

**æ ¸å¿ƒå†…å®¹**ï¼š

1. äº‹åŠ¡ç®¡ç†ä¸ACIDç‰¹æ€§
2. å¹¶å‘æ§åˆ¶ä¸MVCCæœºåˆ¶
3. éš”ç¦»çº§åˆ«
4. é”æœºåˆ¶

**æ¨èæ–‡æ¡£**ï¼š

- [äº‹åŠ¡ç®¡ç†ä¸ACIDç‰¹æ€§](../01-æ ¸å¿ƒåŸºç¡€/01.04-äº‹åŠ¡ç®¡ç†ä¸ACIDç‰¹æ€§.md)
- [å¹¶å‘æ§åˆ¶ä¸MVCCæœºåˆ¶](../01-æ ¸å¿ƒåŸºç¡€/01.05-å¹¶å‘æ§åˆ¶ä¸MVCCæœºåˆ¶.md)

**å®è·µä»»åŠ¡**ï¼š

- æµ‹è¯•ä¸åŒéš”ç¦»çº§åˆ«
- è§‚å¯ŸMVCCè¡Œä¸º
- å¤„ç†å¹¶å‘å†²çª

### 2.5 Week 5: ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£ç´¢å¼•åŸç†
- æŒæ¡ç´¢å¼•ç±»å‹
- å­¦ä¹ æŸ¥è¯¢ä¼˜åŒ–
- åˆ†ææ‰§è¡Œè®¡åˆ’

**æ ¸å¿ƒå†…å®¹**ï¼š

1. ç´¢å¼•ç»“æ„ä¸ä¼˜åŒ–
2. æŸ¥è¯¢ä¼˜åŒ–å™¨åŸç†
3. æ‰§è¡Œè®¡åˆ’åˆ†æ
4. ç»Ÿè®¡ä¿¡æ¯ä¸ä»£ä»·æ¨¡å‹

**æ¨èæ–‡æ¡£**ï¼š

- [ç´¢å¼•ç»“æ„ä¸ä¼˜åŒ–](../02-æŸ¥è¯¢å¤„ç†/02.02-ç´¢å¼•ç»“æ„ä¸ä¼˜åŒ–.md)
- [æŸ¥è¯¢ä¼˜åŒ–å™¨åŸç†](../02-æŸ¥è¯¢å¤„ç†/02.01-æŸ¥è¯¢ä¼˜åŒ–å™¨åŸç†.md)
- [æ‰§è¡Œè®¡åˆ’ä¸æ€§èƒ½è°ƒä¼˜](../02-æŸ¥è¯¢å¤„ç†/02.04-æ‰§è¡Œè®¡åˆ’ä¸æ€§èƒ½è°ƒä¼˜.md)

**å®è·µä»»åŠ¡**ï¼š

- åˆ›å»ºä¸åŒç±»å‹çš„ç´¢å¼•
- åˆ†ææŸ¥è¯¢æ‰§è¡Œè®¡åˆ’
- ä¼˜åŒ–æ…¢æŸ¥è¯¢

### 2.6 Week 6: å­˜å‚¨ä¸å¤‡ä»½

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£å­˜å‚¨ç®¡ç†
- æŒæ¡å¤‡ä»½ç­–ç•¥
- å­¦ä¹ æ¢å¤æ–¹æ³•
- å®è·µå¤‡ä»½æ¢å¤

**æ ¸å¿ƒå†…å®¹**ï¼š

1. å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–
2. å¤‡ä»½ä¸æ¢å¤
3. WALæ—¥å¿—
4. ç‚¹å¯¹ç‚¹æ¢å¤

**æ¨èæ–‡æ¡£**ï¼š

- [å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–](../01-æ ¸å¿ƒåŸºç¡€/01.06-å­˜å‚¨ç®¡ç†ä¸æ•°æ®æŒä¹…åŒ–.md)
- [å¤‡ä»½ä¸æ¢å¤](../04-éƒ¨ç½²è¿ç»´/04.05-å¤‡ä»½ä¸æ¢å¤.md)

**å®è·µä»»åŠ¡**ï¼š

- æ‰§è¡Œå®Œæ•´å¤‡ä»½
- æµ‹è¯•æ¢å¤æµç¨‹
- é…ç½®WALå½’æ¡£

---

## 3. è¿›é˜¶è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰

### 3.1 Week 7: é«˜çº§SQLç‰¹æ€§

**å­¦ä¹ ç›®æ ‡**ï¼š

- æŒæ¡çª—å£å‡½æ•°
- å­¦ä¹ CTEå’Œé€’å½’æŸ¥è¯¢
- ç†è§£JSON/JSONBæ“ä½œ
- ä½¿ç”¨æ•°ç»„å’ŒèŒƒå›´ç±»å‹

**æ ¸å¿ƒå†…å®¹**ï¼š

1. çª—å£å‡½æ•°
2. å…¬å…±è¡¨è¡¨è¾¾å¼ï¼ˆCTEï¼‰
3. é€’å½’æŸ¥è¯¢
4. JSON/JSONBæ•°æ®ç±»å‹
5. æ•°ç»„å’ŒèŒƒå›´ç±»å‹

**æ¨èæ–‡æ¡£**ï¼š

- [SQLè¯­è¨€è§„èŒƒä¸æ ‡å‡†](../01-æ ¸å¿ƒåŸºç¡€/01.03-SQLè¯­è¨€è§„èŒƒä¸æ ‡å‡†.md)

**å®è·µä»»åŠ¡**ï¼š

- ä½¿ç”¨çª—å£å‡½æ•°åˆ†ææ•°æ®
- ç¼–å†™é€’å½’æŸ¥è¯¢
- æ“ä½œJSONæ•°æ®

### 3.2 Week 8: æ‰©å±•ç³»ç»Ÿ

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£PostgreSQLæ‰©å±•ç³»ç»Ÿ
- å­¦ä¹ æ‰©å±•å¼€å‘
- æŒæ¡å¸¸ç”¨æ‰©å±•
- å®è·µæ‰©å±•å®‰è£…

**æ ¸å¿ƒå†…å®¹**ï¼š

1. æ‰©å±•ç³»ç»Ÿæ¶æ„
2. æ‰©å±•å¼€å‘æ–¹æ³•
3. å¸¸ç”¨æ‰©å±•ï¼ˆpgvectorã€PostGISç­‰ï¼‰
4. æ‰©å±•ç®¡ç†

**æ¨èæ–‡æ¡£**ï¼š

- [æ‰©å±•ç³»ç»Ÿä¸æ’ä»¶å¼€å‘](../03-é«˜çº§ç‰¹æ€§/03.01-æ‰©å±•ç³»ç»Ÿä¸æ’ä»¶å¼€å‘.md)

**å®è·µä»»åŠ¡**ï¼š

- å®‰è£…pgvectoræ‰©å±•
- å¼€å‘ç®€å•æ‰©å±•
- ç®¡ç†æ‰©å±•ç‰ˆæœ¬

### 3.3 Week 9: å®‰å…¨ä¸è®¿é—®æ§åˆ¶

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£å®‰å…¨æœºåˆ¶
- æŒæ¡ç”¨æˆ·è®¤è¯
- å­¦ä¹ æƒé™ç®¡ç†
- å®è·µOAuth 2.0

**æ ¸å¿ƒå†…å®¹**ï¼š

1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
2. æƒé™ç®¡ç†
3. è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰
4. OAuth 2.0èº«ä»½éªŒè¯ï¼ˆPostgreSQL 18ï¼‰

**æ¨èæ–‡æ¡£**ï¼š

- [å®‰å…¨æœºåˆ¶ä¸è®¿é—®æ§åˆ¶](../03-é«˜çº§ç‰¹æ€§/03.02-å®‰å…¨æœºåˆ¶ä¸è®¿é—®æ§åˆ¶.md)

**å®è·µä»»åŠ¡**ï¼š

- é…ç½®ç”¨æˆ·å’Œè§’è‰²
- å®ç°è¡Œçº§å®‰å…¨
- é›†æˆOAuth 2.0

### 3.4 Week 10: é«˜å¯ç”¨ä¸å¤åˆ¶

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£é«˜å¯ç”¨æ¶æ„
- æŒæ¡å¤åˆ¶æŠ€æœ¯
- å­¦ä¹ æ•…éšœè½¬ç§»
- å®è·µé«˜å¯ç”¨éƒ¨ç½²

**æ ¸å¿ƒå†…å®¹**ï¼š

1. å¤åˆ¶æ¶æ„
2. æµå¤åˆ¶
3. é€»è¾‘å¤åˆ¶
4. æ•…éšœè½¬ç§»
5. é«˜å¯ç”¨ç»„ä»¶ï¼ˆPatroniç­‰ï¼‰

**æ¨èæ–‡æ¡£**ï¼š

- [é›†ç¾¤éƒ¨ç½²ä¸é«˜å¯ç”¨](../04-éƒ¨ç½²è¿ç»´/04.02-é›†ç¾¤éƒ¨ç½²ä¸é«˜å¯ç”¨.md)

**å®è·µä»»åŠ¡**ï¼š

- é…ç½®ä¸»ä»å¤åˆ¶
- æµ‹è¯•æ•…éšœè½¬ç§»
- éƒ¨ç½²é«˜å¯ç”¨é›†ç¾¤

### 3.5 Week 11: æ€§èƒ½è°ƒä¼˜

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£æ€§èƒ½è°ƒä¼˜æ–¹æ³•
- æŒæ¡å‚æ•°ä¼˜åŒ–
- å­¦ä¹ æŸ¥è¯¢ä¼˜åŒ–
- å®è·µæ€§èƒ½è°ƒä¼˜

**æ ¸å¿ƒå†…å®¹**ï¼š

1. æ€§èƒ½è°ƒä¼˜å®è·µ
2. å‚æ•°ä¼˜åŒ–
3. æŸ¥è¯¢ä¼˜åŒ–
4. ç´¢å¼•ä¼˜åŒ–
5. ç›‘æ§ä¸è¯Šæ–­

**æ¨èæ–‡æ¡£**ï¼š

- [æ€§èƒ½è°ƒä¼˜å®è·µ](../04-éƒ¨ç½²è¿ç»´/04.06-æ€§èƒ½è°ƒä¼˜å®è·µ.md)
- [ç›‘æ§ä¸è¯Šæ–­](../04-éƒ¨ç½²è¿ç»´/04.04-ç›‘æ§ä¸è¯Šæ–­.md)

**å®è·µä»»åŠ¡**ï¼š

- ä¼˜åŒ–æ•°æ®åº“å‚æ•°
- è°ƒä¼˜æ…¢æŸ¥è¯¢
- ç›‘æ§æ€§èƒ½æŒ‡æ ‡

### 3.6 Week 12: ç›‘æ§ä¸è¯Šæ–­

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£ç›‘æ§æ–¹æ³•
- æŒæ¡è¯Šæ–­å·¥å…·
- å­¦ä¹ æ€§èƒ½åˆ†æ
- å®è·µç›‘æ§éƒ¨ç½²

**æ ¸å¿ƒå†…å®¹**ï¼š

1. ç›‘æ§ç³»ç»Ÿ
2. è¯Šæ–­å·¥å…·
3. æ€§èƒ½åˆ†æ
4. æ—¥å¿—åˆ†æ

**æ¨èæ–‡æ¡£**ï¼š

- [ç›‘æ§ä¸è¯Šæ–­](../04-éƒ¨ç½²è¿ç»´/04.04-ç›‘æ§ä¸è¯Šæ–­.md)

**å®è·µä»»åŠ¡**ï¼š

- éƒ¨ç½²ç›‘æ§ç³»ç»Ÿ
- åˆ†ææ€§èƒ½é—®é¢˜
- ä¼˜åŒ–ç³»ç»Ÿé…ç½®

---

## 4. é«˜çº§è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰

### 4.1 Week 13: åˆ†å¸ƒå¼æ¶æ„

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£åˆ†å¸ƒå¼ç³»ç»Ÿç†è®º
- æŒæ¡Citusæ¶æ„
- å­¦ä¹ åˆ†å¸ƒå¼äº‹åŠ¡
- å®è·µåˆ†å¸ƒå¼éƒ¨ç½²

**æ ¸å¿ƒå†…å®¹**ï¼š

1. åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåŸºç¡€
2. Citusåˆ†å¸ƒå¼æ‰©å±•
3. åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†
4. åˆ†å¸ƒå¼æ¶æ„è®¾è®¡

**æ¨èæ–‡æ¡£**ï¼š

- [åˆ†å¸ƒå¼æ¶æ„è®¾è®¡](../04-éƒ¨ç½²è¿ç»´/04.07-åˆ†å¸ƒå¼æ¶æ„è®¾è®¡.md)
- [åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†](../03-é«˜çº§ç‰¹æ€§/03.07-åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†.md)

**å®è·µä»»åŠ¡**ï¼š

- éƒ¨ç½²Citusé›†ç¾¤
- å®ç°åˆ†å¸ƒå¼è¡¨
- æµ‹è¯•åˆ†å¸ƒå¼äº‹åŠ¡

### 4.2 Week 14: AIé›†æˆä¸å‘é‡æ•°æ®åº“

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£å‘é‡æ•°æ®åº“
- æŒæ¡pgvectorä½¿ç”¨
- å­¦ä¹ AIé›†æˆ
- å®è·µRAGç³»ç»Ÿ

**æ ¸å¿ƒå†…å®¹**ï¼š

1. å‘é‡æ•°æ®åº“æ”¯æŒ
2. pgvectoræ‰©å±•
3. AIæ¨¡å‹æ·±åº¦é›†æˆ
4. RAGæ¶æ„

**æ¨èæ–‡æ¡£**ï¼š

- [å‘é‡æ•°æ®åº“æ”¯æŒ](../03-é«˜çº§ç‰¹æ€§/03.05-å‘é‡æ•°æ®åº“æ”¯æŒ.md)
- [AIæ¨¡å‹æ·±åº¦é›†æˆ](../05-å‰æ²¿æŠ€æœ¯/05.02-AIæ¨¡å‹æ·±åº¦é›†æˆ.md)
- [RAGæ¶æ„å®æˆ˜æŒ‡å—](../05-å‰æ²¿æŠ€æœ¯/05.04-RAGæ¶æ„å®æˆ˜æŒ‡å—.md)

**å®è·µä»»åŠ¡**ï¼š

- å®ç°å‘é‡æœç´¢
- æ„å»ºRAGç³»ç»Ÿ
- ä¼˜åŒ–å‘é‡æ£€ç´¢æ€§èƒ½

### 4.3 Week 15: æµå¤„ç†ä¸CEP

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£æµå¤„ç†æ¦‚å¿µ
- æŒæ¡CEPæŠ€æœ¯
- å­¦ä¹ å®æ—¶æ•°æ®å¤„ç†
- å®è·µæµå¤„ç†ç³»ç»Ÿ

**æ ¸å¿ƒå†…å®¹**ï¼š

1. æµå¤„ç†ä¸CEP
2. å®æ—¶æ•°æ®å¤„ç†
3. äº‹ä»¶å¤„ç†
4. æµæŸ¥è¯¢

**æ¨èæ–‡æ¡£**ï¼š

- [æµå¤„ç†ä¸CEP](../03-é«˜çº§ç‰¹æ€§/03.03-æµå¤„ç†ä¸CEP.md)

**å®è·µä»»åŠ¡**ï¼š

- å®ç°æµå¤„ç†ç³»ç»Ÿ
- å¤„ç†å®æ—¶äº‹ä»¶
- ä¼˜åŒ–æµæŸ¥è¯¢æ€§èƒ½

### 4.4 Week 16: äº‘åŸç”Ÿéƒ¨ç½²

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç†è§£äº‘åŸç”Ÿæ¦‚å¿µ
- æŒæ¡å®¹å™¨åŒ–éƒ¨ç½²
- å­¦ä¹ Kuberneteséƒ¨ç½²
- å®è·µäº‘åŸç”Ÿæ¶æ„

**æ ¸å¿ƒå†…å®¹**ï¼š

1. äº‘åŸç”Ÿä¸å®¹å™¨åŒ–
2. Dockeréƒ¨ç½²
3. Kuberneteséƒ¨ç½²
4. Serverlessæ¶æ„

**æ¨èæ–‡æ¡£**ï¼š

- [äº‘åŸç”Ÿä¸å®¹å™¨åŒ–](../04-éƒ¨ç½²è¿ç»´/04.03-äº‘åŸç”Ÿä¸å®¹å™¨åŒ–.md)

**å®è·µä»»åŠ¡**ï¼š

- å®¹å™¨åŒ–PostgreSQL
- éƒ¨ç½²åˆ°Kubernetes
- å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹

### 4.5 Week 17: å®æˆ˜é¡¹ç›®å¼€å‘

**å­¦ä¹ ç›®æ ‡**ï¼š

- ç»¼åˆåº”ç”¨æ‰€å­¦çŸ¥è¯†
- å¼€å‘å®Œæ•´é¡¹ç›®
- è§£å†³å®é™…é—®é¢˜
- ä¼˜åŒ–é¡¹ç›®æ€§èƒ½

**æ ¸å¿ƒå†…å®¹**ï¼š

1. é¡¹ç›®éœ€æ±‚åˆ†æ
2. ç³»ç»Ÿè®¾è®¡
3. æ•°æ®åº“è®¾è®¡
4. åŠŸèƒ½å®ç°
5. æ€§èƒ½ä¼˜åŒ–

**æ¨èé¡¹ç›®**ï¼š

- è¯­ä¹‰æœç´¢ç³»ç»Ÿ
- RAGçŸ¥è¯†åº“
- æ™ºèƒ½æ¨èç³»ç»Ÿ

**æ¨èæ–‡æ¡£**ï¼š

- [è¯­ä¹‰æœç´¢ç³»ç»Ÿç«¯åˆ°ç«¯å®ç°](../06-å®æˆ˜æ¡ˆä¾‹/06.01-è¯­ä¹‰æœç´¢ç³»ç»Ÿç«¯åˆ°ç«¯å®ç°.md)
- [RAGçŸ¥è¯†åº“å®Œæ•´é¡¹ç›®](../06-å®æˆ˜æ¡ˆä¾‹/06.02-RAGçŸ¥è¯†åº“å®Œæ•´é¡¹ç›®.md)
- [æ™ºèƒ½æ¨èç³»ç»Ÿ](../06-å®æˆ˜æ¡ˆä¾‹/06.03-æ™ºèƒ½æ¨èç³»ç»Ÿ.md)

### 4.6 Week 18: é¡¹ç›®æ€»ç»“ä¸ä¼˜åŒ–

**å­¦ä¹ ç›®æ ‡**ï¼š

- æ€»ç»“é¡¹ç›®ç»éªŒ
- ä¼˜åŒ–é¡¹ç›®æ€§èƒ½
- å®Œå–„é¡¹ç›®æ–‡æ¡£
- å‡†å¤‡é¡¹ç›®å±•ç¤º

**æ ¸å¿ƒå†…å®¹**ï¼š

1. é¡¹ç›®æ€»ç»“
2. æ€§èƒ½ä¼˜åŒ–
3. æ–‡æ¡£å®Œå–„
4. é¡¹ç›®å±•ç¤º

---

## 5. å®æˆ˜é¡¹ç›®ï¼ˆ4å‘¨ï¼‰

### 5.1 é¡¹ç›®1: è¯­ä¹‰æœç´¢ç³»ç»Ÿ

**é¡¹ç›®ç›®æ ‡**ï¼š

æ„å»ºä¸€ä¸ªå®Œæ•´çš„è¯­ä¹‰æœç´¢ç³»ç»Ÿï¼Œæ”¯æŒæ–‡æ¡£ä¸Šä¼ ã€å‘é‡åŒ–ã€ç›¸ä¼¼åº¦æœç´¢ã€‚

**æŠ€æœ¯æ ˆ**ï¼š

- PostgreSQL 18 + pgvector 2.0
- FastAPI
- React
- Docker

**å­¦ä¹ é‡ç‚¹**ï¼š

- å‘é‡æ•°æ®åº“åº”ç”¨
- æ··åˆæœç´¢å®ç°
- ç³»ç»Ÿæ¶æ„è®¾è®¡

**å‚è€ƒæ–‡æ¡£**ï¼š

- [è¯­ä¹‰æœç´¢ç³»ç»Ÿç«¯åˆ°ç«¯å®ç°](../06-å®æˆ˜æ¡ˆä¾‹/06.01-è¯­ä¹‰æœç´¢ç³»ç»Ÿç«¯åˆ°ç«¯å®ç°.md)

### 5.2 é¡¹ç›®2: RAGçŸ¥è¯†åº“

**é¡¹ç›®ç›®æ ‡**ï¼š

æ„å»ºä¼ä¸šçº§RAGçŸ¥è¯†åº“ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§Ÿæˆ·ã€å¯¹è¯è®°å¿†ã€æ™ºèƒ½é—®ç­”ã€‚

**æŠ€æœ¯æ ˆ**ï¼š

- PostgreSQL 18 + pgvector 2.0
- LangChain/LlamaIndex
- FastAPI
- React

**å­¦ä¹ é‡ç‚¹**ï¼š

- RAGæ¶æ„è®¾è®¡
- å¤šç§Ÿæˆ·ç³»ç»Ÿ
- AIé›†æˆ

**å‚è€ƒæ–‡æ¡£**ï¼š

- [RAGçŸ¥è¯†åº“å®Œæ•´é¡¹ç›®](../06-å®æˆ˜æ¡ˆä¾‹/06.02-RAGçŸ¥è¯†åº“å®Œæ•´é¡¹ç›®.md)

### 5.3 é¡¹ç›®3: æ™ºèƒ½æ¨èç³»ç»Ÿ

**é¡¹ç›®ç›®æ ‡**ï¼š

æ„å»ºæ™ºèƒ½æ¨èç³»ç»Ÿï¼Œæ”¯æŒååŒè¿‡æ»¤ã€å†…å®¹æ¨èã€æ··åˆç­–ç•¥ã€‚

**æŠ€æœ¯æ ˆ**ï¼š

- PostgreSQL 18
- Python
- FastAPI
- æœºå™¨å­¦ä¹ æ¨¡å‹

**å­¦ä¹ é‡ç‚¹**ï¼š

- æ¨èç®—æ³•å®ç°
- å®æ—¶ç‰¹å¾å·¥ç¨‹
- A/Bæµ‹è¯•

**å‚è€ƒæ–‡æ¡£**ï¼š

- [æ™ºèƒ½æ¨èç³»ç»Ÿ](../06-å®æˆ˜æ¡ˆä¾‹/06.03-æ™ºèƒ½æ¨èç³»ç»Ÿ.md)

---

## 6. è¯¾ç¨‹ææ–™

### 6.1 å­¦ä¹ ç›®æ ‡

**æ¯ç« èŠ‚å­¦ä¹ ç›®æ ‡**ï¼š

- æ˜ç¡®å­¦ä¹ ç›®æ ‡
- å®šä¹‰çŸ¥è¯†è¦ç‚¹
- è®¾å®šæŠ€èƒ½è¦æ±‚
- è¯„ä¼°å­¦ä¹ æˆæœ

**ç¤ºä¾‹ï¼šWeek 2 SQLè¯­è¨€å­¦ä¹ ç›®æ ‡**ï¼š

1. **çŸ¥è¯†ç›®æ ‡**ï¼š
   - ç†è§£SQLè¯­è¨€çš„åŸºæœ¬è¯­æ³•å’Œç»“æ„
   - æŒæ¡SELECTã€INSERTã€UPDATEã€DELETEè¯­å¥
   - ç†è§£JOINæ“ä½œå’Œèšåˆå‡½æ•°

2. **æŠ€èƒ½ç›®æ ‡**ï¼š
   - èƒ½å¤Ÿç¼–å†™å¤æ‚çš„SQLæŸ¥è¯¢
   - èƒ½å¤Ÿä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
   - èƒ½å¤Ÿä½¿ç”¨å­æŸ¥è¯¢å’ŒCTE

3. **è¯„ä¼°æ ‡å‡†**ï¼š
   - å®Œæˆæ‰€æœ‰ç»ƒä¹ é¢˜ï¼ˆ80%æ­£ç¡®ç‡ï¼‰
   - å®Œæˆå®éªŒä»»åŠ¡
   - é€šè¿‡æœŸä¸­è€ƒè¯•

### 6.2 ç»ƒä¹ é¢˜

**ç»ƒä¹ é¢˜ç±»å‹**ï¼š

- é€‰æ‹©é¢˜ï¼šæµ‹è¯•æ¦‚å¿µç†è§£
- å¡«ç©ºé¢˜ï¼šæµ‹è¯•ç»†èŠ‚æŒæ¡
- ç¼–ç¨‹é¢˜ï¼šæµ‹è¯•å®è·µèƒ½åŠ›
- è®¾è®¡é¢˜ï¼šæµ‹è¯•ç³»ç»Ÿè®¾è®¡èƒ½åŠ›

**ç¤ºä¾‹ï¼šWeek 2 SQLè¯­è¨€ç»ƒä¹ é¢˜**ï¼š

#### é€‰æ‹©é¢˜

1. **ä»¥ä¸‹å“ªä¸ªSQLè¯­å¥ç”¨äºæŸ¥è¯¢æ•°æ®ï¼Ÿ**
   - A. INSERT
   - B. SELECT
   - C. UPDATE
   - D. DELETE
   - **ç­”æ¡ˆ**: B

2. **INNER JOINå’ŒLEFT JOINçš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. INNER JOINè¿”å›æ‰€æœ‰åŒ¹é…çš„è¡Œï¼ŒLEFT JOINåªè¿”å›å·¦è¡¨çš„è¡Œ
   - B. LEFT JOINè¿”å›æ‰€æœ‰åŒ¹é…çš„è¡Œï¼ŒINNER JOINåªè¿”å›å·¦è¡¨çš„è¡Œ
   - C. INNER JOINåªè¿”å›åŒ¹é…çš„è¡Œï¼ŒLEFT JOINè¿”å›å·¦è¡¨çš„æ‰€æœ‰è¡Œ
   - D. æ²¡æœ‰åŒºåˆ«
   - **ç­”æ¡ˆ**: C

#### ç¼–ç¨‹é¢˜

**é¢˜ç›®1: ç¼–å†™SQLæŸ¥è¯¢ï¼ŒæŸ¥æ‰¾é”€å”®é¢æœ€é«˜çš„å‰10ä¸ªäº§å“**:

```sql
-- ç­”æ¡ˆç¤ºä¾‹
SELECT
    product_id,
    product_name,
    SUM(quantity * price) as total_sales
FROM orders o
JOIN order_items oi ON o.order_id = oi.order_id
JOIN products p ON oi.product_id = p.product_id
GROUP BY product_id, product_name
ORDER BY total_sales DESC
LIMIT 10;
```

**é¢˜ç›®2: ç¼–å†™SQLæŸ¥è¯¢ï¼ŒæŸ¥æ‰¾æ¯ä¸ªå®¢æˆ·çš„è®¢å•æ€»æ•°å’Œæ€»é‡‘é¢**:

```sql
-- ç­”æ¡ˆç¤ºä¾‹
SELECT
    c.customer_id,
    c.customer_name,
    COUNT(o.order_id) as order_count,
    SUM(o.total_amount) as total_amount
FROM customers c
LEFT JOIN orders o ON c.customer_id = o.customer_id
GROUP BY c.customer_id, c.customer_name
ORDER BY total_amount DESC;
```

#### è®¾è®¡é¢˜

1. **è®¾è®¡ä¸€ä¸ªç”µå•†æ•°æ®åº“ï¼ŒåŒ…å«ä»¥ä¸‹å®ä½“ï¼š**
   - å®¢æˆ·ï¼ˆCustomersï¼‰
   - äº§å“ï¼ˆProductsï¼‰
   - è®¢å•ï¼ˆOrdersï¼‰
   - è®¢å•é¡¹ï¼ˆOrder Itemsï¼‰

   **è¦æ±‚**ï¼š
   - ä½¿ç”¨èŒƒå¼ç†è®ºè®¾è®¡è¡¨ç»“æ„
   - å®šä¹‰ä¸»é”®å’Œå¤–é”®
   - è€ƒè™‘ç´¢å¼•ä¼˜åŒ–

### 6.3 å®éªŒæŒ‡å¯¼

**å®éªŒå†…å®¹**ï¼š

- å®éªŒç¯å¢ƒæ­å»º
- å®éªŒæ­¥éª¤è¯´æ˜
- å®éªŒç»“æœéªŒè¯
- å®éªŒæŠ¥å‘Šè¦æ±‚

**ç¤ºä¾‹ï¼šWeek 2 SQLè¯­è¨€å®éªŒæŒ‡å¯¼**ï¼š

#### å®éªŒ1: åŸºç¡€SQLæŸ¥è¯¢

**å®éªŒç›®æ ‡**ï¼š

- æŒæ¡SELECTè¯­å¥çš„åŸºæœ¬ç”¨æ³•
- ç†è§£WHEREå­å¥å’ŒORDER BYå­å¥
- ä½¿ç”¨èšåˆå‡½æ•°å’ŒGROUP BY

**å®éªŒæ­¥éª¤**ï¼š

1. **åˆ›å»ºç¤ºä¾‹æ•°æ®åº“**ï¼š

```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE practice_db;

-- åˆ›å»ºè¡¨
CREATE TABLE students (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    age INTEGER,
    grade VARCHAR(10)
);

CREATE TABLE courses (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    credits INTEGER
);

CREATE TABLE enrollments (
    student_id INTEGER REFERENCES students(id),
    course_id INTEGER REFERENCES courses(id),
    grade CHAR(1),
    PRIMARY KEY (student_id, course_id)
);

-- æ’å…¥ç¤ºä¾‹æ•°æ®
INSERT INTO students (name, age, grade) VALUES
('Alice', 20, 'A'),
('Bob', 21, 'B'),
('Charlie', 19, 'A');

INSERT INTO courses (name, credits) VALUES
('Database Systems', 3),
('Operating Systems', 4),
('Computer Networks', 3);

INSERT INTO enrollments (student_id, course_id, grade) VALUES
(1, 1, 'A'),
(1, 2, 'B'),
(2, 1, 'C'),
(2, 3, 'A');
```

**æ­¥éª¤2: æ‰§è¡ŒæŸ¥è¯¢ä»»åŠ¡**:

```sql
-- ä»»åŠ¡1: æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯
SELECT * FROM students;

-- ä»»åŠ¡2: æŸ¥è¯¢å¹´é¾„å¤§äº20çš„å­¦ç”Ÿ
SELECT * FROM students WHERE age > 20;

-- ä»»åŠ¡3: æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„é€‰è¯¾æ•°é‡
SELECT
    s.name,
    COUNT(e.course_id) as course_count
FROM students s
LEFT JOIN enrollments e ON s.id = e.student_id
GROUP BY s.id, s.name;
```

**æ­¥éª¤3: éªŒè¯ç»“æœ**:

- æ£€æŸ¥æŸ¥è¯¢ç»“æœæ˜¯å¦æ­£ç¡®
- éªŒè¯èšåˆå‡½æ•°è®¡ç®—æ˜¯å¦æ­£ç¡®
- ç¡®è®¤JOINæ“ä½œæ˜¯å¦æ­£ç¡®

**å®éªŒæŠ¥å‘Šè¦æ±‚**ï¼š

- è®°å½•æ‰€æœ‰SQLè¯­å¥
- æˆªå›¾æŸ¥è¯¢ç»“æœ
- åˆ†ææŸ¥è¯¢æ€§èƒ½
- æ€»ç»“å­¦ä¹ å¿ƒå¾—

#### å®éªŒ2: å¤æ‚æŸ¥è¯¢å’Œä¼˜åŒ–

**å®éªŒç›®æ ‡**ï¼š

- ç¼–å†™å¤æ‚çš„å¤šè¡¨JOINæŸ¥è¯¢
- ä½¿ç”¨å­æŸ¥è¯¢å’ŒCTE
- ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

**å®éªŒæ­¥éª¤**ï¼š

**æ­¥éª¤1: ç¼–å†™å¤æ‚æŸ¥è¯¢**:

```sql
-- ä½¿ç”¨CTEæŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿçš„å¹³å‡æˆç»©
WITH student_grades AS (
    SELECT
        s.id,
        s.name,
        e.grade,
        CASE
            WHEN e.grade = 'A' THEN 4.0
            WHEN e.grade = 'B' THEN 3.0
            WHEN e.grade = 'C' THEN 2.0
            ELSE 0.0
        END as grade_point
    FROM students s
    JOIN enrollments e ON s.id = e.student_id
)
SELECT
    name,
    AVG(grade_point) as gpa
FROM student_grades
GROUP BY id, name
ORDER BY gpa DESC;
```

**æ­¥éª¤2: åˆ†ææŸ¥è¯¢è®¡åˆ’**:

```sql
-- ä½¿ç”¨EXPLAINåˆ†ææŸ¥è¯¢
EXPLAIN ANALYZE
SELECT
    s.name,
    COUNT(e.course_id) as course_count
FROM students s
LEFT JOIN enrollments e ON s.id = e.student_id
GROUP BY s.id, s.name;
```

**æ­¥éª¤3: ä¼˜åŒ–æŸ¥è¯¢**:

- æ·»åŠ é€‚å½“çš„ç´¢å¼•
- é‡å†™æŸ¥è¯¢ä»¥æé«˜æ€§èƒ½
- æ¯”è¾ƒä¼˜åŒ–å‰åçš„æ€§èƒ½

#### Week 4: äº‹åŠ¡ä¸å¹¶å‘ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **ACIDç‰¹æ€§ä¸­çš„Iä»£è¡¨ä»€ä¹ˆï¼Ÿ**
   - A. Integrity
   - B. Isolation
   - C. Index
   - D. Insert
   - **ç­”æ¡ˆ**: B

2. **PostgreSQLé»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯ï¼Ÿ**
   - A. Read Uncommitted
   - B. Read Committed
   - C. Repeatable Read
   - D. Serializable
   - **ç­”æ¡ˆ**: B

3. **MVCCçš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æé«˜å†™å…¥æ€§èƒ½
   - B. å‡å°‘é”ç«äº‰
   - C. ç®€åŒ–äº‹åŠ¡ç®¡ç†
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: æµ‹è¯•ä¸åŒéš”ç¦»çº§åˆ«**:

```sql
-- ä¼šè¯1: å¼€å§‹äº‹åŠ¡å¹¶æ›´æ–°æ•°æ®
BEGIN;
UPDATE accounts SET balance = balance - 100 WHERE id = 1;

-- ä¼šè¯2: æŸ¥çœ‹æ•°æ®ï¼ˆæµ‹è¯•éš”ç¦»çº§åˆ«ï¼‰
BEGIN;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
SELECT balance FROM accounts WHERE id = 1;
COMMIT;

-- ä¼šè¯1: æäº¤äº‹åŠ¡
COMMIT;
```

**é¢˜ç›®2: è§‚å¯ŸMVCCè¡Œä¸º**:

```sql
-- åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE test_mvcc (
    id SERIAL PRIMARY KEY,
    value INTEGER
);

INSERT INTO test_mvcc (value) VALUES (100);

-- ä¼šè¯1: å¼€å§‹äº‹åŠ¡
BEGIN;
UPDATE test_mvcc SET value = 200 WHERE id = 1;

-- ä¼šè¯2: æŸ¥è¯¢ï¼ˆåº”è¯¥çœ‹åˆ°æ—§å€¼ï¼‰
SELECT * FROM test_mvcc WHERE id = 1;

-- ä¼šè¯1: æäº¤
COMMIT;

-- ä¼šè¯2: å†æ¬¡æŸ¥è¯¢ï¼ˆç°åœ¨çœ‹åˆ°æ–°å€¼ï¼‰
SELECT * FROM test_mvcc WHERE id = 1;
```

#### Week 4: äº‹åŠ¡ä¸å¹¶å‘å®éªŒæŒ‡å¯¼

##### å®éªŒ1: éš”ç¦»çº§åˆ«æµ‹è¯•

**å®éªŒç›®æ ‡**:

- ç†è§£ä¸åŒéš”ç¦»çº§åˆ«çš„è¡Œä¸º
- è§‚å¯Ÿè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»
- æµ‹è¯•MVCCæœºåˆ¶

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: åˆ›å»ºæµ‹è¯•ç¯å¢ƒ**:

```sql
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name TEXT,
    stock INTEGER
);

INSERT INTO products (name, stock) VALUES
('Product A', 100),
('Product B', 50);
```

**æ­¥éª¤2: æµ‹è¯•Read Committedéš”ç¦»çº§åˆ«**:

```sql
-- ä¼šè¯1
BEGIN;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
UPDATE products SET stock = stock - 10 WHERE id = 1;

-- ä¼šè¯2ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
BEGIN;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
SELECT stock FROM products WHERE id = 1;  -- åº”è¯¥çœ‹åˆ°æ—§å€¼
COMMIT;

-- ä¼šè¯1
COMMIT;

-- ä¼šè¯2ï¼ˆå†æ¬¡æŸ¥è¯¢ï¼‰
SELECT stock FROM products WHERE id = 1;  -- ç°åœ¨çœ‹åˆ°æ–°å€¼
```

**æ­¥éª¤3: æµ‹è¯•Repeatable Readéš”ç¦»çº§åˆ«**:

```sql
-- ä¼šè¯1
BEGIN;
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
SELECT stock FROM products WHERE id = 1;

-- ä¼šè¯2ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
BEGIN;
UPDATE products SET stock = stock - 10 WHERE id = 1;
COMMIT;

-- ä¼šè¯1ï¼ˆå†æ¬¡æŸ¥è¯¢ï¼Œåº”è¯¥çœ‹åˆ°ç›¸åŒçš„å€¼ï¼‰
SELECT stock FROM products WHERE id = 1;
COMMIT;
```

**å®éªŒæŠ¥å‘Šè¦æ±‚**:

- è®°å½•æ¯ä¸ªéš”ç¦»çº§åˆ«çš„è¡Œä¸º
- æˆªå›¾æŸ¥è¯¢ç»“æœ
- åˆ†æMVCCå¦‚ä½•å·¥ä½œ
- æ€»ç»“éš”ç¦»çº§åˆ«çš„å½±å“

#### Week 5: ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **B-treeç´¢å¼•çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æ”¯æŒèŒƒå›´æŸ¥è¯¢
   - B. æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢
   - C. æ”¯æŒå…¨æ–‡æœç´¢
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: A

2. **ä»¥ä¸‹å“ªä¸ªç´¢å¼•ç±»å‹é€‚åˆå…¨æ–‡æœç´¢ï¼Ÿ**
   - A. B-tree
   - B. Hash
   - C. GIN
   - D. GiST
   - **ç­”æ¡ˆ**: C

3. **EXPLAIN ANALYZEçš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æ˜¾ç¤ºæŸ¥è¯¢è®¡åˆ’
   - B. æ‰§è¡ŒæŸ¥è¯¢å¹¶æ˜¾ç¤ºå®é™…æ—¶é—´
   - C. ä¼˜åŒ–æŸ¥è¯¢
   - D. åˆ›å»ºç´¢å¼•
   - **ç­”æ¡ˆ**: B

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: åˆ›å»ºå’Œæµ‹è¯•ç´¢å¼•**:

```sql
-- åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INTEGER,
    order_date DATE,
    total_amount DECIMAL(10,2)
);

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO orders (customer_id, order_date, total_amount)
SELECT
    (random() * 1000)::INTEGER,
    CURRENT_DATE - (random() * 365)::INTEGER,
    (random() * 1000)::DECIMAL(10,2)
FROM generate_series(1, 100000);

-- æµ‹è¯•æ— ç´¢å¼•æŸ¥è¯¢
EXPLAIN ANALYZE
SELECT * FROM orders WHERE customer_id = 100;

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_orders_customer_id ON orders(customer_id);

-- æµ‹è¯•æœ‰ç´¢å¼•æŸ¥è¯¢
EXPLAIN ANALYZE
SELECT * FROM orders WHERE customer_id = 100;
```

**é¢˜ç›®2: åˆ†ææŸ¥è¯¢è®¡åˆ’**:

```sql
-- å¤æ‚æŸ¥è¯¢
EXPLAIN ANALYZE
SELECT
    customer_id,
    COUNT(*) as order_count,
    SUM(total_amount) as total_spent
FROM orders
WHERE order_date > CURRENT_DATE - INTERVAL '30 days'
GROUP BY customer_id
HAVING COUNT(*) > 5
ORDER BY total_spent DESC
LIMIT 10;

-- ä¼˜åŒ–ï¼šæ·»åŠ å¤åˆç´¢å¼•
CREATE INDEX idx_orders_date_customer
ON orders(order_date, customer_id);

-- å†æ¬¡åˆ†æ
EXPLAIN ANALYZE
SELECT
    customer_id,
    COUNT(*) as order_count,
    SUM(total_amount) as total_spent
FROM orders
WHERE order_date > CURRENT_DATE - INTERVAL '30 days'
GROUP BY customer_id
HAVING COUNT(*) > 5
ORDER BY total_spent DESC
LIMIT 10;
```

#### Week 5: ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–å®éªŒæŒ‡å¯¼

##### å®éªŒ1: ç´¢å¼•æ€§èƒ½å¯¹æ¯”

**å®éªŒç›®æ ‡**:

- ç†è§£ç´¢å¼•å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“
- å­¦ä¹ å¦‚ä½•é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç±»å‹
- æŒæ¡æŸ¥è¯¢è®¡åˆ’åˆ†æ

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: åˆ›å»ºæµ‹è¯•ç¯å¢ƒ**:

```sql
CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    name TEXT,
    department TEXT,
    salary DECIMAL(10,2),
    hire_date DATE
);

-- æ’å…¥å¤§é‡æµ‹è¯•æ•°æ®
INSERT INTO employees (name, department, salary, hire_date)
SELECT
    'Employee ' || i,
    CASE (i % 10)
        WHEN 0 THEN 'Sales'
        WHEN 1 THEN 'Engineering'
        WHEN 2 THEN 'Marketing'
        ELSE 'Other'
    END,
    (random() * 100000 + 30000)::DECIMAL(10,2),
    CURRENT_DATE - (random() * 3650)::INTEGER
FROM generate_series(1, 100000) i;
```

**æ­¥éª¤2: æµ‹è¯•æ— ç´¢å¼•æŸ¥è¯¢**:

```sql
-- æµ‹è¯•1: æŒ‰éƒ¨é—¨æŸ¥è¯¢
EXPLAIN ANALYZE
SELECT * FROM employees WHERE department = 'Engineering';

-- æµ‹è¯•2: æŒ‰è–ªèµ„èŒƒå›´æŸ¥è¯¢
EXPLAIN ANALYZE
SELECT * FROM employees
WHERE salary BETWEEN 50000 AND 60000;

-- æµ‹è¯•3: æŒ‰æ—¥æœŸèŒƒå›´æŸ¥è¯¢
EXPLAIN ANALYZE
SELECT * FROM employees
WHERE hire_date > CURRENT_DATE - INTERVAL '1 year';
```

**æ­¥éª¤3: åˆ›å»ºç´¢å¼•å¹¶æµ‹è¯•**:

```sql
-- åˆ›å»ºB-treeç´¢å¼•
CREATE INDEX idx_employees_department ON employees(department);
CREATE INDEX idx_employees_salary ON employees(salary);
CREATE INDEX idx_employees_hire_date ON employees(hire_date);

-- å†æ¬¡æµ‹è¯•æŸ¥è¯¢
EXPLAIN ANALYZE
SELECT * FROM employees WHERE department = 'Engineering';

EXPLAIN ANALYZE
SELECT * FROM employees
WHERE salary BETWEEN 50000 AND 60000;

EXPLAIN ANALYZE
SELECT * FROM employees
WHERE hire_date > CURRENT_DATE - INTERVAL '1 year';
```

**æ­¥éª¤4: åˆ†ææŸ¥è¯¢è®¡åˆ’**:

```sql
-- æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ
SELECT
    schemaname,
    tablename,
    indexname,
    idx_scan,
    idx_tup_read,
    idx_tup_fetch
FROM pg_stat_user_indexes
WHERE tablename = 'employees';
```

**å®éªŒæŠ¥å‘Šè¦æ±‚**:

- è®°å½•æ¯ä¸ªæŸ¥è¯¢çš„æ‰§è¡Œæ—¶é—´
- å¯¹æ¯”ç´¢å¼•å‰åçš„æ€§èƒ½å·®å¼‚
- åˆ†ææŸ¥è¯¢è®¡åˆ’çš„å˜åŒ–
- æ€»ç»“ç´¢å¼•é€‰æ‹©çš„åŸåˆ™

#### Week 7: é«˜çº§SQLç‰¹æ€§ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **çª—å£å‡½æ•°çš„ä¸»è¦ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. åˆ†ç»„æ•°æ®
   - B. å¯¹ç»“æœé›†è¿›è¡Œæ’åº
   - C. åœ¨ç»“æœé›†ä¸Šæ‰§è¡Œè®¡ç®—è€Œä¸å‡å°‘è¡Œæ•°
   - D. è¿‡æ»¤æ•°æ®
   - **ç­”æ¡ˆ**: C

2. **ä»¥ä¸‹å“ªä¸ªæ˜¯é€’å½’CTEçš„æ­£ç¡®è¯­æ³•ï¼Ÿ**
   - A. WITH RECURSIVE ... SELECT ... UNION SELECT ...
   - B. WITH ... SELECT ... UNION ALL SELECT ...
   - C. RECURSIVE WITH ... SELECT ...
   - D. ä»¥ä¸Šéƒ½ä¸å¯¹
   - **ç­”æ¡ˆ**: A

3. **JSONBç›¸æ¯”JSONçš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. å­˜å‚¨ç©ºé—´æ›´å°
   - B. æ”¯æŒç´¢å¼•
   - C. æŸ¥è¯¢æ€§èƒ½æ›´å¥½
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: ä½¿ç”¨çª—å£å‡½æ•°è®¡ç®—æ’å**:

```sql
-- åˆ›å»ºé”€å”®æ•°æ®è¡¨
CREATE TABLE sales (
    id SERIAL PRIMARY KEY,
    salesperson TEXT,
    product TEXT,
    amount DECIMAL(10,2),
    sale_date DATE
);

-- ä½¿ç”¨çª—å£å‡½æ•°è®¡ç®—æ¯ä¸ªé”€å”®äººå‘˜çš„æ’å
SELECT
    salesperson,
    product,
    amount,
    RANK() OVER (PARTITION BY salesperson ORDER BY amount DESC) as rank,
    SUM(amount) OVER (PARTITION BY salesperson) as total_sales
FROM sales
ORDER BY salesperson, rank;
```

**é¢˜ç›®2: é€’å½’æŸ¥è¯¢ç»„ç»‡æ¶æ„**:

```sql
-- åˆ›å»ºå‘˜å·¥è¡¨ï¼ˆåŒ…å«å±‚çº§å…³ç³»ï¼‰
CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    name TEXT,
    manager_id INTEGER REFERENCES employees(id)
);

-- é€’å½’æŸ¥è¯¢æ‰€æœ‰ä¸‹å±
WITH RECURSIVE subordinates AS (
    -- åŸºç¡€æƒ…å†µï¼šç›´æ¥ä¸‹å±
    SELECT id, name, manager_id, 1 as level
    FROM employees
    WHERE manager_id = 1

    UNION ALL

    -- é€’å½’æƒ…å†µï¼šä¸‹å±çš„ä¸‹å±
    SELECT e.id, e.name, e.manager_id, s.level + 1
    FROM employees e
    JOIN subordinates s ON e.manager_id = s.id
)
SELECT * FROM subordinates
ORDER BY level, name;
```

#### Week 7: é«˜çº§SQLç‰¹æ€§å®éªŒæŒ‡å¯¼

##### å®éªŒ1: çª—å£å‡½æ•°åº”ç”¨

**å®éªŒç›®æ ‡**:

- æŒæ¡çª—å£å‡½æ•°çš„ä½¿ç”¨
- ç†è§£PARTITION BYå’ŒORDER BYçš„ä½œç”¨
- ä½¿ç”¨æ’åå‡½æ•°å’Œèšåˆçª—å£å‡½æ•°

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: åˆ›å»ºæµ‹è¯•æ•°æ®**:

```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INTEGER,
    order_date DATE,
    total_amount DECIMAL(10,2)
);

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO orders (customer_id, order_date, total_amount)
SELECT
    (random() * 100)::INTEGER,
    CURRENT_DATE - (random() * 365)::INTEGER,
    (random() * 1000 + 100)::DECIMAL(10,2)
FROM generate_series(1, 1000);
```

**æ­¥éª¤2: ä½¿ç”¨çª—å£å‡½æ•°åˆ†æ**:

```sql
-- è®¡ç®—æ¯ä¸ªå®¢æˆ·çš„è®¢å•æ’å
SELECT
    customer_id,
    order_date,
    total_amount,
    ROW_NUMBER() OVER (PARTITION BY customer_id ORDER BY total_amount DESC) as order_rank,
    SUM(total_amount) OVER (PARTITION BY customer_id) as customer_total,
    AVG(total_amount) OVER (PARTITION BY customer_id) as customer_avg
FROM orders
ORDER BY customer_id, order_rank;
```

**æ­¥éª¤3: ä½¿ç”¨ç§»åŠ¨çª—å£**:

```sql
-- è®¡ç®—ç§»åŠ¨å¹³å‡
SELECT
    order_date,
    total_amount,
    AVG(total_amount) OVER (
        ORDER BY order_date
        ROWS BETWEEN 2 PRECEDING AND CURRENT ROW
    ) as moving_avg_3days
FROM orders
ORDER BY order_date;
```

#### Week 9: å®‰å…¨ä¸è®¿é—®æ§åˆ¶ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **PostgreSQL 18æ–°å¢çš„OAuth 2.0æ”¯æŒä¸»è¦ç”¨äºä»€ä¹ˆï¼Ÿ**
   - A. æ•°æ®åŠ å¯†
   - B. ä¼ä¸šçº§èº«ä»½éªŒè¯
   - C. æ•°æ®å¤‡ä»½
   - D. æŸ¥è¯¢ä¼˜åŒ–
   - **ç­”æ¡ˆ**: B

2. **è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰çš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æ§åˆ¶è¡¨çš„è®¿é—®æƒé™
   - B. æ§åˆ¶è¡Œçš„è®¿é—®æƒé™
   - C. æ§åˆ¶åˆ—çš„è®¿é—®æƒé™
   - D. æ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™
   - **ç­”æ¡ˆ**: B

3. **ä»¥ä¸‹å“ªä¸ªæ˜¯PostgreSQLæ”¯æŒçš„è®¤è¯æ–¹æ³•ï¼Ÿ**
   - A. MD5
   - B. SCRAM-SHA-256
   - C. OAuth 2.0
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: é…ç½®è¡Œçº§å®‰å…¨**:

```sql
-- åˆ›å»ºå¤šç§Ÿæˆ·è¡¨
CREATE TABLE tenant_data (
    id SERIAL PRIMARY KEY,
    tenant_id INTEGER,
    data TEXT
);

-- å¯ç”¨è¡Œçº§å®‰å…¨
ALTER TABLE tenant_data ENABLE ROW LEVEL SECURITY;

-- åˆ›å»ºç­–ç•¥ï¼šç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±ç§Ÿæˆ·çš„æ•°æ®
CREATE POLICY tenant_isolation_policy ON tenant_data
    FOR ALL
    USING (tenant_id = current_setting('app.current_tenant_id')::INTEGER);
```

**é¢˜ç›®2: é…ç½®OAuth 2.0ï¼ˆPostgreSQL 18ï¼‰**:

```sql
-- é…ç½®OAuth 2.0æä¾›è€…
ALTER SYSTEM SET oauth2.provider = 'google';
ALTER SYSTEM SET oauth2.client_id = 'your-client-id';
ALTER SYSTEM SET oauth2.client_secret = 'your-client-secret';
ALTER SYSTEM SET oauth2.redirect_uri = 'https://your-app.com/callback';

-- é‡æ–°åŠ è½½é…ç½®
SELECT pg_reload_conf();
```

#### Week 9: å®‰å…¨ä¸è®¿é—®æ§åˆ¶å®éªŒæŒ‡å¯¼

##### å®éªŒ1: è¡Œçº§å®‰å…¨é…ç½®

**å®éªŒç›®æ ‡**:

- ç†è§£è¡Œçº§å®‰å…¨çš„å·¥ä½œåŸç†
- é…ç½®å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- æµ‹è¯•å®‰å…¨ç­–ç•¥

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: åˆ›å»ºæµ‹è¯•ç¯å¢ƒ**:

```sql
-- åˆ›å»ºç§Ÿæˆ·è¡¨
CREATE TABLE tenants (
    id SERIAL PRIMARY KEY,
    name TEXT
);

-- åˆ›å»ºç§Ÿæˆ·æ•°æ®è¡¨
CREATE TABLE tenant_documents (
    id SERIAL PRIMARY KEY,
    tenant_id INTEGER REFERENCES tenants(id),
    title TEXT,
    content TEXT
);

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO tenants (name) VALUES ('Tenant A'), ('Tenant B');
INSERT INTO tenant_documents (tenant_id, title, content) VALUES
(1, 'Doc 1', 'Content 1'),
(1, 'Doc 2', 'Content 2'),
(2, 'Doc 3', 'Content 3');
```

**æ­¥éª¤2: é…ç½®è¡Œçº§å®‰å…¨**:

```sql
-- å¯ç”¨è¡Œçº§å®‰å…¨
ALTER TABLE tenant_documents ENABLE ROW LEVEL SECURITY;

-- åˆ›å»ºç­–ç•¥
CREATE POLICY tenant_documents_policy ON tenant_documents
    FOR ALL
    USING (tenant_id = current_setting('app.current_tenant_id', true)::INTEGER);

-- åˆ›å»ºåº”ç”¨è§’è‰²
CREATE ROLE app_user;
GRANT SELECT, INSERT, UPDATE, DELETE ON tenant_documents TO app_user;
```

**æ­¥éª¤3: æµ‹è¯•å®‰å…¨ç­–ç•¥**:

```sql
-- åˆ‡æ¢åˆ°åº”ç”¨ç”¨æˆ·
SET ROLE app_user;

-- è®¾ç½®å½“å‰ç§Ÿæˆ·ID
SET app.current_tenant_id = '1';

-- æŸ¥è¯¢ï¼ˆåº”è¯¥åªèƒ½çœ‹åˆ°ç§Ÿæˆ·1çš„æ•°æ®ï¼‰
SELECT * FROM tenant_documents;

-- å°è¯•è®¿é—®ç§Ÿæˆ·2çš„æ•°æ®ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
SET app.current_tenant_id = '2';
SELECT * FROM tenant_documents;
```

#### Week 13: åˆ†å¸ƒå¼æ¶æ„ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **Citusçš„ä¸»è¦ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æ•°æ®å¤‡ä»½
   - B. æŸ¥è¯¢ä¼˜åŒ–
   - C. åˆ†å¸ƒå¼æ•°æ®åº“æ‰©å±•
   - D. æ•°æ®åŠ å¯†
   - **ç­”æ¡ˆ**: C

2. **åˆ†å¸ƒå¼è¡¨çš„åˆ†ç‰‡é”®é€‰æ‹©åŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. é«˜åŸºæ•°
   - B. å‡åŒ€åˆ†å¸ƒ
   - C. åŒ¹é…æŸ¥è¯¢æ¨¡å¼
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

3. **å…±åˆ†ç‰‡ï¼ˆCo-locationï¼‰çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. å‡å°‘ç½‘ç»œä¼ è¾“
   - B. æé«˜JOINæ€§èƒ½
   - C. ç®€åŒ–æŸ¥è¯¢
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: åˆ›å»ºåˆ†å¸ƒå¼è¡¨**:

```sql
-- å®‰è£…Citusæ‰©å±•
CREATE EXTENSION citus;

-- æ·»åŠ å·¥ä½œèŠ‚ç‚¹
SELECT citus_add_node('192.168.1.11', 5432);
SELECT citus_add_node('192.168.1.12', 5432);

-- åˆ›å»ºåˆ†å¸ƒå¼è¡¨
CREATE TABLE distributed_users (
    user_id BIGSERIAL,
    name TEXT,
    email TEXT
);

-- æŒ‰user_idåˆ†ç‰‡
SELECT create_distributed_table('distributed_users', 'user_id');
```

**é¢˜ç›®2: æŸ¥è¯¢åˆ†å¸ƒå¼æ•°æ®**:

```sql
-- å•åˆ†ç‰‡æŸ¥è¯¢ï¼ˆé«˜æ•ˆï¼‰
SELECT * FROM distributed_users WHERE user_id = 123;

-- è·¨åˆ†ç‰‡èšåˆæŸ¥è¯¢
SELECT
    COUNT(*) as total_users,
    COUNT(DISTINCT email) as unique_emails
FROM distributed_users;
```

#### Week 13: åˆ†å¸ƒå¼æ¶æ„å®éªŒæŒ‡å¯¼

##### å®éªŒ1: Citusé›†ç¾¤éƒ¨ç½²

**å®éªŒç›®æ ‡**:

- ç†è§£Citusæ¶æ„
- éƒ¨ç½²Citusé›†ç¾¤
- åˆ›å»ºå’Œç®¡ç†åˆ†å¸ƒå¼è¡¨

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: å®‰è£…å’Œé…ç½®Citus**:

```sql
-- åœ¨CoordinatorèŠ‚ç‚¹
CREATE EXTENSION citus;

-- æŸ¥çœ‹Citusç‰ˆæœ¬
SELECT * FROM citus_version();

-- æ·»åŠ WorkerèŠ‚ç‚¹
SELECT citus_add_node('worker1.example.com', 5432);
SELECT citus_add_node('worker2.example.com', 5432);

-- æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯
SELECT * FROM citus_get_active_worker_nodes();
```

**æ­¥éª¤2: åˆ›å»ºåˆ†å¸ƒå¼è¡¨**:

```sql
-- åˆ›å»ºç”¨æˆ·è¡¨
CREATE TABLE users (
    user_id BIGSERIAL PRIMARY KEY,
    username TEXT,
    email TEXT
);

-- åˆ›å»ºè®¢å•è¡¨ï¼ˆä¸ç”¨æˆ·è¡¨å…±åˆ†ç‰‡ï¼‰
CREATE TABLE orders (
    order_id BIGSERIAL,
    user_id BIGINT REFERENCES users(user_id),
    total_amount DECIMAL(10,2)
);

-- åˆ†ç‰‡é…ç½®
SELECT create_distributed_table('users', 'user_id');
SELECT create_distributed_table('orders', 'user_id');
```

**æ­¥éª¤3: æµ‹è¯•åˆ†å¸ƒå¼æŸ¥è¯¢**:

```sql
-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO users (username, email) VALUES
('user1', 'user1@example.com'),
('user2', 'user2@example.com');

INSERT INTO orders (user_id, total_amount) VALUES
(1, 100.00),
(1, 200.00),
(2, 150.00);

-- æµ‹è¯•å…±åˆ†ç‰‡JOINï¼ˆé«˜æ•ˆï¼‰
SELECT
    u.username,
    COUNT(o.order_id) as order_count,
    SUM(o.total_amount) as total_spent
FROM users u
JOIN orders o ON u.user_id = o.user_id
WHERE u.user_id = 1
GROUP BY u.user_id, u.username;
```

**å®éªŒæŠ¥å‘Šè¦æ±‚**:

- è®°å½•é›†ç¾¤é…ç½®è¿‡ç¨‹
- æµ‹è¯•æŸ¥è¯¢æ€§èƒ½
- åˆ†æåˆ†ç‰‡åˆ†å¸ƒ
- æ€»ç»“æœ€ä½³å®è·µ

#### Week 14: AIé›†æˆä¸å‘é‡æ•°æ®åº“ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **pgvectoræ‰©å±•çš„ä¸»è¦ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. å…¨æ–‡æœç´¢
   - B. å‘é‡ç›¸ä¼¼åº¦æœç´¢
   - C. æ•°æ®å‹ç¼©
   - D. æ•°æ®åŠ å¯†
   - **ç­”æ¡ˆ**: B

2. **HNSWç´¢å¼•ç›¸æ¯”IVFFlatçš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æ„å»ºé€Ÿåº¦æ›´å¿«
   - B. æŸ¥è¯¢ç²¾åº¦æ›´é«˜
   - C. å­˜å‚¨ç©ºé—´æ›´å°
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: B

3. **RAGæ¶æ„ä¸­çš„"æ£€ç´¢"é˜¶æ®µä¸»è¦åšä»€ä¹ˆï¼Ÿ**
   - A. ç”Ÿæˆç­”æ¡ˆ
   - B. å‘é‡åŒ–æŸ¥è¯¢
   - C. ä»å‘é‡æ•°æ®åº“æ£€ç´¢ç›¸å…³æ–‡æ¡£
   - D. è®­ç»ƒæ¨¡å‹
   - **ç­”æ¡ˆ**: C

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: åˆ›å»ºå‘é‡è¡¨å’Œç´¢å¼•**:

```sql
-- å®‰è£…pgvectoræ‰©å±•
CREATE EXTENSION vector;

-- åˆ›å»ºæ–‡æ¡£è¡¨
CREATE TABLE documents (
    id SERIAL PRIMARY KEY,
    title TEXT,
    content TEXT,
    embedding vector(1536)  -- OpenAI embeddingç»´åº¦
);

-- åˆ›å»ºHNSWç´¢å¼•
CREATE INDEX ON documents
USING hnsw (embedding vector_cosine_ops)
WITH (m = 16, ef_construction = 64);
```

**é¢˜ç›®2: å‘é‡ç›¸ä¼¼åº¦æœç´¢**:

```sql
-- æŸ¥è¯¢ç›¸ä¼¼æ–‡æ¡£
SELECT
    id,
    title,
    1 - (embedding <=> $1::vector) as similarity
FROM documents
ORDER BY embedding <=> $1::vector
LIMIT 10;
```

#### Week 14: AIé›†æˆä¸å‘é‡æ•°æ®åº“å®éªŒæŒ‡å¯¼

##### å®éªŒ1: å‘é‡æœç´¢å®ç°

**å®éªŒç›®æ ‡**:

- ç†è§£å‘é‡æ•°æ®åº“çš„å·¥ä½œåŸç†
- é…ç½®pgvectoræ‰©å±•
- å®ç°å‘é‡ç›¸ä¼¼åº¦æœç´¢

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: ç¯å¢ƒå‡†å¤‡**:

```sql
-- å®‰è£…pgvectoræ‰©å±•
CREATE EXTENSION vector;

-- åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name TEXT,
    description TEXT,
    embedding vector(384)  -- ä½¿ç”¨è¾ƒå°çš„ç»´åº¦ç”¨äºæµ‹è¯•
);
```

**æ­¥éª¤2: æ’å…¥å‘é‡æ•°æ®**:

```sql
-- æ’å…¥ç¤ºä¾‹æ•°æ®ï¼ˆå®é™…åº”ç”¨ä¸­éœ€è¦ä½¿ç”¨embeddingæ¨¡å‹ç”Ÿæˆå‘é‡ï¼‰
INSERT INTO products (name, description, embedding) VALUES
('Laptop', 'High-performance laptop', '[0.1,0.2,0.3,...]'::vector),
('Phone', 'Smartphone with latest features', '[0.2,0.3,0.4,...]'::vector),
('Tablet', 'Portable tablet device', '[0.15,0.25,0.35,...]'::vector);
```

**æ­¥éª¤3: åˆ›å»ºç´¢å¼•å¹¶æµ‹è¯•**:

```sql
-- åˆ›å»ºHNSWç´¢å¼•
CREATE INDEX idx_products_embedding ON products
USING hnsw (embedding vector_cosine_ops)
WITH (m = 16, ef_construction = 64);

-- æµ‹è¯•å‘é‡æœç´¢
SELECT
    name,
    1 - (embedding <=> $1::vector) as similarity
FROM products
ORDER BY embedding <=> $1::vector
LIMIT 5;
```

#### Week 10: é«˜å¯ç”¨ä¸å¤åˆ¶ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **PostgreSQLæµå¤åˆ¶çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. å®æ—¶æ•°æ®åŒæ­¥
   - B. ä½å»¶è¿Ÿå¤åˆ¶
   - C. æ”¯æŒåªè¯»æŸ¥è¯¢
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

2. **é€»è¾‘å¤åˆ¶ç›¸æ¯”æµå¤åˆ¶çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. å¤åˆ¶æ•´ä¸ªæ•°æ®åº“
   - B. å¯ä»¥å¤åˆ¶ç‰¹å®šè¡¨
   - C. æ”¯æŒè·¨ç‰ˆæœ¬å¤åˆ¶
   - D. Bå’ŒCéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

3. **Patroniçš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æ•°æ®å¤‡ä»½
   - B. è‡ªåŠ¨æ•…éšœè½¬ç§»
   - C. æŸ¥è¯¢ä¼˜åŒ–
   - D. æ•°æ®å‹ç¼©
   - **ç­”æ¡ˆ**: B

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: é…ç½®æµå¤åˆ¶**:

```sql
-- åœ¨ä¸»åº“åˆ›å»ºå¤åˆ¶ç”¨æˆ·
CREATE ROLE replicator WITH REPLICATION LOGIN PASSWORD 'secure_password';

-- åœ¨ä¸»åº“é…ç½®pg_hba.conf
-- host replication replicator 192.168.1.0/24 md5

-- åœ¨ä¸»åº“é…ç½®postgresql.conf
-- wal_level = replica
-- max_wal_senders = 3
-- max_replication_slots = 3

-- åœ¨ä»åº“é…ç½®recovery.confï¼ˆPostgreSQL 12+ä½¿ç”¨postgresql.confï¼‰
-- primary_conninfo = 'host=192.168.1.10 port=5432 user=replicator password=secure_password'
```

**é¢˜ç›®2: é…ç½®é€»è¾‘å¤åˆ¶**:

```sql
-- åœ¨ä¸»åº“åˆ›å»ºå‘å¸ƒ
CREATE PUBLICATION my_publication FOR TABLE users, orders;

-- åœ¨ä»åº“åˆ›å»ºè®¢é˜…
CREATE SUBSCRIPTION my_subscription
CONNECTION 'host=192.168.1.10 port=5432 dbname=mydb user=replicator password=secure_password'
PUBLICATION my_publication;
```

#### Week 10: é«˜å¯ç”¨ä¸å¤åˆ¶å®éªŒæŒ‡å¯¼

##### å®éªŒ1: æµå¤åˆ¶é…ç½®

**å®éªŒç›®æ ‡**:

- ç†è§£æµå¤åˆ¶çš„å·¥ä½œåŸç†
- é…ç½®ä¸»ä»å¤åˆ¶
- æµ‹è¯•æ•…éšœè½¬ç§»

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: ä¸»åº“é…ç½®**:

```sql
-- åˆ›å»ºå¤åˆ¶ç”¨æˆ·
CREATE ROLE replicator WITH REPLICATION LOGIN PASSWORD 'repl_password';

-- æŸ¥çœ‹WALçº§åˆ«
SHOW wal_level;

-- é…ç½®å¤åˆ¶æ§½ï¼ˆå¯é€‰ï¼Œç”¨äºç¡®ä¿WALä¿ç•™ï¼‰
SELECT pg_create_physical_replication_slot('replica_slot');
```

**æ­¥éª¤2: ä»åº“åˆå§‹åŒ–**:

```bash
# åœæ­¢ä»åº“
pg_ctl stop

# å¤‡ä»½ä¸»åº“æ•°æ®
pg_basebackup -h 192.168.1.10 -D /var/lib/postgresql/data -U replicator -P -W -R

# å¯åŠ¨ä»åº“
pg_ctl start
```

**æ­¥éª¤3: éªŒè¯å¤åˆ¶**:

```sql
-- åœ¨ä¸»åº“æ’å…¥æ•°æ®
INSERT INTO test_table VALUES (1, 'test');

-- åœ¨ä»åº“æŸ¥è¯¢ï¼ˆåº”è¯¥èƒ½çœ‹åˆ°æ•°æ®ï¼‰
SELECT * FROM test_table;
```

#### Week 11: æ€§èƒ½è°ƒä¼˜ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **shared_bufferså‚æ•°çš„ä¸»è¦ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æ§åˆ¶è¿æ¥æ•°
   - B. æ§åˆ¶å…±äº«å†…å­˜å¤§å°
   - C. æ§åˆ¶æ—¥å¿—çº§åˆ«
   - D. æ§åˆ¶æŸ¥è¯¢è¶…æ—¶
   - **ç­”æ¡ˆ**: B

2. **work_memå‚æ•°å½±å“ä»€ä¹ˆï¼Ÿ**
   - A. æ¯ä¸ªæŸ¥è¯¢æ“ä½œçš„å†…å­˜
   - B. æ€»å†…å­˜ä½¿ç”¨
   - C. è¿æ¥æ•°
   - D. æ—¥å¿—å¤§å°
   - **ç­”æ¡ˆ**: A

3. **EXPLAIN ANALYZEç›¸æ¯”EXPLAINçš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. æ˜¾ç¤ºå®é™…æ‰§è¡Œæ—¶é—´
   - B. æ˜¾ç¤ºå®é™…è¡Œæ•°
   - C. å®é™…æ‰§è¡ŒæŸ¥è¯¢
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: åˆ†ææ…¢æŸ¥è¯¢**:

```sql
-- å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—
ALTER SYSTEM SET log_min_duration_statement = 1000;  -- è®°å½•è¶…è¿‡1ç§’çš„æŸ¥è¯¢
SELECT pg_reload_conf();

-- æŸ¥çœ‹æ…¢æŸ¥è¯¢
SELECT
    query,
    calls,
    total_exec_time,
    mean_exec_time
FROM pg_stat_statements
ORDER BY mean_exec_time DESC
LIMIT 10;
```

**é¢˜ç›®2: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½**:

```sql
-- åˆ†æè¡¨ç»Ÿè®¡ä¿¡æ¯
ANALYZE large_table;

-- æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’
EXPLAIN ANALYZE
SELECT * FROM large_table
WHERE created_at > '2025-01-01'
ORDER BY id DESC
LIMIT 100;

-- åˆ›å»ºç´¢å¼•ä¼˜åŒ–
CREATE INDEX idx_large_table_created_at ON large_table(created_at);
```

#### Week 11: æ€§èƒ½è°ƒä¼˜å®éªŒæŒ‡å¯¼

##### å®éªŒ1: å‚æ•°è°ƒä¼˜

**å®éªŒç›®æ ‡**:

- ç†è§£å…³é”®æ€§èƒ½å‚æ•°
- é…ç½®ä¼˜åŒ–å‚æ•°
- æµ‹è¯•æ€§èƒ½æå‡

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: æŸ¥çœ‹å½“å‰é…ç½®**:

```sql
-- æŸ¥çœ‹å…³é”®å‚æ•°
SHOW shared_buffers;
SHOW work_mem;
SHOW maintenance_work_mem;
SHOW effective_cache_size;
SHOW max_connections;
```

**æ­¥éª¤2: ä¼˜åŒ–é…ç½®**:

```sql
-- æ ¹æ®ç³»ç»Ÿå†…å­˜è°ƒæ•´ï¼ˆå‡è®¾16GBå†…å­˜ï¼‰
ALTER SYSTEM SET shared_buffers = '4GB';
ALTER SYSTEM SET work_mem = '64MB';
ALTER SYSTEM SET maintenance_work_mem = '1GB';
ALTER SYSTEM SET effective_cache_size = '12GB';
ALTER SYSTEM SET max_connections = 200;

-- é‡æ–°åŠ è½½é…ç½®
SELECT pg_reload_conf();
```

**æ­¥éª¤3: æ€§èƒ½æµ‹è¯•**:

```sql
-- åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE perf_test (
    id SERIAL PRIMARY KEY,
    data TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO perf_test (data)
SELECT md5(random()::text)
FROM generate_series(1, 1000000);

-- æµ‹è¯•æŸ¥è¯¢æ€§èƒ½
EXPLAIN ANALYZE
SELECT * FROM perf_test
WHERE created_at > NOW() - INTERVAL '1 day'
ORDER BY id DESC
LIMIT 100;
```

#### Week 12: ç›‘æ§ä¸è¯Šæ–­ç»ƒä¹ é¢˜

**é€‰æ‹©é¢˜**:

1. **pg_stat_statementsæ‰©å±•çš„ä¸»è¦ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿ**
   - A. ç›‘æ§è¿æ¥æ•°
   - B. ç›‘æ§æŸ¥è¯¢æ€§èƒ½
   - C. ç›‘æ§ç£ç›˜ä½¿ç”¨
   - D. ç›‘æ§æ—¥å¿—
   - **ç­”æ¡ˆ**: B

2. **pg_stat_activityè§†å›¾æ˜¾ç¤ºä»€ä¹ˆä¿¡æ¯ï¼Ÿ**
   - A. å½“å‰æ´»åŠ¨è¿æ¥
   - B. è¡¨ç»Ÿè®¡ä¿¡æ¯
   - C. ç´¢å¼•ä½¿ç”¨æƒ…å†µ
   - D. å¤‡ä»½çŠ¶æ€
   - **ç­”æ¡ˆ**: A

3. **pg_locksè§†å›¾ç”¨äºæŸ¥çœ‹ä»€ä¹ˆï¼Ÿ**
   - A. æ•°æ®åº“é”
   - B. è¡¨é”
   - C. è¡Œé”
   - D. ä»¥ä¸Šéƒ½æ˜¯
   - **ç­”æ¡ˆ**: D

**ç¼–ç¨‹é¢˜**:

**é¢˜ç›®1: ç›‘æ§æŸ¥è¯¢æ€§èƒ½**:

```sql
-- å®‰è£…pg_stat_statementsæ‰©å±•
CREATE EXTENSION IF NOT EXISTS pg_stat_statements;

-- æŸ¥çœ‹æœ€æ…¢çš„æŸ¥è¯¢
SELECT
    query,
    calls,
    total_exec_time,
    mean_exec_time,
    max_exec_time
FROM pg_stat_statements
ORDER BY mean_exec_time DESC
LIMIT 10;
```

**é¢˜ç›®2: è¯Šæ–­é”ç­‰å¾…**:

```sql
-- æŸ¥çœ‹å½“å‰é”
SELECT
    locktype,
    relation::regclass,
    mode,
    granted
FROM pg_locks
WHERE NOT granted;

-- æŸ¥çœ‹é˜»å¡çš„æŸ¥è¯¢
SELECT
    blocked_locks.pid AS blocked_pid,
    blocking_locks.pid AS blocking_pid,
    blocked_activity.query AS blocked_query,
    blocking_activity.query AS blocking_query
FROM pg_catalog.pg_locks blocked_locks
JOIN pg_catalog.pg_stat_activity blocked_activity ON blocked_activity.pid = blocked_locks.pid
JOIN pg_catalog.pg_locks blocking_locks ON blocking_locks.locktype = blocked_locks.locktype
JOIN pg_catalog.pg_stat_activity blocking_activity ON blocking_activity.pid = blocking_locks.pid
WHERE NOT blocked_locks.granted
AND blocking_locks.granted;
```

#### Week 12: ç›‘æ§ä¸è¯Šæ–­å®éªŒæŒ‡å¯¼

##### å®éªŒ1: æ€§èƒ½ç›‘æ§éƒ¨ç½²

**å®éªŒç›®æ ‡**:

- é…ç½®æ€§èƒ½ç›‘æ§
- ä½¿ç”¨ç›‘æ§å·¥å…·
- åˆ†ææ€§èƒ½æ•°æ®

**å®éªŒæ­¥éª¤**:

**æ­¥éª¤1: å¯ç”¨ç›‘æ§æ‰©å±•**:

```sql
-- å¯ç”¨pg_stat_statements
CREATE EXTENSION IF NOT EXISTS pg_stat_statements;

-- å¯ç”¨auto_explainï¼ˆå¯é€‰ï¼‰
LOAD 'auto_explain';
SET auto_explain.log_min_duration = 1000;  -- è®°å½•è¶…è¿‡1ç§’çš„æŸ¥è¯¢
SET auto_explain.log_analyze = true;
```

**æ­¥éª¤2: ç›‘æ§å…³é”®æŒ‡æ ‡**:

```sql
-- æŸ¥çœ‹æ•°æ®åº“å¤§å°
SELECT
    pg_database.datname,
    pg_size_pretty(pg_database_size(pg_database.datname)) AS size
FROM pg_database
ORDER BY pg_database_size(pg_database.datname) DESC;

-- æŸ¥çœ‹è¡¨å¤§å°
SELECT
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC
LIMIT 10;
```

**æ­¥éª¤3: åˆ†ææ…¢æŸ¥è¯¢**:

```sql
-- é‡ç½®ç»Ÿè®¡ä¿¡æ¯
SELECT pg_stat_statements_reset();

-- æ‰§è¡Œä¸€äº›æŸ¥è¯¢...

-- æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
SELECT
    LEFT(query, 100) AS query_preview,
    calls,
    total_exec_time,
    mean_exec_time,
    (total_exec_time / SUM(total_exec_time) OVER()) * 100 AS percent
FROM pg_stat_statements
ORDER BY total_exec_time DESC
LIMIT 10;
```

### 6.4 è€ƒè¯•é¢˜åº“

**è€ƒè¯•ç±»å‹**ï¼š

- æœŸä¸­è€ƒè¯•ï¼šåŸºç¡€è¯¾ç¨‹å†…å®¹
- æœŸæœ«è€ƒè¯•ï¼šè¿›é˜¶è¯¾ç¨‹å†…å®¹
- é¡¹ç›®ç­”è¾©ï¼šå®æˆ˜é¡¹ç›®è¯„ä¼°

**ç¤ºä¾‹ï¼šæœŸä¸­è€ƒè¯•é¢˜ç›®ï¼ˆåŸºç¡€è¯¾ç¨‹ï¼‰**ï¼š

#### ç¬¬ä¸€éƒ¨åˆ†ï¼šé€‰æ‹©é¢˜ï¼ˆ20åˆ†ï¼Œæ¯é¢˜2åˆ†ï¼‰

1. PostgreSQLçš„é»˜è®¤ç«¯å£æ˜¯ï¼Ÿ
   - A. 3306
   - B. 5432
   - C. 8080
   - D. 6379
   - **ç­”æ¡ˆ**: B

2. ACIDç‰¹æ€§ä¸­çš„Aä»£è¡¨ä»€ä¹ˆï¼Ÿ
   - A. Availability
   - B. Atomicity
   - C. Accuracy
   - D. Authentication
   - **ç­”æ¡ˆ**: B

#### ç¬¬äºŒéƒ¨åˆ†ï¼šå¡«ç©ºé¢˜ï¼ˆ20åˆ†ï¼Œæ¯ç©º2åˆ†ï¼‰

1. PostgreSQLä½¿ç”¨________æœºåˆ¶å®ç°å¹¶å‘æ§åˆ¶ã€‚
   - **ç­”æ¡ˆ**: MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰

2. SQLä¸­çš„________è¯­å¥ç”¨äºåˆ›å»ºè¡¨ã€‚
   - **ç­”æ¡ˆ**: CREATE TABLE

#### ç¬¬ä¸‰éƒ¨åˆ†ï¼šç¼–ç¨‹é¢˜ï¼ˆ40åˆ†ï¼‰

1. **è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„**ï¼ˆ20åˆ†ï¼‰ï¼š
   - è®¾è®¡ä¸€ä¸ªå›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿæ•°æ®åº“
   - åŒ…å«ï¼šå›¾ä¹¦ã€è¯»è€…ã€å€Ÿé˜…è®°å½•
   - è¦æ±‚ï¼šç¬¦åˆç¬¬ä¸‰èŒƒå¼

2. **ç¼–å†™SQLæŸ¥è¯¢**ï¼ˆ20åˆ†ï¼‰ï¼š
   - æŸ¥è¯¢å€Ÿé˜…æ¬¡æ•°æœ€å¤šçš„å‰5æœ¬ä¹¦
   - æŸ¥è¯¢æ¯ä¸ªè¯»è€…çš„å€Ÿé˜…æ€»æ•°
   - æŸ¥è¯¢é€¾æœŸæœªè¿˜çš„å€Ÿé˜…è®°å½•

#### ç¬¬å››éƒ¨åˆ†ï¼šç®€ç­”é¢˜ï¼ˆ20åˆ†ï¼‰

1. è§£é‡ŠPostgreSQLçš„MVCCæœºåˆ¶ï¼ˆ10åˆ†ï¼‰
2. è¯´æ˜ç´¢å¼•çš„ä½œç”¨å’Œç±»å‹ï¼ˆ10åˆ†ï¼‰

**è¯„åˆ†æ ‡å‡†**ï¼š

- é€‰æ‹©é¢˜ï¼šæ¯é¢˜2åˆ†ï¼Œå…±20åˆ†
- å¡«ç©ºé¢˜ï¼šæ¯ç©º2åˆ†ï¼Œå…±20åˆ†
- ç¼–ç¨‹é¢˜ï¼šè¯­æ³•æ­£ç¡®10åˆ†ï¼Œé€»è¾‘æ­£ç¡®10åˆ†ï¼Œå…±40åˆ†
- ç®€ç­”é¢˜ï¼šè¦ç‚¹å®Œæ•´10åˆ†ï¼Œè¡¨è¾¾æ¸…æ™°10åˆ†ï¼Œå…±20åˆ†
- **æ€»åˆ†**: 100åˆ†
- **åŠæ ¼çº¿**: 60åˆ†

---

## 7. å­¦ä¹ è·¯å¾„é€‰æ‹©

### è·¯å¾„1: å¿«é€Ÿå…¥é—¨ï¼ˆ2å‘¨ï¼‰

é€‚åˆï¼šåˆå­¦è€…ã€å¿«é€Ÿäº†è§£PostgreSQL

**å†…å®¹**ï¼š

- Week 1: PostgreSQLåŸºç¡€
- Week 2: SQLè¯­è¨€

### è·¯å¾„2: ç³»ç»Ÿå­¦ä¹ ï¼ˆ12å‘¨ï¼‰

é€‚åˆï¼šç³»ç»Ÿå­¦ä¹ PostgreSQL

**å†…å®¹**ï¼š

- åŸºç¡€è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰
- è¿›é˜¶è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰

### è·¯å¾„3: å®Œæ•´è¯¾ç¨‹ï¼ˆ22å‘¨ï¼‰

é€‚åˆï¼šæ·±å…¥å­¦ä¹ PostgreSQL

**å†…å®¹**ï¼š

- åŸºç¡€è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰
- è¿›é˜¶è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰
- é«˜çº§è¯¾ç¨‹ï¼ˆ6å‘¨ï¼‰
- å®æˆ˜é¡¹ç›®ï¼ˆ4å‘¨ï¼‰

### è·¯å¾„4: AIä¸“å®¶ï¼ˆ8å‘¨ï¼‰

é€‚åˆï¼šä¸“æ³¨äºAIé›†æˆ

**å†…å®¹**ï¼š

- åŸºç¡€è¯¾ç¨‹ï¼ˆ2å‘¨ï¼‰
- AIé›†æˆä¸“é¢˜ï¼ˆ4å‘¨ï¼‰
- å®æˆ˜é¡¹ç›®ï¼ˆ2å‘¨ï¼‰

---

## 8. ç›¸å…³æ–‡æ¡£

- [å­¦ä¹ è·¯å¾„æŒ‡å—](./å­¦ä¹ è·¯å¾„æŒ‡å—.md) - å¿«é€Ÿå­¦ä¹ è·¯å¾„
- [AIé›†æˆå¿«é€Ÿå¼€å§‹](./AIé›†æˆå¿«é€Ÿå¼€å§‹.md) - AIé›†æˆå¿«é€Ÿå…¥é—¨
- [PostgreSQLå†å²ä¸å‘å±•](../01-æ ¸å¿ƒåŸºç¡€/01.00-PostgreSQLå†å²ä¸å‘å±•.md) - å†å²èƒŒæ™¯
- [å­¦æœ¯ç ”ç©¶å‰æ²¿](../05-å‰æ²¿æŠ€æœ¯/05.06-å­¦æœ¯ç ”ç©¶å‰æ²¿.md) - ç ”ç©¶å‰æ²¿

---

## 9. å‚è€ƒæ–‡çŒ®

1. PostgreSQL Global Development Group. (2025). PostgreSQL 18 Documentation. <https://www.postgresql.org/docs/18/>

2. MIT 6.830 Database Systems. <https://db.csail.mit.edu/6.830/>

3. Stanford CS145 Introduction to Databases. <http://infolab.stanford.edu/~widom/cs145/>

4. Berkeley CS186 Introduction to Database Systems. <https://cs186berkeley.net/>

5. PostgreSQL Global Development Group. (2024). PostgreSQL 17 Documentation. <https://www.postgresql.org/docs/17/>

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-11-12
**ç»´æŠ¤è€…**: PostgreSQL Documentation Team
