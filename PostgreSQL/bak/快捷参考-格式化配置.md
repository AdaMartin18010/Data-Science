# Markdown格式化 - 快捷参考

**快速查找配置和命令的速查卡** 🚀

---

## 📁 配置文件位置

```
1.1-PostgreSQL/
├── .vscode/
│   ├── settings.json       ← VS Code工作区设置
│   ├── extensions.json     ← 推荐扩展
│   └── tasks.json          ← 任务定义
├── .editorconfig           ← 通用编辑器配置
├── .markdownlint.json      ← Markdown规则
└── format_docs.py          ← 格式化脚本
```

---

## ⌨️ VS Code快捷键

| 功能 | Windows/Linux | macOS |
|------|--------------|--------|
| **手动格式化** | `Shift + Alt + F` | `Shift + Option + F` |
| **运行任务** | `Ctrl + Shift + B` | `Cmd + Shift + B` |
| **打开命令面板** | `Ctrl + Shift + P` | `Cmd + Shift + P` |
| **查看问题** | `Ctrl + Shift + M` | `Cmd + Shift + M` |
| **保存文件** | `Ctrl + S` | `Cmd + S` |
| **保存所有** | `Ctrl + K S` | `Cmd + K S` |

---

## 🛠️ 命令速查

### Python脚本

```bash
# 格式化单个文件
python format_docs.py 06-实战案例/06.01-语义搜索系统端到端实现.md

# 格式化整个目录
python format_docs.py 06-实战案例/

# 批量格式化（推荐）
python format_docs.py 01-核心基础/ 02-查询处理/ 03-高级特性/

# 格式化所有（完整命令）
python format_docs.py 01-核心基础/ 02-查询处理/ 03-高级特性/ 04-部署运维/ 05-前沿技术/ 06-实战案例/ 07-应用实践/ 08-工具资源/
```

### 质量检查

```bash
# 检查单个文件
python check_docs.py 文件路径.md

# 统计目录覆盖率
grep -l "^## 目录" {01..08}-*/*.md | wc -l

# 统计文档总数
find {01..08}-*/ -name "*.md" | wc -l
```

### Git操作

```bash
# 格式化前备份
git add -A && git commit -m "格式化前备份"

# 格式化后提交
git add -A && git commit -m "文档格式统一"

# 回滚（如果需要）
git reset --hard HEAD^
```

---

## 🎯 VS Code任务

按 `Ctrl+Shift+B` (Windows) 或 `Cmd+Shift+B` (macOS) 后选择：

| 任务名称 | 说明 |
|---------|------|
| **格式化所有Markdown文档** | 处理所有技术目录（默认） |
| **格式化当前目录** | 处理当前文件所在目录 |
| **格式化当前文件** | 仅处理当前打开的文件 |
| **格式化P0文档** | 处理最重要的文档 |
| **格式化P1文档** | 处理基础文档 |
| **检查文档质量** | 检查当前文件质量 |
| **统计文档数量** | 统计总文档数 |
| **检查目录覆盖率** | 查看有多少文档有目录 |

---

## ✅ 自动格式化规则

### 保存时自动完成

- ✅ 删除行尾空格
- ✅ 确保文件末尾有空行
- ✅ 统一缩进（2个空格）
- ✅ 修复标题格式
- ✅ 清理多余空行

### Markdown Lint检查

| 规则 | 说明 |
|------|------|
| MD001 | 标题层级增量为1 |
| MD003 | 使用ATX风格（`#`） |
| MD004 | 统一列表标记（`-`） |
| MD022 | 标题周围空行 |
| MD025 | 只有一个H1标题 |
| MD040 | 代码块指定语言 |
| MD041 | 首行是H1标题 |
| MD047 | 文件末尾空行 |

---

## 🚫 临时禁用规则

### 禁用单个规则

```markdown
<!-- markdownlint-disable MD033 -->
这里允许使用HTML
<div>...</div>
<!-- markdownlint-enable MD033 -->
```

### 禁用多个规则

```markdown
<!-- markdownlint-disable MD013 MD033 -->
这里禁用多个规则
<!-- markdownlint-enable MD013 MD033 -->
```

### 禁用整个文件

```markdown
<!-- markdownlint-disable -->
整个文件不检查
```

---

## 📊 常用规则代码

| 规则ID | 说明 | 状态 |
|--------|------|------|
| MD001 | 标题层级 | ✅ 启用 |
| MD003 | 标题风格 | ✅ 启用 |
| MD004 | 列表风格 | ✅ 启用 |
| MD007 | 列表缩进 | ✅ 启用 |
| MD013 | 行长度 | ❌ 禁用 |
| MD014 | 命令$ | ❌ 禁用 |
| MD022 | 标题空行 | ✅ 启用 |
| MD024 | 重复标题 | ✅ 启用 |
| MD025 | H1唯一 | ✅ 启用 |
| MD033 | HTML标签 | ❌ 禁用 |
| MD040 | 代码语言 | ✅ 启用 |
| MD041 | 首行H1 | ✅ 启用 |
| MD047 | 末尾空行 | ✅ 启用 |

---

## 🔧 修改配置

### 修改Markdown规则

编辑 `.markdownlint.json`：

```json
{
  "MD013": false,  // 禁用
  "MD040": true    // 启用
}
```

### 修改保存行为

编辑 `.vscode/settings.json`：

```json
{
  "[markdown]": {
    "editor.formatOnSave": true  // 保存时格式化
  }
}
```

### 修改缩进设置

编辑 `.editorconfig`：

```ini
[*.md]
indent_size = 2  # 缩进2个空格
```

---

## 🆘 问题排查

### 保存后没有格式化？

1. ✅ 检查扩展安装：`Ctrl+Shift+X` → 搜索 "markdownlint"
2. ✅ 检查设置：`Ctrl+,` → 搜索 "format on save"
3. ✅ 重新加载：`Ctrl+Shift+P` → "Reload Window"

### 格式化破坏内容？

```markdown
<!-- 临时禁用特定区域 -->
<!-- markdownlint-disable -->
保护的内容
<!-- markdownlint-enable -->
```

### Python脚本运行失败？

```bash
# 检查Python版本
python --version  # 应该 >= 3.6

# 或使用python3
python3 format_docs.py 文件.md
```

---

## 📚 推荐扩展

### 必装

- ✅ **Markdown All in One** (`yzhang.markdown-all-in-one`)
- ✅ **markdownlint** (`DavidAnson.vscode-markdownlint`)
- ✅ **Python** (`ms-python.python`)

### 推荐

- 📖 **Markdown Preview GitHub Styles**
- 🔍 **Code Spell Checker**
- 🌏 **Code Spell Checker - Chinese**

---

## 🎨 编辑器主题推荐

- **Light**: GitHub Light / Quiet Light
- **Dark**: GitHub Dark / One Dark Pro
- **High Contrast**: GitHub Dark High Contrast

---

## 📝 文档模板

### H1标题后添加目录

```markdown
# 文档标题

## 目录

- [1. 第一章](#1-第一章)
  - [1.1 第一节](#11-第一节)
- [2. 第二章](#2-第二章)

---

## 1. 第一章

### 1.1 第一节
```

### 代码块模板

````markdown
```python
# Python代码示例
def example():
    return "Hello"
```

```bash
# Shell命令示例
ls -la
```

```sql
-- SQL示例
SELECT * FROM users;
```
````

---

## 🔗 相关文档

- 📘 [编辑器配置说明](00-项目导航/编辑器配置说明-2025-10-30.md)
- 📙 [文档格式规范](00-项目导航/文档格式规范-2025-10-30.md)
- 📗 [批量格式化执行指南](00-项目导航/批量格式化执行指南-2025-10-30.md)
- 📕 [快速导航](文档格式统一-快速导航.md)

---

## 💡 使用技巧

### 1. 格式化前预览

```bash
# 使用--dry-run查看会做什么更改（如果脚本支持）
python format_docs.py --dry-run 文件.md
```

### 2. 批量检查

```bash
# 查找所有没有目录的文档
find {01..08}-*/ -name "*.md" -exec grep -L "^## 目录" {} \;
```

### 3. 快速导航

在VS Code中：
- `Ctrl+P` → 输入文件名快速打开
- `Ctrl+Shift+O` → 查看当前文件的大纲
- `Ctrl+G` → 跳转到指定行

---

╔════════════════════════════════════════════════════════╗
║                                                        ║
║        📚 Markdown格式化配置 - 已完成设置 📚          ║
║                                                        ║
║  ✅ 自动格式化：保存时自动修复                         ║
║  ✅ 实时检查：编辑时提示问题                          ║
║  ✅ 快捷命令：一键批量处理                            ║
║  ✅ 跨编辑器：通用配置支持                            ║
║                                                        ║
║  现在可以享受高效的文档编辑体验！                     ║
║                                                        ║
╚════════════════════════════════════════════════════════╝

---

**最后更新**: 2025-10-30  
**版本**: 1.0  
**维护者**: Documentation Team

