# 规范纲要：隔离级别与异常谱（占位）

## 目标

为 SI/SSI/2PL 等隔离机制建立不变式与异常判据的规范骨架。

## 元素

- 事务：读/写集、开始/提交时间、版本可见性
- 调度：操作序列、冲突关系、可串行化判据

## 不变式（草案）

- 可见性不变式：读到的版本在快照点前提交
- SSI 冲突图：无环 ⇒ 可串行化

## 反例与用例

- SI 幻读/写偏差最小示例（占位）
- SSI 检测阻断示例（占位）

### 最小 SQL 片段（占位）

```sql
-- 写偏差（Repeatable Read/SI 下可能）
BEGIN;
-- T1: SELECT ... WHERE ...;  -- 读取候选集合
-- 不满足条件则 INSERT/UPDATE 导致写偏差
COMMIT;

-- 对照：在 Serializable 下预期被冲突检测阻断
```

## 与 17.x 版本的核对点

- 行为差异与参数对判据影响（占位）
  - `default_transaction_isolation`
  - `max_pred_locks_per_transaction`（SSI 冲突检测容量）
