# 验证闭环模板

## 一键启动与连接

```bash
docker run --rm -d --name pg16 -e POSTGRES_PASSWORD=postgres -p 5432:5432 postgres:16
psql -h localhost -U postgres -d postgres -c "SELECT version();"
```

## 执行顺序

- 依次执行文档中的 SQL 代码块
- 如有外部依赖（扩展/FDW/pg_cron/TimescaleDB），先安装与启用

## 最小化断言

```bash
psql -h localhost -U postgres -d postgres -v ON_ERROR_STOP=1 \
  -c "\\dt+ <topic_prefix>*" \
  -c "\\df+ *<function_keywords>*" \
  -c "\\dm+ <matview_prefix>*"
```

### Windows PowerShell 等价命令

```powershell
psql -h localhost -U postgres -d postgres -v ON_ERROR_STOP=1 -c "\\dt+ <topic_prefix>*" -c "\\df+ *<function_keywords>*" -c "\\dm+ <matview_prefix>*"
```

## 基础数据与冒烟

```bash
psql -h localhost -U postgres -d postgres -v ON_ERROR_STOP=1 -c "<insert some seed data SQL>" -c "<select some results>"
```

### Windows PowerShell 等价命令1

```powershell
psql -h localhost -U postgres -d postgres -v ON_ERROR_STOP=1 -c "<insert some seed data SQL>" -c "<select some results>"
```

## 退出/清理

```bash
docker rm -f pg16
```
