# 07 实践指南（落地清单）

> 最后更新：2025-10-31 · 面向企业/团队的执行化清单

## 一、基础能力启用

- 启用 pgvector 与连接池；完成最小可用语义检索。
- 评估 Serverless 使用面：是否需要常驻/预热、分支数量上限。

## 二、数据与建模

- 统一业务实体：结构化 + JSONB 扩展；时序/向量侧表共分区。
- 明确 Embedding 策略：模型版本、维度、索引/精排流程。

## 三、SLO 与自治

- 建立 SLI/SLO：P50/95/99 延迟、吞吐、成本与可用性目标。
- 导入自治工具输出到变更闭环：工单、回滚、追踪。

## 四、合规与审计

- 数据分级分域：主权标签、RLS 策略与跨境拦截。
- 审计全链路：DB 审计 + 应用审计 + 外部存证（可选）。

## 五、评估与优化

- 基准与压测：混合负载（向量/全文/图/时序）联合评估。
- 成本优化：冷热分层、只读副本、归档与压缩策略。

## 附：模板与示例

- 指标看板字段：延迟分位、错误率、QPS、缓存命中、索引健康。
- 变更票据模板：影响面、回滚条件、验证脚本、负责人。

# 07 实践指南（落地清单）

> 最后更新：2025-10-31 · 面向 CTO/架构师/DBA 的可执行清单

## 一次性决策

- 知识库/检索类型：纯向量 vs 混合（BM25 + 向量/RRF）
- 部署形态：自建 vs 托管（评估 Serverless/Branching 价值）
- 多模一体：是否引入 Timescale/AGE，如何规划分区与索引

## 标准作业（SOP）

- 向量表结构与索引参数模板
- 混合搜索 SQL 模板（检索 + 融合）
- 观测与诊断：pg_stat_statements、auto_explain、采样与指标
- 变更闭环：变更票据、验证用例、回退策略

## 合规护栏

- RLS 策略模板（按角色/地域/数据域）
- 审计留痕：接入外部审计/日志系统，定义保留与访问策略

## 参考

- `./01-向量与混合搜索-pgvector与RRF.md`
- `./02-AI自治与自优化.md`
- `./03-Serverless与分支-Neon与Supabase.md`
- `./04-多模一体化-JSONB时序图向量.md`
- `./05-合规与可信-AI Act与审计.md`
