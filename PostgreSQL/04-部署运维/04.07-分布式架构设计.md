# PostgreSQL åˆ†å¸ƒå¼æ¶æ„è®¾è®¡

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **æœ€åæ›´æ–°**: 2025-11-12
> **ç‰ˆæœ¬è¦†ç›–**: PostgreSQL 18.x (æ¨è) â­ | 17.x (æ¨è) | 16.x (å…¼å®¹)
> **æ–‡æ¡£çŠ¶æ€**: âœ… å·²åˆ›å»º
> **å¯¹æ ‡æ ‡å‡†**: MIT/Stanfordåˆ†å¸ƒå¼æ•°æ®åº“è¯¾ç¨‹ã€Cituså®˜æ–¹æ–‡æ¡£

---

## ğŸ“‹ ç›®å½•

- [PostgreSQL åˆ†å¸ƒå¼æ¶æ„è®¾è®¡](#postgresql-åˆ†å¸ƒå¼æ¶æ„è®¾è®¡)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
  - [2. åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåŸºç¡€](#2-åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåŸºç¡€)
    - [2.1 CAPå®šç†](#21-capå®šç†)
    - [2.2 åˆ†å¸ƒå¼ä¸€è‡´æ€§æ¨¡å‹](#22-åˆ†å¸ƒå¼ä¸€è‡´æ€§æ¨¡å‹)
    - [2.3 åˆ†å¸ƒå¼äº‹åŠ¡ç†è®º](#23-åˆ†å¸ƒå¼äº‹åŠ¡ç†è®º)
  - [3. Citusåˆ†å¸ƒå¼æ‰©å±•](#3-citusåˆ†å¸ƒå¼æ‰©å±•)
    - [3.1 Citusæ¶æ„è®¾è®¡](#31-citusæ¶æ„è®¾è®¡)
    - [3.2 åˆ†å¸ƒå¼è¡¨è®¾è®¡](#32-åˆ†å¸ƒå¼è¡¨è®¾è®¡)
    - [3.3 åˆ†å¸ƒå¼æŸ¥è¯¢ä¼˜åŒ–](#33-åˆ†å¸ƒå¼æŸ¥è¯¢ä¼˜åŒ–)
    - [3.4 Citusé…ç½®ä¸ä¼˜åŒ–](#34-citusé…ç½®ä¸ä¼˜åŒ–)
  - [4. Greenplumæ•°æ®ä»“åº“](#4-greenplumæ•°æ®ä»“åº“)
    - [4.1 Greenplumæ¶æ„](#41-greenplumæ¶æ„)
    - [4.2 æ•°æ®åˆ†å¸ƒç­–ç•¥](#42-æ•°æ®åˆ†å¸ƒç­–ç•¥)
    - [4.3 å¹¶è¡ŒæŸ¥è¯¢ä¼˜åŒ–](#43-å¹¶è¡ŒæŸ¥è¯¢ä¼˜åŒ–)
  - [5. PostgreSQL-XLé›†ç¾¤](#5-postgresql-xlé›†ç¾¤)
    - [5.1 PostgreSQL-XLæ¶æ„](#51-postgresql-xlæ¶æ„)
    - [5.2 åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†](#52-åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†)
  - [6. åˆ†å¸ƒå¼æ¶æ„å¯¹æ¯”](#6-åˆ†å¸ƒå¼æ¶æ„å¯¹æ¯”)
  - [7. å®æˆ˜æ¡ˆä¾‹](#7-å®æˆ˜æ¡ˆä¾‹)
    - [7.1 å¤šç§Ÿæˆ·SaaSæ¶æ„](#71-å¤šç§Ÿæˆ·saasæ¶æ„)
    - [7.2 å…¨çƒåˆ†å¸ƒå¼éƒ¨ç½²](#72-å…¨çƒåˆ†å¸ƒå¼éƒ¨ç½²)
    - [7.3 æ•°æ®åˆ†ç‰‡ç­–ç•¥](#73-æ•°æ®åˆ†ç‰‡ç­–ç•¥)
  - [8. æ€§èƒ½ä¼˜åŒ–](#8-æ€§èƒ½ä¼˜åŒ–)
    - [8.1 æŸ¥è¯¢ä¼˜åŒ–](#81-æŸ¥è¯¢ä¼˜åŒ–)
    - [8.2 PostgreSQL 18ä¼˜åŒ–](#82-postgresql-18ä¼˜åŒ–)
  - [9. ç›‘æ§ä¸è¯Šæ–­](#9-ç›‘æ§ä¸è¯Šæ–­)
    - [9.1 Citusç›‘æ§](#91-citusç›‘æ§)
    - [9.2 æ€§èƒ½è¯Šæ–­](#92-æ€§èƒ½è¯Šæ–­)
  - [10. ç›¸å…³æ–‡æ¡£](#10-ç›¸å…³æ–‡æ¡£)
  - [11. å‚è€ƒæ–‡çŒ®](#11-å‚è€ƒæ–‡çŒ®)

---

## 1. æ¦‚è¿°

PostgreSQLé€šè¿‡å¤šç§æ–¹å¼å®ç°åˆ†å¸ƒå¼æ¶æ„ï¼ŒåŒ…æ‹¬åŸºäºæ‰©å±•çš„åˆ†å¸ƒå¼æ–¹æ¡ˆï¼ˆå¦‚Citusï¼‰å’ŒåŸºäºPostgreSQLçš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆå¦‚Greenplumã€PostgreSQL-XLï¼‰ã€‚è¿™äº›æ–¹æ¡ˆåœ¨ä¸åŒåœºæ™¯ä¸‹æä¾›æ°´å¹³æ‰©å±•ã€é«˜å¯ç”¨æ€§å’Œåˆ†å¸ƒå¼æŸ¥è¯¢èƒ½åŠ›ã€‚

**ä¸»è¦åˆ†å¸ƒå¼æ–¹æ¡ˆ**ï¼š

- **Citus**: PostgreSQLæ‰©å±•ï¼Œæä¾›åˆ†ç‰‡å’Œåˆ†å¸ƒå¼æŸ¥è¯¢
- **Greenplum**: åŸºäºPostgreSQLçš„æ•°æ®ä»“åº“ï¼ŒMPPæ¶æ„
- **PostgreSQL-XL**: å¤šä¸»æ¶æ„çš„PostgreSQLé›†ç¾¤

**é€‚ç”¨åœºæ™¯**ï¼š

- å¤§è§„æ¨¡æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢
- å¤šç§Ÿæˆ·SaaSåº”ç”¨
- æ•°æ®ä»“åº“å’Œåˆ†æ
- å…¨çƒåˆ†å¸ƒå¼éƒ¨ç½²

---

## 2. åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºåŸºç¡€

### 2.1 CAPå®šç†

**CAPå®šç†**ï¼ˆConsistency, Availability, Partition toleranceï¼‰ï¼š

- **ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰**: æ‰€æœ‰èŠ‚ç‚¹åŒæ—¶çœ‹åˆ°ç›¸åŒæ•°æ®
- **å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰**: ç³»ç»ŸæŒç»­å¯ç”¨
- **åˆ†åŒºå®¹é”™ï¼ˆPartition toleranceï¼‰**: ç½‘ç»œåˆ†åŒºæ—¶ç³»ç»Ÿä»å¯å·¥ä½œ

**PostgreSQLåˆ†å¸ƒå¼æ–¹æ¡ˆçš„é€‰æ‹©**ï¼š

| æ–¹æ¡ˆ | ä¸€è‡´æ€§ | å¯ç”¨æ€§ | åˆ†åŒºå®¹é”™ | é€‰æ‹© |
|-----|--------|--------|---------|------|
| Citus | å¼ºä¸€è‡´æ€§ | é«˜ | æ˜¯ | CP |
| Greenplum | å¼ºä¸€è‡´æ€§ | é«˜ | æ˜¯ | CP |
| PostgreSQL-XL | å¼ºä¸€è‡´æ€§ | é«˜ | æ˜¯ | CP |

### 2.2 åˆ†å¸ƒå¼ä¸€è‡´æ€§æ¨¡å‹

**ä¸€è‡´æ€§çº§åˆ«**ï¼š

1. **å¼ºä¸€è‡´æ€§**: æ‰€æœ‰èŠ‚ç‚¹ç«‹å³çœ‹åˆ°ç›¸åŒæ•°æ®
2. **æœ€ç»ˆä¸€è‡´æ€§**: æœ€ç»ˆæ‰€æœ‰èŠ‚ç‚¹çœ‹åˆ°ç›¸åŒæ•°æ®
3. **å¼±ä¸€è‡´æ€§**: ä¸ä¿è¯ä¸€è‡´æ€§

**PostgreSQLåˆ†å¸ƒå¼æ–¹æ¡ˆ**ï¼š

- Citus: å¼ºä¸€è‡´æ€§ï¼ˆé€šè¿‡2PCï¼‰
- Greenplum: å¼ºä¸€è‡´æ€§ï¼ˆé€šè¿‡åˆ†å¸ƒå¼äº‹åŠ¡ï¼‰
- PostgreSQL-XL: å¼ºä¸€è‡´æ€§ï¼ˆé€šè¿‡å…¨å±€äº‹åŠ¡ç®¡ç†å™¨ï¼‰

### 2.3 åˆ†å¸ƒå¼äº‹åŠ¡ç†è®º

**ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰**ï¼š

```sql
-- Phase 1: Prepare
BEGIN;
UPDATE distributed_table SET value = 'new' WHERE id = 1;
PREPARE TRANSACTION 'txn-001';

-- Phase 2: Commit (coordinator)
COMMIT PREPARED 'txn-001';
```

**SAGAæ¨¡å¼**ï¼š

```sql
-- è¡¥å¿äº‹åŠ¡ç¤ºä¾‹
BEGIN;
-- æ‰§è¡Œæ“ä½œ
UPDATE orders SET status = 'cancelled' WHERE id = 1;
-- è¡¥å¿æ“ä½œ
UPDATE inventory SET quantity = quantity + 1 WHERE product_id = 1;
COMMIT;
```

---

## 3. Citusåˆ†å¸ƒå¼æ‰©å±•

### 3.1 Citusæ¶æ„è®¾è®¡

**Citusæ¶æ„**ï¼š

- **åè°ƒèŠ‚ç‚¹ï¼ˆCoordinatorï¼‰**: æ¥æ”¶æŸ¥è¯¢ï¼Œåˆ†å‘åˆ°å·¥ä½œèŠ‚ç‚¹
- **å·¥ä½œèŠ‚ç‚¹ï¼ˆWorkerï¼‰**: å­˜å‚¨æ•°æ®åˆ†ç‰‡ï¼Œæ‰§è¡ŒæŸ¥è¯¢
- **å…ƒæ•°æ®èŠ‚ç‚¹**: å­˜å‚¨åˆ†ç‰‡å…ƒæ•°æ®

**æ ¸å¿ƒç»„ä»¶**ï¼š

```sql
-- å®‰è£…Citusæ‰©å±•
CREATE EXTENSION citus;

-- æŸ¥çœ‹Citusç‰ˆæœ¬
SELECT * FROM citus_version();

-- æ·»åŠ å·¥ä½œèŠ‚ç‚¹
SELECT citus_add_node('192.168.1.11', 5432);
SELECT citus_add_node('192.168.1.12', 5432);
SELECT citus_add_node('192.168.1.13', 5432);

-- æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯
SELECT * FROM citus_get_active_worker_nodes();
```

### 3.2 åˆ†å¸ƒå¼è¡¨è®¾è®¡

**åˆ†å¸ƒå¼è¡¨ç±»å‹**ï¼š

1. **åˆ†ç‰‡è¡¨ï¼ˆDistributed Tableï¼‰**: æ•°æ®åˆ†ç‰‡åˆ°å¤šä¸ªèŠ‚ç‚¹
2. **å‚è€ƒè¡¨ï¼ˆReference Tableï¼‰**: å¤åˆ¶åˆ°æ‰€æœ‰èŠ‚ç‚¹
3. **æœ¬åœ°è¡¨ï¼ˆLocal Tableï¼‰**: ä»…å­˜å‚¨åœ¨åè°ƒèŠ‚ç‚¹

**åˆ›å»ºåˆ†å¸ƒå¼è¡¨**ï¼š

```sql
-- åˆ›å»ºåˆ†ç‰‡è¡¨ï¼ˆå“ˆå¸Œåˆ†ç‰‡ï¼‰
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    name TEXT,
    email TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- æŒ‰idåˆ†ç‰‡
SELECT create_distributed_table('users', 'id');

-- åˆ›å»ºå‚è€ƒè¡¨ï¼ˆå¤åˆ¶åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼‰
CREATE TABLE countries (
    id SERIAL PRIMARY KEY,
    name TEXT,
    code TEXT
);

SELECT create_reference_table('countries');

-- æŸ¥çœ‹åˆ†ç‰‡ä¿¡æ¯
SELECT * FROM citus_shards WHERE table_name = 'users';
```

**åˆ†ç‰‡ç­–ç•¥**ï¼š

```sql
-- å“ˆå¸Œåˆ†ç‰‡ï¼ˆé»˜è®¤ï¼‰
SELECT create_distributed_table('orders', 'user_id', 'hash');

-- èŒƒå›´åˆ†ç‰‡
SELECT create_distributed_table('events', 'created_at', 'range');

-- æŸ¥çœ‹åˆ†ç‰‡åˆ†å¸ƒ
SELECT
    shardid,
    shard_size,
    node_name,
    node_port
FROM citus_shards
WHERE table_name = 'orders';
```

### 3.3 åˆ†å¸ƒå¼æŸ¥è¯¢ä¼˜åŒ–

**æŸ¥è¯¢ç±»å‹**ï¼š

1. **å•åˆ†ç‰‡æŸ¥è¯¢**: æŸ¥è¯¢æ¡ä»¶åŒ…å«åˆ†ç‰‡é”®
2. **å¤šåˆ†ç‰‡æŸ¥è¯¢**: æŸ¥è¯¢æ¡ä»¶ä¸åŒ…å«åˆ†ç‰‡é”®
3. **è·¨åˆ†ç‰‡JOIN**: å¤šä¸ªåˆ†ç‰‡è¡¨JOIN

**æŸ¥è¯¢ä¼˜åŒ–ç¤ºä¾‹**ï¼š

```sql
-- å•åˆ†ç‰‡æŸ¥è¯¢ï¼ˆé«˜æ•ˆï¼‰
SELECT * FROM users WHERE id = 123;

-- å¤šåˆ†ç‰‡æŸ¥è¯¢ï¼ˆéœ€è¦èšåˆï¼‰
SELECT COUNT(*) FROM users WHERE created_at > '2025-01-01';

-- è·¨åˆ†ç‰‡JOINï¼ˆéœ€è¦é‡åˆ†å¸ƒï¼‰
SELECT u.name, o.total
FROM users u
JOIN orders o ON u.id = o.user_id
WHERE u.id = 123;
```

**PostgreSQL 18ä¼˜åŒ–**ï¼š

- å¼‚æ­¥I/Oæå‡è·¨åˆ†ç‰‡æŸ¥è¯¢æ€§èƒ½
- å¹¶è¡ŒæŸ¥è¯¢å¢å¼ºåˆ†å¸ƒå¼èšåˆ
- è™šæ‹Ÿç”Ÿæˆåˆ—ä¼˜åŒ–åˆ†å¸ƒå¼è®¡ç®—

### 3.4 Citusé…ç½®ä¸ä¼˜åŒ–

**é…ç½®å‚æ•°**ï¼š

```sql
-- Citusé…ç½®
SET citus.shard_count = 32;
SET citus.shard_replication_factor = 1;
SET citus.max_adaptive_executor_pool_size = 20;

-- æŸ¥è¯¢è¶…æ—¶
SET citus.executor_slow_start_interval = 10;
SET citus.task_executor_type = 'adaptive';
```

**æ€§èƒ½ä¼˜åŒ–**ï¼š

```sql
-- åˆ†æåˆ†å¸ƒå¼è¡¨
SELECT citus_analyze_shard_statistics();

-- æŸ¥çœ‹æŸ¥è¯¢è®¡åˆ’
EXPLAIN (ANALYZE, BUFFERS)
SELECT COUNT(*) FROM users WHERE created_at > '2025-01-01';

-- ç›‘æ§æŸ¥è¯¢æ€§èƒ½
SELECT * FROM citus_stat_statements
ORDER BY total_exec_time DESC
LIMIT 10;
```

---

## 4. Greenplumæ•°æ®ä»“åº“

### 4.1 Greenplumæ¶æ„

**Greenplumæ¶æ„**ï¼ˆMPP - Massively Parallel Processingï¼‰ï¼š

- **MasterèŠ‚ç‚¹**: åè°ƒæŸ¥è¯¢ï¼Œç®¡ç†å…ƒæ•°æ®
- **SegmentèŠ‚ç‚¹**: å­˜å‚¨æ•°æ®ï¼Œå¹¶è¡Œæ‰§è¡ŒæŸ¥è¯¢
- **Interconnect**: èŠ‚ç‚¹é—´é«˜é€Ÿç½‘ç»œ

**æ ¸å¿ƒç‰¹æ€§**ï¼š

- åˆ—å­˜å‚¨æ”¯æŒ
- å¹¶è¡ŒæŸ¥è¯¢ä¼˜åŒ–
- æ•°æ®å‹ç¼©
- å¤–éƒ¨è¡¨æ”¯æŒ

### 4.2 æ•°æ®åˆ†å¸ƒç­–ç•¥

**åˆ†å¸ƒç­–ç•¥**ï¼š

```sql
-- å“ˆå¸Œåˆ†å¸ƒï¼ˆé»˜è®¤ï¼‰
CREATE TABLE sales (
    id BIGSERIAL,
    product_id INT,
    amount DECIMAL(10,2),
    sale_date DATE
) DISTRIBUTED BY (product_id);

-- éšæœºåˆ†å¸ƒ
CREATE TABLE logs (
    id BIGSERIAL,
    log_text TEXT,
    created_at TIMESTAMPTZ
) DISTRIBUTED RANDOMLY;

-- å¤åˆ¶åˆ†å¸ƒï¼ˆå°è¡¨ï¼‰
CREATE TABLE config (
    key TEXT,
    value TEXT
) DISTRIBUTED REPLICATED;
```

### 4.3 å¹¶è¡ŒæŸ¥è¯¢ä¼˜åŒ–

**å¹¶è¡ŒæŸ¥è¯¢ç‰¹æ€§**ï¼š

- è‡ªåŠ¨å¹¶è¡ŒåŒ–
- åŠ¨æ€åˆ†åŒºè£å‰ª
- å¹¶è¡Œèšåˆ
- å¹¶è¡ŒJOIN

---

## 5. PostgreSQL-XLé›†ç¾¤

### 5.1 PostgreSQL-XLæ¶æ„

**PostgreSQL-XLæ¶æ„**ï¼š

- **GTMï¼ˆGlobal Transaction Managerï¼‰**: å…¨å±€äº‹åŠ¡ç®¡ç†
- **CoordinatorèŠ‚ç‚¹**: æŸ¥è¯¢åè°ƒ
- **DatanodeèŠ‚ç‚¹**: æ•°æ®å­˜å‚¨

**æ ¸å¿ƒç‰¹æ€§**ï¼š

- å¤šä¸»æ¶æ„
- å…¨å±€äº‹åŠ¡ç®¡ç†
- åˆ†å¸ƒå¼æŸ¥è¯¢ä¼˜åŒ–

### 5.2 åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†

**å…¨å±€äº‹åŠ¡**ï¼š

```sql
-- å…¨å±€äº‹åŠ¡ç¤ºä¾‹
BEGIN;
UPDATE distributed_table1 SET value = 'new1' WHERE id = 1;
UPDATE distributed_table2 SET value = 'new2' WHERE id = 2;
COMMIT;
```

---

## 6. åˆ†å¸ƒå¼æ¶æ„å¯¹æ¯”

| ç‰¹æ€§ | Citus | Greenplum | PostgreSQL-XL |
|-----|-------|-----------|---------------|
| **æ¶æ„ç±»å‹** | æ‰©å±• | ç‹¬ç«‹æ•°æ®åº“ | é›†ç¾¤ |
| **åˆ†ç‰‡æ–¹å¼** | å“ˆå¸Œ/èŒƒå›´ | å“ˆå¸Œ/éšæœº | å“ˆå¸Œ |
| **æŸ¥è¯¢ä¼˜åŒ–** | è‡ªé€‚åº”æ‰§è¡Œå™¨ | MPPä¼˜åŒ–å™¨ | åˆ†å¸ƒå¼ä¼˜åŒ–å™¨ |
| **äº‹åŠ¡æ”¯æŒ** | 2PC | åˆ†å¸ƒå¼äº‹åŠ¡ | å…¨å±€äº‹åŠ¡ |
| **é€‚ç”¨åœºæ™¯** | OLTP/OLAP | æ•°æ®ä»“åº“ | OLTP |
| **PostgreSQLå…¼å®¹** | 100% | é«˜åº¦å…¼å®¹ | é«˜åº¦å…¼å®¹ |

---

## 7. å®æˆ˜æ¡ˆä¾‹

### 7.1 å¤šç§Ÿæˆ·SaaSæ¶æ„

**åœºæ™¯**: å¤šç§Ÿæˆ·SaaSåº”ç”¨ï¼Œæ¯ä¸ªç§Ÿæˆ·æ•°æ®éš”ç¦»

**Cituså®ç°**ï¼š

```sql
-- ç§Ÿæˆ·è¡¨ï¼ˆæŒ‰tenant_idåˆ†ç‰‡ï¼‰
CREATE TABLE tenants (
    id BIGSERIAL PRIMARY KEY,
    name TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

SELECT create_distributed_table('tenants', 'id');

-- ç§Ÿæˆ·æ•°æ®è¡¨ï¼ˆæŒ‰tenant_idåˆ†ç‰‡ï¼‰
CREATE TABLE tenant_data (
    id BIGSERIAL,
    tenant_id BIGINT,
    data JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

SELECT create_distributed_table('tenant_data', 'tenant_id');

-- æŸ¥è¯¢ç‰¹å®šç§Ÿæˆ·æ•°æ®ï¼ˆå•åˆ†ç‰‡æŸ¥è¯¢ï¼‰
SELECT * FROM tenant_data WHERE tenant_id = 123;
```

### 7.2 å…¨çƒåˆ†å¸ƒå¼éƒ¨ç½²

**åœºæ™¯**: å…¨çƒç”¨æˆ·ï¼Œæ•°æ®æŒ‰åœ°åŒºåˆ†å¸ƒ

**å®ç°æ–¹æ¡ˆ**ï¼š

```sql
-- æŒ‰åœ°åŒºåˆ†ç‰‡
CREATE TABLE global_users (
    id BIGSERIAL PRIMARY KEY,
    region TEXT,
    name TEXT,
    email TEXT
);

-- æŒ‰regionåˆ†ç‰‡
SELECT create_distributed_table('global_users', 'region', 'hash');

-- è·¨åœ°åŒºæŸ¥è¯¢
SELECT region, COUNT(*)
FROM global_users
GROUP BY region;
```

### 7.3 æ•°æ®åˆ†ç‰‡ç­–ç•¥

**åˆ†ç‰‡ç­–ç•¥é€‰æ‹©**ï¼š

1. **å“ˆå¸Œåˆ†ç‰‡**: å‡åŒ€åˆ†å¸ƒï¼Œé€‚åˆOLTP
2. **èŒƒå›´åˆ†ç‰‡**: æ—¶é—´åºåˆ—æ•°æ®ï¼Œé€‚åˆOLAP
3. **åˆ—è¡¨åˆ†ç‰‡**: æŒ‰ä¸šåŠ¡è§„åˆ™åˆ†ç‰‡

---

## 8. æ€§èƒ½ä¼˜åŒ–

### 8.1 æŸ¥è¯¢ä¼˜åŒ–

**ä¼˜åŒ–ç­–ç•¥**ï¼š

- ä½¿ç”¨åˆ†ç‰‡é”®æŸ¥è¯¢
- é¿å…è·¨åˆ†ç‰‡JOIN
- ä½¿ç”¨å‚è€ƒè¡¨å‡å°‘JOIN
- åˆç†è®¾ç½®åˆ†ç‰‡æ•°é‡

### 8.2 PostgreSQL 18ä¼˜åŒ–

**æ–°ç‰¹æ€§åº”ç”¨**ï¼š

- **å¼‚æ­¥I/O**: æå‡è·¨åˆ†ç‰‡æŸ¥è¯¢æ€§èƒ½2-3å€
- **è™šæ‹Ÿç”Ÿæˆåˆ—**: ä¼˜åŒ–åˆ†å¸ƒå¼è®¡ç®—
- **å¹¶è¡ŒæŸ¥è¯¢å¢å¼º**: æ›´æ™ºèƒ½çš„åˆ†å¸ƒå¼èšåˆ

---

## 9. ç›‘æ§ä¸è¯Šæ–­

### 9.1 Citusç›‘æ§

```sql
-- æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€
SELECT * FROM citus_get_active_worker_nodes();

-- æŸ¥çœ‹åˆ†ç‰‡åˆ†å¸ƒ
SELECT * FROM citus_shards;

-- æŸ¥çœ‹æŸ¥è¯¢ç»Ÿè®¡
SELECT * FROM citus_stat_statements
ORDER BY total_exec_time DESC
LIMIT 10;
```

### 9.2 æ€§èƒ½è¯Šæ–­

```sql
-- åˆ†ææ…¢æŸ¥è¯¢
SELECT
    query,
    calls,
    total_exec_time,
    mean_exec_time
FROM citus_stat_statements
WHERE mean_exec_time > 1000
ORDER BY mean_exec_time DESC;
```

---

## 10. ç›¸å…³æ–‡æ¡£

- [é›†ç¾¤éƒ¨ç½²ä¸é«˜å¯ç”¨](./04.02-é›†ç¾¤éƒ¨ç½²ä¸é«˜å¯ç”¨.md) - é«˜å¯ç”¨æ¶æ„
- [ç›‘æ§ä¸è¯Šæ–­](./04.04-ç›‘æ§ä¸è¯Šæ–­.md) - ç›‘æ§æ–¹æ³•
- [æ€§èƒ½è°ƒä¼˜å®è·µ](./04.06-æ€§èƒ½è°ƒä¼˜å®è·µ.md) - æ€§èƒ½ä¼˜åŒ–
- [äº‹åŠ¡ç®¡ç†ä¸ACIDç‰¹æ€§](../01-æ ¸å¿ƒåŸºç¡€/01.04-äº‹åŠ¡ç®¡ç†ä¸ACIDç‰¹æ€§.md) - äº‹åŠ¡ç†è®º

---

## 11. å‚è€ƒæ–‡çŒ®

1. PostgreSQL Global Development Group. (2025). PostgreSQL 18 Documentation. <https://www.postgresql.org/docs/18/>

2. Citus Data. (2025). Citus Documentation. <https://docs.citusdata.com/>

3. Greenplum. (2025). Greenplum Documentation. <https://docs.greenplum.org/>

4. PostgreSQL-XL. (2025). PostgreSQL-XL Documentation. <https://www.postgres-xl.org/documentation/>

5. Brewer, E. (2000). Towards robust distributed systems. PODC 2000.

6. PostgreSQL Global Development Group. (2024). PostgreSQL 17 Documentation. <https://www.postgresql.org/docs/17/>

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-11-12
**ç»´æŠ¤è€…**: PostgreSQL Documentation Team
