# 文档编号规范 v2.0

> **创建日期**: 2025-12-05
> **版本**: v2.0
> **用途**: 统一文档编号体系

---

## 模块编号规范

### 一级模块（00-12）

```text
SQL知识库模块编号
══════════════════════════════════════════════════════════════════════════════

00 - 项目计划（Meta）
├─ 执行计划
├─ 学习路径
├─ 编号规范
└─ 文档模板

01 - 理论基础（Foundation）
├─ 关系模型
├─ 范式理论
├─ 事务理论
└─ 核心原理（ACID/MVCC/CAP）

02 - SQL标准演进（Standards）
├─ SQL-92 到 SQL:2023
├─ 特性演进
└─ 标准对比

03 - 形式化模型（Formalization）
├─ 形式化语义
├─ 查询等价性
├─ 算法实现
└─ 定理证明体系

04 - 语法规范（Syntax）
├─ DDL/DML/DQL/DCL/TCL
├─ EXPLAIN分析
└─ 存储过程

05 - 高级特性（Advanced Features）
├─ 窗口函数
├─ CTE/递归
├─ JSON支持
└─ 图查询

06 - 数据库实现对比（Comparison）
├─ PostgreSQL/MySQL/SQLite
├─ 性能基准测试
├─ 架构解析
└─ 方言差异

07 - 实践案例（Practice）
├─ 完整项目
├─ 性能调优
├─ 架构设计
└─ 数据迁移

08 - 工具与资源（Tools & Resources）
├─ 监控诊断
├─ 学习资源
└─ 学术前沿

09 - 整合资源（Integration）
├─ 知识图谱
├─ 决策树
├─ 术语词典
└─ 对比矩阵

10 - 数据设计与建模（Data Design）
├─ ER模型
├─ 范式与反范式
├─ OLAP/OLTP
└─ 建模案例库

SQLite知识库（11-12补充）:
11 - 理论模型（Theory）
12 - 设计模型（Design）
```

---

## 文档编号规范

### 二级编号（01-99）

```text
格式: {模块}.{序号}-{标题}.md

示例:
01.01-关系模型基础.md
01.08-核心原理模型(ACID-MVCC-CAP).md
03.16-SQL定理依赖关系图谱.md

规则:
• 序号：两位数字（01-99）
• 从01开始，按逻辑顺序递增
• 00保留给模块总览（如03.00形式化框架）
• 预留间隔（如01,03,05），便于插入新文档

特殊编号:
• XX.00：模块总览/框架
• XX.99：模块总结/索引

编号段分配（建议）:
01-10: 基础概念
11-20: 核心内容
21-30: 高级主题
31-40: 实现细节
41-50: 算法与优化
51-60: 实战案例
61-70: 对比分析
71-80: 工具与方法
81-90: 整合与总结
91-99: 附录与参考
```

---

## 章节编号规范

### 文档内部结构

```text
层级标题规范
══════════════════════════════════════════════════════════════════════════════

# 一级标题（文档标题）
> 元信息

---

## 二级标题（主要章节）

### 三级标题（子章节）

#### 四级标题（细节）

##### 五级标题（避免使用，层次过深）

编号方式（可选，用于交叉引用）:

## 1. 关系模型基础

### 1.1 关系定义

#### 1.1.1 数学定义

#### 1.1.2 SQL实现

### 1.2 元组与属性

## 2. 完整性约束

使用场景:
• 需要精确引用某章节
• 生成目录
• 文档间交叉引用

不使用场景:
• 短文档（< 500行）
• 流式阅读文档
```

---

## 定理编号规范

### 格式定义

```text
定理编号格式
══════════════════════════════════════════════════════════════════════════════

格式: T{模块}.{文档}.{序号}

示例:
• T01.08.001: 理论基础模块（01），核心原理文档（08），第1个定理
• T03.12.005: 形式化模型（03），并发控制算法（12），第5个定理
• T11.07.003: SQLite理论模型（11），事务隔离（07），第3个定理

公理编号:
格式: A{序号}
示例:
• A1: 关系封闭性公理
• A5: 事务原子性公理

引理编号（辅助定理）:
格式: L{定理编号}.{引理序号}
示例:
• L03.12.005.1: 定理T03.12.005的第1个引理
• L03.12.005.2: 定理T03.12.005的第2个引理

定理类型标记:
• [定理] Theorem: 主要结论
• [引理] Lemma: 辅助结论
• [推论] Corollary: 直接推导
• [命题] Proposition: 简单陈述
• [公理] Axiom: 不证自明

示例文档格式:
### T03.12.005 定理：MVCC快照隔离

**陈述**: WAL模式提供快照隔离（SI）

**前提**:
- P1: 事务开始时记录快照
- P2: 写操作追加到WAL
- P3: 可见性规则基于txn_id

**证明**:
[证明内容]

**依赖**: T01.08.002（MVCC定义）

**应用**: 01.09 MVCC实践，11.07 SQLite事务
```

---

## 图表编号规范

### 图表类型编号

```text
图表编号格式
══════════════════════════════════════════════════════════════════════════════

格式: {类型}{模块}.{文档}.{序号}

图表类型前缀:
• F: Figure（通用图表）
• D: Diagram（架构图/流程图）
• T: Table（表格）
• M: Matrix（矩阵）
• G: Graph（图/网络）
• A: Algorithm（算法伪代码）

示例:
• F03.11.001: 形式化模型（03），查询优化（11），第1张图
• D06.10.002: 数据库对比（06），架构解析（10），第2张架构图
• T07.07.003: 实践案例（07），性能调优（07），第3张表格
• M09.12.001: 整合资源（09），决策树（12），第1个矩阵
• G09.11.001: 整合资源（09），知识图谱（11），第1张图谱
• A03.12.001: 形式化模型（03），并发控制（12），第1个算法

引用方式:
文档内: "如图F03.11.001所示..."
跨文档: "详见《查询优化算法详解》图F03.11.001"

图表标题格式:
图F03.11.001：动态规划JOIN顺序算法流程图
表T07.07.003：性能优化前后对比
矩阵M09.12.001：数据库选型决策矩阵
```

---

## 代码示例编号

### 代码块标记

```text
代码示例编号格式
══════════════════════════════════════════════════════════════════════════════

格式: [语言] 示例{序号}: {描述}

示例:
[SQL] 示例1: 创建用户表
[Python] 示例2: 连接池实现
[C] 示例3: B-Tree插入算法

完整格式（文档中）:
### [SQL] 示例03.12.001: MVCC可见性查询

```sql
-- 查询特定快照的数据
SELECT * FROM users
WHERE xmin <= current_snapshot.xmax
  AND (xmax = 0 OR xmax > current_snapshot.xmax);
```

**说明**: 该查询展示了MVCC可见性判断的SQL实现

**相关**: T03.12.005（MVCC定理）

**性能**: O(n)顺序扫描，建议添加索引

分类标记:
• [示例]: 演示用途
• [实战]: 生产可用
• [性能优化]: 优化版本
• [反例]: 错误示范
• [源码]: 真实源码摘录

语言标记:
• [SQL]: 标准SQL
• [PostgreSQL]: PostgreSQL方言
• [MySQL]: MySQL方言
• [SQLite]: SQLite方言
• [Python]: Python代码
• [C]: C语言代码
• [Bash]: Shell脚本
• [YAML]: 配置文件

```

---

## 交叉引用规范

### 引用格式

```text
文档间引用规范
══════════════════════════════════════════════════════════════════════════════

模块引用:
格式: → 模块编号
示例: → 01-理论基础

文档引用:
格式: → 文档编号 文档标题
示例: → 01.08 核心原理模型(ACID-MVCC-CAP)

章节引用:
格式: → 文档编号 § 章节编号 章节标题
示例: → 03.12 § 2.1 2PL死锁检测算法

定理引用:
格式: → 定理编号 定理名称
示例: → T03.12.005 MVCC快照隔离定理

图表引用:
格式: → 图表编号 图表名称
示例: → F03.11.001 动态规划流程图

代码引用:
格式: → 示例编号 示例描述
示例: → 示例03.12.001 MVCC可见性查询

实际使用:
"关于事务隔离的详细讨论，参见 → 01.05 事务理论 § 3.2 隔离级别对比"

"该优化基于 → T03.14.002 选择下推定理"

"完整实现代码见 → 示例07.06.003 库存扣减函数"
```

---

## 版本控制规范

### 文档版本标记

```text
版本号格式
══════════════════════════════════════════════════════════════════════════════

格式: v{主版本}.{次版本}.{修订版本}

版本变更规则:
• 主版本（v1.0→v2.0）: 重大重构，不兼容
• 次版本（v1.0→v1.1）: 新增内容，兼容
• 修订版本（v1.0.0→v1.0.1）: 错误修正，兼容

文档头部标记:
```markdown
# 文档标题

> **创建日期**: 2025-12-05
> **版本**: v1.0
> **最后更新**: 2025-12-05
> **难度**: ⭐⭐⭐⭐

---
```

变更日志:

# 变更历史

## v1.1 (2025-12-10)

- 新增：PostgreSQL 18 特性
- 更新：性能数据
- 修正：示例代码错误

## v1.0 (2025-12-05)

- 初始版本

状态标记:
• ✓ 已完成
• 🚧 进行中
• 📅 计划中
• ⚠️ 需要更新
• ❌ 已废弃

```

---

**文档版本**: v2.0
**最后更新**: 2025-12-05
