# SQL标准版本对比矩阵

> **创建日期**：2025-01-15
> **最后更新**：2025-01-16
> **版本**：v1.0.0
> **难度**：⭐⭐⭐
> **应用场景**：SQL标准对比、版本选择、迁移规划

---

## 📋 目录

- [SQL标准版本对比矩阵](#sql标准版本对比矩阵)
  - [📋 目录](#-目录)
  - [一、概述](#一概述)
  - [二、核心特性对比矩阵](#二核心特性对比矩阵)
  - [三、数据类型对比矩阵](#三数据类型对比矩阵)
  - [四、函数对比矩阵](#四函数对比矩阵)
  - [五、语法特性对比矩阵](#五语法特性对比矩阵)
  - [六、兼容性分析](#六兼容性分析)
    - [6.1 向后兼容性](#61-向后兼容性)
    - [6.2 向前兼容性](#62-向前兼容性)
  - [七、迁移决策矩阵](#七迁移决策矩阵)
    - [7.1 版本选择决策矩阵](#71-版本选择决策矩阵)
    - [7.2 迁移优先级矩阵](#72-迁移优先级矩阵)
  - [八、相关资源](#八相关资源)
    - [相关文档](#相关文档)
    - [外部资源](#外部资源)

---

## 一、概述

本文档提供SQL标准各版本之间的全面对比矩阵，帮助理解SQL标准的演进和选择适合的版本。

**对比维度**：

- 核心特性
- 数据类型
- 函数
- 语法特性
- 兼容性

---

## 二、核心特性对比矩阵

| 特性 | SQL-92 | SQL:1999 | SQL:2003 | SQL:2008 | SQL:2011 | SQL:2016 | SQL:2023 |
|------|--------|----------|----------|----------|----------|----------|----------|
| **基本查询** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **子查询** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **连接操作** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **UNION/INTERSECT/EXCEPT** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **递归查询（WITH RECURSIVE）** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **公共表表达式（CTE）** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **窗口函数** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **MERGE语句** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **UPSERT（INSERT ... ON CONFLICT）** | ❌ | ❌ | ⚠️ | ⚠️ | ⚠️ | ⚠️ | ✅ |
| **JSON支持** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅✅ |
| **JSON_TABLE** | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |
| **时态数据** | ❌ | ❌ | ❌ | ⚠️ | ✅ | ✅ | ✅✅ |
| **时态表** | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ | ✅ |
| **XML支持** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **存储过程** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **触发器** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **用户定义函数（UDF）** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **多态表函数（PTF）** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| **行模式匹配（MATCH_RECOGNIZE）** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| **MULTISET类型** | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |

**图例**：

- ✅ 完全支持
- ✅✅ 增强支持
- ⚠️ 部分支持
- ❌ 不支持

---

## 三、数据类型对比矩阵

| 数据类型 | SQL-92 | SQL:1999 | SQL:2003 | SQL:2008 | SQL:2011 | SQL:2016 | SQL:2023 |
|---------|--------|----------|----------|----------|----------|----------|----------|
| **基本数值类型** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **字符串类型** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **日期时间类型** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **布尔类型** | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **数组类型** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **集合类型** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **XML类型** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **JSON类型** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅✅ |
| **时态类型** | ❌ | ❌ | ❌ | ⚠️ | ✅ | ✅ | ✅✅ |
| **MULTISET类型** | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |
| **用户定义类型（UDT）** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |

---

## 四、函数对比矩阵

| 函数类型 | SQL-92 | SQL:1999 | SQL:2003 | SQL:2008 | SQL:2011 | SQL:2016 | SQL:2023 |
|---------|--------|----------|----------|----------|----------|----------|----------|
| **字符串函数** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **数值函数** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **日期时间函数** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **聚合函数** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **窗口函数** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **JSON函数** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅✅ |
| **JSON_TABLE** | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |
| **JSON_OBJECT/ARRAY** | ❌ | ❌ | ❌ | ❌ | ❌ | ⚠️ | ✅ |
| **XML函数** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **三角函数** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| **对数函数** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| **时态函数** | ❌ | ❌ | ❌ | ⚠️ | ✅ | ✅ | ✅✅ |

---

## 五、语法特性对比矩阵

| 语法特性 | SQL-92 | SQL:1999 | SQL:2003 | SQL:2008 | SQL:2011 | SQL:2016 | SQL:2023 |
|---------|--------|----------|----------|----------|----------|----------|----------|
| **标准语法** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **动态SQL** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **游标** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **异常处理** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **条件语句** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **循环语句** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **序列（SEQUENCE）** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **TRUNCATE TABLE** | ❌ | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |
| **FETCH FIRST** | ❌ | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |
| **OFFSET/FETCH** | ❌ | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |
| **INSTEAD OF触发器** | ❌ | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |

---

## 六、兼容性分析

### 6.1 向后兼容性

| 版本升级 | 兼容性 | 说明 |
|---------|--------|------|
| **SQL-92 → SQL:1999** | ✅ 完全兼容 | SQL-92查询在SQL:1999中完全兼容 |
| **SQL:1999 → SQL:2003** | ✅ 完全兼容 | SQL:1999查询在SQL:2003中完全兼容 |
| **SQL:2003 → SQL:2008** | ✅ 完全兼容 | SQL:2003查询在SQL:2008中完全兼容 |
| **SQL:2008 → SQL:2011** | ✅ 完全兼容 | SQL:2008查询在SQL:2011中完全兼容 |
| **SQL:2011 → SQL:2016** | ✅ 完全兼容 | SQL:2011查询在SQL:2016中完全兼容 |
| **SQL:2016 → SQL:2023** | ✅ 完全兼容 | SQL:2016查询在SQL:2023中完全兼容 |

### 6.2 向前兼容性

| 版本降级 | 兼容性 | 说明 |
|---------|--------|------|
| **SQL:2023 → SQL:2016** | ⚠️ 部分兼容 | 使用SQL:2023新特性的查询可能不兼容 |
| **SQL:2016 → SQL:2011** | ⚠️ 部分兼容 | 使用JSON等新特性的查询可能不兼容 |
| **SQL:2011 → SQL:2008** | ⚠️ 部分兼容 | 使用时态数据等新特性的查询可能不兼容 |

---

## 七、迁移决策矩阵

### 7.1 版本选择决策矩阵

| 需求场景 | 推荐版本 | 理由 |
|---------|---------|------|
| **基础查询需求** | SQL-92 | 最广泛支持，兼容性最好 |
| **需要递归查询** | SQL:1999+ | 支持WITH RECURSIVE |
| **需要窗口函数** | SQL:2003+ | 支持窗口函数 |
| **需要JSON支持** | SQL:2016+ | 支持JSON数据类型和函数 |
| **需要时态数据** | SQL:2011+ | 支持时态数据类型和查询 |
| **需要最新特性** | SQL:2023 | 支持所有最新特性 |
| **需要最大兼容性** | SQL-92 | 所有数据库都支持 |

### 7.2 迁移优先级矩阵

| 迁移路径 | 优先级 | 难度 | 收益 |
|---------|--------|------|------|
| **SQL-92 → SQL:1999** | ⭐⭐⭐ | 低 | 中 |
| **SQL:1999 → SQL:2003** | ⭐⭐⭐⭐ | 中 | 高 |
| **SQL:2003 → SQL:2008** | ⭐⭐ | 低 | 低 |
| **SQL:2008 → SQL:2011** | ⭐⭐⭐ | 中 | 中 |
| **SQL:2011 → SQL:2016** | ⭐⭐⭐⭐⭐ | 高 | 高 |
| **SQL:2016 → SQL:2023** | ⭐⭐⭐⭐ | 中 | 高 |

---

## 八、相关资源

### 相关文档

- [SQL标准演进历史](./02.01-SQL标准演进历史.md) - SQL标准发展历程
- [SQL-92标准详解](./02.02-SQL-92标准详解.md) - SQL-92标准
- [SQL:1999到SQL:2011标准](./02.03-SQL-1999到SQL-2011标准.md) - 中间版本标准
- [SQL:2016标准详解](./02.04-SQL-2016标准详解.md) - SQL:2016标准
- [SQL:2023标准详解](./02.05-SQL-2023标准详解.md) - SQL:2023标准

### 外部资源

- [ISO/IEC 9075标准](https://www.iso.org/standard/76583.html)
- [SQL标准官方文档](https://www.iso.org/standard/76583.html)

---

**维护者**: SQL Standards Team
**最后更新**: 2025-01-16
