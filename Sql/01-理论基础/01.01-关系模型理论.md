# å…³ç³»æ¨¡å‹ç†è®º

> **åˆ›å»ºæ—¥æœŸ**ï¼š2025-01-15
> **æœ€åæ›´æ–°**ï¼š2025-01-15
> **ç‰ˆæœ¬**ï¼šv1.0.0
> **éš¾åº¦**ï¼šâ­â­â­â­
> **åº”ç”¨åœºæ™¯**ï¼šæ•°æ®åº“ç†è®ºåŸºç¡€ã€æ•°æ®å»ºæ¨¡ã€SQLè®¾è®¡

---

## ğŸ“‹ ç›®å½•

- [å…³ç³»æ¨¡å‹ç†è®º](#å…³ç³»æ¨¡å‹ç†è®º)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [ä¸€ã€æ¦‚è¿°](#ä¸€æ¦‚è¿°)
    - [1.1 å…³ç³»æ¨¡å‹å®šä¹‰](#11-å…³ç³»æ¨¡å‹å®šä¹‰)
    - [1.2 å…³ç³»æ¨¡å‹å†å²](#12-å…³ç³»æ¨¡å‹å†å²)
      - [1.2.1 Coddçš„åŸå§‹è®ºæ–‡ï¼ˆ1970ï¼‰](#121-coddçš„åŸå§‹è®ºæ–‡1970)
      - [1.2.2 å…³ç³»æ¨¡å‹å‘å±•å†ç¨‹](#122-å…³ç³»æ¨¡å‹å‘å±•å†ç¨‹)
      - [1.2.2.1 1970-1975ï¼šç†è®ºå¥ åŸºæœŸ](#1221-1970-1975ç†è®ºå¥ åŸºæœŸ)
      - [1.2.2.2 1976-1985ï¼šç³»ç»Ÿå®ç°æœŸ](#1222-1976-1985ç³»ç»Ÿå®ç°æœŸ)
      - [1.2.2.3 1986-1999ï¼šæ ‡å‡†åŒ–æœŸ](#1223-1986-1999æ ‡å‡†åŒ–æœŸ)
      - [1.2.2.4 2000-è‡³ä»Šï¼šæŒç»­æ¼”è¿›æœŸ](#1224-2000-è‡³ä»ŠæŒç»­æ¼”è¿›æœŸ)
      - [1.2.3 é‡è¦äººç‰©å’Œè´¡çŒ®](#123-é‡è¦äººç‰©å’Œè´¡çŒ®)
      - [1.2.4 å…³ç³»æ¨¡å‹ä¸å…¶ä»–æ•°æ®æ¨¡å‹çš„å¯¹æ¯”](#124-å…³ç³»æ¨¡å‹ä¸å…¶ä»–æ•°æ®æ¨¡å‹çš„å¯¹æ¯”)
      - [1.2.5 å…³ç³»æ¨¡å‹ä¼˜åŠ¿ä¸å±€é™](#125-å…³ç³»æ¨¡å‹ä¼˜åŠ¿ä¸å±€é™)
    - [1.3 å…³ç³»æ¨¡å‹é‡è¦æ€§](#13-å…³ç³»æ¨¡å‹é‡è¦æ€§)
    - [1.4 å…³ç³»æ¨¡å‹çŸ¥è¯†ä½“ç³»æ€ç»´å¯¼å›¾](#14-å…³ç³»æ¨¡å‹çŸ¥è¯†ä½“ç³»æ€ç»´å¯¼å›¾)
  - [äºŒã€å…³ç³»æ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ](#äºŒå…³ç³»æ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ)
    - [2.1 å…³ç³»ï¼ˆRelationï¼‰](#21-å…³ç³»relation)
    - [2.2 å…ƒç»„ï¼ˆTupleï¼‰](#22-å…ƒç»„tuple)
      - [2.2.1 å…ƒç»„çš„å®šä¹‰](#221-å…ƒç»„çš„å®šä¹‰)
      - [2.2.2 å…ƒç»„çš„æ•°å­¦å®šä¹‰](#222-å…ƒç»„çš„æ•°å­¦å®šä¹‰)
      - [2.2.3 å…ƒç»„çš„æ€§è´¨](#223-å…ƒç»„çš„æ€§è´¨)
      - [2.2.4 å…ƒç»„çš„å†å²æ¼”è¿›](#224-å…ƒç»„çš„å†å²æ¼”è¿›)
    - [2.3 å±æ€§ï¼ˆAttributeï¼‰](#23-å±æ€§attribute)
      - [2.3.1 å±æ€§çš„å®šä¹‰](#231-å±æ€§çš„å®šä¹‰)
      - [2.3.2 å±æ€§çš„æ•°å­¦å®šä¹‰](#232-å±æ€§çš„æ•°å­¦å®šä¹‰)
      - [2.3.3 å±æ€§çš„æ€§è´¨](#233-å±æ€§çš„æ€§è´¨)
      - [2.3.4 å±æ€§çš„åˆ†ç±»](#234-å±æ€§çš„åˆ†ç±»)
    - [2.4 åŸŸï¼ˆDomainï¼‰](#24-åŸŸdomain)
    - [2.5 å…³ç³»æ¨¡å¼ï¼ˆRelation Schemaï¼‰](#25-å…³ç³»æ¨¡å¼relation-schema)
  - [ä¸‰ã€å…³ç³»æ¨¡å‹å½¢å¼åŒ–å®šä¹‰](#ä¸‰å…³ç³»æ¨¡å‹å½¢å¼åŒ–å®šä¹‰)
    - [3.1 å…³ç³»çš„å½¢å¼åŒ–å®šä¹‰](#31-å…³ç³»çš„å½¢å¼åŒ–å®šä¹‰)
    - [3.2 å…³ç³»æ¨¡å¼çš„å½¢å¼åŒ–å®šä¹‰](#32-å…³ç³»æ¨¡å¼çš„å½¢å¼åŒ–å®šä¹‰)
    - [3.3 å…³ç³»æ•°æ®åº“çš„å½¢å¼åŒ–å®šä¹‰](#33-å…³ç³»æ•°æ®åº“çš„å½¢å¼åŒ–å®šä¹‰)
  - [å››ã€å®Œæ•´æ€§çº¦æŸ](#å››å®Œæ•´æ€§çº¦æŸ)
    - [4.0 å®Œæ•´æ€§çº¦æŸæ¦‚è¿°](#40-å®Œæ•´æ€§çº¦æŸæ¦‚è¿°)
    - [4.1 å®ä½“å®Œæ•´æ€§ï¼ˆEntity Integrityï¼‰](#41-å®ä½“å®Œæ•´æ€§entity-integrity)
      - [4.1.1 å®ä½“å®Œæ•´æ€§çš„å®šä¹‰](#411-å®ä½“å®Œæ•´æ€§çš„å®šä¹‰)
      - [4.1.2 å®ä½“å®Œæ•´æ€§çš„å½¢å¼åŒ–å®šä¹‰](#412-å®ä½“å®Œæ•´æ€§çš„å½¢å¼åŒ–å®šä¹‰)
      - [4.1.3 å®ä½“å®Œæ•´æ€§çš„æ•°å­¦è¯æ˜](#413-å®ä½“å®Œæ•´æ€§çš„æ•°å­¦è¯æ˜)
      - [4.1.4 å®ä½“å®Œæ•´æ€§çš„å†å²æ¼”è¿›](#414-å®ä½“å®Œæ•´æ€§çš„å†å²æ¼”è¿›)
      - [4.1.5 å®ä½“å®Œæ•´æ€§çš„åº”ç”¨åœºæ™¯](#415-å®ä½“å®Œæ•´æ€§çš„åº”ç”¨åœºæ™¯)
    - [4.2 å‚ç…§å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰](#42-å‚ç…§å®Œæ•´æ€§referential-integrity)
      - [4.2.1 å‚ç…§å®Œæ•´æ€§çš„å®šä¹‰](#421-å‚ç…§å®Œæ•´æ€§çš„å®šä¹‰)
      - [4.2.2 å‚ç…§å®Œæ•´æ€§çš„å½¢å¼åŒ–å®šä¹‰](#422-å‚ç…§å®Œæ•´æ€§çš„å½¢å¼åŒ–å®šä¹‰)
      - [4.2.3 å‚ç…§å®Œæ•´æ€§çš„æ•°å­¦è¯æ˜](#423-å‚ç…§å®Œæ•´æ€§çš„æ•°å­¦è¯æ˜)
      - [4.2.4 å‚ç…§å®Œæ•´æ€§çš„çº§è”æ“ä½œ](#424-å‚ç…§å®Œæ•´æ€§çš„çº§è”æ“ä½œ)
      - [4.2.5 å‚ç…§å®Œæ•´æ€§çš„å†å²æ¼”è¿›](#425-å‚ç…§å®Œæ•´æ€§çš„å†å²æ¼”è¿›)
    - [4.3 ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§ï¼ˆUser-Defined Integrityï¼‰](#43-ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§user-defined-integrity)
      - [4.3.1 ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§çš„å®šä¹‰](#431-ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§çš„å®šä¹‰)
      - [4.3.2 åŸŸçº¦æŸï¼ˆDomain Constraintsï¼‰](#432-åŸŸçº¦æŸdomain-constraints)
      - [4.3.3 æ£€æŸ¥çº¦æŸï¼ˆCheck Constraintsï¼‰](#433-æ£€æŸ¥çº¦æŸcheck-constraints)
      - [4.3.4 å”¯ä¸€æ€§çº¦æŸï¼ˆUnique Constraintsï¼‰](#434-å”¯ä¸€æ€§çº¦æŸunique-constraints)
      - [4.3.5 éç©ºçº¦æŸï¼ˆNOT NULL Constraintsï¼‰](#435-éç©ºçº¦æŸnot-null-constraints)
      - [4.3.6 å®Œæ•´æ€§çº¦æŸçš„å®Œæ•´åˆ†ç±»](#436-å®Œæ•´æ€§çº¦æŸçš„å®Œæ•´åˆ†ç±»)
  - [äº”ã€èŒƒå¼ç†è®º](#äº”èŒƒå¼ç†è®º)
    - [5.0 èŒƒå¼ç†è®ºæ¦‚è¿°ä¸å†å²èƒŒæ™¯](#50-èŒƒå¼ç†è®ºæ¦‚è¿°ä¸å†å²èƒŒæ™¯)
    - [5.1 ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰](#51-ç¬¬ä¸€èŒƒå¼1nf)
    - [åœºæ™¯1ï¼šå­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿ](#åœºæ™¯1å­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿ)
    - [åœºæ™¯2ï¼šè®¢å•ç³»ç»Ÿ](#åœºæ™¯2è®¢å•ç³»ç»Ÿ)
    - [5.2 ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰](#52-ç¬¬äºŒèŒƒå¼2nf)
    - [5.3 ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰](#53-ç¬¬ä¸‰èŒƒå¼3nf)
    - [5.4 BCNFï¼ˆBoyce-CoddèŒƒå¼ï¼‰](#54-bcnfboyce-coddèŒƒå¼)
    - [5.5 èŒƒå¼å¯¹æ¯”çŸ©é˜µ](#55-èŒƒå¼å¯¹æ¯”çŸ©é˜µ)
  - [å…­ã€å…³ç³»æ¨¡å‹æ•°å­¦åŸºç¡€](#å…­å…³ç³»æ¨¡å‹æ•°å­¦åŸºç¡€)
    - [6.1 é›†åˆè®ºåŸºç¡€](#61-é›†åˆè®ºåŸºç¡€)
    - [6.2 å…³ç³»ä½œä¸ºé›†åˆ](#62-å…³ç³»ä½œä¸ºé›†åˆ)
    - [6.3 å…³ç³»è¿ç®—çš„æ•°å­¦æ€§è´¨](#63-å…³ç³»è¿ç®—çš„æ•°å­¦æ€§è´¨)
  - [ä¸ƒã€å…³ç³»æ¨¡å‹ä¼˜åŠ¿ä¸å±€é™](#ä¸ƒå…³ç³»æ¨¡å‹ä¼˜åŠ¿ä¸å±€é™)
    - [7.1 å…³ç³»æ¨¡å‹ä¼˜åŠ¿](#71-å…³ç³»æ¨¡å‹ä¼˜åŠ¿)
    - [7.2 å…³ç³»æ¨¡å‹å±€é™](#72-å…³ç³»æ¨¡å‹å±€é™)
  - [å…«ã€å…³ç³»æ¨¡å‹ä¸SQLå¯¹åº”](#å…«å…³ç³»æ¨¡å‹ä¸sqlå¯¹åº”)
    - [8.1 å…³ç³»æ¨¡å‹åˆ°SQLæ˜ å°„](#81-å…³ç³»æ¨¡å‹åˆ°sqlæ˜ å°„)
    - [8.2 SQLåˆ°å…³ç³»æ¨¡å‹æ˜ å°„](#82-sqlåˆ°å…³ç³»æ¨¡å‹æ˜ å°„)
  - [ä¹ã€å…³ç³»æ¨¡å‹æ¦‚å¿µå…³ç³»ç½‘ç»œ](#ä¹å…³ç³»æ¨¡å‹æ¦‚å¿µå…³ç³»ç½‘ç»œ)
    - [9.1 æ¦‚å¿µå…³ç³»æ€ç»´å¯¼å›¾](#91-æ¦‚å¿µå…³ç³»æ€ç»´å¯¼å›¾)
    - [9.2 å±æ€§å…³ç³»çŸ©é˜µ](#92-å±æ€§å…³ç³»çŸ©é˜µ)
    - [9.3 æ¦‚å¿µä¾èµ–å…³ç³»å›¾](#93-æ¦‚å¿µä¾èµ–å…³ç³»å›¾)
  - [åã€ç›¸å…³èµ„æº](#åç›¸å…³èµ„æº)
    - [ç›¸å…³æ–‡æ¡£](#ç›¸å…³æ–‡æ¡£)
    - [å¤–éƒ¨èµ„æº](#å¤–éƒ¨èµ„æº)
      - [ç»å…¸è®ºæ–‡](#ç»å…¸è®ºæ–‡)
      - [ç»å…¸æ•™æ](#ç»å…¸æ•™æ)
      - [åœ¨çº¿èµ„æº](#åœ¨çº¿èµ„æº)

---

## ä¸€ã€æ¦‚è¿°

### 1.1 å…³ç³»æ¨¡å‹å®šä¹‰

**å…³ç³»æ¨¡å‹ï¼ˆRelational Modelï¼‰**æ˜¯ç”±åŸƒå¾·åŠ Â·ç§‘å¾·ï¼ˆEdgar F. Coddï¼‰äº1970å¹´æå‡ºçš„æ•°æ®æ¨¡å‹ï¼Œæ˜¯ç°ä»£å…³ç³»æ•°æ®åº“çš„ç†è®ºåŸºç¡€ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³»æ¨¡å‹ = (æ•°æ®ç»“æ„, æ“ä½œé›†åˆ, å®Œæ•´æ€§çº¦æŸ)

å…¶ä¸­ï¼š
æ•°æ®ç»“æ„ = {å…³ç³», å…ƒç»„, å±æ€§, åŸŸ}
æ“ä½œé›†åˆ = {å…³ç³»ä»£æ•°æ“ä½œ, å…³ç³»æ¼”ç®—æ“ä½œ}
å®Œæ•´æ€§çº¦æŸ = {å®ä½“å®Œæ•´æ€§, å‚ç…§å®Œæ•´æ€§, ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§}
```

### 1.2 å…³ç³»æ¨¡å‹å†å²

#### 1.2.1 Coddçš„åŸå§‹è®ºæ–‡ï¼ˆ1970ï¼‰

**å†å²èƒŒæ™¯**ï¼š

1970å¹´ï¼ŒIBMç ”ç©¶å‘˜åŸƒå¾·åŠ Â·ç§‘å¾·ï¼ˆEdgar F. Coddï¼‰åœ¨ã€ŠCommunications of the ACMã€‹æ‚å¿—ä¸Šå‘è¡¨äº†å…·æœ‰é‡Œç¨‹ç¢‘æ„ä¹‰çš„è®ºæ–‡ï¼š"A Relational Model of Data for Large Shared Data Banks"ï¼ˆå¤§å‹å…±äº«æ•°æ®åº“çš„å…³ç³»æ¨¡å‹ï¼‰ã€‚

**è®ºæ–‡æ ¸å¿ƒè´¡çŒ®**ï¼š

1. **æ•°å­¦åŸºç¡€**ï¼šé¦–æ¬¡å°†æ•°æ®ç»„ç»‡å»ºç«‹åœ¨ä¸¥æ ¼çš„æ•°å­¦åŸºç¡€ï¼ˆé›†åˆè®ºå’Œè°“è¯é€»è¾‘ï¼‰ä¹‹ä¸Š
2. **æ•°æ®ç‹¬ç«‹æ€§**ï¼šæå‡ºäº†ç‰©ç†æ•°æ®ç‹¬ç«‹æ€§å’Œé€»è¾‘æ•°æ®ç‹¬ç«‹æ€§çš„æ¦‚å¿µ
3. **å…³ç³»ä»£æ•°**ï¼šå®šä¹‰äº†å…³ç³»ä»£æ•°ä½œä¸ºæ•°æ®æ“ä½œè¯­è¨€
4. **è§„èŒƒåŒ–ç†è®º**ï¼šå¥ å®šäº†åç»­èŒƒå¼ç†è®ºçš„åŸºç¡€

**è®ºæ–‡å½±å“**ï¼š

- å½»åº•æ”¹å˜äº†æ•°æ®åº“é¢†åŸŸçš„å‘å±•æ–¹å‘
- ä¸ºå…³ç³»æ•°æ®åº“ç³»ç»Ÿå¥ å®šäº†ç†è®ºåŸºç¡€
- å¯å‘äº†SQLè¯­è¨€çš„å¼€å‘
- è‡³ä»Šä»æ˜¯æ•°æ®åº“ç†è®ºçš„æ ¸å¿ƒæ–‡çŒ®

**è®ºæ–‡å¼•ç”¨**ï¼š

```text
Codd, E. F. (1970). "A Relational Model of Data for Large Shared Data Banks".
Communications of the ACM, 13(6), 377-387.
```

#### 1.2.2 å…³ç³»æ¨¡å‹å‘å±•å†ç¨‹

**é‡è¦é‡Œç¨‹ç¢‘æ—¶é—´çº¿**ï¼š

```mermaid
timeline
    title å…³ç³»æ¨¡å‹å‘å±•å†ç¨‹
    1970 : Coddå‘è¡¨å…³ç³»æ¨¡å‹è®ºæ–‡
    1974 : SEQUELè¯­è¨€æå‡º
    1976 : System Ré¡¹ç›®å¯åŠ¨
    1979 : Oracleå‘å¸ƒç¬¬ä¸€ä¸ªå•†ä¸šå…³ç³»æ•°æ®åº“
    1981 : IBMå‘å¸ƒSQL/DS
    1982 : IBMå‘å¸ƒDB2
    1986 : SQL-86æ ‡å‡†å‘å¸ƒ
    1989 : SQL-89æ ‡å‡†å‘å¸ƒ
    1992 : SQL-92æ ‡å‡†å‘å¸ƒ
    1999 : SQL:1999æ ‡å‡†å‘å¸ƒ
    2003 : SQL:2003æ ‡å‡†å‘å¸ƒ
    2008 : SQL:2008æ ‡å‡†å‘å¸ƒ
    2011 : SQL:2011æ ‡å‡†å‘å¸ƒ
    2016 : SQL:2016æ ‡å‡†å‘å¸ƒ
    2023 : SQL:2023æ ‡å‡†å‘å¸ƒ
```

**è¯¦ç»†å‘å±•å†ç¨‹**ï¼š

#### 1.2.2.1 1970-1975ï¼šç†è®ºå¥ åŸºæœŸ

- **1970å¹´**ï¼šCoddå‘è¡¨å…³ç³»æ¨¡å‹è®ºæ–‡ï¼Œæå‡ºå…³ç³»æ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µ
- **1971å¹´**ï¼šCoddæå‡ºå…³ç³»ä»£æ•°æ“ä½œç¬¦
- **1972å¹´**ï¼šCoddæå‡ºå…³ç³»æ¼”ç®—ï¼ˆå…ƒç»„å…³ç³»æ¼”ç®—å’ŒåŸŸå…³ç³»æ¼”ç®—ï¼‰
- **1974å¹´**ï¼šIBMçš„Donald Chamberlinå’ŒRaymond Boyceæå‡ºSEQUELï¼ˆStructured English Query Languageï¼‰ï¼Œåæ”¹åä¸ºSQL
- **1975å¹´**ï¼šCoddæå‡ºèŒƒå¼ç†è®ºï¼ˆ1NFã€2NFã€3NFï¼‰

#### 1.2.2.2 1976-1985ï¼šç³»ç»Ÿå®ç°æœŸ

- **1976å¹´**ï¼šIBMå¯åŠ¨System Ré¡¹ç›®ï¼Œå®ç°ç¬¬ä¸€ä¸ªå…³ç³»æ•°æ®åº“ç³»ç»ŸåŸå‹
- **1977å¹´**ï¼šåŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡å¯åŠ¨INGRESé¡¹ç›®
- **1979å¹´**ï¼šOracleå…¬å¸å‘å¸ƒç¬¬ä¸€ä¸ªå•†ä¸šå…³ç³»æ•°æ®åº“ç³»ç»Ÿ
- **1981å¹´**ï¼šIBMå‘å¸ƒSQL/DSï¼ˆSQL/Data Systemï¼‰
- **1982å¹´**ï¼šIBMå‘å¸ƒDB2ï¼Œæˆä¸ºä¼ä¸šçº§å…³ç³»æ•°æ®åº“çš„æ ‡å‡†
- **1983å¹´**ï¼šPostgreSQLçš„å‰èº«POSTGRESé¡¹ç›®å¯åŠ¨

#### 1.2.2.3 1986-1999ï¼šæ ‡å‡†åŒ–æœŸ

- **1986å¹´**ï¼šANSIå‘å¸ƒSQL-86æ ‡å‡†ï¼ˆç¬¬ä¸€ä¸ªSQLæ ‡å‡†ï¼‰
- **1989å¹´**ï¼šISOå‘å¸ƒSQL-89æ ‡å‡†ï¼ˆå¢åŠ äº†å®Œæ•´æ€§çº¦æŸï¼‰
- **1992å¹´**ï¼šISOå‘å¸ƒSQL-92æ ‡å‡†ï¼ˆå¤§å¹…æ‰©å±•ï¼Œæˆä¸ºä¸»æµæ ‡å‡†ï¼‰
- **1999å¹´**ï¼šISOå‘å¸ƒSQL:1999æ ‡å‡†ï¼ˆå¢åŠ äº†é€’å½’æŸ¥è¯¢ã€è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹ç­‰ï¼‰

#### 1.2.2.4 2000-è‡³ä»Šï¼šæŒç»­æ¼”è¿›æœŸ

- **2003å¹´**ï¼šSQL:2003æ ‡å‡†ï¼ˆå¢åŠ äº†çª—å£å‡½æ•°ã€XMLæ”¯æŒç­‰ï¼‰
- **2008å¹´**ï¼šSQL:2008æ ‡å‡†ï¼ˆå¢åŠ äº†MERGEè¯­å¥ã€æ—¶æ€æ•°æ®æ”¯æŒç­‰ï¼‰
- **2011å¹´**ï¼šSQL:2011æ ‡å‡†ï¼ˆå¢å¼ºäº†æ—¶æ€æ•°æ®æ”¯æŒï¼‰
- **2016å¹´**ï¼šSQL:2016æ ‡å‡†ï¼ˆå¢åŠ äº†JSONæ”¯æŒã€è¡Œæ¨¡å¼åŒ¹é…ç­‰ï¼‰
- **2023å¹´**ï¼šSQL:2023æ ‡å‡†ï¼ˆå¢å¼ºäº†JSONåŠŸèƒ½ã€å¤šå€¼æ•°æ®ç±»å‹ç­‰ï¼‰

#### 1.2.3 é‡è¦äººç‰©å’Œè´¡çŒ®

**æ ¸å¿ƒäººç‰©**ï¼š

| äººç‰© | è´¡çŒ® | æ—¶é—´ |
|------|------|------|
| **Edgar F. Codd** | æå‡ºå…³ç³»æ¨¡å‹ç†è®º | 1970 |
| **Donald Chamberlin** | è®¾è®¡SQLè¯­è¨€ | 1974 |
| **Raymond Boyce** | è®¾è®¡SQLè¯­è¨€ï¼Œæå‡ºBCNF | 1974 |
| **Jim Gray** | äº‹åŠ¡å¤„ç†ç†è®ºï¼ŒACIDç‰¹æ€§ | 1970s-1980s |
| **Michael Stonebraker** | INGRESå’ŒPostgreSQLå¼€å‘ | 1970s-è‡³ä»Š |

**Edgar F. Coddï¼ˆ1923-2003ï¼‰**ï¼š

- è‹±å›½è®¡ç®—æœºç§‘å­¦å®¶
- IBMç ”ç©¶å‘˜
- å…³ç³»æ¨¡å‹ç†è®ºçš„åˆ›å§‹äºº
- 1981å¹´è·å¾—å›¾çµå¥–
- ä¸»è¦è´¡çŒ®ï¼š
  - å…³ç³»æ¨¡å‹ç†è®º
  - å…³ç³»ä»£æ•°
  - èŒƒå¼ç†è®º
  - æ•°æ®ç‹¬ç«‹æ€§æ¦‚å¿µ

**Donald Chamberlin**ï¼š

- IBMç ”ç©¶å‘˜
- SQLè¯­è¨€çš„ä¸»è¦è®¾è®¡è€…ä¹‹ä¸€
- ä¸Raymond Boyceå…±åŒè®¾è®¡SEQUELï¼ˆSQLå‰èº«ï¼‰
- ä¸»è¦è´¡çŒ®ï¼š
  - SQLè¯­è¨€è®¾è®¡
  - æŸ¥è¯¢è¯­è¨€ç†è®º

**Raymond Boyceï¼ˆ1947-1974ï¼‰**ï¼š

- IBMç ”ç©¶å‘˜
- SQLè¯­è¨€çš„ä¸»è¦è®¾è®¡è€…ä¹‹ä¸€
- æå‡ºBoyce-CoddèŒƒå¼ï¼ˆBCNFï¼‰
- ä¸å¹¸åœ¨27å²æ—¶å› è„‘åŠ¨è„‰ç˜¤å»ä¸–

#### 1.2.4 å…³ç³»æ¨¡å‹ä¸å…¶ä»–æ•°æ®æ¨¡å‹çš„å¯¹æ¯”

**æ•°æ®æ¨¡å‹æ¼”è¿›**ï¼š

```mermaid
mindmap
  root((æ•°æ®æ¨¡å‹æ¼”è¿›))
    æ—©æœŸæ¨¡å‹
      æ–‡ä»¶ç³»ç»Ÿ
        å¹³é¢æ–‡ä»¶
        å±‚æ¬¡ç»“æ„
      å±‚æ¬¡æ¨¡å‹
        IMSç³»ç»Ÿ
        æ ‘å½¢ç»“æ„
      ç½‘çŠ¶æ¨¡å‹
        CODASYL
        å›¾ç»“æ„
    å…³ç³»æ¨¡å‹
      Codd 1970
      äºŒç»´è¡¨ç»“æ„
      æ•°å­¦åŸºç¡€
    ç°ä»£æ¨¡å‹
      å¯¹è±¡å…³ç³»æ¨¡å‹
        PostgreSQL
        é¢å‘å¯¹è±¡æ‰©å±•
      NoSQLæ¨¡å‹
        æ–‡æ¡£æ¨¡å‹
        é”®å€¼æ¨¡å‹
        åˆ—æ—æ¨¡å‹
        å›¾æ¨¡å‹
```

**æ•°æ®æ¨¡å‹å¯¹æ¯”çŸ©é˜µ**ï¼š

| ç‰¹æ€§ | å±‚æ¬¡æ¨¡å‹ | ç½‘çŠ¶æ¨¡å‹ | å…³ç³»æ¨¡å‹ | å¯¹è±¡å…³ç³»æ¨¡å‹ | NoSQLæ¨¡å‹ |
|------|---------|---------|---------|------------|----------|
| **æ•°æ®ç»“æ„** | æ ‘å½¢ç»“æ„ | å›¾ç»“æ„ | äºŒç»´è¡¨ | è¡¨+å¯¹è±¡ | å¤šæ ·åŒ– |
| **æ•°æ®ç‹¬ç«‹æ€§** | ä½ | ä¸­ | é«˜ | é«˜ | ä¸­ |
| **æŸ¥è¯¢è¯­è¨€** | å¯¼èˆªå¼ | å¯¼èˆªå¼ | å£°æ˜å¼ï¼ˆSQLï¼‰ | SQLæ‰©å±• | å¤šæ ·åŒ– |
| **ç†è®ºåŸºç¡€** | æ—  | æ—  | é›†åˆè®º | é›†åˆè®º+OO | æ—  |
| **æ ‡å‡†åŒ–** | æ—  | CODASYL | SQLæ ‡å‡† | SQLæ ‡å‡†æ‰©å±• | æ—  |
| **å…¸å‹ç³»ç»Ÿ** | IMS | IDMS | Oracle, DB2, PostgreSQL | PostgreSQL | MongoDB, Redis |
| **ä¼˜åŠ¿** | ç®€å• | çµæ´» | æ ‡å‡†åŒ–ã€æ˜“ç”¨ | æ”¯æŒå¤æ‚ç±»å‹ | é«˜æ€§èƒ½ã€å¯æ‰©å±• |
| **åŠ£åŠ¿** | ä¸çµæ´» | å¤æ‚ | æ€§èƒ½é™åˆ¶ | å¤æ‚æ€§ | ç¼ºä¹æ ‡å‡† |

#### 1.2.5 å…³ç³»æ¨¡å‹ä¼˜åŠ¿ä¸å±€é™

**å…³ç³»æ¨¡å‹ä¼˜åŠ¿**ï¼š

1. **æ•°å­¦åŸºç¡€**ï¼šåŸºäºé›†åˆè®ºå’Œè°“è¯é€»è¾‘ï¼Œç†è®ºä¸¥è°¨
2. **æ•°æ®ç‹¬ç«‹æ€§**ï¼šç‰©ç†å’Œé€»è¾‘æ•°æ®ç‹¬ç«‹æ€§ï¼Œæ˜“äºç»´æŠ¤
3. **æ ‡å‡†åŒ–**ï¼šSQLæ ‡å‡†ç»Ÿä¸€ï¼Œæ˜“äºå­¦ä¹ å’Œä½¿ç”¨
4. **å£°æ˜å¼æŸ¥è¯¢**ï¼šç”¨æˆ·åªéœ€æè¿°"åšä»€ä¹ˆ"ï¼Œä¸éœ€è¦æè¿°"æ€ä¹ˆåš"
5. **å®Œæ•´æ€§çº¦æŸ**ï¼šæ”¯æŒå®ä½“å®Œæ•´æ€§ã€å‚ç…§å®Œæ•´æ€§ç­‰çº¦æŸ

**å…³ç³»æ¨¡å‹å±€é™**ï¼š

1. **æ€§èƒ½é™åˆ¶**ï¼šå¯¹äºæŸäº›åº”ç”¨åœºæ™¯ï¼ˆå¦‚å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿï¼‰æ€§èƒ½å¯èƒ½ä¸è¶³
2. **å¤æ‚ç±»å‹æ”¯æŒ**ï¼šä¼ ç»Ÿå…³ç³»æ¨¡å‹å¯¹å¤æ‚æ•°æ®ç±»å‹æ”¯æŒæœ‰é™
3. **æ‰©å±•æ€§**ï¼šæ°´å¹³æ‰©å±•ç›¸å¯¹å›°éš¾
4. **çµæ´»æ€§**ï¼šä¸¥æ ¼çš„æ¨¡å¼å®šä¹‰å¯èƒ½é™åˆ¶æŸäº›åº”ç”¨åœºæ™¯

**å…³ç³»æ¨¡å‹é€‚ç”¨åœºæ™¯**ï¼š

- âœ… äº‹åŠ¡å¤„ç†ç³»ç»Ÿï¼ˆOLTPï¼‰
- âœ… æ•°æ®ä»“åº“ï¼ˆOLAPï¼‰
- âœ… ä¼ä¸šä¿¡æ¯ç³»ç»Ÿ
- âœ… éœ€è¦ACIDä¿è¯çš„åº”ç”¨
- âœ… éœ€è¦æ ‡å‡†åŒ–æŸ¥è¯¢è¯­è¨€çš„åº”ç”¨

**å…³ç³»æ¨¡å‹ä¸é€‚ç”¨åœºæ™¯**ï¼š

- âŒ è¶…å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆå¯èƒ½éœ€è¦NoSQLï¼‰
- âŒ å®æ—¶æµå¤„ç†ï¼ˆå¯èƒ½éœ€è¦æµæ•°æ®åº“ï¼‰
- âŒ å›¾æ•°æ®æŸ¥è¯¢ï¼ˆå¯èƒ½éœ€è¦å›¾æ•°æ®åº“ï¼‰
- âŒ æ–‡æ¡£å­˜å‚¨ï¼ˆå¯èƒ½éœ€è¦æ–‡æ¡£æ•°æ®åº“ï¼‰

### 1.3 å…³ç³»æ¨¡å‹é‡è¦æ€§

å…³ç³»æ¨¡å‹çš„é‡è¦æ€§ä½“ç°åœ¨ï¼š

1. **ç†è®ºåŸºç¡€**ï¼šä¸ºå…³ç³»æ•°æ®åº“æä¾›åšå®çš„æ•°å­¦åŸºç¡€
2. **æ ‡å‡†åŒ–**ï¼šSQLæ ‡å‡†åŸºäºå…³ç³»æ¨¡å‹
3. **å¹¿æ³›åº”ç”¨**ï¼šç°ä»£æ•°æ®åº“ç³»ç»Ÿçš„åŸºç¡€
4. **å½¢å¼åŒ–**ï¼šæ”¯æŒå½¢å¼åŒ–éªŒè¯å’Œè¯æ˜

### 1.4 å…³ç³»æ¨¡å‹çŸ¥è¯†ä½“ç³»æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((å…³ç³»æ¨¡å‹))
    æ ¸å¿ƒæ¦‚å¿µ
      å…³ç³»(Relation)
        äºŒç»´è¡¨ç»“æ„
        å…ƒç»„é›†åˆ
        å±æ€§é›†åˆ
      å…ƒç»„(Tuple)
        è¡Œæ•°æ®
        å±æ€§å€¼åºåˆ—
      å±æ€§(Attribute)
        åˆ—å®šä¹‰
        æ•°æ®ç±»å‹
      åŸŸ(Domain)
        å€¼é›†åˆ
        æ•°æ®ç±»å‹çº¦æŸ
    å½¢å¼åŒ–å®šä¹‰
      å…³ç³»å®šä¹‰
        ç¬›å¡å°”ç§¯å­é›†
        é›†åˆè®ºåŸºç¡€
      å…³ç³»æ¨¡å¼
        å±æ€§é›†åˆ
        åŸŸæ˜ å°„
      æ•°æ®åº“æ¨¡å¼
        å…³ç³»é›†åˆ
        å®Œæ•´æ€§çº¦æŸ
    å®Œæ•´æ€§çº¦æŸ
      å®ä½“å®Œæ•´æ€§
        ä¸»é”®çº¦æŸ
        å”¯ä¸€æ€§çº¦æŸ
      å‚ç…§å®Œæ•´æ€§
        å¤–é”®çº¦æŸ
        å¼•ç”¨çº¦æŸ
      ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§
        æ£€æŸ¥çº¦æŸ
        ä¸šåŠ¡è§„åˆ™
    èŒƒå¼ç†è®º
      ç¬¬ä¸€èŒƒå¼(1NF)
        åŸå­æ€§
        æ— é‡å¤ç»„
      ç¬¬äºŒèŒƒå¼(2NF)
        å®Œå…¨å‡½æ•°ä¾èµ–
        æ¶ˆé™¤éƒ¨åˆ†ä¾èµ–
      ç¬¬ä¸‰èŒƒå¼(3NF)
        æ¶ˆé™¤ä¼ é€’ä¾èµ–
        è§„èŒƒåŒ–
      BCNF
        Boyce-CoddèŒƒå¼
        æ›´å¼ºè§„èŒƒåŒ–
    æ•°å­¦åŸºç¡€
      é›†åˆè®º
        é›†åˆè¿ç®—
        å…³ç³»è¿ç®—
      å…³ç³»è¿ç®—
        é€‰æ‹©æŠ•å½±
        è¿æ¥è¿ç®—
        é›†åˆè¿ç®—
    åº”ç”¨åœºæ™¯
      æ•°æ®å»ºæ¨¡
        ERæ¨¡å‹è½¬æ¢
        è¡¨ç»“æ„è®¾è®¡
      SQLå®ç°
        è¡¨å®šä¹‰
        æŸ¥è¯¢æ“ä½œ
        æ•°æ®å®Œæ•´æ€§
```

---

## äºŒã€å…³ç³»æ¨¡å‹æ ¸å¿ƒæ¦‚å¿µ

### 2.1 å…³ç³»ï¼ˆRelationï¼‰

**å®šä¹‰**ï¼šå…³ç³»æ˜¯ä¸€ä¸ªäºŒç»´è¡¨ï¼Œç”±è¡Œå’Œåˆ—ç»„æˆã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³» R æ˜¯åŸŸ Dâ‚ Ã— Dâ‚‚ Ã— ... Ã— Dâ‚™ çš„å­é›†

R âŠ† Dâ‚ Ã— Dâ‚‚ Ã— ... Ã— Dâ‚™

å…¶ä¸­ï¼š
- Dáµ¢ æ˜¯ç¬¬ i ä¸ªå±æ€§çš„åŸŸ
- n æ˜¯å±æ€§çš„æ•°é‡ï¼ˆå…³ç³»çš„åº¦ï¼‰
```

**ç¤ºä¾‹**ï¼š

```text
å…³ç³»ï¼šå­¦ç”Ÿï¼ˆStudentï¼‰

| å­¦å· | å§“å | å¹´é¾„ | ä¸“ä¸š |
|------|------|------|------|
| 001  | å¼ ä¸‰ | 20   | è®¡ç®—æœº |
| 002  | æå›› | 21   | æ•°å­¦   |
| 003  | ç‹äº” | 19   | ç‰©ç†   |
```

### 2.2 å…ƒç»„ï¼ˆTupleï¼‰

#### 2.2.1 å…ƒç»„çš„å®šä¹‰

**å…ƒç»„ï¼ˆTupleï¼‰**æ˜¯å…³ç³»ä¸­çš„ä¸€è¡Œï¼Œè¡¨ç¤ºä¸€ä¸ªå®ä½“å®ä¾‹ã€‚

**ç›´è§‚ç†è§£**ï¼š

å…ƒç»„æ˜¯å…³ç³»ä¸­çš„ä¸€ä¸ªè®°å½•ï¼ŒåŒ…å«äº†ä¸€ç»„ç›¸å…³çš„å±æ€§å€¼ã€‚

**ç¤ºä¾‹**ï¼š

åœ¨Studentå…³ç³»ä¸­ï¼Œ`(001, å¼ ä¸‰, 20, è®¡ç®—æœº)` æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œè¡¨ç¤ºä¸€ä¸ªå­¦ç”Ÿçš„å®Œæ•´ä¿¡æ¯ã€‚

#### 2.2.2 å…ƒç»„çš„æ•°å­¦å®šä¹‰

**å…ƒç»„çš„æ•°å­¦å®šä¹‰**ï¼š

```latex
è®¾å…³ç³» R æœ‰å±æ€§é›†åˆ A = {Aâ‚, Aâ‚‚, ..., Aâ‚™}ï¼Œå¯¹åº”çš„åŸŸä¸º D = {Dâ‚, Dâ‚‚, ..., Dâ‚™}

å…ƒç»„ t æ˜¯ä¸€ä¸ªæœ‰åºå¯¹åºåˆ—ï¼š
t = (vâ‚, vâ‚‚, ..., vâ‚™)

å…¶ä¸­ï¼š
- váµ¢ âˆˆ Dáµ¢ï¼Œè¡¨ç¤ºå±æ€§ Aáµ¢ çš„å€¼
- t âˆˆ Dâ‚ Ã— Dâ‚‚ Ã— ... Ã— Dâ‚™
```

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…ƒç»„ t æ˜¯ä¸€ä¸ªå‡½æ•°ï¼š
t: A â†’ âˆªáµ¢ Dáµ¢

æ»¡è¶³ï¼š
\forall Aáµ¢ \in A: t(Aáµ¢) \in Dáµ¢
```

#### 2.2.3 å…ƒç»„çš„æ€§è´¨

**å…ƒç»„çš„æ€§è´¨**ï¼š

1. **æœ‰åºæ€§**ï¼šå…ƒç»„ä¸­çš„å±æ€§å€¼æ˜¯æœ‰åºçš„ï¼ˆæŒ‰å±æ€§é¡ºåºï¼‰
2. **å®Œæ•´æ€§**ï¼šå…ƒç»„å¿…é¡»åŒ…å«æ‰€æœ‰å±æ€§çš„å€¼ï¼ˆæˆ–NULLï¼‰
3. **å”¯ä¸€æ€§**ï¼šåœ¨å…³ç³»ä¸­ï¼Œæ¯ä¸ªå…ƒç»„éƒ½æ˜¯å”¯ä¸€çš„

#### 2.2.4 å…ƒç»„çš„å†å²æ¼”è¿›

**æœ¯è¯­æ¥æº**ï¼š

- **æ•°å­¦æ¥æº**ï¼šå…ƒç»„æ¦‚å¿µæ¥æºäºæ•°å­¦ä¸­çš„"æœ‰åºnå…ƒç»„"ï¼ˆn-tupleï¼‰
- **æ•°æ®åº“åº”ç”¨**ï¼šCoddå°†å…ƒç»„æ¦‚å¿µå¼•å…¥å…³ç³»æ¨¡å‹
- **SQLæœ¯è¯­**ï¼šåœ¨SQLä¸­ï¼Œå…ƒç»„é€šå¸¸ç§°ä¸º"è¡Œ"ï¼ˆRowï¼‰æˆ–"è®°å½•"ï¼ˆRecordï¼‰

**æœ¯è¯­å¯¹æ¯”**ï¼š

| æ•°å­¦æœ¯è¯­ | å…³ç³»æ¨¡å‹æœ¯è¯­ | SQLæœ¯è¯­ | è¯´æ˜ |
|---------|------------|---------|------|
| nå…ƒç»„ï¼ˆn-tupleï¼‰ | å…ƒç»„ï¼ˆTupleï¼‰ | è¡Œï¼ˆRowï¼‰ | æœ‰åºçš„å€¼åºåˆ— |
| è®°å½•ï¼ˆRecordï¼‰ | å…ƒç»„ï¼ˆTupleï¼‰ | è¡Œï¼ˆRowï¼‰ | æ•°æ®åº“ä¸­çš„è®°å½• |

### 2.3 å±æ€§ï¼ˆAttributeï¼‰

#### 2.3.1 å±æ€§çš„å®šä¹‰

**å±æ€§ï¼ˆAttributeï¼‰**æ˜¯å…³ç³»ä¸­çš„ä¸€åˆ—ï¼Œè¡¨ç¤ºå®ä½“çš„ç‰¹å¾æˆ–æ€§è´¨ã€‚

**ç›´è§‚ç†è§£**ï¼š

å±æ€§å®šä¹‰äº†å…³ç³»çš„ç»“æ„ï¼Œæè¿°äº†å®ä½“æˆ–å…³ç³»çš„ç‰¹å¾ã€‚

**ç¤ºä¾‹**ï¼š

åœ¨Studentå…³ç³»ä¸­ï¼Œ`å­¦å·`ã€`å§“å`ã€`å¹´é¾„`ã€`ä¸“ä¸š`éƒ½æ˜¯å±æ€§ã€‚

#### 2.3.2 å±æ€§çš„æ•°å­¦å®šä¹‰

**å±æ€§çš„æ•°å­¦å®šä¹‰**ï¼š

```latex
å±æ€§ A æ˜¯ä¸€ä¸ªæœ‰åºå¯¹ (A, D)

å…¶ä¸­ï¼š
- A æ˜¯å±æ€§å
- D æ˜¯å±æ€§çš„åŸŸï¼ˆDomainï¼‰ï¼Œå³å±æ€§å€¼çš„é›†åˆ
```

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
è®¾å…³ç³»æ¨¡å¼ R æœ‰å±æ€§é›†åˆ A = {Aâ‚, Aâ‚‚, ..., Aâ‚™}

æ¯ä¸ªå±æ€§ Aáµ¢ å…³è”ä¸€ä¸ªåŸŸ Dáµ¢ï¼š
Aáµ¢: Dáµ¢

è¡¨ç¤ºå±æ€§ Aáµ¢ çš„å€¼å¿…é¡»æ¥è‡ªåŸŸ Dáµ¢
```

#### 2.3.3 å±æ€§çš„æ€§è´¨

**å±æ€§çš„æ€§è´¨**ï¼š

1. **å”¯ä¸€æ€§**ï¼šåœ¨å…³ç³»æ¨¡å¼ä¸­ï¼Œå±æ€§åå¿…é¡»å”¯ä¸€
2. **ç±»å‹æ€§**ï¼šæ¯ä¸ªå±æ€§éƒ½æœ‰ç‰¹å®šçš„æ•°æ®ç±»å‹ï¼ˆåŸŸï¼‰
3. **åŸå­æ€§**ï¼šå±æ€§çš„å€¼å¿…é¡»æ˜¯åŸå­çš„ï¼ˆä¸å¯å†åˆ†ï¼‰

#### 2.3.4 å±æ€§çš„åˆ†ç±»

**æŒ‰åŠŸèƒ½åˆ†ç±»**ï¼š

1. **ä¸»å±æ€§ï¼ˆPrime Attributeï¼‰**ï¼šå±äºå€™é€‰é”®çš„å±æ€§
2. **éä¸»å±æ€§ï¼ˆNon-Prime Attributeï¼‰**ï¼šä¸å±äºå€™é€‰é”®çš„å±æ€§
3. **é”®å±æ€§ï¼ˆKey Attributeï¼‰**ï¼šå±äºä¸»é”®çš„å±æ€§

**æŒ‰å€¼åˆ†ç±»**ï¼š

1. **å•å€¼å±æ€§ï¼ˆSingle-Valued Attributeï¼‰**ï¼šæ¯ä¸ªå…ƒç»„åªæœ‰ä¸€ä¸ªå€¼
2. **å¤šå€¼å±æ€§ï¼ˆMulti-Valued Attributeï¼‰**ï¼šæ¯ä¸ªå…ƒç»„å¯ä»¥æœ‰å¤šä¸ªå€¼ï¼ˆè¿å1NFï¼‰

**æŒ‰å¯ç©ºæ€§åˆ†ç±»**ï¼š

1. **å¿…éœ€å±æ€§ï¼ˆRequired Attributeï¼‰**ï¼šä¸èƒ½ä¸ºNULL
2. **å¯é€‰å±æ€§ï¼ˆOptional Attributeï¼‰**ï¼šå¯ä»¥ä¸ºNULL

### 2.4 åŸŸï¼ˆDomainï¼‰

**å®šä¹‰**ï¼šåŸŸæ˜¯å±æ€§çš„å–å€¼èŒƒå›´ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
åŸŸ D æ˜¯ä¸€ä¸ªå€¼çš„é›†åˆ

D = {vâ‚, vâ‚‚, ..., vâ‚˜}

å…¶ä¸­ï¼š
- váµ¢ æ˜¯åŸŸä¸­çš„ä¸€ä¸ªå€¼
- m æ˜¯åŸŸä¸­å€¼çš„æ•°é‡ï¼ˆå¯ä»¥æ˜¯æ— é™çš„ï¼‰
```

**ç¤ºä¾‹**ï¼š

```text
åŸŸç¤ºä¾‹ï¼š
- å­¦å·åŸŸï¼š{001, 002, 003, ...}
- å¹´é¾„åŸŸï¼š{0, 1, 2, ..., 150}
- å§“ååŸŸï¼šæ‰€æœ‰å¯èƒ½çš„å­—ç¬¦ä¸²
```

### 2.5 å…³ç³»æ¨¡å¼ï¼ˆRelation Schemaï¼‰

**å®šä¹‰**ï¼šå…³ç³»æ¨¡å¼æ˜¯å…³ç³»çš„ç»“æ„å®šä¹‰ï¼ŒåŒ…æ‹¬å…³ç³»åå’Œå±æ€§åˆ—è¡¨ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³»æ¨¡å¼ R(Aâ‚, Aâ‚‚, ..., Aâ‚™)

å…¶ä¸­ï¼š
- R æ˜¯å…³ç³»å
- Aáµ¢ æ˜¯å±æ€§å
- n æ˜¯å±æ€§çš„æ•°é‡ï¼ˆå…³ç³»çš„åº¦ï¼‰
```

**ç¤ºä¾‹**ï¼š

```text
å…³ç³»æ¨¡å¼ï¼š
Student(å­¦å·, å§“å, å¹´é¾„, ä¸“ä¸š)

å¯¹åº”çš„å…³ç³»å®ä¾‹ï¼š
| å­¦å· | å§“å | å¹´é¾„ | ä¸“ä¸š |
|------|------|------|------|
| 001  | å¼ ä¸‰ | 20   | è®¡ç®—æœº |
```

---

## ä¸‰ã€å…³ç³»æ¨¡å‹å½¢å¼åŒ–å®šä¹‰

### 3.1 å…³ç³»çš„å½¢å¼åŒ–å®šä¹‰

**å…³ç³»çš„å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
è®¾ Dâ‚, Dâ‚‚, ..., Dâ‚™ æ˜¯ n ä¸ªåŸŸ

å…³ç³» R æ˜¯ç¬›å¡å°”ç§¯ Dâ‚ Ã— Dâ‚‚ Ã— ... Ã— Dâ‚™ çš„å­é›†

R âŠ† Dâ‚ Ã— Dâ‚‚ Ã— ... Ã— Dâ‚™

å…³ç³»çš„æ€§è´¨ï¼š
1. å…ƒç»„çš„é¡ºåºæ— å…³ç´§è¦
2. å…ƒç»„å¿…é¡»å”¯ä¸€ï¼ˆæ— é‡å¤ï¼‰
3. å±æ€§çš„é¡ºåºæ— å…³ç´§è¦ï¼ˆé€šè¿‡å±æ€§åå¼•ç”¨ï¼‰
```

**æ•°å­¦è¯æ˜**ï¼š

```latex
\begin{theorem}[å…³ç³»çš„é›†åˆæ€§è´¨]
å…³ç³» R æ˜¯ä¸€ä¸ªé›†åˆï¼Œæ»¡è¶³ï¼š
1. æ— åºæ€§ï¼šå…ƒç»„çš„é¡ºåºä¸å½±å“å…³ç³»
2. å”¯ä¸€æ€§ï¼šå…³ç³»ä¸­æ²¡æœ‰é‡å¤çš„å…ƒç»„
3. ç¡®å®šæ€§ï¼šæ¯ä¸ªå…ƒç»„è¦ä¹ˆå±äºå…³ç³»ï¼Œè¦ä¹ˆä¸å±äº
\end{theorem}

\begin{proof}
1. æ— åºæ€§ï¼šç”±äºå…³ç³»æ˜¯é›†åˆï¼Œé›†åˆçš„å…ƒç´ æ˜¯æ— åºçš„
2. å”¯ä¸€æ€§ï¼šé›†åˆçš„å®šä¹‰è¦æ±‚å…ƒç´ å”¯ä¸€
3. ç¡®å®šæ€§ï¼šé›†åˆçš„æˆå‘˜å…³ç³»æ˜¯ç¡®å®šçš„ï¼ˆäºŒå€¼é€»è¾‘ï¼‰
\end{proof}
```

### 3.2 å…³ç³»æ¨¡å¼çš„å½¢å¼åŒ–å®šä¹‰

**å…³ç³»æ¨¡å¼çš„å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³»æ¨¡å¼ R æ˜¯ä¸€ä¸ªæœ‰åºå¯¹ (R, A)

å…¶ä¸­ï¼š
- R æ˜¯å…³ç³»å
- A = {Aâ‚, Aâ‚‚, ..., Aâ‚™} æ˜¯å±æ€§é›†åˆ

æ¯ä¸ªå±æ€§ Aáµ¢ å…³è”ä¸€ä¸ªåŸŸ Dáµ¢

Aáµ¢: Dáµ¢
```

### 3.3 å…³ç³»æ•°æ®åº“çš„å½¢å¼åŒ–å®šä¹‰

**å…³ç³»æ•°æ®åº“çš„å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³»æ•°æ®åº“ DB = {Râ‚, Râ‚‚, ..., Râ‚˜}

å…¶ä¸­ï¼š
- Ráµ¢ æ˜¯ä¸€ä¸ªå…³ç³»
- m æ˜¯å…³ç³»çš„æ•°é‡

å…³ç³»æ•°æ®åº“æ¨¡å¼ï¼š
Schema(DB) = {Schema(Râ‚), Schema(Râ‚‚), ..., Schema(Râ‚˜)}
```

---

## å››ã€å®Œæ•´æ€§çº¦æŸ

### 4.0 å®Œæ•´æ€§çº¦æŸæ¦‚è¿°

**å®Œæ•´æ€§çº¦æŸï¼ˆIntegrity Constraintsï¼‰**æ˜¯å…³ç³»æ¨¡å‹ä¸­ç”¨äºä¿è¯æ•°æ®æ­£ç¡®æ€§å’Œä¸€è‡´æ€§çš„è§„åˆ™ã€‚

**å®Œæ•´æ€§çº¦æŸçš„åˆ†ç±»**ï¼š

```mermaid
mindmap
  root((å®Œæ•´æ€§çº¦æŸ))
    å®ä½“å®Œæ•´æ€§
      ä¸»é”®çº¦æŸ
        éç©ºçº¦æŸ
        å”¯ä¸€æ€§çº¦æŸ
      å€™é€‰é”®çº¦æŸ
        å”¯ä¸€æ€§çº¦æŸ
    å‚ç…§å®Œæ•´æ€§
      å¤–é”®çº¦æŸ
        å¼•ç”¨å­˜åœ¨æ€§
        çº§è”æ“ä½œ
      è‡ªå¼•ç”¨å®Œæ•´æ€§
    ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§
      åŸŸçº¦æŸ
        æ•°æ®ç±»å‹çº¦æŸ
        å€¼åŸŸçº¦æŸ
      æ£€æŸ¥çº¦æŸ
        æ¡ä»¶çº¦æŸ
        ä¸šåŠ¡è§„åˆ™çº¦æŸ
      å”¯ä¸€æ€§çº¦æŸ
        å•åˆ—å”¯ä¸€
        å¤šåˆ—å”¯ä¸€
      éç©ºçº¦æŸ
        å¿…éœ€å±æ€§
```

**å®Œæ•´æ€§çº¦æŸå¯¹æ¯”çŸ©é˜µ**ï¼š

| çº¦æŸç±»å‹ | ä½œç”¨èŒƒå›´ | æ£€æŸ¥æ—¶æœº | è¿ååæœ | å®ç°æ–¹å¼ |
|---------|---------|---------|---------|---------|
| **å®ä½“å®Œæ•´æ€§** | å•ä¸ªå…³ç³» | æ’å…¥ã€æ›´æ–° | æ‹’ç»æ“ä½œ | PRIMARY KEY |
| **å‚ç…§å®Œæ•´æ€§** | å…³ç³»ä¹‹é—´ | æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ | æ‹’ç»æ“ä½œæˆ–çº§è” | FOREIGN KEY |
| **ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§** | å•ä¸ªå…³ç³» | æ’å…¥ã€æ›´æ–° | æ‹’ç»æ“ä½œ | CHECK, UNIQUE, NOT NULL |

### 4.1 å®ä½“å®Œæ•´æ€§ï¼ˆEntity Integrityï¼‰

#### 4.1.1 å®ä½“å®Œæ•´æ€§çš„å®šä¹‰

**å®ä½“å®Œæ•´æ€§ï¼ˆEntity Integrityï¼‰**æ˜¯Coddåœ¨1970å¹´çš„è®ºæ–‡ä¸­æå‡ºçš„å®Œæ•´æ€§çº¦æŸï¼Œè¦æ±‚ä¸»é”®ä¸èƒ½ä¸ºç©ºï¼Œä¸”å¿…é¡»å”¯ä¸€ã€‚

**Coddçš„åŸå§‹å®šä¹‰**ï¼š

åœ¨Coddçš„åŸå§‹è®ºæ–‡ä¸­ï¼Œå®ä½“å®Œæ•´æ€§è¢«å®šä¹‰ä¸ºï¼š

- æ¯ä¸ªå…³ç³»å¿…é¡»æœ‰ä¸€ä¸ªä¸»é”®
- ä¸»é”®çš„æ¯ä¸ªå±æ€§éƒ½ä¸èƒ½ä¸ºNULL
- ä¸»é”®çš„å€¼å¿…é¡»å”¯ä¸€

#### 4.1.2 å®ä½“å®Œæ•´æ€§çš„å½¢å¼åŒ–å®šä¹‰

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
è®¾å…³ç³» R çš„ä¸»é”®ä¸º K = {Aâ‚, Aâ‚‚, ..., Aâ‚–}

å®ä½“å®Œæ•´æ€§çº¦æŸï¼š
\forall t \in R:
  \forall Aáµ¢ \in K: t[Aáµ¢] \neq NULL
  \land \nexists t' \in R, t' \neq t: t'[K] = t[K]
```

**è¯¦ç»†è¯´æ˜**ï¼š

1. **éç©ºçº¦æŸ**ï¼šä¸»é”®çš„æ¯ä¸ªå±æ€§éƒ½ä¸èƒ½ä¸ºNULL

   ```latex
   \forall t \in R, \forall Aáµ¢ \in K: t[Aáµ¢] \neq NULL
   ```

2. **å”¯ä¸€æ€§çº¦æŸ**ï¼šä¸»é”®çš„å€¼å¿…é¡»å”¯ä¸€

   ```latex
   \forall tâ‚, tâ‚‚ \in R, tâ‚ \neq tâ‚‚: tâ‚[K] \neq tâ‚‚[K]
   ```

#### 4.1.3 å®ä½“å®Œæ•´æ€§çš„æ•°å­¦è¯æ˜

**å®šç†**ï¼š

```latex
\begin{theorem}[å®ä½“å®Œæ•´æ€§å¿…è¦æ€§]
å¦‚æœä¸»é”®å¯ä»¥ä¸ºç©ºæˆ–é‡å¤ï¼Œåˆ™æ— æ³•å”¯ä¸€æ ‡è¯†å…ƒç»„ã€‚
\end{theorem}
```

**è¯æ˜**ï¼š

```latex
\begin{proof}
1. éç©ºæ€§å¿…è¦æ€§ï¼š
   å‡è®¾ä¸»é”® K å¯ä»¥ä¸ºç©ºï¼š
   - å¦‚æœ t[K] = NULLï¼Œåˆ™æ— æ³•åŒºåˆ†ä¸åŒçš„å…ƒç»„
   - è¿åå…³ç³»çš„å”¯ä¸€æ€§è¦æ±‚
   - æ— æ³•å”¯ä¸€æ ‡è¯†å®ä½“

   å› æ­¤ï¼Œä¸»é”®å¿…é¡»éç©ºã€‚

2. å”¯ä¸€æ€§å¿…è¦æ€§ï¼š
   å‡è®¾ä¸»é”® K å¯ä»¥é‡å¤ï¼š
   - å¦‚æœ tâ‚[K] = tâ‚‚[K]ï¼Œåˆ™æ— æ³•å”¯ä¸€æ ‡è¯†å…ƒç»„
   - è¿åä¸»é”®çš„å”¯ä¸€æ€§è¦æ±‚
   - æ— æ³•åŒºåˆ†ä¸åŒçš„å®ä½“

   å› æ­¤ï¼Œä¸»é”®å¿…é¡»å”¯ä¸€ã€‚
\end{proof}
```

#### 4.1.4 å®ä½“å®Œæ•´æ€§çš„å†å²æ¼”è¿›

**å†å²èƒŒæ™¯**ï¼š

- **1970å¹´**ï¼šCoddåœ¨å…³ç³»æ¨¡å‹è®ºæ–‡ä¸­é¦–æ¬¡æå‡ºå®ä½“å®Œæ•´æ€§æ¦‚å¿µ
- **1986å¹´**ï¼šSQL-86æ ‡å‡†æ­£å¼å®šä¹‰äº†PRIMARY KEYçº¦æŸ
- **1992å¹´**ï¼šSQL-92æ ‡å‡†å¢å¼ºäº†å®ä½“å®Œæ•´æ€§çš„å®šä¹‰

**SQLå®ç°**ï¼š

```sql
-- SQLä¸­çš„å®ä½“å®Œæ•´æ€§å®ç°
CREATE TABLE Student (
    student_id INTEGER PRIMARY KEY,  -- ä¸»é”®çº¦æŸ
    name VARCHAR(100) NOT NULL,
    age INTEGER
);

-- å¤åˆä¸»é”®
CREATE TABLE Enrollment (
    student_id INTEGER,
    course_id INTEGER,
    PRIMARY KEY (student_id, course_id)  -- å¤åˆä¸»é”®
);
```

#### 4.1.5 å®ä½“å®Œæ•´æ€§çš„åº”ç”¨åœºæ™¯

**åœºæ™¯ç¤ºä¾‹ï¼šå­¦ç”Ÿç®¡ç†ç³»ç»Ÿ**:

```sql
-- å­¦ç”Ÿè¡¨ï¼šå­¦å·ä½œä¸ºä¸»é”®
CREATE TABLE Student (
    student_id INTEGER PRIMARY KEY,  -- å®ä½“å®Œæ•´æ€§ï¼šå­¦å·å”¯ä¸€ä¸”éç©º
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE
);

-- æ’å…¥æ•°æ®
INSERT INTO Student VALUES (1, 'Alice', 'alice@example.com');  -- âœ… æˆåŠŸ
INSERT INTO Student VALUES (1, 'Bob', 'bob@example.com');      -- âŒ è¿åå”¯ä¸€æ€§
INSERT INTO Student VALUES (NULL, 'Charlie', 'charlie@example.com');  -- âŒ è¿åéç©ºæ€§
```

### 4.2 å‚ç…§å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰

#### 4.2.1 å‚ç…§å®Œæ•´æ€§çš„å®šä¹‰

**å‚ç…§å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰**æ˜¯Coddåœ¨1970å¹´çš„è®ºæ–‡ä¸­æå‡ºçš„å®Œæ•´æ€§çº¦æŸï¼Œè¦æ±‚å¤–é”®å€¼å¿…é¡»åœ¨è¢«å¼•ç”¨å…³ç³»çš„ä¸»é”®ä¸­å­˜åœ¨ã€‚

**Coddçš„åŸå§‹å®šä¹‰**ï¼š

åœ¨Coddçš„åŸå§‹è®ºæ–‡ä¸­ï¼Œå‚ç…§å®Œæ•´æ€§è¢«å®šä¹‰ä¸ºï¼š

- å¦‚æœå…³ç³»Râ‚çš„å±æ€§Aå¼•ç”¨å…³ç³»Râ‚‚çš„ä¸»é”®K
- åˆ™Râ‚ä¸­æ¯ä¸ªå…ƒç»„çš„Aå€¼å¿…é¡»åœ¨Râ‚‚çš„Kå€¼ä¸­å­˜åœ¨ï¼Œæˆ–è€…ä¸ºNULL

#### 4.2.2 å‚ç…§å®Œæ•´æ€§çš„å½¢å¼åŒ–å®šä¹‰

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
è®¾å…³ç³» Râ‚ æœ‰å¤–é”® FK å¼•ç”¨å…³ç³» Râ‚‚ çš„ä¸»é”® PK

å‚ç…§å®Œæ•´æ€§çº¦æŸï¼š
\forall tâ‚ \in Râ‚:
  tâ‚[FK] = NULL \lor \exists tâ‚‚ \in Râ‚‚: tâ‚‚[PK] = tâ‚[FK]
```

**è¯¦ç»†è¯´æ˜**ï¼š

1. **å¼•ç”¨å­˜åœ¨æ€§**ï¼šå¤–é”®å€¼å¿…é¡»åœ¨è¢«å¼•ç”¨å…³ç³»çš„ä¸»é”®ä¸­å­˜åœ¨

   ```latex
   \forall tâ‚ \in Râ‚, tâ‚[FK] \neq NULL:
     \exists tâ‚‚ \in Râ‚‚: tâ‚‚[PK] = tâ‚[FK]
   ```

2. **NULLå€¼å¤„ç†**ï¼šå¤–é”®å¯ä»¥ä¸ºNULLï¼ˆè¡¨ç¤ºæ— å¼•ç”¨ï¼‰

   ```latex
   \forall tâ‚ \in Râ‚: tâ‚[FK] = NULL \lor \exists tâ‚‚ \in Râ‚‚: tâ‚‚[PK] = tâ‚[FK]
   ```

#### 4.2.3 å‚ç…§å®Œæ•´æ€§çš„æ•°å­¦è¯æ˜

**å®šç†**ï¼š

```latex
\begin{theorem}[å‚ç…§å®Œæ•´æ€§ä¸€è‡´æ€§]
å‚ç…§å®Œæ•´æ€§ç¡®ä¿å…³ç³»ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚
\end{theorem}
```

**è¯æ˜**ï¼š

```latex
\begin{proof}
å‡è®¾å¤–é”® FK çš„å€¼ä¸åœ¨è¢«å¼•ç”¨å…³ç³»çš„ä¸»é”®ä¸­ï¼š
- å­˜åœ¨"æ‚¬ç©ºå¼•ç”¨"ï¼ˆdangling referenceï¼‰
- ç ´åå…³ç³»ä¹‹é—´çš„é€»è¾‘ä¸€è‡´æ€§
- æ— æ³•ä¿è¯æ•°æ®çš„å®Œæ•´æ€§
- æŸ¥è¯¢æ—¶å¯èƒ½å‡ºç°é€»è¾‘é”™è¯¯

å› æ­¤ï¼Œå‚ç…§å®Œæ•´æ€§æ˜¯å¿…è¦çš„ã€‚
\end{proof}
```

#### 4.2.4 å‚ç…§å®Œæ•´æ€§çš„çº§è”æ“ä½œ

**çº§è”æ“ä½œç±»å‹**ï¼š

| æ“ä½œ | CASCADE | SET NULL | SET DEFAULT | RESTRICT | NO ACTION |
|------|---------|----------|-------------|----------|-----------|
| **DELETE** | åˆ é™¤è¢«å¼•ç”¨è¡Œæ—¶ï¼Œåˆ é™¤å¼•ç”¨è¡Œ | åˆ é™¤è¢«å¼•ç”¨è¡Œæ—¶ï¼Œè®¾ç½®å¤–é”®ä¸ºNULL | åˆ é™¤è¢«å¼•ç”¨è¡Œæ—¶ï¼Œè®¾ç½®å¤–é”®ä¸ºé»˜è®¤å€¼ | ç¦æ­¢åˆ é™¤è¢«å¼•ç”¨è¡Œ | ç¦æ­¢åˆ é™¤è¢«å¼•ç”¨è¡Œ |
| **UPDATE** | æ›´æ–°è¢«å¼•ç”¨ä¸»é”®æ—¶ï¼Œæ›´æ–°å¤–é”® | æ›´æ–°è¢«å¼•ç”¨ä¸»é”®æ—¶ï¼Œè®¾ç½®å¤–é”®ä¸ºNULL | æ›´æ–°è¢«å¼•ç”¨ä¸»é”®æ—¶ï¼Œè®¾ç½®å¤–é”®ä¸ºé»˜è®¤å€¼ | ç¦æ­¢æ›´æ–°è¢«å¼•ç”¨ä¸»é”® | ç¦æ­¢æ›´æ–°è¢«å¼•ç”¨ä¸»é”® |

**SQLå®ç°**ï¼š

```sql
-- å‚ç…§å®Œæ•´æ€§å®ç°
CREATE TABLE Course (
    course_id INTEGER PRIMARY KEY,
    course_name VARCHAR(100)
);

CREATE TABLE Enrollment (
    student_id INTEGER,
    course_id INTEGER,
    FOREIGN KEY (course_id) REFERENCES Course(course_id)
        ON DELETE CASCADE      -- åˆ é™¤è¯¾ç¨‹æ—¶ï¼Œåˆ é™¤é€‰è¯¾è®°å½•
        ON UPDATE CASCADE      -- æ›´æ–°è¯¾ç¨‹IDæ—¶ï¼Œæ›´æ–°é€‰è¯¾è®°å½•
);
```

#### 4.2.5 å‚ç…§å®Œæ•´æ€§çš„å†å²æ¼”è¿›

**å†å²èƒŒæ™¯**ï¼š

- **1970å¹´**ï¼šCoddåœ¨å…³ç³»æ¨¡å‹è®ºæ–‡ä¸­é¦–æ¬¡æå‡ºå‚ç…§å®Œæ•´æ€§æ¦‚å¿µ
- **1986å¹´**ï¼šSQL-86æ ‡å‡†æ­£å¼å®šä¹‰äº†FOREIGN KEYçº¦æŸ
- **1992å¹´**ï¼šSQL-92æ ‡å‡†å¢åŠ äº†çº§è”æ“ä½œï¼ˆCASCADEã€SET NULLç­‰ï¼‰

**åº”ç”¨åœºæ™¯**ï¼š

```sql
-- åœºæ™¯ï¼šå­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿ
CREATE TABLE Student (
    student_id INTEGER PRIMARY KEY,
    name VARCHAR(100)
);

CREATE TABLE Course (
    course_id INTEGER PRIMARY KEY,
    course_name VARCHAR(100)
);

CREATE TABLE Enrollment (
    student_id INTEGER,
    course_id INTEGER,
    FOREIGN KEY (student_id) REFERENCES Student(student_id),
    FOREIGN KEY (course_id) REFERENCES Course(course_id),
    PRIMARY KEY (student_id, course_id)
);

-- æ’å…¥æ•°æ®
INSERT INTO Student VALUES (1, 'Alice');
INSERT INTO Course VALUES (101, 'Database');
INSERT INTO Enrollment VALUES (1, 101);  -- âœ… æˆåŠŸ

-- è¿åå‚ç…§å®Œæ•´æ€§
INSERT INTO Enrollment VALUES (999, 101);  -- âŒ å­¦ç”Ÿ999ä¸å­˜åœ¨
INSERT INTO Enrollment VALUES (1, 999);    -- âŒ è¯¾ç¨‹999ä¸å­˜åœ¨
```

### 4.3 ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§ï¼ˆUser-Defined Integrityï¼‰

#### 4.3.1 ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§çš„å®šä¹‰

**ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§ï¼ˆUser-Defined Integrityï¼‰**æ˜¯ç”¨æˆ·æ ¹æ®åº”ç”¨éœ€æ±‚å®šä¹‰çš„çº¦æŸï¼Œç”¨äºä¿è¯æ•°æ®çš„ä¸šåŠ¡æ­£ç¡®æ€§ã€‚

**åˆ†ç±»**ï¼š

1. **åŸŸçº¦æŸï¼ˆDomain Constraintsï¼‰**ï¼šé™åˆ¶å±æ€§çš„å–å€¼èŒƒå›´
2. **æ£€æŸ¥çº¦æŸï¼ˆCheck Constraintsï¼‰**ï¼šé™åˆ¶å±æ€§å€¼å¿…é¡»æ»¡è¶³çš„æ¡ä»¶
3. **å”¯ä¸€æ€§çº¦æŸï¼ˆUnique Constraintsï¼‰**ï¼šä¿è¯å±æ€§å€¼çš„å”¯ä¸€æ€§
4. **éç©ºçº¦æŸï¼ˆNOT NULL Constraintsï¼‰**ï¼šä¿è¯å±æ€§å€¼ä¸ä¸ºç©º

#### 4.3.2 åŸŸçº¦æŸï¼ˆDomain Constraintsï¼‰

**å®šä¹‰**ï¼šåŸŸçº¦æŸé™åˆ¶å±æ€§çš„å–å€¼èŒƒå›´ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
è®¾å±æ€§ A çš„åŸŸä¸º D

åŸŸçº¦æŸï¼š
\forall t \in R: t[A] \in D \lor t[A] = NULL
```

**SQLå®ç°**ï¼š

```sql
-- åŸŸçº¦æŸç¤ºä¾‹
CREATE TABLE Student (
    student_id INTEGER PRIMARY KEY,
    name VARCHAR(100),
    age INTEGER CHECK (age >= 0 AND age <= 150),  -- åŸŸçº¦æŸï¼šå¹´é¾„èŒƒå›´
    email VARCHAR(100) CHECK (email LIKE '%@%')    -- åŸŸçº¦æŸï¼šé‚®ç®±æ ¼å¼
);
```

#### 4.3.3 æ£€æŸ¥çº¦æŸï¼ˆCheck Constraintsï¼‰

**å®šä¹‰**ï¼šæ£€æŸ¥çº¦æŸé™åˆ¶å±æ€§å€¼å¿…é¡»æ»¡è¶³çš„æ¡ä»¶ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
è®¾æ£€æŸ¥çº¦æŸ C æ˜¯ä¸€ä¸ªè°“è¯

C: R â†’ {True, False}

çº¦æŸæ¡ä»¶ï¼š
\forall t \in R: C(t) = True
```

**SQLå®ç°**ï¼š

```sql
-- æ£€æŸ¥çº¦æŸç¤ºä¾‹
CREATE TABLE Account (
    account_id INTEGER PRIMARY KEY,
    balance DECIMAL(10,2) CHECK (balance >= 0),  -- ä½™é¢ä¸èƒ½ä¸ºè´Ÿ
    account_type VARCHAR(20) CHECK (account_type IN ('Savings', 'Checking'))
);
```

#### 4.3.4 å”¯ä¸€æ€§çº¦æŸï¼ˆUnique Constraintsï¼‰

**å®šä¹‰**ï¼šå”¯ä¸€æ€§çº¦æŸä¿è¯å±æ€§å€¼çš„å”¯ä¸€æ€§ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
è®¾å±æ€§é›†åˆ U = {Aâ‚, Aâ‚‚, ..., Aâ‚–} æœ‰å”¯ä¸€æ€§çº¦æŸ

å”¯ä¸€æ€§çº¦æŸï¼š
\forall tâ‚, tâ‚‚ \in R, tâ‚ \neq tâ‚‚: tâ‚[U] \neq tâ‚‚[U]
```

**SQLå®ç°**ï¼š

```sql
-- å”¯ä¸€æ€§çº¦æŸç¤ºä¾‹
CREATE TABLE Student (
    student_id INTEGER PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100) UNIQUE,  -- é‚®ç®±å”¯ä¸€
    phone VARCHAR(20) UNIQUE    -- ç”µè¯å”¯ä¸€
);

-- å¤åˆå”¯ä¸€æ€§çº¦æŸ
CREATE TABLE Enrollment (
    student_id INTEGER,
    course_id INTEGER,
    semester VARCHAR(20),
    UNIQUE (student_id, course_id, semester)  -- å¤åˆå”¯ä¸€æ€§
);
```

#### 4.3.5 éç©ºçº¦æŸï¼ˆNOT NULL Constraintsï¼‰

**å®šä¹‰**ï¼šéç©ºçº¦æŸä¿è¯å±æ€§å€¼ä¸ä¸ºç©ºã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
è®¾å±æ€§ A æœ‰éç©ºçº¦æŸ

éç©ºçº¦æŸï¼š
\forall t \in R: t[A] \neq NULL
```

**SQLå®ç°**ï¼š

```sql
-- éç©ºçº¦æŸç¤ºä¾‹
CREATE TABLE Student (
    student_id INTEGER PRIMARY KEY,
    name VARCHAR(100) NOT NULL,      -- å§“åä¸èƒ½ä¸ºç©º
    email VARCHAR(100) NOT NULL,     -- é‚®ç®±ä¸èƒ½ä¸ºç©º
    phone VARCHAR(20)                -- ç”µè¯å¯ä»¥ä¸ºç©º
);
```

#### 4.3.6 å®Œæ•´æ€§çº¦æŸçš„å®Œæ•´åˆ†ç±»

**å®Œæ•´æ€§çº¦æŸåˆ†ç±»ä½“ç³»**ï¼š

```mermaid
mindmap
  root((å®Œæ•´æ€§çº¦æŸ))
    å®ä½“å®Œæ•´æ€§
      ä¸»é”®çº¦æŸ
        å•åˆ—ä¸»é”®
        å¤åˆä¸»é”®
      å€™é€‰é”®çº¦æŸ
    å‚ç…§å®Œæ•´æ€§
      å¤–é”®çº¦æŸ
        å•åˆ—å¤–é”®
        å¤åˆå¤–é”®
      çº§è”æ“ä½œ
        CASCADE
        SET NULL
        SET DEFAULT
        RESTRICT
        NO ACTION
    ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§
      åŸŸçº¦æŸ
        æ•°æ®ç±»å‹çº¦æŸ
        å€¼åŸŸçº¦æŸ
        æ ¼å¼çº¦æŸ
      æ£€æŸ¥çº¦æŸ
        å•åˆ—æ£€æŸ¥
        å¤šåˆ—æ£€æŸ¥
        æ¡ä»¶è¡¨è¾¾å¼
      å”¯ä¸€æ€§çº¦æŸ
        å•åˆ—å”¯ä¸€
        å¤åˆå”¯ä¸€
      éç©ºçº¦æŸ
        å¿…éœ€å±æ€§
```

**å®Œæ•´æ€§çº¦æŸå¯¹æ¯”çŸ©é˜µï¼ˆè¯¦ç»†ï¼‰**ï¼š

| çº¦æŸç±»å‹ | å­ç±»å‹ | SQLè¯­æ³• | æ£€æŸ¥æ—¶æœº | è¿åå¤„ç† | ç¤ºä¾‹ |
|---------|--------|---------|---------|---------|------|
| **å®ä½“å®Œæ•´æ€§** | ä¸»é”®çº¦æŸ | PRIMARY KEY | æ’å…¥ã€æ›´æ–° | æ‹’ç»æ“ä½œ | `PRIMARY KEY (id)` |
| **å®ä½“å®Œæ•´æ€§** | å€™é€‰é”®çº¦æŸ | UNIQUE | æ’å…¥ã€æ›´æ–° | æ‹’ç»æ“ä½œ | `UNIQUE (email)` |
| **å‚ç…§å®Œæ•´æ€§** | å¤–é”®çº¦æŸ | FOREIGN KEY | æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ | æ‹’ç»æˆ–çº§è” | `FOREIGN KEY (cid) REFERENCES Course(id)` |
| **ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§** | åŸŸçº¦æŸ | CHECK | æ’å…¥ã€æ›´æ–° | æ‹’ç»æ“ä½œ | `CHECK (age >= 0)` |
| **ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§** | å”¯ä¸€æ€§çº¦æŸ | UNIQUE | æ’å…¥ã€æ›´æ–° | æ‹’ç»æ“ä½œ | `UNIQUE (email)` |
| **ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§** | éç©ºçº¦æŸ | NOT NULL | æ’å…¥ã€æ›´æ–° | æ‹’ç»æ“ä½œ | `NOT NULL` |

---

## äº”ã€èŒƒå¼ç†è®º

### 5.0 èŒƒå¼ç†è®ºæ¦‚è¿°ä¸å†å²èƒŒæ™¯

#### 5.0.1 èŒƒå¼ç†è®ºçš„å†å²æ¼”è¿›

**èŒƒå¼ç†è®ºçš„å‘å±•å†ç¨‹**ï¼š

- **1970å¹´**ï¼šCoddåœ¨å…³ç³»æ¨¡å‹è®ºæ–‡ä¸­é¦–æ¬¡æå‡ºè§„èŒƒåŒ–æ¦‚å¿µ
- **1971å¹´**ï¼šCoddæå‡ºç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ã€ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ã€ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰
- **1974å¹´**ï¼šRaymond Boyceå’ŒCoddæå‡ºBoyce-CoddèŒƒå¼ï¼ˆBCNFï¼‰
- **1977å¹´**ï¼šFaginæå‡ºç¬¬å››èŒƒå¼ï¼ˆ4NFï¼‰
- **1979å¹´**ï¼šFaginæå‡ºç¬¬äº”èŒƒå¼ï¼ˆ5NFï¼Œä¹Ÿç§°ä¸ºæŠ•å½±-è¿æ¥èŒƒå¼ï¼‰
- **1980å¹´ä»£**ï¼šèŒƒå¼ç†è®ºè¿›ä¸€æ­¥å®Œå–„ï¼Œæˆä¸ºæ•°æ®åº“è®¾è®¡çš„æ ‡å‡†æ–¹æ³•

**é‡è¦äººç‰©**ï¼š

| äººç‰© | è´¡çŒ® | æ—¶é—´ |
|------|------|------|
| **Edgar F. Codd** | æå‡º1NFã€2NFã€3NF | 1971 |
| **Raymond Boyce** | ä¸Coddå…±åŒæå‡ºBCNF | 1974 |
| **Ronald Fagin** | æå‡º4NFã€5NF | 1977, 1979 |

**èŒƒå¼ç†è®ºçš„ç›®çš„**ï¼š

1. **æ¶ˆé™¤æ•°æ®å†—ä½™**ï¼šå‡å°‘æ•°æ®å­˜å‚¨ç©ºé—´
2. **é¿å…æ›´æ–°å¼‚å¸¸**ï¼šé˜²æ­¢æ•°æ®ä¸ä¸€è‡´
3. **ç®€åŒ–æ•°æ®ç»“æ„**ï¼šæé«˜æ•°æ®æ¨¡å‹çš„æ¸…æ™°åº¦
4. **ä¿è¯æ•°æ®å®Œæ•´æ€§**ï¼šç¡®ä¿æ•°æ®çš„æ­£ç¡®æ€§

#### 5.0.2 èŒƒå¼ç†è®ºæ¦‚è¿°ä¸å†³ç­–æ ‘

**èŒƒå¼é€‰æ‹©å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[å¼€å§‹è®¾è®¡è¡¨ç»“æ„] --> B{æ˜¯å¦æ»¡è¶³1NF?}
    B -->|å¦| C[æ¶ˆé™¤é‡å¤ç»„<br/>ç¡®ä¿åŸå­æ€§]
    C --> B
    B -->|æ˜¯| D{æ˜¯å¦æ»¡è¶³2NF?}
    D -->|å¦| E[æ¶ˆé™¤éƒ¨åˆ†å‡½æ•°ä¾èµ–<br/>åˆ†è§£è¡¨ç»“æ„]
    E --> D
    D -->|æ˜¯| F{æ˜¯å¦æ»¡è¶³3NF?}
    F -->|å¦| G[æ¶ˆé™¤ä¼ é€’å‡½æ•°ä¾èµ–<br/>è¿›ä¸€æ­¥åˆ†è§£]
    G --> F
    F -->|æ˜¯| H{æ˜¯å¦éœ€è¦BCNF?}
    H -->|æ˜¯| I{æ˜¯å¦æ»¡è¶³BCNF?}
    I -->|å¦| J[æ¶ˆé™¤æ‰€æœ‰å‡½æ•°ä¾èµ–<br/>å®Œå…¨è§„èŒƒåŒ–]
    J --> I
    I -->|æ˜¯| K[å®Œæˆè§„èŒƒåŒ–]
    H -->|å¦| K
    K --> L[è€ƒè™‘æ€§èƒ½ä¼˜åŒ–<br/>å¿…è¦æ—¶åè§„èŒƒåŒ–]
```

**èŒƒå¼å¯¹æ¯”çŸ©é˜µ**ï¼š

| èŒƒå¼ | æ¶ˆé™¤é—®é¢˜ | å‡½æ•°ä¾èµ–è¦æ±‚ | å†—ä½™åº¦ | æŸ¥è¯¢æ€§èƒ½ | æ›´æ–°æ€§èƒ½ | é€‚ç”¨åœºæ™¯ |
|------|---------|-------------|--------|---------|---------|---------|
| **1NF** | é‡å¤ç»„ | æ— è¦æ±‚ | é«˜ | ä¸­ | å·® | åŸºç¡€è¦æ±‚ |
| **2NF** | éƒ¨åˆ†ä¾èµ– | å®Œå…¨å‡½æ•°ä¾èµ– | ä¸­ | ä¸­ | ä¸­ | ä¸€èˆ¬åº”ç”¨ |
| **3NF** | ä¼ é€’ä¾èµ– | æ— ä¼ é€’ä¾èµ– | ä½ | ä¸­ | å¥½ | æ¨èæ ‡å‡† |
| **BCNF** | æ‰€æœ‰ä¾èµ– | æ‰€æœ‰ä¾èµ–éƒ½æ˜¯å€™é€‰é”® | æœ€ä½ | ä¸­ | æœ€å¥½ | ä¸¥æ ¼è§„èŒƒ |

**èŒƒå¼åº”ç”¨åœºæ™¯å¯¹æ¯”**ï¼š

| åœºæ™¯ | æ¨èèŒƒå¼ | ç†ç”± | ç¤ºä¾‹ |
|------|---------|------|------|
| **OLTPç³»ç»Ÿ** | 3NF | å‡å°‘å†—ä½™ï¼Œä¿è¯ä¸€è‡´æ€§ | è®¢å•ç³»ç»Ÿã€ç”¨æˆ·ç³»ç»Ÿ |
| **OLAPç³»ç»Ÿ** | 1NF-2NF | å…è®¸å†—ä½™ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ | æ•°æ®ä»“åº“ã€æŠ¥è¡¨ç³»ç»Ÿ |
| **é«˜å¹¶å‘ç³»ç»Ÿ** | 3NF | å‡å°‘æ›´æ–°å†²çª | ç”µå•†ç³»ç»Ÿã€æ”¯ä»˜ç³»ç»Ÿ |
| **åˆ†æç³»ç»Ÿ** | æ˜Ÿå‹/é›ªèŠ±æ¨¡å¼ | ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ | BIç³»ç»Ÿã€æ•°æ®åˆ†æ |

### 5.1 ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰

**å®šä¹‰**ï¼šå…³ç³»çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯åŸå­çš„ï¼ˆä¸å¯å†åˆ†ï¼‰ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³» R æ»¡è¶³ 1NF âŸº
\forall Aáµ¢ \in Attributes(R), \forall t \in R:
  t[Aáµ¢] æ˜¯åŸå­å€¼ï¼ˆä¸æ˜¯é›†åˆã€åˆ—è¡¨æˆ–åµŒå¥—ç»“æ„ï¼‰
```

**åœºæ™¯ç¤ºä¾‹**ï¼š

### åœºæ™¯1ï¼šå­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿ

```text
âŒ è¿å1NFçš„è®¾è®¡ï¼š
å­¦ç”Ÿè¡¨ï¼š
| å­¦å· | å§“å | è¯¾ç¨‹ |
|------|------|------|
| 001  | å¼ ä¸‰ | æ•°å­¦,ç‰©ç†,åŒ–å­¦ |

é—®é¢˜ï¼š
- è¯¾ç¨‹å±æ€§åŒ…å«å¤šä¸ªå€¼
- æ— æ³•å¯¹å•ä¸ªè¯¾ç¨‹è¿›è¡ŒæŸ¥è¯¢
- æ— æ³•å»ºç«‹è¯¾ç¨‹ä¸å­¦ç”Ÿçš„å…³è”ç´¢å¼•

âœ… ç¬¦åˆ1NFçš„è®¾è®¡ï¼š
å­¦ç”Ÿè¡¨ï¼š
| å­¦å· | å§“å |
|------|------|
| 001  | å¼ ä¸‰ |

é€‰è¯¾è¡¨ï¼š
| å­¦å· | è¯¾ç¨‹ |
|------|------|
| 001  | æ•°å­¦ |
| 001  | ç‰©ç† |
| 001  | åŒ–å­¦ |

ä¼˜åŠ¿ï¼š
- æ¯ä¸ªå±æ€§éƒ½æ˜¯åŸå­å€¼
- å¯ä»¥å•ç‹¬æŸ¥è¯¢è¯¾ç¨‹
- å¯ä»¥å»ºç«‹ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
```

### åœºæ™¯2ï¼šè®¢å•ç³»ç»Ÿ

```text
âŒ è¿å1NFçš„è®¾è®¡ï¼š
è®¢å•è¡¨ï¼š
| è®¢å•å· | å®¢æˆ· | å•†å“åˆ—è¡¨ |
|--------|------|----------|
| O001   | å¼ ä¸‰ | [å•†å“AÃ—2, å•†å“BÃ—1] |

âœ… ç¬¦åˆ1NFçš„è®¾è®¡ï¼š
è®¢å•è¡¨ï¼š
| è®¢å•å· | å®¢æˆ· |
|--------|------|
| O001   | å¼ ä¸‰ |

è®¢å•æ˜ç»†è¡¨ï¼š
| è®¢å•å· | å•†å“ | æ•°é‡ |
|--------|------|------|
| O001   | å•†å“A | 2 |
| O001   | å•†å“B | 1 |
```

**å½¢å¼åŒ–è¯æ˜**ï¼š

```latex
\begin{theorem}[1NFçš„å¿…è¦æ€§]
å¦‚æœå…³ç³»ä¸æ»¡è¶³1NFï¼Œåˆ™æ— æ³•è¿›è¡Œå…³ç³»è¿ç®—ã€‚
\end{theorem}

\begin{proof}
å‡è®¾å…³ç³» R æœ‰éåŸå­å±æ€§ Aï¼š
- é€‰æ‹©æ“ä½œ Ïƒ_{A=value}(R) æ— æ³•æ‰§è¡Œï¼ˆA åŒ…å«å¤šä¸ªå€¼ï¼‰
- æŠ•å½±æ“ä½œ Ï€_A(R) ç»“æœä¸æ˜ç¡®
- è¿æ¥æ“ä½œæ— æ³•æ­£ç¡®åŒ¹é…
å› æ­¤ï¼Œ1NFæ˜¯å…³ç³»æ¨¡å‹çš„åŸºæœ¬è¦æ±‚ã€‚
\end{proof}
```

### 5.2 ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰

**å®šä¹‰**ï¼šåœ¨1NFåŸºç¡€ä¸Šï¼Œéä¸»å±æ€§å®Œå…¨ä¾èµ–äºä¸»é”®ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³» R æ»¡è¶³ 2NF âŸº
R æ»¡è¶³ 1NF
\land \forall éä¸»å±æ€§ A, \forall ä¸»é”® K:
  A å®Œå…¨å‡½æ•°ä¾èµ–äº Kï¼ˆä¸å­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼‰
```

**å‡½æ•°ä¾èµ–å®šä¹‰**ï¼š

```latex
å‡½æ•°ä¾èµ– X â†’ Yï¼š
\forall tâ‚, tâ‚‚ \in R:
  tâ‚[X] = tâ‚‚[X] âŸ¹ tâ‚[Y] = tâ‚‚[Y]
```

### 5.3 ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰

**å®šä¹‰**ï¼šåœ¨2NFåŸºç¡€ä¸Šï¼Œéä¸»å±æ€§ä¸ä¼ é€’ä¾èµ–äºä¸»é”®ã€‚

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³» R æ»¡è¶³ 3NF âŸº
R æ»¡è¶³ 2NF
\land \forall éä¸»å±æ€§ A, \forall ä¸»é”® K:
  ä¸å­˜åœ¨ä¼ é€’ä¾èµ– K â†’ X â†’ Aï¼ˆå…¶ä¸­ X ä¸æ˜¯è¶…é”®ï¼‰
```

### 5.4 BCNFï¼ˆBoyce-CoddèŒƒå¼ï¼‰

#### 5.4.1 BCNFçš„å®šä¹‰

**Boyce-CoddèŒƒå¼ï¼ˆBoyce-Codd Normal Form, BCNFï¼‰**æ˜¯Raymond Boyceå’ŒCoddåœ¨1974å¹´å…±åŒæå‡ºçš„èŒƒå¼è¦æ±‚ã€‚

**å®šä¹‰**ï¼šåœ¨3NFåŸºç¡€ä¸Šï¼Œæ¯ä¸ªå†³å®šå› ç´ éƒ½æ˜¯è¶…é”®ã€‚

**å†å²èƒŒæ™¯**ï¼š

- **1974å¹´**ï¼šRaymond Boyceå’ŒCoddå…±åŒæå‡ºBCNF
- **åŸå› **ï¼šå‘ç°3NFåœ¨æŸäº›æƒ…å†µä¸‹ä»ç„¶å­˜åœ¨å†—ä½™
- **ç›®çš„**ï¼šè¿›ä¸€æ­¥æ¶ˆé™¤æ•°æ®å†—ä½™ï¼Œè¾¾åˆ°æ›´å¼ºçš„è§„èŒƒåŒ–

**BCNFä¸3NFçš„å…³ç³»**ï¼š

- BCNFæ˜¯3NFçš„å¼ºåŒ–ç‰ˆæœ¬
- æ‰€æœ‰æ»¡è¶³BCNFçš„å…³ç³»éƒ½æ»¡è¶³3NF
- ä½†æ»¡è¶³3NFçš„å…³ç³»ä¸ä¸€å®šæ»¡è¶³BCNF

#### 5.4.2 BCNFçš„å½¢å¼åŒ–å®šä¹‰

**å½¢å¼åŒ–å®šä¹‰**ï¼š

```latex
å…³ç³» R æ»¡è¶³ BCNF âŸº
\forall å‡½æ•°ä¾èµ– X â†’ Y:
  X æ˜¯è¶…é”® \lor Y âŠ† X
```

**è¯¦ç»†è¯´æ˜**ï¼š

1. **å†³å®šå› ç´ æ˜¯è¶…é”®**ï¼šæ¯ä¸ªå‡½æ•°ä¾èµ–çš„å†³å®šå› ç´ å¿…é¡»æ˜¯è¶…é”®

   ```latex
   \forall å‡½æ•°ä¾èµ– X â†’ Y:
     X æ˜¯è¶…é”® \lor Y âŠ† X
   ```

2. **è¶…é”®å®šä¹‰**ï¼šè¶…é”®æ˜¯èƒ½å¤Ÿå”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†åˆ

   ```latex
   X æ˜¯è¶…é”® âŸº X â†’ Attributes(R)
   ```

#### 5.4.3 BCNFçš„æ•°å­¦è¯æ˜

**å®šç†**ï¼š

```latex
\begin{theorem}[BCNFçš„å¿…è¦æ€§]
å¦‚æœå…³ç³»ä¸æ»¡è¶³BCNFï¼Œåˆ™å­˜åœ¨æ•°æ®å†—ä½™å’Œæ›´æ–°å¼‚å¸¸ã€‚
\end{theorem}
```

**è¯æ˜**ï¼š

```latex
\begin{proof}
å‡è®¾å…³ç³» R ä¸æ»¡è¶³BCNFï¼Œå­˜åœ¨å‡½æ•°ä¾èµ– X â†’ Yï¼ˆå…¶ä¸­ X ä¸æ˜¯è¶…é”®ï¼ŒY \nsubseteq Xï¼‰ï¼š

1. æ•°æ®å†—ä½™ï¼š
   - å¦‚æœ X â†’ Yï¼Œåˆ™å¯¹äºæ¯ä¸ª X å€¼ï¼ŒY å€¼é‡å¤å­˜å‚¨
   - å¯¼è‡´æ•°æ®å†—ä½™

2. æ›´æ–°å¼‚å¸¸ï¼š
   - æ›´æ–° Y å€¼æ—¶ï¼Œéœ€è¦æ›´æ–°æ‰€æœ‰ç›¸å…³çš„å…ƒç»„
   - å¦‚æœæ›´æ–°ä¸å®Œæ•´ï¼Œä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´

3. æ’å…¥å¼‚å¸¸ï¼š
   - å¦‚æœ X å€¼ä¸å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ Y å€¼

4. åˆ é™¤å¼‚å¸¸ï¼š
   - åˆ é™¤åŒ…å« X çš„å…ƒç»„æ—¶ï¼Œå¯èƒ½ä¸¢å¤± Y å€¼

å› æ­¤ï¼ŒBCNFæ˜¯å¿…è¦çš„ã€‚
\end{proof}
```

#### 5.4.4 BCNFä¸3NFçš„å¯¹æ¯”

**BCNFä¸3NFçš„å¯¹æ¯”çŸ©é˜µ**ï¼š

| ç‰¹æ€§ | 3NF | BCNF |
|------|-----|------|
| **å®šä¹‰** | éä¸»å±æ€§ä¸ä¼ é€’ä¾èµ–äºä¸»é”® | æ¯ä¸ªå†³å®šå› ç´ éƒ½æ˜¯è¶…é”® |
| **å†—ä½™åº¦** | ä½ | æœ€ä½ |
| **æ›´æ–°æ€§èƒ½** | å¥½ | æœ€å¥½ |
| **æŸ¥è¯¢æ€§èƒ½** | ä¸­ | ä¸­ |
| **é€‚ç”¨åœºæ™¯** | ä¸€èˆ¬åº”ç”¨ | ä¸¥æ ¼è§„èŒƒ |
| **åˆ†è§£å¤æ‚åº¦** | ä¸­ | é«˜ |

**BCNFçš„ä¼˜åŠ¿**ï¼š

1. **æ›´å¼ºçš„è§„èŒƒåŒ–**ï¼šæ¶ˆé™¤æ‰€æœ‰å‡½æ•°ä¾èµ–å¼‚å¸¸
2. **æ›´å°‘çš„æ•°æ®å†—ä½™**ï¼šè¾¾åˆ°æœ€ä½å†—ä½™åº¦
3. **æ›´å¥½çš„æ›´æ–°æ€§èƒ½**ï¼šå‡å°‘æ›´æ–°å¼‚å¸¸

**BCNFçš„åŠ£åŠ¿**ï¼š

1. **æ›´é«˜çš„åˆ†è§£å¤æ‚åº¦**ï¼šå¯èƒ½éœ€è¦æ›´å¤šçš„è¡¨
2. **å¯èƒ½å½±å“æŸ¥è¯¢æ€§èƒ½**ï¼šéœ€è¦æ›´å¤šçš„è¿æ¥æ“ä½œ
3. **å¯èƒ½è¿‡åº¦è§„èŒƒåŒ–**ï¼šå¯¹äºæŸäº›åº”ç”¨åœºæ™¯å¯èƒ½ä¸å¿…è¦

### 5.5 èŒƒå¼å¯¹æ¯”çŸ©é˜µ

| èŒƒå¼ | è¦æ±‚ | æ¶ˆé™¤é—®é¢˜ | æ•°å­¦å®šä¹‰ |
|------|------|---------|---------|
| **1NF** | å±æ€§åŸå­æ€§ | å¤šå€¼å±æ€§ | åŸå­å€¼çº¦æŸ |
| **2NF** | å®Œå…¨å‡½æ•°ä¾èµ– | éƒ¨åˆ†ä¾èµ– | å®Œå…¨å‡½æ•°ä¾èµ– |
| **3NF** | æ— ä¼ é€’ä¾èµ– | ä¼ é€’ä¾èµ– | ä¼ é€’ä¾èµ–æ¶ˆé™¤ |
| **BCNF** | å†³å®šå› ç´ æ˜¯è¶…é”® | å†—ä½™ | è¶…é”®çº¦æŸ |

---

## å…­ã€å…³ç³»æ¨¡å‹æ•°å­¦åŸºç¡€

### 6.1 é›†åˆè®ºåŸºç¡€

**å…³ç³»æ¨¡å‹çš„æ•°å­¦åŸºç¡€æ˜¯é›†åˆè®º**ï¼š

```latex
å…³ç³» R æ˜¯ç¬›å¡å°”ç§¯çš„å­é›†

R âŠ† Dâ‚ Ã— Dâ‚‚ Ã— ... Ã— Dâ‚™

å…¶ä¸­ï¼š
- Dáµ¢ æ˜¯åŸŸï¼ˆå€¼çš„é›†åˆï¼‰
- Ã— æ˜¯ç¬›å¡å°”ç§¯è¿ç®—
```

**é›†åˆè¿ç®—**ï¼š

```latex
å¹¶è¿ç®—ï¼šRâ‚ âˆª Râ‚‚ = {t | t âˆˆ Râ‚ \lor t âˆˆ Râ‚‚}
äº¤è¿ç®—ï¼šRâ‚ âˆ© Râ‚‚ = {t | t âˆˆ Râ‚ \land t âˆˆ Râ‚‚}
å·®è¿ç®—ï¼šRâ‚ - Râ‚‚ = {t | t âˆˆ Râ‚ \land t \notin Râ‚‚}
```

### 6.2 å…³ç³»ä½œä¸ºé›†åˆ

**å…³ç³»çš„é›†åˆæ€§è´¨**ï¼š

```latex
\begin{theorem}[å…³ç³»çš„é›†åˆæ€§è´¨]
å…³ç³» R æ»¡è¶³é›†åˆçš„æ‰€æœ‰æ€§è´¨ï¼š
1. æ— åºæ€§ï¼šå…ƒç»„é¡ºåºæ— å…³
2. å”¯ä¸€æ€§ï¼šæ— é‡å¤å…ƒç»„
3. ç¡®å®šæ€§ï¼šæˆå‘˜å…³ç³»ç¡®å®š
\end{theorem}
```

### 6.3 å…³ç³»è¿ç®—çš„æ•°å­¦æ€§è´¨

**å…³ç³»è¿ç®—çš„æ•°å­¦æ€§è´¨**ï¼š

```latex
\begin{theorem}[å…³ç³»è¿ç®—çš„å°é—­æ€§]
å…³ç³»è¿ç®—çš„ç»“æœä»ç„¶æ˜¯å…³ç³»ï¼ˆé›†åˆï¼‰ã€‚
\end{theorem}

\begin{proof}
è®¾ Râ‚, Râ‚‚ æ˜¯å…³ç³»ï¼ˆé›†åˆï¼‰

å¹¶è¿ç®—ï¼šRâ‚ âˆª Râ‚‚ æ˜¯é›†åˆï¼Œå› æ­¤æ˜¯å…³ç³»
äº¤è¿ç®—ï¼šRâ‚ âˆ© Râ‚‚ æ˜¯é›†åˆï¼Œå› æ­¤æ˜¯å…³ç³»
å·®è¿ç®—ï¼šRâ‚ - Râ‚‚ æ˜¯é›†åˆï¼Œå› æ­¤æ˜¯å…³ç³»
\end{proof}
```

---

## ä¸ƒã€å…³ç³»æ¨¡å‹ä¼˜åŠ¿ä¸å±€é™

### 7.1 å…³ç³»æ¨¡å‹ä¼˜åŠ¿

1. **ç†è®ºåŸºç¡€åšå®**ï¼šåŸºäºé›†åˆè®ºå’Œè°“è¯é€»è¾‘
2. **æ•°æ®ç‹¬ç«‹æ€§**ï¼šé€»è¾‘ç‹¬ç«‹äºç‰©ç†å­˜å‚¨
3. **æ ‡å‡†åŒ–**ï¼šSQLæ ‡å‡†ç»Ÿä¸€
4. **æ˜“äºç†è§£**ï¼šäºŒç»´è¡¨ç›´è§‚
5. **å®Œæ•´æ€§ä¿è¯**ï¼šå®Œæ•´æ€§çº¦æŸæœºåˆ¶

### 7.2 å…³ç³»æ¨¡å‹å±€é™

1. **è¡¨è¾¾èƒ½åŠ›é™åˆ¶**ï¼šéš¾ä»¥è¡¨è¾¾å¤æ‚å¯¹è±¡å…³ç³»
2. **æ€§èƒ½é—®é¢˜**ï¼šå¤æ‚æŸ¥è¯¢å¯èƒ½æ€§èƒ½è¾ƒå·®
3. **NULLå€¼å¤„ç†**ï¼šä¸‰å€¼é€»è¾‘å¤æ‚æ€§
4. **åµŒå¥—ç»“æ„**ï¼šéš¾ä»¥ç›´æ¥è¡¨è¾¾åµŒå¥—æ•°æ®

---

## å…«ã€å…³ç³»æ¨¡å‹ä¸SQLå¯¹åº”

### 8.1 å…³ç³»æ¨¡å‹åˆ°SQLæ˜ å°„

| å…³ç³»æ¨¡å‹æ¦‚å¿µ | SQLå¯¹åº” |
|------------|---------|
| å…³ç³»ï¼ˆRelationï¼‰ | è¡¨ï¼ˆTableï¼‰ |
| å…ƒç»„ï¼ˆTupleï¼‰ | è¡Œï¼ˆRowï¼‰ |
| å±æ€§ï¼ˆAttributeï¼‰ | åˆ—ï¼ˆColumnï¼‰ |
| åŸŸï¼ˆDomainï¼‰ | æ•°æ®ç±»å‹ï¼ˆData Typeï¼‰ |
| å…³ç³»æ¨¡å¼ | CREATE TABLEè¯­å¥ |
| ä¸»é”® | PRIMARY KEYçº¦æŸ |
| å¤–é”® | FOREIGN KEYçº¦æŸ |

### 8.2 SQLåˆ°å…³ç³»æ¨¡å‹æ˜ å°„

**SQLè¡¨å®šä¹‰åˆ°å…³ç³»æ¨¡å¼**ï¼š

```sql
CREATE TABLE Student (
    å­¦å· INTEGER PRIMARY KEY,
    å§“å VARCHAR(50) NOT NULL,
    å¹´é¾„ INTEGER,
    ä¸“ä¸š VARCHAR(50)
);
```

**å¯¹åº”çš„å…³ç³»æ¨¡å¼**ï¼š

```latex
Student(å­¦å·: INTEGER, å§“å: VARCHAR(50), å¹´é¾„: INTEGER, ä¸“ä¸š: VARCHAR(50))

çº¦æŸï¼š
- ä¸»é”®ï¼š{å­¦å·}
- NOT NULLï¼š{å§“å}
```

---

## ä¹ã€å…³ç³»æ¨¡å‹æ¦‚å¿µå…³ç³»ç½‘ç»œ

### 9.1 æ¦‚å¿µå…³ç³»æ€ç»´å¯¼å›¾

**å…³ç³»æ¨¡å‹æ¦‚å¿µå…³ç³»ç½‘ç»œ**ï¼š

```mermaid
mindmap
  root((å…³ç³»æ¨¡å‹æ¦‚å¿µç½‘ç»œ))
    æ ¸å¿ƒæ¦‚å¿µ
      å…³ç³»(Relation)
        åŸºäº: ç¬›å¡å°”ç§¯
        åŒ…å«: å…ƒç»„é›†åˆ
        å®šä¹‰: å…³ç³»æ¨¡å¼
        æ€§è´¨: æ— åºæ€§ã€å”¯ä¸€æ€§ã€åŸå­æ€§
      å…ƒç»„(Tuple)
        å±äº: å…³ç³»
        åŒ…å«: å±æ€§å€¼åºåˆ—
        å¯¹åº”: å®ä½“å®ä¾‹
        æ€§è´¨: æœ‰åºæ€§ã€å®Œæ•´æ€§ã€å”¯ä¸€æ€§
      å±æ€§(Attribute)
        å±äº: å…³ç³»æ¨¡å¼
        å…³è”: åŸŸ(Domain)
        è¡¨ç¤º: å®ä½“ç‰¹å¾
        æ€§è´¨: å”¯ä¸€æ€§ã€ç±»å‹æ€§ã€åŸå­æ€§
      åŸŸ(Domain)
        å®šä¹‰: å±æ€§å€¼é›†åˆ
        çº¦æŸ: æ•°æ®ç±»å‹
        å…³è”: å±æ€§
    æ•°å­¦åŸºç¡€
      é›†åˆè®º
        å…³ç³»: é›†åˆ
        å…ƒç»„: é›†åˆå…ƒç´ 
        è¿ç®—: é›†åˆè¿ç®—
      ç¬›å¡å°”ç§¯
        å…³ç³»: ç¬›å¡å°”ç§¯å­é›†
        å…ƒç»„: ç¬›å¡å°”ç§¯å…ƒç´ 
        å±æ€§: ç¬›å¡å°”ç§¯ç»´åº¦
    å®Œæ•´æ€§çº¦æŸ
      å®ä½“å®Œæ•´æ€§
        çº¦æŸ: ä¸»é”®
        ä¿è¯: å…ƒç»„å”¯ä¸€æ€§
      å‚ç…§å®Œæ•´æ€§
        çº¦æŸ: å¤–é”®
        ä¿è¯: å…³ç³»ä¸€è‡´æ€§
      ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§
        çº¦æŸ: ä¸šåŠ¡è§„åˆ™
        ä¿è¯: æ•°æ®æ­£ç¡®æ€§
    èŒƒå¼ç†è®º
      1NF
        è¦æ±‚: åŸå­æ€§
        æ¶ˆé™¤: é‡å¤ç»„
      2NF
        è¦æ±‚: å®Œå…¨å‡½æ•°ä¾èµ–
        æ¶ˆé™¤: éƒ¨åˆ†ä¾èµ–
      3NF
        è¦æ±‚: æ— ä¼ é€’ä¾èµ–
        æ¶ˆé™¤: ä¼ é€’ä¾èµ–
      BCNF
        è¦æ±‚: å†³å®šå› å­æ˜¯å€™é€‰é”®
        æ¶ˆé™¤: æ‰€æœ‰å‡½æ•°ä¾èµ–å¼‚å¸¸
```

### 9.2 å±æ€§å…³ç³»çŸ©é˜µ

**å…³ç³»æ¨¡å‹æ ¸å¿ƒæ¦‚å¿µå±æ€§å…³ç³»çŸ©é˜µ**ï¼š

| æ¦‚å¿µ | æ•°å­¦å®šä¹‰ | æ•°æ®ç»“æ„ | æ“ä½œ | çº¦æŸ | åº”ç”¨ |
|------|---------|---------|------|------|------|
| **å…³ç³»** | ç¬›å¡å°”ç§¯å­é›† | äºŒç»´è¡¨ | å…³ç³»ä»£æ•° | å®Œæ•´æ€§çº¦æŸ | æ•°æ®å­˜å‚¨ |
| **å…ƒç»„** | æœ‰åºnå…ƒç»„ | è¡Œ | é€‰æ‹©ã€æŠ•å½± | å”¯ä¸€æ€§ | å®ä½“å®ä¾‹ |
| **å±æ€§** | åŸŸæ˜ å°„ | åˆ— | æŠ•å½±ã€é‡å‘½å | ç±»å‹çº¦æŸ | å®ä½“ç‰¹å¾ |
| **åŸŸ** | å€¼é›†åˆ | æ•°æ®ç±»å‹ | ç±»å‹æ£€æŸ¥ | å€¼åŸŸçº¦æŸ | ç±»å‹å®šä¹‰ |
| **å…³ç³»æ¨¡å¼** | å±æ€§é›†åˆ | è¡¨ç»“æ„ | CREATE TABLE | æ¨¡å¼çº¦æŸ | ç»“æ„å®šä¹‰ |
| **ä¸»é”®** | å”¯ä¸€æ ‡è¯†ç¬¦ | ç‰¹æ®Šå±æ€§ | PRIMARY KEY | å®ä½“å®Œæ•´æ€§ | å”¯ä¸€æ ‡è¯† |
| **å¤–é”®** | å¼•ç”¨å…³ç³» | ç‰¹æ®Šå±æ€§ | FOREIGN KEY | å‚ç…§å®Œæ•´æ€§ | å…³ç³»è¿æ¥ |

### 9.3 æ¦‚å¿µä¾èµ–å…³ç³»å›¾

**å…³ç³»æ¨¡å‹æ¦‚å¿µä¾èµ–å…³ç³»**ï¼š

```mermaid
graph TD
    A[åŸŸ Domain] --> B[å±æ€§ Attribute]
    B --> C[å…³ç³»æ¨¡å¼ Relation Schema]
    C --> D[å…³ç³» Relation]
    D --> E[å…ƒç»„ Tuple]
    E --> F[å±æ€§å€¼ Attribute Value]

    G[ä¸»é”® Primary Key] --> C
    H[å¤–é”® Foreign Key] --> C
    I[å®Œæ•´æ€§çº¦æŸ Integrity Constraint] --> D

    J[å…³ç³»ä»£æ•° Relational Algebra] --> D
    K[å…³ç³»æ¼”ç®— Relational Calculus] --> D

    L[èŒƒå¼ç†è®º Normal Forms] --> C
    M[å‡½æ•°ä¾èµ– Functional Dependency] --> L
```

---

## åã€ç›¸å…³èµ„æº

### ç›¸å…³æ–‡æ¡£

- [å…³ç³»ä»£æ•°ç†è®º](./01.02-å…³ç³»ä»£æ•°ç†è®º.md) - å…³ç³»ä»£æ•°æ“ä½œ
- [å…³ç³»æ¼”ç®—ç†è®º](./01.03-å…³ç³»æ¼”ç®—ç†è®º.md) - å…³ç³»æ¼”ç®—
- [SQLå®Œå¤‡æ€§ç†è®º](./01.04-SQLå®Œå¤‡æ€§ç†è®º.md) - SQLä¸å…³ç³»æ¨¡å‹å¯¹åº”

### å¤–éƒ¨èµ„æº

#### ç»å…¸è®ºæ–‡

- **Codd, E. F. (1970)**. "A Relational Model of Data for Large Shared Data Banks". Communications of the ACM, 13(6), 377-387.
  - å…³ç³»æ¨¡å‹çš„åŸå§‹è®ºæ–‡
  - å¥ å®šäº†å…³ç³»æ•°æ®åº“çš„ç†è®ºåŸºç¡€
  - é“¾æ¥ï¼š[ACM Digital Library](https://dl.acm.org/doi/10.1145/362384.362685)

- **Codd, E. F. (1972)**. "Relational Completeness of Data Base Sublanguages". In R. Rustin (Ed.), Database Systems, Prentice Hall.
  - å…³ç³»ä»£æ•°å®Œå¤‡æ€§ç†è®º
  - å®šä¹‰äº†å…³ç³»æŸ¥è¯¢è¯­è¨€çš„è¡¨è¾¾èƒ½åŠ›

#### ç»å…¸æ•™æ

- **Date, C. J. (2003)**. "An Introduction to Database Systems" (8th Edition). Addison-Wesley.
  - æ•°æ®åº“ç³»ç»Ÿç»å…¸æ•™æ
  - æ·±å…¥è®²è§£å…³ç³»æ¨¡å‹ç†è®º

- **Silberschatz, A., Korth, H. F., & Sudarshan, S. (2019)**. "Database System Concepts" (7th Edition). McGraw-Hill.
  - æ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µæ•™æ
  - æ¶µç›–å…³ç³»æ¨¡å‹å’ŒSQL

#### åœ¨çº¿èµ„æº

- [Wikipedia: Relational Model](https://en.wikipedia.org/wiki/Relational_model)
- [Wikipedia: Edgar F. Codd](https://en.wikipedia.org/wiki/Edgar_F._Codd)
- [ACM Digital Library: Codd's Papers](https://dl.acm.org/profile/81100020020)

---

**ç»´æŠ¤è€…**: SQL Standards Team
**æœ€åæ›´æ–°**: 2025-01-15
