# SQLiteç”Ÿäº§ç¯å¢ƒç›‘æ§ä¸è¯Šæ–­

> **åˆ›å»ºæ—¥æœŸ**: 2025-12-05
> **ç‰ˆæœ¬**: SQLite 3.47.x
> **éš¾åº¦**: â­â­â­â­â­
> **é€‚ç”¨åœºæ™¯**: ç”Ÿäº§ç¯å¢ƒè¿ç»´ã€æ€§èƒ½è°ƒä¼˜ã€æ•…éšœæ’æŸ¥

---

## ğŸ“‘ ç›®å½•

- [SQLiteç”Ÿäº§ç¯å¢ƒç›‘æ§ä¸è¯Šæ–­](#sqliteç”Ÿäº§ç¯å¢ƒç›‘æ§ä¸è¯Šæ–­)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [ç›‘æ§ä½“ç³»æ€»è§ˆ](#ç›‘æ§ä½“ç³»æ€»è§ˆ)
  - [1. æ€§èƒ½ç›‘æ§](#1-æ€§èƒ½ç›‘æ§)
    - [1.1 æŸ¥è¯¢æ€§èƒ½ç›‘æ§](#11-æŸ¥è¯¢æ€§èƒ½ç›‘æ§)
      - [æ…¢æŸ¥è¯¢æ£€æµ‹](#æ…¢æŸ¥è¯¢æ£€æµ‹)
      - [æŸ¥è¯¢è®¡åˆ’åˆ†æ](#æŸ¥è¯¢è®¡åˆ’åˆ†æ)
    - [1.2 äº‹åŠ¡æ€§èƒ½ç›‘æ§](#12-äº‹åŠ¡æ€§èƒ½ç›‘æ§)
    - [1.3 è¿æ¥æ± ç›‘æ§](#13-è¿æ¥æ± ç›‘æ§)
    - [1.4 ç¼“å­˜å‘½ä¸­ç‡ç›‘æ§](#14-ç¼“å­˜å‘½ä¸­ç‡ç›‘æ§)
  - [2. èµ„æºç›‘æ§](#2-èµ„æºç›‘æ§)
    - [2.1 æ•°æ®åº“æ–‡ä»¶å¤§å°ç›‘æ§](#21-æ•°æ®åº“æ–‡ä»¶å¤§å°ç›‘æ§)
    - [2.2 ç£ç›˜ç©ºé—´ç›‘æ§](#22-ç£ç›˜ç©ºé—´ç›‘æ§)
    - [2.3 å†…å­˜ä½¿ç”¨ç›‘æ§](#23-å†…å­˜ä½¿ç”¨ç›‘æ§)
    - [2.4 WALæ–‡ä»¶ç›‘æ§](#24-walæ–‡ä»¶ç›‘æ§)
  - [3. å¥åº·æ£€æŸ¥](#3-å¥åº·æ£€æŸ¥)
    - [3.1 æ•°æ®åº“å®Œæ•´æ€§æ£€æŸ¥](#31-æ•°æ®åº“å®Œæ•´æ€§æ£€æŸ¥)
    - [3.2 ç´¢å¼•æœ‰æ•ˆæ€§æ£€æŸ¥](#32-ç´¢å¼•æœ‰æ•ˆæ€§æ£€æŸ¥)
    - [3.3 ç»Ÿè®¡ä¿¡æ¯æ›´æ–°](#33-ç»Ÿè®¡ä¿¡æ¯æ›´æ–°)
    - [3.4 ç¢ç‰‡æ£€æŸ¥](#34-ç¢ç‰‡æ£€æŸ¥)
  - [4. è¯Šæ–­å·¥å…·](#4-è¯Šæ–­å·¥å…·)
    - [4.1 PRAGMAè¯Šæ–­å‘½ä»¤](#41-pragmaè¯Šæ–­å‘½ä»¤)
    - [4.2 EXPLAIN QUERY PLANåˆ†æ](#42-explain-query-planåˆ†æ)
    - [4.3 æ—¥å¿—åˆ†æ](#43-æ—¥å¿—åˆ†æ)
    - [4.4 æ€§èƒ½åˆ†æå·¥å…·](#44-æ€§èƒ½åˆ†æå·¥å…·)
  - [5. æ•…éšœæ’æŸ¥](#5-æ•…éšœæ’æŸ¥)
    - [5.1 é”å®šé—®é¢˜æ’æŸ¥](#51-é”å®šé—®é¢˜æ’æŸ¥)
    - [5.2 æ€§èƒ½ä¸‹é™æ’æŸ¥](#52-æ€§èƒ½ä¸‹é™æ’æŸ¥)
    - [5.3 æ•°æ®åº“æŸåæ’æŸ¥](#53-æ•°æ®åº“æŸåæ’æŸ¥)
    - [5.4 å†…å­˜æ³„æ¼æ’æŸ¥](#54-å†…å­˜æ³„æ¼æ’æŸ¥)
  - [6. ç›‘æ§æŒ‡æ ‡çŸ©é˜µ](#6-ç›‘æ§æŒ‡æ ‡çŸ©é˜µ)
  - [7. å‘Šè­¦ç­–ç•¥](#7-å‘Šè­¦ç­–ç•¥)
  - [8. ç›‘æ§å·¥å…·å®ç°](#8-ç›‘æ§å·¥å…·å®ç°)
    - [8.1 Pythonç›‘æ§è„šæœ¬](#81-pythonç›‘æ§è„šæœ¬)
    - [8.2 Shellç›‘æ§è„šæœ¬](#82-shellç›‘æ§è„šæœ¬)
  - [9. æœ€ä½³å®è·µ](#9-æœ€ä½³å®è·µ)
    - [9.1 ç›‘æ§æœ€ä½³å®è·µ](#91-ç›‘æ§æœ€ä½³å®è·µ)
    - [9.2 è¯Šæ–­æœ€ä½³å®è·µ](#92-è¯Šæ–­æœ€ä½³å®è·µ)
  - [10. ğŸ”— ç›¸å…³èµ„æº](#10--ç›¸å…³èµ„æº)
    - [å†…éƒ¨èµ„æº](#å†…éƒ¨èµ„æº)
    - [å¤–éƒ¨èµ„æº](#å¤–éƒ¨èµ„æº)
  - [ğŸ”— äº¤å‰å¼•ç”¨](#-äº¤å‰å¼•ç”¨)
    - [ç¼–ç¨‹å®è·µæ–‡æ¡£](#ç¼–ç¨‹å®è·µæ–‡æ¡£)
    - [æ ¸å¿ƒæ¶æ„æ–‡æ¡£ ğŸ†•](#æ ¸å¿ƒæ¶æ„æ–‡æ¡£-)
    - [æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£ ğŸ†•](#æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£-)
    - [çŸ¥è¯†å›¾è°±ä¸å¯¼èˆª ğŸ†•](#çŸ¥è¯†å›¾è°±ä¸å¯¼èˆª-)
    - [ç›¸å…³æ¦‚å¿µé“¾æ¥ ğŸ†•](#ç›¸å…³æ¦‚å¿µé“¾æ¥-)
      - [ç›‘æ§è¯Šæ–­æ¦‚å¿µ](#ç›‘æ§è¯Šæ–­æ¦‚å¿µ)

---

## ç›‘æ§ä½“ç³»æ€»è§ˆ

```text
SQLiteç”Ÿäº§ç¯å¢ƒç›‘æ§ä½“ç³»
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç›‘æ§ç»´åº¦                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æ€§èƒ½ç›‘æ§                                                              â”‚
â”‚    â€¢ æŸ¥è¯¢æ‰§è¡Œæ—¶é—´                                                        â”‚
â”‚    â€¢ äº‹åŠ¡ååé‡                                                          â”‚
â”‚    â€¢ è¿æ¥æ± çŠ¶æ€                                                          â”‚
â”‚    â€¢ ç¼“å­˜å‘½ä¸­ç‡                                                          â”‚
â”‚                                                                          â”‚
â”‚ 2. èµ„æºç›‘æ§                                                              â”‚
â”‚    â€¢ æ•°æ®åº“æ–‡ä»¶å¤§å°                                                      â”‚
â”‚    â€¢ ç£ç›˜ç©ºé—´ä½¿ç”¨                                                        â”‚
â”‚    â€¢ å†…å­˜å ç”¨                                                            â”‚
â”‚    â€¢ WALæ–‡ä»¶å¤§å°                                                         â”‚
â”‚                                                                          â”‚
â”‚ 3. å¥åº·æ£€æŸ¥                                                              â”‚
â”‚    â€¢ æ•°æ®åº“å®Œæ•´æ€§                                                        â”‚
â”‚    â€¢ ç´¢å¼•æœ‰æ•ˆæ€§                                                          â”‚
â”‚    â€¢ ç»Ÿè®¡ä¿¡æ¯å‡†ç¡®æ€§                                                      â”‚
â”‚    â€¢ ç¢ç‰‡ç¨‹åº¦                                                            â”‚
â”‚                                                                          â”‚
â”‚ 4. æ•…éšœè¯Šæ–­                                                              â”‚
â”‚    â€¢ é”å®šé—®é¢˜                                                            â”‚
â”‚    â€¢ æ€§èƒ½ç“¶é¢ˆ                                                            â”‚
â”‚    â€¢ æ•°æ®æŸå                                                            â”‚
â”‚    â€¢ å†…å­˜æ³„æ¼                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. æ€§èƒ½ç›‘æ§

### 1.1 æŸ¥è¯¢æ€§èƒ½ç›‘æ§

#### æ…¢æŸ¥è¯¢æ£€æµ‹

```python
import sqlite3
import time
import logging
from contextlib import contextmanager

class QueryMonitor:
    def __init__(self, slow_query_threshold=1.0):
        self.slow_query_threshold = slow_query_threshold
        self.logger = logging.getLogger(__name__)

    @contextmanager
    def monitor_query(self, query, params=None):
        """ç›‘æ§æŸ¥è¯¢æ‰§è¡Œæ—¶é—´"""
        start_time = time.time()
        try:
            yield
        finally:
            elapsed = time.time() - start_time
            if elapsed > self.slow_query_threshold:
                self.logger.warning(
                    f"æ…¢æŸ¥è¯¢æ£€æµ‹: {elapsed:.3f}s\n"
                    f"SQL: {query}\n"
                    f"å‚æ•°: {params}"
                )

    def get_query_stats(self, conn):
        """è·å–æŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯"""
        cursor = conn.cursor()

        # è·å–æŸ¥è¯¢è®¡åˆ’ç»Ÿè®¡
        stats = {}

        # æ£€æŸ¥æ˜¯å¦æœ‰æ´»è·ƒçš„é•¿æ—¶é—´è¿è¡ŒæŸ¥è¯¢
        cursor.execute("""
            SELECT
                sql,
                COUNT(*) as count,
                AVG(time) as avg_time
            FROM sqlite_stat1
            GROUP BY sql
        """)

        return stats
```

#### æŸ¥è¯¢è®¡åˆ’åˆ†æ

```sql
-- åˆ†ææŸ¥è¯¢è®¡åˆ’
EXPLAIN QUERY PLAN
SELECT * FROM users WHERE email = ?;

-- è·å–æŸ¥è¯¢è®¡åˆ’ç»Ÿè®¡
PRAGMA query_only = 1;
SELECT * FROM users WHERE email = ?;
PRAGMA query_only = 0;

-- æ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µ
SELECT
    name,
    tbl_name,
    sql
FROM sqlite_master
WHERE type = 'index'
ORDER BY name;
```

### 1.2 äº‹åŠ¡æ€§èƒ½ç›‘æ§

```python
class TransactionMonitor:
    def __init__(self):
        self.transaction_stats = {
            'total': 0,
            'committed': 0,
            'rolled_back': 0,
            'avg_duration': 0.0,
            'max_duration': 0.0
        }

    @contextmanager
    def monitor_transaction(self, conn):
        """ç›‘æ§äº‹åŠ¡æ‰§è¡Œ"""
        start_time = time.time()
        self.transaction_stats['total'] += 1

        try:
            yield
            conn.commit()
            self.transaction_stats['committed'] += 1
        except Exception as e:
            conn.rollback()
            self.transaction_stats['rolled_back'] += 1
            raise
        finally:
            duration = time.time() - start_time
            self.transaction_stats['avg_duration'] = (
                (self.transaction_stats['avg_duration'] *
                 (self.transaction_stats['total'] - 1) + duration) /
                self.transaction_stats['total']
            )
            self.transaction_stats['max_duration'] = max(
                self.transaction_stats['max_duration'],
                duration
            )

    def get_stats(self):
        """è·å–äº‹åŠ¡ç»Ÿè®¡"""
        return self.transaction_stats.copy()
```

### 1.3 è¿æ¥æ± ç›‘æ§

```python
class ConnectionPoolMonitor:
    def __init__(self, pool):
        self.pool = pool

    def get_pool_stats(self):
        """è·å–è¿æ¥æ± ç»Ÿè®¡"""
        return {
            'total_connections': self.pool._size,
            'active_connections': len(self.pool._connections),
            'idle_connections': self.pool._size - len(self.pool._connections),
            'max_connections': self.pool._maxsize,
            'wait_count': getattr(self.pool, '_wait_count', 0)
        }

    def check_connection_health(self, conn):
        """æ£€æŸ¥è¿æ¥å¥åº·çŠ¶æ€"""
        try:
            cursor = conn.cursor()
            cursor.execute("SELECT 1")
            cursor.fetchone()
            return True
        except Exception as e:
            return False
```

### 1.4 ç¼“å­˜å‘½ä¸­ç‡ç›‘æ§

```sql
-- è·å–é¡µé¢ç¼“å­˜ç»Ÿè®¡
PRAGMA cache_size;
PRAGMA page_count;
PRAGMA page_size;

-- è®¡ç®—ç¼“å­˜å‘½ä¸­ç‡ï¼ˆéœ€è¦åº”ç”¨å±‚ç»Ÿè®¡ï¼‰
-- å‘½ä¸­ç‡ = (æ€»æŸ¥è¯¢ - ç£ç›˜è¯»å–) / æ€»æŸ¥è¯¢
```

```python
class CacheMonitor:
    def __init__(self):
        self.cache_stats = {
            'hits': 0,
            'misses': 0,
            'total': 0
        }

    def record_hit(self):
        self.cache_stats['hits'] += 1
        self.cache_stats['total'] += 1

    def record_miss(self):
        self.cache_stats['misses'] += 1
        self.cache_stats['total'] += 1

    def get_hit_rate(self):
        if self.cache_stats['total'] == 0:
            return 0.0
        return self.cache_stats['hits'] / self.cache_stats['total']
```

---

## 2. èµ„æºç›‘æ§

### 2.1 æ•°æ®åº“æ–‡ä»¶å¤§å°ç›‘æ§

```python
import os
from pathlib import Path

def get_database_size(db_path):
    """è·å–æ•°æ®åº“æ–‡ä»¶å¤§å°"""
    db_file = Path(db_path)
    if not db_file.exists():
        return None

    size_bytes = db_file.stat().st_size
    return {
        'bytes': size_bytes,
        'kb': size_bytes / 1024,
        'mb': size_bytes / (1024 * 1024),
        'gb': size_bytes / (1024 * 1024 * 1024)
    }

def get_database_info(conn):
    """è·å–æ•°æ®åº“è¯¦ç»†ä¿¡æ¯"""
    cursor = conn.cursor()

    # é¡µé¢ä¿¡æ¯
    cursor.execute("PRAGMA page_count")
    page_count = cursor.fetchone()[0]

    cursor.execute("PRAGMA page_size")
    page_size = cursor.fetchone()[0]

    # è¡¨æ•°é‡
    cursor.execute("""
        SELECT COUNT(*)
        FROM sqlite_master
        WHERE type = 'table'
    """)
    table_count = cursor.fetchone()[0]

    # ç´¢å¼•æ•°é‡
    cursor.execute("""
        SELECT COUNT(*)
        FROM sqlite_master
        WHERE type = 'index'
    """)
    index_count = cursor.fetchone()[0]

    return {
        'page_count': page_count,
        'page_size': page_size,
        'calculated_size': page_count * page_size,
        'table_count': table_count,
        'index_count': index_count
    }
```

### 2.2 ç£ç›˜ç©ºé—´ç›‘æ§

```python
import shutil

def check_disk_space(db_path):
    """æ£€æŸ¥ç£ç›˜ç©ºé—´"""
    db_dir = Path(db_path).parent
    stat = shutil.disk_usage(db_dir)

    return {
        'total': stat.total,
        'used': stat.used,
        'free': stat.free,
        'percent_used': (stat.used / stat.total) * 100,
        'percent_free': (stat.free / stat.total) * 100
    }

def check_wal_size(db_path):
    """æ£€æŸ¥WALæ–‡ä»¶å¤§å°"""
    wal_path = Path(f"{db_path}-wal")
    if wal_path.exists():
        return wal_path.stat().st_size
    return 0
```

### 2.3 å†…å­˜ä½¿ç”¨ç›‘æ§

```sql
-- è·å–å†…å­˜é…ç½®
PRAGMA cache_size;        -- é¡µé¢ç¼“å­˜å¤§å°ï¼ˆé¡µæ•°ï¼‰
PRAGMA mmap_size;         -- å†…å­˜æ˜ å°„å¤§å°
PRAGMA temp_store;        -- ä¸´æ—¶å­˜å‚¨ä½ç½®

-- è·å–å½“å‰å†…å­˜ä½¿ç”¨ï¼ˆéœ€è¦åº”ç”¨å±‚ç›‘æ§ï¼‰
```

```python
import psutil
import os

def get_sqlite_memory_usage(process_id=None):
    """è·å–SQLiteè¿›ç¨‹å†…å­˜ä½¿ç”¨"""
    if process_id is None:
        process_id = os.getpid()

    process = psutil.Process(process_id)
    memory_info = process.memory_info()

    return {
        'rss': memory_info.rss,  # ç‰©ç†å†…å­˜
        'vms': memory_info.vms,  # è™šæ‹Ÿå†…å­˜
        'percent': process.memory_percent()
    }
```

### 2.4 WALæ–‡ä»¶ç›‘æ§

```python
def monitor_wal_file(db_path):
    """ç›‘æ§WALæ–‡ä»¶çŠ¶æ€"""
    wal_path = Path(f"{db_path}-wal")
    shm_path = Path(f"{db_path}-shm")

    wal_info = {}

    if wal_path.exists():
        wal_info['size'] = wal_path.stat().st_size
        wal_info['exists'] = True
    else:
        wal_info['exists'] = False
        wal_info['size'] = 0

    if shm_path.exists():
        wal_info['shm_size'] = shm_path.stat().st_size
        wal_info['shm_exists'] = True
    else:
        wal_info['shm_exists'] = False
        wal_info['shm_size'] = 0

    # æ£€æŸ¥WALæ¨¡å¼
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    cursor.execute("PRAGMA journal_mode")
    wal_info['journal_mode'] = cursor.fetchone()[0]
    conn.close()

    return wal_info
```

---

## 3. å¥åº·æ£€æŸ¥

### 3.1 æ•°æ®åº“å®Œæ•´æ€§æ£€æŸ¥

```python
def integrity_check(conn):
    """å®Œæ•´æ€§æ£€æŸ¥"""
    cursor = conn.cursor()

    # å¿«é€Ÿå®Œæ•´æ€§æ£€æŸ¥
    cursor.execute("PRAGMA quick_check")
    quick_result = cursor.fetchone()[0]

    # å®Œæ•´å®Œæ•´æ€§æ£€æŸ¥
    cursor.execute("PRAGMA integrity_check")
    integrity_result = cursor.fetchall()

    return {
        'quick_check': quick_result,
        'integrity_check': integrity_result,
        'is_healthy': quick_result == 'ok'
    }
```

### 3.2 ç´¢å¼•æœ‰æ•ˆæ€§æ£€æŸ¥

```python
def check_indexes(conn):
    """æ£€æŸ¥ç´¢å¼•æœ‰æ•ˆæ€§"""
    cursor = conn.cursor()

    # è·å–æ‰€æœ‰ç´¢å¼•
    cursor.execute("""
        SELECT
            name,
            tbl_name,
            sql
        FROM sqlite_master
        WHERE type = 'index'
        AND name NOT LIKE 'sqlite_%'
    """)

    indexes = cursor.fetchall()

    # æ£€æŸ¥æ¯ä¸ªç´¢å¼•çš„ä½¿ç”¨æƒ…å†µ
    index_stats = []
    for index_name, table_name, sql in indexes:
        cursor.execute(f"""
            SELECT COUNT(*)
            FROM sqlite_stat1
            WHERE tbl = '{table_name}' AND idx = '{index_name}'
        """)
        has_stats = cursor.fetchone()[0] > 0

        index_stats.append({
            'name': index_name,
            'table': table_name,
            'has_statistics': has_stats
        })

    return index_stats
```

### 3.3 ç»Ÿè®¡ä¿¡æ¯æ›´æ–°

```python
def update_statistics(conn):
    """æ›´æ–°ç»Ÿè®¡ä¿¡æ¯"""
    cursor = conn.cursor()

    # æ›´æ–°æŸ¥è¯¢ä¼˜åŒ–å™¨ç»Ÿè®¡
    cursor.execute("ANALYZE")

    # æ£€æŸ¥ç»Ÿè®¡ä¿¡æ¯
    cursor.execute("""
        SELECT
            tbl,
            idx,
            stat
        FROM sqlite_stat1
    """)

    return cursor.fetchall()
```

### 3.4 ç¢ç‰‡æ£€æŸ¥

```python
def check_fragmentation(conn, db_path):
    """æ£€æŸ¥æ•°æ®åº“ç¢ç‰‡"""
    cursor = conn.cursor()

    # è·å–é¡µé¢ä¿¡æ¯
    cursor.execute("PRAGMA page_count")
    page_count = cursor.fetchone()[0]

    cursor.execute("PRAGMA freelist_count")
    freelist_count = cursor.fetchone()[0]

    # è®¡ç®—ç¢ç‰‡ç‡
    if page_count > 0:
        fragmentation = (freelist_count / page_count) * 100
    else:
        fragmentation = 0

    # è·å–å®é™…æ–‡ä»¶å¤§å°
    file_size = Path(db_path).stat().st_size
    cursor.execute("PRAGMA page_size")
    page_size = cursor.fetchone()[0]
    expected_size = page_count * page_size

    return {
        'page_count': page_count,
        'freelist_count': freelist_count,
        'fragmentation_percent': fragmentation,
        'file_size': file_size,
        'expected_size': expected_size,
        'overhead': file_size - expected_size
    }
```

---

## 4. è¯Šæ–­å·¥å…·

### 4.1 PRAGMAè¯Šæ–­å‘½ä»¤

```sql
-- æ•°æ®åº“é…ç½®è¯Šæ–­
PRAGMA database_list;           -- åˆ—å‡ºæ‰€æœ‰é™„åŠ æ•°æ®åº“
PRAGMA table_info(table_name);  -- è¡¨ç»“æ„ä¿¡æ¯
PRAGMA index_info(index_name);  -- ç´¢å¼•ä¿¡æ¯
PRAGMA index_list(table_name);  -- è¡¨çš„æ‰€æœ‰ç´¢å¼•

-- æ€§èƒ½è¯Šæ–­
PRAGMA cache_size;              -- ç¼“å­˜å¤§å°
PRAGMA page_size;               -- é¡µé¢å¤§å°
PRAGMA page_count;              -- é¡µé¢æ•°é‡
PRAGMA freelist_count;          -- ç©ºé—²é¡µé¢æ•°

-- WALè¯Šæ–­
PRAGMA journal_mode;            -- æ—¥å¿—æ¨¡å¼
PRAGMA wal_checkpoint;          -- æ£€æŸ¥ç‚¹
PRAGMA wal_autocheckpoint;      -- è‡ªåŠ¨æ£€æŸ¥ç‚¹è®¾ç½®

-- å®Œæ•´æ€§è¯Šæ–­
PRAGMA quick_check;             -- å¿«é€Ÿå®Œæ•´æ€§æ£€æŸ¥
PRAGMA integrity_check;         -- å®Œæ•´å®Œæ•´æ€§æ£€æŸ¥
PRAGMA foreign_key_check;       -- å¤–é”®æ£€æŸ¥

-- ä¼˜åŒ–è¯Šæ–­
PRAGMA optimize;                -- è¿è¡Œä¼˜åŒ–ï¼ˆSQLite 3.18+ï¼‰
PRAGMA optimize(0x03);          -- æŒ‡å®šä¼˜åŒ–é€‰é¡¹
```

### 4.2 EXPLAIN QUERY PLANåˆ†æ

```python
def analyze_query_plan(conn, query, params=None):
    """åˆ†ææŸ¥è¯¢è®¡åˆ’"""
    cursor = conn.cursor()

    # è·å–æŸ¥è¯¢è®¡åˆ’
    cursor.execute(f"EXPLAIN QUERY PLAN {query}", params or [])
    plan = cursor.fetchall()

    # è§£ææŸ¥è¯¢è®¡åˆ’
    plan_info = []
    for row in plan:
        plan_info.append({
            'selectid': row[0],
            'order': row[1],
            'from': row[2],
            'detail': row[3]
        })

    return plan_info

# ä½¿ç”¨ç¤ºä¾‹
conn = sqlite3.connect('example.db')
plan = analyze_query_plan(
    conn,
    "SELECT * FROM users WHERE email = ?",
    ('user@example.com',)
)
print(plan)
```

### 4.3 æ—¥å¿—åˆ†æ

```python
import logging
from datetime import datetime

class SQLiteLogger:
    def __init__(self, log_file='sqlite_monitor.log'):
        self.logger = logging.getLogger('sqlite_monitor')
        self.logger.setLevel(logging.INFO)

        handler = logging.FileHandler(log_file)
        formatter = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        )
        handler.setFormatter(formatter)
        self.logger.addHandler(handler)

    def log_slow_query(self, query, duration, params=None):
        """è®°å½•æ…¢æŸ¥è¯¢"""
        self.logger.warning(
            f"æ…¢æŸ¥è¯¢: {duration:.3f}s\n"
            f"SQL: {query}\n"
            f"å‚æ•°: {params}"
        )

    def log_error(self, error, context=None):
        """è®°å½•é”™è¯¯"""
        self.logger.error(
            f"é”™è¯¯: {error}\n"
            f"ä¸Šä¸‹æ–‡: {context}"
        )

    def log_health_check(self, result):
        """è®°å½•å¥åº·æ£€æŸ¥ç»“æœ"""
        self.logger.info(f"å¥åº·æ£€æŸ¥: {result}")
```

### 4.4 æ€§èƒ½åˆ†æå·¥å…·

```python
import cProfile
import pstats
from io import StringIO

def profile_query(conn, query, params=None, output_file=None):
    """æ€§èƒ½åˆ†ææŸ¥è¯¢"""
    profiler = cProfile.Profile()

    def execute_query():
        cursor = conn.cursor()
        cursor.execute(query, params or [])
        return cursor.fetchall()

    profiler.enable()
    result = execute_query()
    profiler.disable()

    # ç”ŸæˆæŠ¥å‘Š
    s = StringIO()
    ps = pstats.Stats(profiler, stream=s)
    ps.sort_stats('cumulative')
    ps.print_stats()

    report = s.getvalue()

    if output_file:
        with open(output_file, 'w') as f:
            f.write(report)

    return result, report
```

---

## 5. æ•…éšœæ’æŸ¥

### 5.1 é”å®šé—®é¢˜æ’æŸ¥

```python
def diagnose_locking_issues(db_path):
    """è¯Šæ–­é”å®šé—®é¢˜"""
    diagnostics = {}

    # æ£€æŸ¥WALæ¨¡å¼
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    cursor.execute("PRAGMA journal_mode")
    journal_mode = cursor.fetchone()[0]
    diagnostics['journal_mode'] = journal_mode

    # æ£€æŸ¥æ˜¯å¦æœ‰é”æ–‡ä»¶
    lock_files = [
        f"{db_path}-wal",
        f"{db_path}-shm",
        f"{db_path}-journal"
    ]

    for lock_file in lock_files:
        path = Path(lock_file)
        if path.exists():
            diagnostics[f"{path.name}_exists"] = True
            diagnostics[f"{path.name}_size"] = path.stat().st_size
        else:
            diagnostics[f"{path.name}_exists"] = False

    # å°è¯•è·å–é”ï¼ˆéé˜»å¡ï¼‰
    try:
        cursor.execute("BEGIN IMMEDIATE")
        cursor.execute("ROLLBACK")
        diagnostics['can_acquire_lock'] = True
    except sqlite3.OperationalError as e:
        diagnostics['can_acquire_lock'] = False
        diagnostics['lock_error'] = str(e)

    conn.close()
    return diagnostics
```

### 5.2 æ€§èƒ½ä¸‹é™æ’æŸ¥

```python
def diagnose_performance_issues(conn):
    """è¯Šæ–­æ€§èƒ½é—®é¢˜"""
    diagnostics = {}
    cursor = conn.cursor()

    # æ£€æŸ¥ç»Ÿè®¡ä¿¡æ¯
    cursor.execute("SELECT COUNT(*) FROM sqlite_stat1")
    stats_count = cursor.fetchone()[0]
    diagnostics['has_statistics'] = stats_count > 0

    # æ£€æŸ¥ç´¢å¼•
    cursor.execute("""
        SELECT COUNT(*)
        FROM sqlite_master
        WHERE type = 'index'
    """)
    index_count = cursor.fetchone()[0]
    diagnostics['index_count'] = index_count

    # æ£€æŸ¥ç¼“å­˜é…ç½®
    cursor.execute("PRAGMA cache_size")
    cache_size = cursor.fetchone()[0]
    diagnostics['cache_size'] = cache_size

    # æ£€æŸ¥é¡µé¢å¤§å°
    cursor.execute("PRAGMA page_size")
    page_size = cursor.fetchone()[0]
    diagnostics['page_size'] = page_size

    # æ£€æŸ¥ç¢ç‰‡
    cursor.execute("PRAGMA page_count")
    page_count = cursor.fetchone()[0]
    cursor.execute("PRAGMA freelist_count")
    freelist_count = cursor.fetchone()[0]
    if page_count > 0:
        diagnostics['fragmentation'] = (freelist_count / page_count) * 100
    else:
        diagnostics['fragmentation'] = 0

    return diagnostics
```

### 5.3 æ•°æ®åº“æŸåæ’æŸ¥

```python
def diagnose_corruption(db_path):
    """è¯Šæ–­æ•°æ®åº“æŸå"""
    diagnostics = {}

    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()

    # å¿«é€Ÿæ£€æŸ¥
    try:
        cursor.execute("PRAGMA quick_check")
        quick_result = cursor.fetchone()[0]
        diagnostics['quick_check'] = quick_check
        diagnostics['is_corrupted'] = quick_result != 'ok'
    except Exception as e:
        diagnostics['quick_check'] = f"é”™è¯¯: {e}"
        diagnostics['is_corrupted'] = True

    # å®Œæ•´æ£€æŸ¥
    if not diagnostics.get('is_corrupted'):
        try:
            cursor.execute("PRAGMA integrity_check")
            integrity_result = cursor.fetchall()
            diagnostics['integrity_check'] = integrity_result
        except Exception as e:
            diagnostics['integrity_check'] = f"é”™è¯¯: {e}"
            diagnostics['is_corrupted'] = True

    conn.close()
    return diagnostics
```

### 5.4 å†…å­˜æ³„æ¼æ’æŸ¥

```python
import tracemalloc

class MemoryLeakDetector:
    def __init__(self):
        self.snapshots = []

    def start_tracing(self):
        """å¼€å§‹å†…å­˜è·Ÿè¸ª"""
        tracemalloc.start()

    def take_snapshot(self, label=''):
        """æ‹æ‘„å†…å­˜å¿«ç…§"""
        snapshot = tracemalloc.take_snapshot()
        self.snapshots.append({
            'label': label,
            'snapshot': snapshot,
            'timestamp': time.time()
        })
        return snapshot

    def compare_snapshots(self, index1, index2):
        """æ¯”è¾ƒä¸¤ä¸ªå¿«ç…§"""
        if index1 >= len(self.snapshots) or index2 >= len(self.snapshots):
            return None

        snapshot1 = self.snapshots[index1]['snapshot']
        snapshot2 = self.snapshots[index2]['snapshot']

        top_stats = snapshot2.compare_to(snapshot1, 'lineno')

        return top_stats

    def get_memory_stats(self):
        """è·å–å†…å­˜ç»Ÿè®¡"""
        current, peak = tracemalloc.get_traced_memory()
        return {
            'current_mb': current / 1024 / 1024,
            'peak_mb': peak / 1024 / 1024
        }
```

---

## 6. ç›‘æ§æŒ‡æ ‡çŸ©é˜µ

```text
SQLiteç›‘æ§æŒ‡æ ‡çŸ©é˜µ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç›‘æ§æŒ‡æ ‡            â”‚ æ­£å¸¸èŒƒå›´ â”‚ è­¦å‘Šé˜ˆå€¼ â”‚ å±é™©é˜ˆå€¼ â”‚ æ£€æŸ¥é¢‘ç‡ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æŸ¥è¯¢æ‰§è¡Œæ—¶é—´        â”‚ < 100ms  â”‚ 100-500msâ”‚ > 500ms  â”‚ å®æ—¶     â”‚
â”‚ äº‹åŠ¡ååé‡          â”‚ > 1000/s â”‚ 500-1000 â”‚ < 500/s  â”‚ æ¯åˆ†é’Ÿ   â”‚
â”‚ è¿æ¥æ± ä½¿ç”¨ç‡        â”‚ < 70%    â”‚ 70-90%   â”‚ > 90%    â”‚ æ¯åˆ†é’Ÿ   â”‚
â”‚ ç¼“å­˜å‘½ä¸­ç‡          â”‚ > 90%    â”‚ 80-90%   â”‚ < 80%    â”‚ æ¯åˆ†é’Ÿ   â”‚
â”‚ æ•°æ®åº“æ–‡ä»¶å¤§å°      â”‚ åŠ¨æ€     â”‚ å¢é•¿>10% â”‚ å¢é•¿>50% â”‚ æ¯å°æ—¶   â”‚
â”‚ ç£ç›˜ç©ºé—´ä½¿ç”¨ç‡      â”‚ < 70%    â”‚ 70-85%   â”‚ > 85%    â”‚ æ¯å°æ—¶   â”‚
â”‚ WALæ–‡ä»¶å¤§å°         â”‚ < 100MB  â”‚ 100-500MBâ”‚ > 500MB  â”‚ æ¯å°æ—¶   â”‚
â”‚ ç¢ç‰‡ç‡              â”‚ < 5%     â”‚ 5-10%    â”‚ > 10%    â”‚ æ¯å¤©     â”‚
â”‚ å®Œæ•´æ€§æ£€æŸ¥          â”‚ OK       â”‚ -        â”‚ å¤±è´¥     â”‚ æ¯å¤©     â”‚
â”‚ é”å®šç­‰å¾…æ—¶é—´        â”‚ < 1s     â”‚ 1-5s     â”‚ > 5s     â”‚ å®æ—¶     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. å‘Šè­¦ç­–ç•¥

```python
class AlertManager:
    def __init__(self):
        self.alert_rules = {
            'slow_query': {
                'threshold': 1.0,  # ç§’
                'action': self.alert_slow_query
            },
            'high_fragmentation': {
                'threshold': 10.0,  # ç™¾åˆ†æ¯”
                'action': self.alert_fragmentation
            },
            'low_disk_space': {
                'threshold': 15.0,  # ç™¾åˆ†æ¯”å‰©ä½™
                'action': self.alert_disk_space
            },
            'corruption': {
                'threshold': None,  # ä»»ä½•æŸå
                'action': self.alert_corruption
            }
        }

    def check_and_alert(self, metric_name, value):
        """æ£€æŸ¥æŒ‡æ ‡å¹¶è§¦å‘å‘Šè­¦"""
        if metric_name in self.alert_rules:
            rule = self.alert_rules[metric_name]
            if rule['threshold'] is None or value > rule['threshold']:
                rule['action'](metric_name, value)

    def alert_slow_query(self, metric, value):
        """æ…¢æŸ¥è¯¢å‘Šè­¦"""
        print(f"âš ï¸ å‘Šè­¦: æ…¢æŸ¥è¯¢æ£€æµ‹ - {value:.3f}ç§’")

    def alert_fragmentation(self, metric, value):
        """ç¢ç‰‡å‘Šè­¦"""
        print(f"âš ï¸ å‘Šè­¦: é«˜ç¢ç‰‡ç‡ - {value:.2f}%")

    def alert_disk_space(self, metric, value):
        """ç£ç›˜ç©ºé—´å‘Šè­¦"""
        print(f"âš ï¸ å‘Šè­¦: ç£ç›˜ç©ºé—´ä¸è¶³ - å‰©ä½™{value:.2f}%")

    def alert_corruption(self, metric, value):
        """æŸåå‘Šè­¦"""
        print(f"ğŸš¨ ä¸¥é‡å‘Šè­¦: æ•°æ®åº“æŸåæ£€æµ‹åˆ°ï¼")
```

---

## 8. ç›‘æ§å·¥å…·å®ç°

### 8.1 Pythonç›‘æ§è„šæœ¬

```python
#!/usr/bin/env python3
"""
SQLiteç”Ÿäº§ç¯å¢ƒç›‘æ§è„šæœ¬
"""

import sqlite3
import time
import json
from pathlib import Path
from datetime import datetime

class SQLiteMonitor:
    def __init__(self, db_path, config=None):
        self.db_path = db_path
        self.config = config or {}
        self.metrics = {}

    def collect_all_metrics(self):
        """æ”¶é›†æ‰€æœ‰ç›‘æ§æŒ‡æ ‡"""
        conn = sqlite3.connect(self.db_path)

        try:
            metrics = {
                'timestamp': datetime.now().isoformat(),
                'database': str(self.db_path),
                'performance': self._collect_performance_metrics(conn),
                'resources': self._collect_resource_metrics(conn),
                'health': self._collect_health_metrics(conn)
            }

            return metrics
        finally:
            conn.close()

    def _collect_performance_metrics(self, conn):
        """æ”¶é›†æ€§èƒ½æŒ‡æ ‡"""
        cursor = conn.cursor()

        cursor.execute("PRAGMA cache_size")
        cache_size = cursor.fetchone()[0]

        cursor.execute("PRAGMA page_count")
        page_count = cursor.fetchone()[0]

        return {
            'cache_size': cache_size,
            'page_count': page_count
        }

    def _collect_resource_metrics(self, conn):
        """æ”¶é›†èµ„æºæŒ‡æ ‡"""
        db_file = Path(self.db_path)
        file_size = db_file.stat().st_size if db_file.exists() else 0

        wal_file = Path(f"{self.db_path}-wal")
        wal_size = wal_file.stat().st_size if wal_file.exists() else 0

        return {
            'database_size_mb': file_size / (1024 * 1024),
            'wal_size_mb': wal_size / (1024 * 1024)
        }

    def _collect_health_metrics(self, conn):
        """æ”¶é›†å¥åº·æŒ‡æ ‡"""
        cursor = conn.cursor()

        cursor.execute("PRAGMA quick_check")
        quick_check = cursor.fetchone()[0]

        cursor.execute("PRAGMA page_count")
        page_count = cursor.fetchone()[0]

        cursor.execute("PRAGMA freelist_count")
        freelist_count = cursor.fetchone()[0]

        fragmentation = (freelist_count / page_count * 100) if page_count > 0 else 0

        return {
            'integrity': quick_check == 'ok',
            'fragmentation_percent': fragmentation
        }

    def generate_report(self, output_file=None):
        """ç”Ÿæˆç›‘æ§æŠ¥å‘Š"""
        metrics = self.collect_all_metrics()

        report = {
            'summary': {
                'database': metrics['database'],
                'timestamp': metrics['timestamp'],
                'status': 'healthy' if metrics['health']['integrity'] else 'unhealthy'
            },
            'details': metrics
        }

        if output_file:
            with open(output_file, 'w') as f:
                json.dump(report, f, indent=2)

        return report

if __name__ == '__main__':
    import sys

    if len(sys.argv) < 2:
        print("ç”¨æ³•: python monitor.py <database_path> [output_file]")
        sys.exit(1)

    db_path = sys.argv[1]
    output_file = sys.argv[2] if len(sys.argv) > 2 else None

    monitor = SQLiteMonitor(db_path)
    report = monitor.generate_report(output_file)

    print(json.dumps(report, indent=2))
```

### 8.2 Shellç›‘æ§è„šæœ¬

```bash
#!/bin/bash
# SQLiteç›‘æ§è„šæœ¬

DB_PATH="$1"
OUTPUT_FILE="${2:-monitor_report.json}"

if [ -z "$DB_PATH" ]; then
    echo "ç”¨æ³•: $0 <database_path> [output_file]"
    exit 1
fi

# æ”¶é›†æŒ‡æ ‡
TIMESTAMP=$(date -Iseconds)
DB_SIZE=$(stat -f%z "$DB_PATH" 2>/dev/null || stat -c%s "$DB_PATH" 2>/dev/null)
WAL_SIZE=$(stat -f%z "${DB_PATH}-wal" 2>/dev/null || stat -c%s "${DB_PATH}-wal" 2>/dev/null || echo "0")

# ç”ŸæˆæŠ¥å‘Š
cat > "$OUTPUT_FILE" <<EOF
{
  "timestamp": "$TIMESTAMP",
  "database": "$DB_PATH",
  "metrics": {
    "database_size_bytes": $DB_SIZE,
    "wal_size_bytes": $WAL_SIZE
  }
}
EOF

echo "ç›‘æ§æŠ¥å‘Šå·²ç”Ÿæˆ: $OUTPUT_FILE"
```

---

## 9. æœ€ä½³å®è·µ

### 9.1 ç›‘æ§æœ€ä½³å®è·µ

1. **å®šæœŸå¥åº·æ£€æŸ¥**
   - æ¯å¤©æ‰§è¡Œå®Œæ•´æ€§æ£€æŸ¥
   - æ¯å‘¨æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
   - æ¯æœˆæ£€æŸ¥ç¢ç‰‡æƒ…å†µ

2. **æ€§èƒ½ç›‘æ§**
   - è®°å½•æ‰€æœ‰æ…¢æŸ¥è¯¢ï¼ˆ> 1ç§’ï¼‰
   - ç›‘æ§äº‹åŠ¡ååé‡
   - è·Ÿè¸ªè¿æ¥æ± ä½¿ç”¨æƒ…å†µ

3. **èµ„æºç›‘æ§**
   - ç›‘æ§æ•°æ®åº“æ–‡ä»¶å¤§å°å¢é•¿
   - æ£€æŸ¥ç£ç›˜ç©ºé—´ä½¿ç”¨
   - è·Ÿè¸ªWALæ–‡ä»¶å¤§å°

4. **å‘Šè­¦è®¾ç½®**
   - è®¾ç½®åˆç†çš„å‘Šè­¦é˜ˆå€¼
   - åŠæ—¶å“åº”ä¸¥é‡å‘Šè­¦
   - å®šæœŸå®¡æŸ¥å‘Šè­¦è§„åˆ™

### 9.2 è¯Šæ–­æœ€ä½³å®è·µ

1. **é—®é¢˜å®šä½**
   - ä½¿ç”¨EXPLAIN QUERY PLANåˆ†ææ…¢æŸ¥è¯¢
   - æ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µ
   - åˆ†ææŸ¥è¯¢è®¡åˆ’ç»Ÿè®¡

2. **æ€§èƒ½ä¼˜åŒ–**
   - å®šæœŸè¿è¡ŒANALYZEæ›´æ–°ç»Ÿè®¡
   - ä¼˜åŒ–ç´¢å¼•è®¾è®¡
   - è°ƒæ•´PRAGMAé…ç½®

3. **æ•…éšœæ¢å¤**
   - ä¿æŒæ•°æ®åº“å¤‡ä»½
   - æµ‹è¯•æ¢å¤æµç¨‹
   - æ–‡æ¡£åŒ–æ•…éšœå¤„ç†æµç¨‹

---

## 10. ğŸ”— ç›¸å…³èµ„æº

### å†…éƒ¨èµ„æº

- [é”™è¯¯å¤„ç†](./08.05-é”™è¯¯å¤„ç†.md) - é”™è¯¯ç ä½“ç³»å’Œå¼‚å¸¸æ¢å¤
- [PRAGMAé…ç½®](./08.04-PRAGMAé…ç½®.md) - PRAGMAå‘½ä»¤è¯¦è§£
- [æ€§èƒ½ä¼˜åŒ–](../03-æ€§èƒ½ä¼˜åŒ–/) - æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- [å¤šçº¿ç¨‹å¹¶å‘æ¨¡å¼](./08.12-SQLiteå¤šçº¿ç¨‹å¹¶å‘æ¨¡å¼æœ€ä½³å®è·µ.md) - å¹¶å‘æ¨¡å¼æœ€ä½³å®è·µ

### å¤–éƒ¨èµ„æº

- [SQLiteå®˜æ–¹æ–‡æ¡£ - PRAGMA](https://www.sqlite.org/pragma.html)
- [SQLiteå®˜æ–¹æ–‡æ¡£ - EXPLAIN QUERY PLAN](https://www.sqlite.org/eqp.html)
- [SQLiteå®˜æ–¹æ–‡æ¡£ - å®Œæ•´æ€§æ£€æŸ¥](https://www.sqlite.org/pragma.html#pragma_integrity_check)

---

## ğŸ”— äº¤å‰å¼•ç”¨

### ç¼–ç¨‹å®è·µæ–‡æ¡£

- â­â­â­ [å¤‡ä»½ä¸æ¢å¤](./08.14-SQLiteå¤‡ä»½ä¸æ¢å¤å®Œæ•´æŒ‡å—.md) - å¤‡ä»½æ¢å¤å®è·µï¼ˆå«äº¤å‰å¼•ç”¨ï¼‰
- â­â­ [é”™è¯¯å¤„ç†](./08.05-é”™è¯¯å¤„ç†.md) - é”™è¯¯å¤„ç†å®è·µï¼ˆå«äº¤å‰å¼•ç”¨ï¼‰
- â­â­ [PRAGMAé…ç½®](./08.04-PRAGMAé…ç½®.md) - é…ç½®ä¼˜åŒ–ï¼ˆå«äº¤å‰å¼•ç”¨ï¼‰

### æ ¸å¿ƒæ¶æ„æ–‡æ¡£ ğŸ†•

- â­â­ [äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶](../01-æ ¸å¿ƒæ¶æ„/01.02-äº‹åŠ¡ä¸å¹¶å‘æ§åˆ¶.md) - å¹¶å‘ç›‘æ§åŸºç¡€
- â­â­ [å­˜å‚¨å¼•æ“](../01-æ ¸å¿ƒæ¶æ„/01.03-å­˜å‚¨å¼•æ“.md) - å­˜å‚¨ç›‘æ§åŸºç¡€

### æ€§èƒ½ä¼˜åŒ–æ–‡æ¡£ ğŸ†•

- â­â­ [æ€§èƒ½ç‰¹å¾åˆ†æ](../03-æ€§èƒ½ä¼˜åŒ–/03.01-æ€§èƒ½ç‰¹å¾åˆ†æ.md) - æ€§èƒ½ç›‘æ§åˆ†æï¼ˆå«å†³ç­–æ ‘ï¼‰
- â­â­ [æŸ¥è¯¢ä¼˜åŒ–](./08.03-æŸ¥è¯¢ä¼˜åŒ–.md) - æŸ¥è¯¢æ€§èƒ½è¯Šæ–­ï¼ˆå«äº¤å‰å¼•ç”¨ï¼‰

### çŸ¥è¯†å›¾è°±ä¸å¯¼èˆª ğŸ†•

- â­â­â­ [çŸ¥è¯†å›¾è°±ä¸æ¦‚å¿µå…³ç³»ç½‘ç»œ](../09-æœ€æ–°ç‰¹æ€§/09.03-SQLiteçŸ¥è¯†å›¾è°±ä¸æ¦‚å¿µå…³ç³»ç½‘ç»œ.md) - ç›‘æ§è¯Šæ–­æ¦‚å¿µå…³ç³»ï¼ˆ400+æ¦‚å¿µï¼‰
- â­â­ [æ–‡æ¡£ä¾èµ–å…³ç³»å›¾](../00-é¡¹ç›®å¯¼èˆª/06-æ–‡æ¡£ä¾èµ–å…³ç³»å›¾.md) - ç›‘æ§è¯Šæ–­æ–‡æ¡£ä¾èµ–
- â­â­ [æœ¯è¯­æ ‡å‡†åŒ–è¯å…¸](../00-é¡¹ç›®å¯¼èˆª/03-æœ¯è¯­è¯å…¸/SQLiteæœ¯è¯­æ ‡å‡†åŒ–è¯å…¸.md) - ç›‘æ§è¯Šæ–­æœ¯è¯­ç´¢å¼•

### ç›¸å…³æ¦‚å¿µé“¾æ¥ ğŸ†•

#### ç›‘æ§è¯Šæ–­æ¦‚å¿µ

- **ç”Ÿäº§ç¯å¢ƒç›‘æ§** â†’ [çŸ¥è¯†å›¾è°±ï¼šå¼€å‘å®è·µæœ¬ä½“](../09-æœ€æ–°ç‰¹æ€§/09.03-SQLiteçŸ¥è¯†å›¾è°±ä¸æ¦‚å¿µå…³ç³»ç½‘ç»œ.md#å¼€å‘å®è·µæœ¬ä½“)
- **æ€§èƒ½è¯Šæ–­** â†’ [çŸ¥è¯†å›¾è°±ï¼šæ€§èƒ½ä¼˜åŒ–æ¦‚å¿µ](../09-æœ€æ–°ç‰¹æ€§/09.03-SQLiteçŸ¥è¯†å›¾è°±ä¸æ¦‚å¿µå…³ç³»ç½‘ç»œ.md#æ ¸å¿ƒæœ¬ä½“b-treeå­˜å‚¨)
- **å¥åº·æ£€æŸ¥** â†’ [çŸ¥è¯†å›¾è°±ï¼šç›‘æ§æ¦‚å¿µ](../09-æœ€æ–°ç‰¹æ€§/09.03-SQLiteçŸ¥è¯†å›¾è°±ä¸æ¦‚å¿µå…³ç³»ç½‘ç»œ.md#å¼€å‘å®è·µæœ¬ä½“)

---

**æœ€åæ›´æ–°**: 2025-12-05
**ç»´æŠ¤è€…**: Data-Science Team
