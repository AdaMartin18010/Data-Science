# æ•°æ®å»ºæ¨¡æŒ‡å¯¼ï¼šä»ä¸šåŠ¡éœ€æ±‚åˆ°æ•°æ®åº“è®¾è®¡çš„å®è·µæŒ‡å—

> **åˆ›å»ºæ—¥æœŸ**ï¼š2025-01-15
> **æœ€åæ›´æ–°**ï¼š2025-12-01
> **ç‰ˆæœ¬**ï¼šv2.0 (å¢å¼ºç‰ˆ)
> **çŠ¶æ€**ï¼šå·²å®Œæˆ âœ…

---

## ğŸ“‹ ç›®å½•

- [æ•°æ®å»ºæ¨¡æŒ‡å¯¼ï¼šä»ä¸šåŠ¡éœ€æ±‚åˆ°æ•°æ®åº“è®¾è®¡çš„å®è·µæŒ‡å—](#æ•°æ®å»ºæ¨¡æŒ‡å¯¼ä»ä¸šåŠ¡éœ€æ±‚åˆ°æ•°æ®åº“è®¾è®¡çš„å®è·µæŒ‡å—)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1. å»ºæ¨¡å±‚æ¬¡](#11-å»ºæ¨¡å±‚æ¬¡)
    - [1.2. å»ºæ¨¡æµç¨‹å†³ç­–æ ‘](#12-å»ºæ¨¡æµç¨‹å†³ç­–æ ‘)
  - [2. ä¸šåŠ¡åˆ†æ](#2-ä¸šåŠ¡åˆ†æ)
    - [2.1. ä¸šåŠ¡éœ€æ±‚æ”¶é›†](#21-ä¸šåŠ¡éœ€æ±‚æ”¶é›†)
    - [2.2. ä¸šåŠ¡å®ä½“è¯†åˆ«](#22-ä¸šåŠ¡å®ä½“è¯†åˆ«)
    - [2.3. ä¸šåŠ¡è§„åˆ™æå–](#23-ä¸šåŠ¡è§„åˆ™æå–)
  - [3. æ¦‚å¿µå»ºæ¨¡](#3-æ¦‚å¿µå»ºæ¨¡)
    - [3.1. ERå›¾è®¾è®¡](#31-erå›¾è®¾è®¡)
    - [3.2. å…³ç³»è¯†åˆ«](#32-å…³ç³»è¯†åˆ«)
    - [3.3. å±æ€§è®¾è®¡](#33-å±æ€§è®¾è®¡)
  - [4. é€»è¾‘å»ºæ¨¡](#4-é€»è¾‘å»ºæ¨¡)
    - [4.1. ERåˆ°å…³ç³»æ¨¡å‹è½¬æ¢](#41-eråˆ°å…³ç³»æ¨¡å‹è½¬æ¢)
    - [4.2. èŒƒå¼åŒ–è®¾è®¡](#42-èŒƒå¼åŒ–è®¾è®¡)
    - [4.3. åèŒƒå¼åŒ–è®¾è®¡](#43-åèŒƒå¼åŒ–è®¾è®¡)
  - [5. ç‰©ç†å»ºæ¨¡](#5-ç‰©ç†å»ºæ¨¡)
    - [5.1. æ•°æ®ç±»å‹é€‰æ‹©](#51-æ•°æ®ç±»å‹é€‰æ‹©)
    - [5.2. ç´¢å¼•è®¾è®¡](#52-ç´¢å¼•è®¾è®¡)
    - [5.3. åˆ†åŒºè®¾è®¡](#53-åˆ†åŒºè®¾è®¡)
  - [6. å»ºæ¨¡æœ€ä½³å®è·µ](#6-å»ºæ¨¡æœ€ä½³å®è·µ)
    - [6.1. å‘½åè§„èŒƒ](#61-å‘½åè§„èŒƒ)
    - [6.2. è®¾è®¡åŸåˆ™](#62-è®¾è®¡åŸåˆ™)
    - [6.3. å¸¸è§é™·é˜±](#63-å¸¸è§é™·é˜±)
  - [7. æ¡ˆä¾‹åˆ†æ](#7-æ¡ˆä¾‹åˆ†æ)
    - [7.1. ç”µå•†ç³»ç»Ÿå»ºæ¨¡](#71-ç”µå•†ç³»ç»Ÿå»ºæ¨¡)
    - [7.2. å»ºæ¨¡å†³ç­–è®°å½•](#72-å»ºæ¨¡å†³ç­–è®°å½•)
  - [8. 2024-2025å»ºæ¨¡è¶‹åŠ¿](#8-2024-2025å»ºæ¨¡è¶‹åŠ¿)
    - [8.1. æ•°æ®å»ºæ¨¡æ–¹æ³•æ¼”è¿›](#81-æ•°æ®å»ºæ¨¡æ–¹æ³•æ¼”è¿›)
    - [8.2. å»ºæ¨¡æ–¹æ³•é€‰å‹çŸ©é˜µ](#82-å»ºæ¨¡æ–¹æ³•é€‰å‹çŸ©é˜µ)
    - [8.3. AIè¾…åŠ©æ•°æ®å»ºæ¨¡](#83-aiè¾…åŠ©æ•°æ®å»ºæ¨¡)
    - [8.4. å¤šæ¨¡æ€æ•°æ®å»ºæ¨¡](#84-å¤šæ¨¡æ€æ•°æ®å»ºæ¨¡)
  - [9. å‚è€ƒèµ„æ–™](#9-å‚è€ƒèµ„æ–™)
    - [9.1. æƒå¨æ–‡çŒ®](#91-æƒå¨æ–‡çŒ®)
    - [9.2. åœ¨çº¿èµ„æº](#92-åœ¨çº¿èµ„æº)
    - [9.3. ç›¸å…³æ–‡æ¡£](#93-ç›¸å…³æ–‡æ¡£)

---

## 1. æ¦‚è¿°

æ•°æ®å»ºæ¨¡æ˜¯å°†ä¸šåŠ¡éœ€æ±‚è½¬åŒ–ä¸ºæ•°æ®åº“ç»“æ„çš„è¿‡ç¨‹ï¼Œæ¶‰åŠå¤šä¸ªå±‚æ¬¡çš„æŠ½è±¡å’Œè®¾è®¡ã€‚

### 1.1. å»ºæ¨¡å±‚æ¬¡

```mermaid
mindmap
  root((æ•°æ®å»ºæ¨¡å±‚æ¬¡))
    ä¸šåŠ¡å±‚
      ä¸šåŠ¡æµç¨‹
      ä¸šåŠ¡è§„åˆ™
      ä¸šåŠ¡å®ä½“
    æ¦‚å¿µå±‚
      å®ä½“è¯†åˆ«
      å…³ç³»è¯†åˆ«
      ERæ¨¡å‹
    é€»è¾‘å±‚
      è¡¨è®¾è®¡
      é”®è®¾è®¡
      èŒƒå¼åŒ–
    ç‰©ç†å±‚
      æ•°æ®ç±»å‹
      ç´¢å¼•
      å­˜å‚¨
```

### 1.2. å»ºæ¨¡æµç¨‹å†³ç­–æ ‘

```mermaid
flowchart TD
    A[å¼€å§‹å»ºæ¨¡] --> B[ä¸šåŠ¡åˆ†æ]
    B --> C[æ¦‚å¿µå»ºæ¨¡]
    C --> D[é€»è¾‘å»ºæ¨¡]
    D --> E[ç‰©ç†å»ºæ¨¡]

    E --> F{éªŒè¯}
    F -->|é€šè¿‡| G[å»ºæ¨¡å®Œæˆ]
    F -->|å¤±è´¥| H[é—®é¢˜åˆ†æ]

    H --> I{é—®é¢˜ç±»å‹}
    I -->|ä¸šåŠ¡ç†è§£| B
    I -->|æ¦‚å¿µè®¾è®¡| C
    I -->|é€»è¾‘è®¾è®¡| D
    I -->|ç‰©ç†è®¾è®¡| E
```

---

## 2. ä¸šåŠ¡åˆ†æ

### 2.1. ä¸šåŠ¡éœ€æ±‚æ”¶é›†

**éœ€æ±‚æ¥æº**ï¼š

1. **ä¸šåŠ¡æ–‡æ¡£**ï¼šä¸šåŠ¡æµç¨‹æ–‡æ¡£ã€éœ€æ±‚æ–‡æ¡£
2. **ä¸šåŠ¡è®¿è°ˆ**ï¼šä¸ä¸šåŠ¡äººå‘˜è®¿è°ˆ
3. **ç°æœ‰ç³»ç»Ÿ**ï¼šåˆ†æç°æœ‰ç³»ç»Ÿçš„æ•°æ®ç»“æ„
4. **ä¸šåŠ¡è§„åˆ™**ï¼šè¯†åˆ«ä¸šåŠ¡è§„åˆ™å’Œçº¦æŸ

### 2.2. ä¸šåŠ¡å®ä½“è¯†åˆ«

**å®ä½“è¯†åˆ«æ–¹æ³•**ï¼š

```text
æ–¹æ³•1ï¼šåè¯è¯†åˆ«æ³•
  ä»ä¸šåŠ¡æ–‡æ¡£ä¸­æå–åè¯ä½œä¸ºå€™é€‰å®ä½“
  è¿‡æ»¤ï¼šæ’é™¤éå®ä½“åè¯ï¼ˆå¦‚æ“ä½œã€çŠ¶æ€ç­‰ï¼‰

æ–¹æ³•2ï¼šä¸šåŠ¡æµç¨‹æ³•
  åˆ†æä¸šåŠ¡æµç¨‹ï¼Œè¯†åˆ«å‚ä¸çš„ä¸šåŠ¡å¯¹è±¡
  æ¯ä¸ªä¸šåŠ¡å¯¹è±¡æ˜¯ä¸€ä¸ªå€™é€‰å®ä½“

æ–¹æ³•3ï¼šæ•°æ®æµæ³•
  åˆ†ææ•°æ®æµï¼Œè¯†åˆ«æ•°æ®å­˜å‚¨ç‚¹
  æ¯ä¸ªæ•°æ®å­˜å‚¨ç‚¹å¯¹åº”ä¸€ä¸ªå®ä½“
```

**å®ä½“è¯†åˆ«å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[è¯†åˆ«å€™é€‰å®ä½“] --> B{æ˜¯ä¸šåŠ¡å¯¹è±¡?}
    B -->|æ˜¯| C{æœ‰ç‹¬ç«‹å­˜åœ¨æ€§?}
    B -->|å¦| D[æ’é™¤]

    C -->|æ˜¯| E{æœ‰å±æ€§?}
    C -->|å¦| D

    E -->|æ˜¯| F[ç¡®è®¤ä¸ºå®ä½“]
    E -->|å¦| G{æ˜¯å…³ç³»?}

    G -->|æ˜¯| H[ä½œä¸ºå…³ç³»å¤„ç†]
    G -->|å¦| D

    F --> I[å®šä¹‰å®ä½“å±æ€§]
    H --> J[å®šä¹‰å…³ç³»å±æ€§]
```

### 2.3. ä¸šåŠ¡è§„åˆ™æå–

**ä¸šåŠ¡è§„åˆ™ç±»å‹**ï¼š

1. **æ•°æ®è§„åˆ™**ï¼šæ•°æ®æ ¼å¼ã€å–å€¼èŒƒå›´
2. **å®Œæ•´æ€§è§„åˆ™**ï¼šå¿…å¡«ã€å”¯ä¸€æ€§ã€å¼•ç”¨å®Œæ•´æ€§
3. **ä¸šåŠ¡é€»è¾‘è§„åˆ™**ï¼šè®¡ç®—è§„åˆ™ã€çŠ¶æ€è½¬æ¢è§„åˆ™
4. **å®‰å…¨è§„åˆ™**ï¼šè®¿é—®æ§åˆ¶ã€æ•°æ®æƒé™

**è§„åˆ™æå–ç¤ºä¾‹**ï¼š

```text
ä¸šåŠ¡è§„åˆ™ï¼šç”¨æˆ·æ³¨å†Œ

è§„åˆ™1ï¼šç”¨æˆ·åå”¯ä¸€æ€§
  çº¦æŸï¼šusernameå¿…é¡»å”¯ä¸€
  å®ç°ï¼šUNIQUEçº¦æŸ

è§„åˆ™2ï¼šé‚®ç®±æ ¼å¼éªŒè¯
  çº¦æŸï¼šemailå¿…é¡»ç¬¦åˆé‚®ç®±æ ¼å¼
  å®ç°ï¼šCHECKçº¦æŸæˆ–åº”ç”¨å±‚éªŒè¯

è§„åˆ™3ï¼šå¯†ç å¼ºåº¦è¦æ±‚
  çº¦æŸï¼šå¯†ç è‡³å°‘8ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—
  å®ç°ï¼šåº”ç”¨å±‚éªŒè¯

è§„åˆ™4ï¼šæ³¨å†Œæ—¶é—´è®°å½•
  çº¦æŸï¼šè‡ªåŠ¨è®°å½•æ³¨å†Œæ—¶é—´
  å®ç°ï¼šDEFAULT CURRENT_TIMESTAMP
```

---

## 3. æ¦‚å¿µå»ºæ¨¡

### 3.1. ERå›¾è®¾è®¡

**ERå›¾è®¾è®¡æ­¥éª¤**ï¼š

1. **è¯†åˆ«å®ä½“**ï¼šç¡®å®šæ‰€æœ‰å®ä½“
2. **è¯†åˆ«å±æ€§**ï¼šä¸ºæ¯ä¸ªå®ä½“å®šä¹‰å±æ€§
3. **è¯†åˆ«å…³ç³»**ï¼šç¡®å®šå®ä½“é—´çš„å…³ç³»
4. **ç¡®å®šåŸºæ•°**ï¼šå®šä¹‰å…³ç³»çš„åŸºæ•°ï¼ˆ1:1, 1:N, M:Nï¼‰
5. **ç»˜åˆ¶ERå›¾**ï¼šä½¿ç”¨æ ‡å‡†ç¬¦å·ç»˜åˆ¶

**ERå›¾ç¤ºä¾‹**ï¼š

```mermaid
erDiagram
    USER ||--o{ ORDER : places
    ORDER ||--|{ ORDER_ITEM : contains
    PRODUCT ||--o{ ORDER_ITEM : "included in"
    CATEGORY ||--o{ PRODUCT : categorizes

    USER {
        int id PK
        string username UK
        string email UK
        string password_hash
        datetime created_at
    }

    ORDER {
        int id PK
        int user_id FK
        decimal total
        string status
        datetime order_date
    }

    PRODUCT {
        int id PK
        string name
        decimal price
        int stock
        int category_id FK
    }

    ORDER_ITEM {
        int order_id FK
        int product_id FK
        int quantity
        decimal price
    }

    CATEGORY {
        int id PK
        string name
        string description
    }
```

### 3.2. å…³ç³»è¯†åˆ«

**å…³ç³»è¯†åˆ«å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[è¯†åˆ«å…³ç³»] --> B{å…³ç³»ç±»å‹}

    B -->|1:1| C[ä¸€å¯¹ä¸€]
    B -->|1:N| D[ä¸€å¯¹å¤š]
    B -->|M:N| E[å¤šå¯¹å¤š]

    C --> F{éœ€è¦ç‹¬ç«‹è¡¨?}
    F -->|æ˜¯| G[åˆ›å»ºå…³è”è¡¨]
    F -->|å¦| H[å¤–é”®å…³ç³»]

    D --> I[å¤–é”®å…³ç³»]
    E --> G

    G --> J[å®šä¹‰å…³ç³»å±æ€§]
    H --> K[ç¡®å®šå¤–é”®ä½ç½®]
    I --> K
```

### 3.3. å±æ€§è®¾è®¡

**å±æ€§è®¾è®¡åŸåˆ™**ï¼š

1. **åŸå­æ€§**ï¼šå±æ€§å€¼ä¸å¯å†åˆ†
2. **ç›¸å…³æ€§**ï¼šå±æ€§ä¸å®ä½“ç›¸å…³
3. **éå†—ä½™**ï¼šé¿å…é‡å¤å±æ€§
4. **å®Œæ•´æ€§**ï¼šåŒ…å«æ‰€æœ‰å¿…è¦å±æ€§

**å±æ€§ç±»å‹**ï¼š

| å±æ€§ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|---------|------|------|
| **ç®€å•å±æ€§** | ä¸å¯å†åˆ†çš„å±æ€§ | name, age |
| **å¤åˆå±æ€§** | å¯åˆ†è§£çš„å±æ€§ | address (street, city, zip) |
| **å•å€¼å±æ€§** | æ¯ä¸ªå®ä¾‹ä¸€ä¸ªå€¼ | email |
| **å¤šå€¼å±æ€§** | æ¯ä¸ªå®ä¾‹å¤šä¸ªå€¼ | phone_numbers |
| **æ´¾ç”Ÿå±æ€§** | å¯è®¡ç®—çš„å±æ€§ | age (from birth_date) |

---

## 4. é€»è¾‘å»ºæ¨¡

### 4.1. ERåˆ°å…³ç³»æ¨¡å‹è½¬æ¢

**è½¬æ¢è§„åˆ™**ï¼š

```text
è§„åˆ™1ï¼šå®ä½“è½¬è¡¨
  Entity E â†’ Table T
  T.name = E.name
  T.columns = E.attributes (ç®€å•å±æ€§)

è§„åˆ™2ï¼š1:1å…³ç³»
  Relationship R (1:1) â†’ Foreign Key FK
  é€‰æ‹©ä¸€æ–¹ä½œä¸ºå¤–é”®æŒæœ‰è€…
  FK.table = chosenSide
  FK.references = otherSide

è§„åˆ™3ï¼š1:Nå…³ç³»
  Relationship R (1:N) â†’ Foreign Key FK
  FK.table = N-side
  FK.references = 1-side

è§„åˆ™4ï¼šM:Nå…³ç³»
  Relationship R (M:N) â†’ Table T
  T.name = R.name
  T.columns = [FK1, FK2, R.attributes]
  T.foreignKeys = [FK1 â†’ E1, FK2 â†’ E2]
```

**è½¬æ¢ç¤ºä¾‹**ï¼š

```sql
-- ERæ¨¡å‹ï¼šUSER (1) --places-- (N) ORDER

-- è½¬æ¢ç»“æœï¼š
CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE orders (
    id INTEGER PRIMARY KEY,
    user_id INTEGER NOT NULL,
    total DECIMAL(10,2),
    status VARCHAR(20),
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### 4.2. èŒƒå¼åŒ–è®¾è®¡

**èŒƒå¼åŒ–å†³ç­–æµç¨‹**ï¼š

```mermaid
flowchart TD
    A[å¼€å§‹èŒƒå¼åŒ–] --> B[æ£€æŸ¥1NF]
    B --> C{æ»¡è¶³1NF?}
    C -->|å¦| D[æ¶ˆé™¤å¤šå€¼å±æ€§]
    C -->|æ˜¯| E[æ£€æŸ¥2NF]

    D --> E
    E --> F{æ»¡è¶³2NF?}
    F -->|å¦| G[æ¶ˆé™¤éƒ¨åˆ†ä¾èµ–]
    F -->|æ˜¯| H[æ£€æŸ¥3NF]

    G --> H
    H --> I{æ»¡è¶³3NF?}
    I -->|å¦| J[æ¶ˆé™¤ä¼ é€’ä¾èµ–]
    I -->|æ˜¯| K{éœ€è¦BCNF?}

    J --> K
    K -->|æ˜¯| L[æ£€æŸ¥BCNF]
    K -->|å¦| M[è®¾è®¡å®Œæˆ]

    L --> N{æ»¡è¶³BCNF?}
    N -->|å¦| O[æ¶ˆé™¤éä¸»å±æ€§ä¾èµ–]
    N -->|æ˜¯| M

    O --> M
```

### 4.3. åèŒƒå¼åŒ–è®¾è®¡

**åèŒƒå¼åŒ–åœºæ™¯**ï¼š

| åœºæ™¯ | åŸå›  | æ–¹æ³• | é£é™© |
|------|------|------|------|
| **æŸ¥è¯¢æ€§èƒ½** | å‡å°‘JOINæ“ä½œ | å†—ä½™åˆ— | æ•°æ®ä¸€è‡´æ€§ |
| **æŠ¥è¡¨éœ€æ±‚** | é¢„è®¡ç®—èšåˆ | æ±‡æ€»è¡¨ | å­˜å‚¨ç©ºé—´ |
| **å†å²æ•°æ®** | ä¿ç•™å¿«ç…§ | éè§„èŒƒåŒ– | æ•°æ®å†—ä½™ |

**åèŒƒå¼åŒ–å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[åèŒƒå¼åŒ–å†³ç­–] --> B{æ€§èƒ½é—®é¢˜?}
    B -->|æ˜¯| C{é—®é¢˜ç±»å‹}
    B -->|å¦| D[ä¿æŒèŒƒå¼åŒ–]

    C -->|JOINè¿‡å¤š| E[å†—ä½™åˆ—]
    C -->|èšåˆæ…¢| F[æ±‡æ€»è¡¨]
    C -->|æŸ¥è¯¢å¤æ‚| G[ç‰©åŒ–è§†å›¾]

    E --> H[è¯„ä¼°ä¸€è‡´æ€§é£é™©]
    F --> H
    G --> H

    H --> I{é£é™©å¯æ¥å—?}
    I -->|æ˜¯| J[å®æ–½åèŒƒå¼åŒ–]
    I -->|å¦| K[ä¼˜åŒ–æŸ¥è¯¢/ç´¢å¼•]

    J --> L[è®¾è®¡å®Œæˆ]
    K --> L
    D --> L
```

---

## 5. ç‰©ç†å»ºæ¨¡

### 5.1. æ•°æ®ç±»å‹é€‰æ‹©

**æ•°æ®ç±»å‹é€‰æ‹©æŒ‡å—**ï¼š

| ä¸šåŠ¡éœ€æ±‚ | æ¨èç±»å‹ | ç†ç”± |
|---------|---------|------|
| **æ•´æ•°ID** | INTEGER/BIGINT | æ€§èƒ½å¥½ï¼ŒèŒƒå›´è¶³å¤Ÿ |
| **çŸ­æ–‡æœ¬** | VARCHAR(n) | èŠ‚çœç©ºé—´ |
| **é•¿æ–‡æœ¬** | TEXT | æ— é•¿åº¦é™åˆ¶ |
| **é‡‘é¢** | DECIMAL(10,2) | ç²¾ç¡®è®¡ç®— |
| **æ—¥æœŸ** | DATE | åªå­˜å‚¨æ—¥æœŸ |
| **æ—¶é—´æˆ³** | TIMESTAMP | åŒ…å«æ—¥æœŸæ—¶é—´ |
| **å¸ƒå°”å€¼** | BOOLEAN | è¯­ä¹‰æ¸…æ™° |
| **JSONæ•°æ®** | JSON/JSONB | çµæ´»ç»“æ„ |

### 5.2. ç´¢å¼•è®¾è®¡

**ç´¢å¼•è®¾è®¡ç­–ç•¥**ï¼š

```text
ç­–ç•¥1ï¼šä¸»é”®ç´¢å¼•
  è‡ªåŠ¨åˆ›å»ºï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»º

ç­–ç•¥2ï¼šå¤–é”®ç´¢å¼•
  ä¸ºæ‰€æœ‰å¤–é”®åˆ›å»ºç´¢å¼•
  CREATE INDEX idx_table_fk ON table(foreign_key);

ç­–ç•¥3ï¼šæŸ¥è¯¢ç´¢å¼•
  ä¸ºWHEREå­å¥ä¸­çš„åˆ—åˆ›å»ºç´¢å¼•
  CREATE INDEX idx_table_column ON table(column);

ç­–ç•¥4ï¼šæ’åºç´¢å¼•
  ä¸ºORDER BYä¸­çš„åˆ—åˆ›å»ºç´¢å¼•
  CREATE INDEX idx_table_sort ON table(sort_column);

ç­–ç•¥5ï¼šå¤åˆç´¢å¼•
  ä¸ºå¤šåˆ—æŸ¥è¯¢åˆ›å»ºå¤åˆç´¢å¼•
  CREATE INDEX idx_table_multi ON table(col1, col2);
```

**ç´¢å¼•è®¾è®¡å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[ç´¢å¼•è®¾è®¡] --> B{åˆ—ç±»å‹}

    B -->|ä¸»é”®| C[è‡ªåŠ¨ç´¢å¼•]
    B -->|å¤–é”®| D[åˆ›å»ºç´¢å¼•]
    B -->|æŸ¥è¯¢åˆ—| E{æŸ¥è¯¢é¢‘ç‡}
    B -->|æ’åºåˆ—| F[åˆ›å»ºç´¢å¼•]

    E -->|é«˜| G[åˆ›å»ºç´¢å¼•]
    E -->|ä½| H[ä¸åˆ›å»º]

    D --> I[åˆ†ææŸ¥è¯¢æ¨¡å¼]
    G --> I
    F --> I

    I --> J{éœ€è¦å¤åˆç´¢å¼•?}
    J -->|æ˜¯| K[è®¾è®¡å¤åˆç´¢å¼•]
    J -->|å¦| L[ç´¢å¼•è®¾è®¡å®Œæˆ]

    K --> M[ç¡®å®šåˆ—é¡ºåº]
    M --> L
```

### 5.3. åˆ†åŒºè®¾è®¡

**åˆ†åŒºç­–ç•¥é€‰æ‹©**ï¼š

```mermaid
flowchart TD
    A[åˆ†åŒºè®¾è®¡] --> B{æ•°æ®é‡}
    B -->|å°| C[ä¸åˆ†åŒº]
    B -->|å¤§| D{æ•°æ®ç‰¹æ€§}

    D -->|æ—¶é—´åºåˆ—| E[èŒƒå›´åˆ†åŒº]
    D -->|ç¦»æ•£å€¼| F[åˆ—è¡¨åˆ†åŒº]
    D -->|å‡åŒ€åˆ†å¸ƒ| G[å“ˆå¸Œåˆ†åŒº]

    E --> H[æŒ‰æ—¶é—´åˆ†åŒº]
    F --> I[æŒ‰ç±»åˆ«åˆ†åŒº]
    G --> J[æŒ‰å“ˆå¸Œå€¼åˆ†åŒº]

    H --> K[è®¾è®¡åˆ†åŒºé”®]
    I --> K
    J --> K

    K --> L[å®šä¹‰åˆ†åŒºç­–ç•¥]
    L --> M[åˆ†åŒºè®¾è®¡å®Œæˆ]
```

---

## 6. å»ºæ¨¡æœ€ä½³å®è·µ

### 6.1. å‘½åè§„èŒƒ

**å‘½åçº¦å®š**ï¼š

```text
è¡¨åï¼š
  - ä½¿ç”¨å¤æ•°å½¢å¼ï¼šusers, orders
  - ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ï¼šorder_items
  - é¿å…ç¼©å†™ï¼šusersè€Œéusr

åˆ—åï¼š
  - ä½¿ç”¨å•æ•°å½¢å¼ï¼šname, email
  - ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ï¼šfirst_name
  - å¸ƒå°”å€¼ä½¿ç”¨is_å‰ç¼€ï¼šis_active

ç´¢å¼•åï¼š
  - æ ¼å¼ï¼šidx_table_column
  - ç¤ºä¾‹ï¼šidx_users_email

å¤–é”®åï¼š
  - æ ¼å¼ï¼šfk_table_referenced_table
  - ç¤ºä¾‹ï¼šfk_orders_users
```

### 6.2. è®¾è®¡åŸåˆ™

**æ ¸å¿ƒåŸåˆ™**ï¼š

1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªè¡¨åªè¡¨ç¤ºä¸€ä¸ªå®ä½“
2. **è§„èŒƒåŒ–**ï¼šéµå¾ªèŒƒå¼ç†è®º
3. **å®Œæ•´æ€§**ï¼šå®šä¹‰é€‚å½“çš„çº¦æŸ
4. **æ€§èƒ½**ï¼šè€ƒè™‘æŸ¥è¯¢æ€§èƒ½
5. **å¯æ‰©å±•æ€§**ï¼šè€ƒè™‘æœªæ¥éœ€æ±‚

### 6.3. å¸¸è§é™·é˜±

**é¿å…çš„é™·é˜±**ï¼š

| é™·é˜± | é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| **è¿‡åº¦èŒƒå¼åŒ–** | æŸ¥è¯¢æ€§èƒ½å·® | é€‚å½“åèŒƒå¼åŒ– |
| **è¡¨è®¾è®¡è¿‡å¤§** | ç»´æŠ¤å›°éš¾ | æ‹†åˆ†è¡¨ |
| **ç¼ºå°‘ç´¢å¼•** | æŸ¥è¯¢æ…¢ | æ·»åŠ ç´¢å¼• |
| **å¤–é”®ç¼ºå¤±** | æ•°æ®ä¸ä¸€è‡´ | å®šä¹‰å¤–é”® |
| **æ•°æ®ç±»å‹ä¸å½“** | å­˜å‚¨æµªè´¹ | é€‰æ‹©åˆé€‚ç±»å‹ |

---

## 7. æ¡ˆä¾‹åˆ†æ

### 7.1. ç”µå•†ç³»ç»Ÿå»ºæ¨¡

**ä¸šåŠ¡éœ€æ±‚**ï¼š

- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- å•†å“æµè§ˆå’Œæœç´¢
- è´­ç‰©è½¦ç®¡ç†
- è®¢å•å¤„ç†
- æ”¯ä»˜å¤„ç†

**æ¦‚å¿µæ¨¡å‹**ï¼š

```mermaid
erDiagram
    USER ||--o{ ORDER : places
    USER ||--o{ CART_ITEM : has
    ORDER ||--|{ ORDER_ITEM : contains
    PRODUCT ||--o{ ORDER_ITEM : "included in"
    PRODUCT ||--o{ CART_ITEM : "included in"
    CATEGORY ||--o{ PRODUCT : categorizes
    PRODUCT ||--o{ PRODUCT_IMAGE : has
```

**é€»è¾‘æ¨¡å‹**ï¼š

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å•†å“è¡¨
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    stock INTEGER DEFAULT 0,
    category_id INTEGER REFERENCES categories(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è®¢å•è¡¨
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id),
    total DECIMAL(10,2) NOT NULL,
    status VARCHAR(20) DEFAULT 'pending',
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è®¢å•é¡¹è¡¨
CREATE TABLE order_items (
    order_id INTEGER REFERENCES orders(id),
    product_id INTEGER REFERENCES products(id),
    quantity INTEGER NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    PRIMARY KEY (order_id, product_id)
);
```

### 7.2. å»ºæ¨¡å†³ç­–è®°å½•

**å…³é”®å†³ç­–**ï¼š

1. **ç”¨æˆ·è¡¨è®¾è®¡**ï¼š
   - å†³ç­–ï¼šä½¿ç”¨ä»£ç†é”®ï¼ˆidï¼‰è€Œéè‡ªç„¶é”®ï¼ˆusernameï¼‰
   - ç†ç”±ï¼šusernameå¯èƒ½å˜åŒ–ï¼Œä»£ç†é”®æ›´ç¨³å®š
   - å®ç°ï¼š

     ```sql
     CREATE TABLE users (
         id SERIAL PRIMARY KEY,
         username VARCHAR(50) UNIQUE NOT NULL,
         email VARCHAR(100) UNIQUE NOT NULL
     );
     CREATE INDEX idx_users_email ON users(email);  -- ç™»å½•æŸ¥è¯¢
     ```

2. **è®¢å•é¡¹è®¾è®¡**ï¼š
   - å†³ç­–ï¼šå­˜å‚¨priceè€Œéä»productè¡¨æŸ¥è¯¢
   - ç†ç”±ï¼šå•†å“ä»·æ ¼å¯èƒ½å˜åŒ–ï¼Œéœ€è¦ä¿ç•™å†å²ä»·æ ¼
   - å®ç°ï¼š

     ```sql
     CREATE TABLE order_items (
         order_id INTEGER,
         product_id INTEGER,
         quantity INTEGER NOT NULL,
         price DECIMAL(10,2) NOT NULL,  -- è®¢å•æ—¶çš„ä»·æ ¼å¿«ç…§
         PRIMARY KEY (order_id, product_id)
     );
     ```

3. **ç´¢å¼•è®¾è®¡**ï¼š
   - usersè¡¨ï¼šemailç´¢å¼•ï¼ˆç™»å½•æŸ¥è¯¢ï¼‰
   - productsè¡¨ï¼šcategory_idç´¢å¼•ï¼ˆåˆ†ç±»æŸ¥è¯¢ï¼‰
   - ordersè¡¨ï¼šuser_idç´¢å¼•ï¼ˆç”¨æˆ·è®¢å•æŸ¥è¯¢ï¼‰
   - å®ç°ï¼š

     ```sql
     CREATE INDEX idx_users_email ON users(email);
     CREATE INDEX idx_products_category ON products(category_id);
     CREATE INDEX idx_orders_user ON orders(user_id, order_date DESC);  -- å¤åˆç´¢å¼•ä¼˜åŒ–æ’åº
     ```

4. **æ•°æ®ä¸€è‡´æ€§è®¾è®¡**ï¼š
   - å†³ç­–ï¼šä½¿ç”¨å¤–é”®çº¦æŸä¿è¯å¼•ç”¨å®Œæ•´æ€§
   - ç†ç”±ï¼šé˜²æ­¢å­¤ç«‹è®°å½•ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§
   - å®ç°ï¼š

     ```sql
     ALTER TABLE orders
     ADD CONSTRAINT fk_orders_users
     FOREIGN KEY (user_id) REFERENCES users(id)
     ON DELETE RESTRICT;  -- é˜²æ­¢åˆ é™¤æœ‰è®¢å•çš„ç”¨æˆ·
     ```

5. **æ€§èƒ½ä¼˜åŒ–è®¾è®¡**ï¼š
   - å†³ç­–ï¼šè®¢å•è¡¨æŒ‰æ—¶é—´åˆ†åŒº
   - ç†ç”±ï¼šè®¢å•æ•°æ®é‡å¤§ï¼ŒæŒ‰æ—¶é—´æŸ¥è¯¢é¢‘ç¹
   - å®ç°ï¼š

     ```sql
     CREATE TABLE orders (
         id SERIAL,
         user_id INTEGER NOT NULL,
         order_date TIMESTAMP NOT NULL,
         total DECIMAL(10,2) NOT NULL
     ) PARTITION BY RANGE (order_date);

     CREATE TABLE orders_2024 PARTITION OF orders
         FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');
     ```

---

## 8. 2024-2025å»ºæ¨¡è¶‹åŠ¿

### 8.1. æ•°æ®å»ºæ¨¡æ–¹æ³•æ¼”è¿›

```mermaid
timeline
    title æ•°æ®å»ºæ¨¡æ–¹æ³•æ¼”è¿›
    1976 : ERæ¨¡å‹
         : Chenæå‡º
    1990 : ç»´åº¦å»ºæ¨¡
         : Kimballæ–¹æ³•
    2010 : æ•æ·å»ºæ¨¡
         : è¿­ä»£è®¾è®¡
    2018 : Data Vault 2.0
         : å®¡è®¡è¿½æº¯
    2023 : AIè¾…åŠ©å»ºæ¨¡
         : è‡ªåŠ¨æ¨è
    2025 : è¯­ä¹‰å»ºæ¨¡
         : çŸ¥è¯†å›¾è°±èåˆ
```

### 8.2. å»ºæ¨¡æ–¹æ³•é€‰å‹çŸ©é˜µ

| æ–¹æ³• | é€‚ç”¨åœºæ™¯ | å¤æ‚åº¦ | çµæ´»æ€§ | å­¦ä¹ æ›²çº¿ |
|------|---------|--------|--------|---------|
| **ERå»ºæ¨¡** | OLTPç³»ç»Ÿ | ä¸­ | ä¸­ | ä½ |
| **ç»´åº¦å»ºæ¨¡** | æ•°æ®ä»“åº“ | ä¸­ | ä½ | ä¸­ |
| **Data Vault** | ä¼ä¸šæ•°æ®æ¹– | é«˜ | é«˜ | é«˜ |
| **å›¾å»ºæ¨¡** | å…³ç³»ç½‘ç»œ | ä¸­ | é«˜ | ä¸­ |
| **æ–‡æ¡£å»ºæ¨¡** | å†…å®¹ç®¡ç† | ä½ | é«˜ | ä½ |

### 8.3. AIè¾…åŠ©æ•°æ®å»ºæ¨¡

```mermaid
flowchart TB
    subgraph è¾“å…¥
        I1[ä¸šåŠ¡éœ€æ±‚æ–‡æ¡£]
        I2[ç°æœ‰Schema]
        I3[æŸ¥è¯¢æ¨¡å¼]
    end

    subgraph AIå»ºæ¨¡å¼•æ“
        A1[NLPå®ä½“è¯†åˆ«]
        A2[å…³ç³»æ¨æ–­]
        A3[èŒƒå¼åˆ†æ]
        A4[æ€§èƒ½é¢„æµ‹]
    end

    subgraph è¾“å‡º
        O1[ERå›¾å»ºè®®]
        O2[Schema DDL]
        O3[ç´¢å¼•å»ºè®®]
        O4[ä¼˜åŒ–å»ºè®®]
    end

    I1 --> A1
    I2 --> A3
    I3 --> A4
    A1 --> A2
    A2 --> O1
    A3 --> O2
    A4 --> O3
    A1 --> O4
```

### 8.4. å¤šæ¨¡æ€æ•°æ®å»ºæ¨¡

```sql
-- å¤šæ¨¡æ€ç»Ÿä¸€å»ºæ¨¡ç¤ºä¾‹
CREATE TABLE multi_modal_entities (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    entity_type VARCHAR(50) NOT NULL,
    -- å…³ç³»æ•°æ®
    structured_attrs JSONB,
    -- å‘é‡è¡¨ç¤º
    embedding vector(1536),
    -- å›¾å…³ç³»
    related_entities UUID[],
    -- æ—¶é—´ç»´åº¦
    valid_from TIMESTAMPTZ,
    valid_to TIMESTAMPTZ,
    -- ç©ºé—´ç»´åº¦
    location GEOGRAPHY(POINT, 4326),
    -- å…ƒæ•°æ®
    created_at TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP
);

-- å¤šç»´åº¦ç´¢å¼•
CREATE INDEX idx_multi_embedding ON multi_modal_entities USING ivfflat (embedding vector_cosine_ops);
CREATE INDEX idx_multi_location ON multi_modal_entities USING gist (location);
CREATE INDEX idx_multi_attrs ON multi_modal_entities USING gin (structured_attrs);
CREATE INDEX idx_multi_time ON multi_modal_entities (valid_from, valid_to);
```

---

## 9. å‚è€ƒèµ„æ–™

### 9.1. æƒå¨æ–‡çŒ®

**æ•°æ®å»ºæ¨¡ç†è®º**ï¼š

- Kimball, R. "The Data Warehouse Toolkit"
- Linstedt, D. "Building a Scalable Data Warehouse with Data Vault 2.0"

### 9.2. åœ¨çº¿èµ„æº

| èµ„æº | URL | æè¿° |
|------|-----|------|
| **dbdiagram.io** | <https://dbdiagram.io/> | åœ¨çº¿ERå»ºæ¨¡ |
| **ERDPlus** | <https://erdplus.com/> | ERå›¾å·¥å…· |
| **Vertabelo** | <https://vertabelo.com/> | åä½œå»ºæ¨¡ |

### 9.3. ç›¸å…³æ–‡æ¡£

- [07.01-Schemaè®¾è®¡æ–¹æ³•è®º](./07.01-Schemaè®¾è®¡æ–¹æ³•è®º.md)
- [07.02-å…ƒæ¨¡å‹ç†è®º](./07.02-å…ƒæ¨¡å‹ç†è®º.md)
- [01-ç†è®ºæ¨¡å‹/01.02-å…³ç³»æ•°æ®åº“ç†è®º](../01-ç†è®ºæ¨¡å‹/01.02-å…³ç³»æ•°æ®åº“ç†è®º.md)

---

**æœ€åæ›´æ–°**ï¼š2025-12-01
**ç»´æŠ¤è€…**ï¼šData-Science Team
**çŠ¶æ€**ï¼šå·²å®Œæˆ âœ…
**ç‰ˆæœ¬**ï¼šv2.0 (å¢å¼ºç‰ˆ)
