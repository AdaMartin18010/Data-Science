# å¤šæ¨¡å‹æ•°æ®åº“ç†è®ºï¼šç»Ÿä¸€æ•°æ®æ¨¡å‹æ¡†æ¶

> **åˆ›å»ºæ—¥æœŸ**ï¼š2025-01-15
> **æœ€åæ›´æ–°**ï¼š2025-01-15
> **ç‰ˆæœ¬**ï¼šv1.0
> **çŠ¶æ€**ï¼šè§„åˆ’ä¸­

---

## ğŸ“‹ ç›®å½•

- [å¤šæ¨¡å‹æ•°æ®åº“ç†è®ºï¼šç»Ÿä¸€æ•°æ®æ¨¡å‹æ¡†æ¶](#å¤šæ¨¡å‹æ•°æ®åº“ç†è®ºç»Ÿä¸€æ•°æ®æ¨¡å‹æ¡†æ¶)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1. å¤šæ¨¡å‹æ•°æ®åº“çš„å¿…è¦æ€§](#11-å¤šæ¨¡å‹æ•°æ®åº“çš„å¿…è¦æ€§)
    - [1.2. ç»Ÿä¸€æ¡†æ¶çš„ä»·å€¼](#12-ç»Ÿä¸€æ¡†æ¶çš„ä»·å€¼)
    - [1.3. å¤šæ¨¡å‹æ•°æ®åº“æ€ç»´å¯¼å›¾](#13-å¤šæ¨¡å‹æ•°æ®åº“æ€ç»´å¯¼å›¾)
    - [1.4. æ•°æ®æ¨¡å‹é€‰æ‹©å†³ç­–æ ‘](#14-æ•°æ®æ¨¡å‹é€‰æ‹©å†³ç­–æ ‘)
    - [1.5. æ•°æ®æ¨¡å‹å¯¹æ¯”çŸ©é˜µ](#15-æ•°æ®æ¨¡å‹å¯¹æ¯”çŸ©é˜µ)
  - [2. å¤šæ¨¡å‹æ•°æ®åº“åŸºç¡€](#2-å¤šæ¨¡å‹æ•°æ®åº“åŸºç¡€)
    - [2.1. æ•°æ®æ¨¡å‹åˆ†ç±»](#21-æ•°æ®æ¨¡å‹åˆ†ç±»)
    - [2.2. å¤šæ¨¡å‹æ•°æ®åº“ç³»ç»Ÿ](#22-å¤šæ¨¡å‹æ•°æ®åº“ç³»ç»Ÿ)
  - [3. ç»Ÿä¸€æ•°æ®æ¨¡å‹æ¡†æ¶](#3-ç»Ÿä¸€æ•°æ®æ¨¡å‹æ¡†æ¶)
    - [3.1. æŠ½è±¡æ•°æ®æ¨¡å‹](#31-æŠ½è±¡æ•°æ®æ¨¡å‹)
    - [3.2. æ¨¡å‹æ˜ å°„](#32-æ¨¡å‹æ˜ å°„)
    - [3.3. ç»Ÿä¸€æŸ¥è¯¢è¯­è¨€](#33-ç»Ÿä¸€æŸ¥è¯¢è¯­è¨€)
  - [4. æ¨¡å‹é—´è½¬æ¢](#4-æ¨¡å‹é—´è½¬æ¢)
    - [4.1. å…³ç³»æ¨¡å‹ â†” æ–‡æ¡£æ¨¡å‹](#41-å…³ç³»æ¨¡å‹--æ–‡æ¡£æ¨¡å‹)
      - [4.1.1. å…³ç³»æ¨¡å‹åˆ°æ–‡æ¡£æ¨¡å‹è½¬æ¢å†³ç­–æ ‘](#411-å…³ç³»æ¨¡å‹åˆ°æ–‡æ¡£æ¨¡å‹è½¬æ¢å†³ç­–æ ‘)
      - [4.1.2. è½¬æ¢ç®—æ³•è¯¦ç»†è®ºè¯](#412-è½¬æ¢ç®—æ³•è¯¦ç»†è®ºè¯)
      - [4.1.3. æ¨¡å‹è½¬æ¢æ­£ç¡®æ€§çŸ©é˜µ](#413-æ¨¡å‹è½¬æ¢æ­£ç¡®æ€§çŸ©é˜µ)
    - [4.2. å…³ç³»æ¨¡å‹ â†” å›¾æ¨¡å‹](#42-å…³ç³»æ¨¡å‹--å›¾æ¨¡å‹)
    - [4.3. æ–‡æ¡£æ¨¡å‹ â†” å›¾æ¨¡å‹](#43-æ–‡æ¡£æ¨¡å‹--å›¾æ¨¡å‹)
  - [5. è·¨æ¨¡å‹æŸ¥è¯¢](#5-è·¨æ¨¡å‹æŸ¥è¯¢)
    - [5.1. ç»Ÿä¸€æŸ¥è¯¢è¯­æ³•](#51-ç»Ÿä¸€æŸ¥è¯¢è¯­æ³•)
    - [5.2. æŸ¥è¯¢ä¼˜åŒ–](#52-æŸ¥è¯¢ä¼˜åŒ–)
    - [5.3. æŸ¥è¯¢è®¡åˆ’](#53-æŸ¥è¯¢è®¡åˆ’)
  - [6. å¤šæ¨¡å‹äº‹åŠ¡ä¸€è‡´æ€§](#6-å¤šæ¨¡å‹äº‹åŠ¡ä¸€è‡´æ€§)
    - [6.1. è·¨æ¨¡å‹äº‹åŠ¡](#61-è·¨æ¨¡å‹äº‹åŠ¡)
    - [6.2. ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰](#62-ä¸¤é˜¶æ®µæäº¤2pc)
    - [6.3. Sagaæ¨¡å¼](#63-sagaæ¨¡å¼)
  - [7. å½¢å¼åŒ–æ¡†æ¶](#7-å½¢å¼åŒ–æ¡†æ¶)
    - [7.1. æ¨¡å‹ç±»å‹ç³»ç»Ÿ](#71-æ¨¡å‹ç±»å‹ç³»ç»Ÿ)
    - [7.2. æ¨¡å‹è½¬æ¢å‡½å­](#72-æ¨¡å‹è½¬æ¢å‡½å­)
    - [7.3. ç»Ÿä¸€æŸ¥è¯¢è¯­ä¹‰](#73-ç»Ÿä¸€æŸ¥è¯¢è¯­ä¹‰)
  - [8. å‚è€ƒèµ„æ–™](#8-å‚è€ƒèµ„æ–™)
    - [8.1. å­¦æœ¯æ–‡çŒ®](#81-å­¦æœ¯æ–‡çŒ®)
    - [8.2. ç›¸å…³èµ„æº](#82-ç›¸å…³èµ„æº)

---

## 1. æ¦‚è¿°

### 1.1. å¤šæ¨¡å‹æ•°æ®åº“çš„å¿…è¦æ€§

ç°ä»£åº”ç”¨éœ€è¦å¤„ç†å¤šç§æ•°æ®æ¨¡å‹ï¼š

1. **å…³ç³»æ¨¡å‹**ï¼šç»“æ„åŒ–æ•°æ®ï¼ŒSQLæŸ¥è¯¢
2. **æ–‡æ¡£æ¨¡å‹**ï¼šåŠç»“æ„åŒ–æ•°æ®ï¼ŒJSON/XML
3. **å›¾æ¨¡å‹**ï¼šå…³ç³»ç½‘ç»œï¼Œå›¾æŸ¥è¯¢
4. **é”®å€¼æ¨¡å‹**ï¼šç®€å•é”®å€¼å¯¹ï¼Œå¿«é€Ÿè®¿é—®
5. **æ—¶åºæ¨¡å‹**ï¼šæ—¶é—´åºåˆ—æ•°æ®ï¼Œæ—¶é—´æŸ¥è¯¢
6. **å‘é‡æ¨¡å‹**ï¼šé«˜ç»´å‘é‡ï¼Œç›¸ä¼¼æ€§æœç´¢

### 1.2. ç»Ÿä¸€æ¡†æ¶çš„ä»·å€¼

ç»Ÿä¸€æ•°æ®æ¨¡å‹æ¡†æ¶æä¾›ï¼š

- **ç»Ÿä¸€æ¥å£**ï¼šå•ä¸€APIè®¿é—®å¤šç§æ¨¡å‹
- **æ¨¡å‹è½¬æ¢**ï¼šè‡ªåŠ¨æ¨¡å‹é—´è½¬æ¢
- **è·¨æ¨¡å‹æŸ¥è¯¢**ï¼šç»Ÿä¸€æŸ¥è¯¢è¯­è¨€
- **ä¸€è‡´æ€§ä¿è¯**ï¼šè·¨æ¨¡å‹äº‹åŠ¡ä¸€è‡´æ€§

### 1.3. å¤šæ¨¡å‹æ•°æ®åº“æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((å¤šæ¨¡å‹æ•°æ®åº“))
    æ•°æ®æ¨¡å‹
      å…³ç³»æ¨¡å‹
        è¡¨ç»“æ„
        SQLæŸ¥è¯¢
        äº‹åŠ¡ACID
      æ–‡æ¡£æ¨¡å‹
        JSON/BSON
        åµŒå¥—ç»“æ„
        çµæ´»æ¨¡å¼
      å›¾æ¨¡å‹
        èŠ‚ç‚¹è¾¹
        å›¾æŸ¥è¯¢
        è·¯å¾„æŸ¥è¯¢
      é”®å€¼æ¨¡å‹
        ç®€å•ç»“æ„
        å¿«é€Ÿè®¿é—®
        NoSQL
      æ—¶åºæ¨¡å‹
        æ—¶é—´åºåˆ—
        æ—¶é—´æŸ¥è¯¢
        èšåˆåˆ†æ
      å‘é‡æ¨¡å‹
        é«˜ç»´å‘é‡
        ç›¸ä¼¼æ€§æœç´¢
        AIåº”ç”¨
    ç»Ÿä¸€æ¡†æ¶
      æ¨¡å‹è½¬æ¢
        å…³ç³»â†”æ–‡æ¡£
        å…³ç³»â†”å›¾
        æ–‡æ¡£â†”å›¾
      è·¨æ¨¡å‹æŸ¥è¯¢
        ç»Ÿä¸€è¯­æ³•
        æŸ¥è¯¢ä¼˜åŒ–
        æ‰§è¡Œè®¡åˆ’
      äº‹åŠ¡ä¸€è‡´æ€§
        è·¨æ¨¡å‹äº‹åŠ¡
        ä¸¤é˜¶æ®µæäº¤
        Sagaæ¨¡å¼
```

### 1.4. æ•°æ®æ¨¡å‹é€‰æ‹©å†³ç­–æ ‘

```mermaid
flowchart TD
    A[é€‰æ‹©æ•°æ®æ¨¡å‹] --> B{æ•°æ®ç»“æ„ç‰¹ç‚¹}

    B -->|ç»“æ„åŒ–è¡¨| C[å…³ç³»æ¨¡å‹]
    B -->|åµŒå¥—æ–‡æ¡£| D[æ–‡æ¡£æ¨¡å‹]
    B -->|å…³ç³»ç½‘ç»œ| E[å›¾æ¨¡å‹]
    B -->|ç®€å•é”®å€¼| F[é”®å€¼æ¨¡å‹]
    B -->|æ—¶é—´åºåˆ—| G[æ—¶åºæ¨¡å‹]
    B -->|é«˜ç»´å‘é‡| H[å‘é‡æ¨¡å‹]

    C --> C1{æŸ¥è¯¢ç±»å‹}
    C1 -->|SQLæŸ¥è¯¢| C2[PostgreSQL/MySQL]
    C1 -->|ACIDäº‹åŠ¡| C2

    D --> D1{æ–‡æ¡£ç»“æ„}
    D1 -->|JSON| D2[MongoDB/CouchDB]
    D1 -->|çµæ´»æ¨¡å¼| D2

    E --> E1{å›¾æŸ¥è¯¢}
    E1 -->|è·¯å¾„æŸ¥è¯¢| E2[Neo4j/ArangoDB]
    E1 -->|å…³ç³»åˆ†æ| E2

    F --> F1[Redis/Cassandra]
    G --> G1[InfluxDB/TimescaleDB]
    H --> H2[Pinecone/Weaviate]

    C2 --> I{éœ€è¦å¤šæ¨¡å‹?}
    D2 --> I
    E2 --> I
    F1 --> I
    G1 --> I
    H2 --> I

    I -->|æ˜¯| J[å¤šæ¨¡å‹æ•°æ®åº“]
    I -->|å¦| K[å•ä¸€æ¨¡å‹æ•°æ®åº“]

    J --> L[ArangoDB/CosmosDB]
    K --> M[ä¸“ç”¨æ•°æ®åº“]
```

### 1.5. æ•°æ®æ¨¡å‹å¯¹æ¯”çŸ©é˜µ

| æ•°æ®æ¨¡å‹ | æ•°æ®ç»“æ„ | æŸ¥è¯¢è¯­è¨€ | äº‹åŠ¡æ”¯æŒ | é€‚ç”¨åœºæ™¯ | æ€§èƒ½ç‰¹ç‚¹ |
|---------|---------|---------|---------|---------|---------|
| **å…³ç³»æ¨¡å‹** | è¡¨ã€è¡Œã€åˆ— | SQL | ACID | ç»“æ„åŒ–æ•°æ® | â­â­â­â­ |
| **æ–‡æ¡£æ¨¡å‹** | JSON/BSON | MongoDB Query | æœ‰é™ | åŠç»“æ„åŒ–æ•°æ® | â­â­â­â­â­ |
| **å›¾æ¨¡å‹** | èŠ‚ç‚¹ã€è¾¹ | Cypher/Gremlin | æœ‰é™ | å…³ç³»ç½‘ç»œ | â­â­â­ |
| **é”®å€¼æ¨¡å‹** | é”®å€¼å¯¹ | ç®€å•API | æœ‰é™ | ç¼“å­˜ã€ä¼šè¯ | â­â­â­â­â­ |
| **æ—¶åºæ¨¡å‹** | æ—¶é—´åºåˆ— | æ—¶é—´æŸ¥è¯¢ | æœ‰é™ | ç›‘æ§ã€IoT | â­â­â­â­ |
| **å‘é‡æ¨¡å‹** | é«˜ç»´å‘é‡ | å‘é‡æŸ¥è¯¢ | æœ‰é™ | AIã€æœç´¢ | â­â­â­ |

---

## 2. å¤šæ¨¡å‹æ•°æ®åº“åŸºç¡€

### 2.1. æ•°æ®æ¨¡å‹åˆ†ç±»

**ç»“æ„åŒ–æ¨¡å‹**ï¼š

- **å…³ç³»æ¨¡å‹**ï¼šè¡¨ã€è¡Œã€åˆ—
- **é”®å€¼æ¨¡å‹**ï¼šé”®å€¼å¯¹
- **åˆ—æ—æ¨¡å‹**ï¼šåˆ—æ—ã€è¡Œé”®

**åŠç»“æ„åŒ–æ¨¡å‹**ï¼š

- **æ–‡æ¡£æ¨¡å‹**ï¼šJSONã€XMLã€BSON
- **æ ‘æ¨¡å‹**ï¼šå±‚æ¬¡ç»“æ„

**éç»“æ„åŒ–æ¨¡å‹**ï¼š

- **å›¾æ¨¡å‹**ï¼šèŠ‚ç‚¹ã€è¾¹ã€å±æ€§
- **å‘é‡æ¨¡å‹**ï¼šé«˜ç»´å‘é‡ç©ºé—´
- **æ—¶åºæ¨¡å‹**ï¼šæ—¶é—´åºåˆ—

### 2.2. å¤šæ¨¡å‹æ•°æ®åº“ç³»ç»Ÿ

**ç»Ÿä¸€åç«¯ç³»ç»Ÿï¼ˆUDBMSï¼‰**ï¼š

```text
UDBMS = {
    å…³ç³»æ¨¡å‹: RelationalModel,
    æ–‡æ¡£æ¨¡å‹: DocumentModel,
    å›¾æ¨¡å‹: GraphModel,
    é”®å€¼æ¨¡å‹: KeyValueModel,
    æ—¶åºæ¨¡å‹: TimeSeriesModel,
    å‘é‡æ¨¡å‹: VectorModel
}
```

**ç¤ºä¾‹ç³»ç»Ÿ**ï¼š

- **PostgreSQL**ï¼šæ”¯æŒå…³ç³»ã€JSONã€æ•°ç»„ã€å‘é‡
- **MongoDB**ï¼šæ”¯æŒæ–‡æ¡£ã€å›¾ã€æ—¶åº
- **ArangoDB**ï¼šç»Ÿä¸€å¤šæ¨¡å‹æ•°æ®åº“
- **Couchbase**ï¼šæ–‡æ¡£å’Œé”®å€¼æ¨¡å‹

---

## 3. ç»Ÿä¸€æ•°æ®æ¨¡å‹æ¡†æ¶

### 3.1. æŠ½è±¡æ•°æ®æ¨¡å‹

**ç»Ÿä¸€æ•°æ®æ¨¡å‹å®šä¹‰**ï¼š

```haskell
-- ç»Ÿä¸€æ•°æ®æ¨¡å‹
data UnifiedDataModel = UnifiedModel {
    models :: [DataModel],
    mappings :: [ModelMapping],
    queries :: [UnifiedQuery]
}

-- æ•°æ®æ¨¡å‹
data DataModel =
    RelationalModel Schema
  | DocumentModel DocumentSchema
  | GraphModel GraphSchema
  | KeyValueModel KeyValueSchema
  | TimeSeriesModel TimeSeriesSchema
  | VectorModel VectorSchema
```

### 3.2. æ¨¡å‹æ˜ å°„

**æ¨¡å‹æ˜ å°„å®šä¹‰**ï¼š

```haskell
-- æ¨¡å‹æ˜ å°„
class ModelTransformer a b where
    transform :: a -> b
    preserve :: Property -> Bool
    inverse :: b -> Maybe a

-- å…³ç³»æ¨¡å‹ â†’ æ–‡æ¡£æ¨¡å‹
instance ModelTransformer RelationalModel DocumentModel where
    transform (RelationalModel schema) =
        DocumentModel (schemaToDocumentSchema schema)
    preserve DataIntegrity = True
    preserve QuerySemantics = True
```

### 3.3. ç»Ÿä¸€æŸ¥è¯¢è¯­è¨€

**ç»Ÿä¸€æŸ¥è¯¢æ¥å£**ï¼š

```haskell
-- ç»Ÿä¸€æŸ¥è¯¢
data UnifiedQuery = UnifiedQuery {
    model :: DataModel,
    query :: QueryExpression,
    result :: ResultType
}

-- æŸ¥è¯¢è¡¨è¾¾å¼
data QueryExpression =
    SelectQuery SelectClause FromClause WhereClause
  | GraphQuery GraphPattern
  | DocumentQuery DocumentFilter
  | VectorQuery SimilaritySearch
```

---

## 4. æ¨¡å‹é—´è½¬æ¢

### 4.1. å…³ç³»æ¨¡å‹ â†” æ–‡æ¡£æ¨¡å‹

**å…³ç³» â†’ æ–‡æ¡£**ï¼š

```text
è¡¨ â†’ æ–‡æ¡£é›†åˆ
è¡Œ â†’ æ–‡æ¡£
åˆ— â†’ æ–‡æ¡£å­—æ®µ
å¤–é”® â†’ åµŒå¥—æ–‡æ¡£æˆ–å¼•ç”¨
```

**è¯¦ç»†è®ºè¯**ï¼š

#### 4.1.1. å…³ç³»æ¨¡å‹åˆ°æ–‡æ¡£æ¨¡å‹è½¬æ¢å†³ç­–æ ‘

```mermaid
flowchart TD
    A[å…³ç³»æ¨¡å‹â†’æ–‡æ¡£æ¨¡å‹] --> B{å¤–é”®å…³ç³»}

    B -->|ä¸€å¯¹ä¸€| C[åµŒå¥—æ–‡æ¡£]
    B -->|ä¸€å¯¹å¤š| D[åµŒå¥—æ•°ç»„]
    B -->|å¤šå¯¹å¤š| E[å¼•ç”¨æ•°ç»„]

    C --> F[åˆ›å»ºåµŒå¥—å¯¹è±¡]
    D --> G[åˆ›å»ºåµŒå¥—æ•°ç»„]
    E --> H[åˆ›å»ºå¼•ç”¨IDæ•°ç»„]

    F --> I[éªŒè¯è½¬æ¢]
    G --> I
    H --> I

    I --> J{æ•°æ®å®Œæ•´æ€§?}
    J -->|æ˜¯| K[è½¬æ¢å®Œæˆ]
    J -->|å¦| L[è°ƒæ•´è½¬æ¢ç­–ç•¥]
    L --> B
```

#### 4.1.2. è½¬æ¢ç®—æ³•è¯¦ç»†è®ºè¯

**è½¬æ¢ç®—æ³•**ï¼š

```text
ç®—æ³•ï¼šå…³ç³»æ¨¡å‹åˆ°æ–‡æ¡£æ¨¡å‹è½¬æ¢
è¾“å…¥ï¼šå…³ç³»è¡¨ Rï¼Œå¤–é”®å…³ç³» F
è¾“å‡ºï¼šæ–‡æ¡£é›†åˆ D

æ­¥éª¤ï¼š
1. å¯¹äºæ¯ä¸ªè¡¨ Tï¼š
    åˆ›å»ºæ–‡æ¡£é›†åˆ D_T = {}

2. å¯¹äºæ¯ä¸ªè¡Œ r âˆˆ Tï¼š
    åˆ›å»ºæ–‡æ¡£ d = {}

    å¯¹äºæ¯ä¸ªåˆ— c âˆˆ Tï¼š
        d[c] = r[c]

    å¯¹äºæ¯ä¸ªå¤–é”® fk: T â†’ T'ï¼š
        å¦‚æœæ˜¯ä¸€å¯¹ä¸€å…³ç³»ï¼š
            d[fk.name] = æŸ¥æ‰¾å…³è”æ–‡æ¡£(r[fk])
        å¦‚æœæ˜¯ä¸€å¯¹å¤šå…³ç³»ï¼š
            d[fk.name] = æŸ¥æ‰¾å…³è”æ–‡æ¡£æ•°ç»„(r[fk])

    D_T = D_T âˆª {d}

3. è¿”å› D = âˆª_{T} D_T
```

**è½¬æ¢æ­£ç¡®æ€§è¯æ˜**ï¼š

```text
éœ€è¦è¯æ˜ï¼šè½¬æ¢åçš„æ–‡æ¡£æ¨¡å‹ä¿æŒå…³ç³»æ¨¡å‹çš„æ•°æ®å’Œè¯­ä¹‰

è¯æ˜æ­¥éª¤ï¼š
  1. æ•°æ®å®Œæ•´æ€§ï¼š
     - æ¯ä¸ªå…³ç³»è¡Œå¯¹åº”ä¸€ä¸ªæ–‡æ¡£
     - æ¯ä¸ªåˆ—å€¼å¯¹åº”æ–‡æ¡£å­—æ®µå€¼
     - å¤–é”®å…³ç³»è½¬æ¢ä¸ºåµŒå¥—æˆ–å¼•ç”¨

  2. è¯­ä¹‰ç­‰ä»·æ€§ï¼š
     - å…³ç³»æŸ¥è¯¢å¯ä»¥è½¬æ¢ä¸ºæ–‡æ¡£æŸ¥è¯¢
     - æŸ¥è¯¢ç»“æœè¯­ä¹‰ç­‰ä»·

  3. çº¦æŸä¿æŒï¼š
     - ä¸»é”®çº¦æŸ â†’ æ–‡æ¡£IDå”¯ä¸€æ€§
     - å¤–é”®çº¦æŸ â†’ å¼•ç”¨å®Œæ•´æ€§
```

**ç¤ºä¾‹**ï¼š

```sql
-- å…³ç³»æ¨¡å‹
CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    name TEXT,
    email TEXT
);

CREATE TABLE orders (
    id INTEGER PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    total DECIMAL
);
```

```json
// æ–‡æ¡£æ¨¡å‹
{
  "users": [
    {
      "id": 1,
      "name": "Alice",
      "email": "alice@example.com",
      "orders": [
        {"id": 1, "total": 100.0},
        {"id": 2, "total": 200.0}
      ]
    }
  ]
}
```

**æ–‡æ¡£ â†’ å…³ç³»**ï¼š

```text
æ–‡æ¡£é›†åˆ â†’ è¡¨
æ–‡æ¡£ â†’ è¡Œ
å­—æ®µ â†’ åˆ—
åµŒå¥—æ–‡æ¡£ â†’ å…³è”è¡¨
```

#### 4.1.3. æ¨¡å‹è½¬æ¢æ­£ç¡®æ€§çŸ©é˜µ

| è½¬æ¢æ–¹å‘ | è½¬æ¢æ–¹æ³• | æ•°æ®å®Œæ•´æ€§ | è¯­ä¹‰ç­‰ä»·æ€§ | æ€§èƒ½å½±å“ | å¤æ‚åº¦ |
|---------|---------|-----------|-----------|---------|--------|
| **å…³ç³»â†’æ–‡æ¡£** | åµŒå¥—/å¼•ç”¨ | â­â­â­â­ | â­â­â­â­ | â­â­â­ | â­â­â­ |
| **æ–‡æ¡£â†’å…³ç³»** | æ‰å¹³åŒ–/å…³è”è¡¨ | â­â­â­ | â­â­â­ | â­â­â­â­ | â­â­â­â­ |
| **å…³ç³»â†’å›¾** | è¡¨â†’èŠ‚ç‚¹ï¼Œå¤–é”®â†’è¾¹ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ | â­â­ |
| **å›¾â†’å…³ç³»** | èŠ‚ç‚¹â†’è¡¨ï¼Œè¾¹â†’å…³è”è¡¨ | â­â­â­â­ | â­â­â­ | â­â­â­ | â­â­â­ |
| **æ–‡æ¡£â†’å›¾** | æ–‡æ¡£â†’èŠ‚ç‚¹ï¼Œå¼•ç”¨â†’è¾¹ | â­â­â­â­ | â­â­â­ | â­â­â­ | â­â­â­ |

### 4.2. å…³ç³»æ¨¡å‹ â†” å›¾æ¨¡å‹

**å…³ç³» â†’ å›¾**ï¼š

```text
è¡¨ â†’ èŠ‚ç‚¹ç±»å‹æˆ–è¾¹ç±»å‹
è¡Œ â†’ èŠ‚ç‚¹æˆ–è¾¹
åˆ— â†’ èŠ‚ç‚¹æˆ–è¾¹å±æ€§
å¤–é”® â†’ è¾¹
```

**ç¤ºä¾‹**ï¼š

```sql
-- å…³ç³»æ¨¡å‹
CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    name TEXT
);

CREATE TABLE follows (
    follower_id INTEGER REFERENCES users(id),
    followee_id INTEGER REFERENCES users(id)
);
```

```cypher
// å›¾æ¨¡å‹
CREATE (u1:User {id: 1, name: "Alice"})
CREATE (u2:User {id: 2, name: "Bob"})
CREATE (u1)-[:FOLLOWS]->(u2)
```

**å›¾ â†’ å…³ç³»**ï¼š

```text
èŠ‚ç‚¹ç±»å‹ â†’ è¡¨
èŠ‚ç‚¹ â†’ è¡Œ
èŠ‚ç‚¹å±æ€§ â†’ åˆ—
è¾¹ç±»å‹ â†’ å…³è”è¡¨
è¾¹ â†’ å…³è”è¡Œ
```

### 4.3. æ–‡æ¡£æ¨¡å‹ â†” å›¾æ¨¡å‹

**æ–‡æ¡£ â†’ å›¾**ï¼š

```text
æ–‡æ¡£é›†åˆ â†’ èŠ‚ç‚¹ç±»å‹
æ–‡æ¡£ â†’ èŠ‚ç‚¹
å­—æ®µ â†’ èŠ‚ç‚¹å±æ€§
å¼•ç”¨ â†’ è¾¹
```

**å›¾ â†’ æ–‡æ¡£**ï¼š

```text
èŠ‚ç‚¹ç±»å‹ â†’ æ–‡æ¡£é›†åˆ
èŠ‚ç‚¹ â†’ æ–‡æ¡£
èŠ‚ç‚¹å±æ€§ â†’ æ–‡æ¡£å­—æ®µ
è¾¹ â†’ æ–‡æ¡£å¼•ç”¨æˆ–åµŒå¥—
```

---

## 5. è·¨æ¨¡å‹æŸ¥è¯¢

### 5.1. ç»Ÿä¸€æŸ¥è¯¢è¯­æ³•

**SQLæ‰©å±•**ï¼š

```sql
-- è·¨æ¨¡å‹æŸ¥è¯¢
SELECT u.name, COUNT(o.id) as order_count
FROM users u
JOIN orders o ON u.id = o.user_id
WHERE u.profile->>'city' = 'Beijing'  -- JSONå­—æ®µ
  AND EXISTS (
    SELECT 1 FROM graph_paths gp
    WHERE gp.start_node = u.id
      AND gp.end_node = 100
      AND gp.distance <= 3
  )
GROUP BY u.id, u.name;
```

### 5.2. æŸ¥è¯¢ä¼˜åŒ–

**è·¨æ¨¡å‹æŸ¥è¯¢ä¼˜åŒ–**ï¼š

1. **æ¨¡å‹é€‰æ‹©**ï¼šé€‰æ‹©æœ€ä¼˜æ•°æ®æ¨¡å‹æ‰§è¡ŒæŸ¥è¯¢
2. **è½¬æ¢ä¼˜åŒ–**ï¼šä¼˜åŒ–æ¨¡å‹é—´è½¬æ¢æˆæœ¬
3. **å¹¶è¡Œæ‰§è¡Œ**ï¼šå¹¶è¡Œæ‰§è¡Œä¸åŒæ¨¡å‹çš„æŸ¥è¯¢
4. **ç»“æœåˆå¹¶**ï¼šé«˜æ•ˆåˆå¹¶è·¨æ¨¡å‹æŸ¥è¯¢ç»“æœ

### 5.3. æŸ¥è¯¢è®¡åˆ’

**è·¨æ¨¡å‹æŸ¥è¯¢è®¡åˆ’**ï¼š

```text
æŸ¥è¯¢è®¡åˆ’ï¼š
  1. è§£ææŸ¥è¯¢ï¼Œè¯†åˆ«æ¶‰åŠçš„æ¨¡å‹
  2. é€‰æ‹©æ‰§è¡Œæ¨¡å‹
  3. ç”Ÿæˆæ¨¡å‹ç‰¹å®šæŸ¥è¯¢
  4. æ‰§è¡ŒæŸ¥è¯¢
  5. è½¬æ¢ç»“æœ
  6. åˆå¹¶ç»“æœ
```

---

## 6. å¤šæ¨¡å‹äº‹åŠ¡ä¸€è‡´æ€§

### 6.1. è·¨æ¨¡å‹äº‹åŠ¡

**è·¨æ¨¡å‹äº‹åŠ¡å®šä¹‰**ï¼š

```text
è·¨æ¨¡å‹äº‹åŠ¡ = {
    æ“ä½œ1: Model1.Operation,
    æ“ä½œ2: Model2.Operation,
    ...
    æ“ä½œN: ModelN.Operation
}
```

**ä¸€è‡´æ€§è¦æ±‚**ï¼š

- **åŸå­æ€§**ï¼šæ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥
- **ä¸€è‡´æ€§**ï¼šè·¨æ¨¡å‹æ•°æ®ä¸€è‡´æ€§
- **éš”ç¦»æ€§**ï¼šå¹¶å‘äº‹åŠ¡éš”ç¦»
- **æŒä¹…æ€§**ï¼šäº‹åŠ¡ç»“æœæŒä¹…åŒ–

### 6.2. ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰

**è·¨æ¨¡å‹2PC**ï¼š

```text
é˜¶æ®µ1ï¼šå‡†å¤‡é˜¶æ®µ
  - åè°ƒè€…å‘é€prepareåˆ°æ‰€æœ‰å‚ä¸è€…
  - æ¯ä¸ªå‚ä¸è€…ï¼ˆä¸åŒæ¨¡å‹ï¼‰å‡†å¤‡äº‹åŠ¡
  - å‚ä¸è€…è¿”å›voteï¼ˆyes/noï¼‰

é˜¶æ®µ2ï¼šæäº¤é˜¶æ®µ
  - å¦‚æœæ‰€æœ‰å‚ä¸è€…éƒ½vote yesï¼š
    - åè°ƒè€…å‘é€commit
    - æ‰€æœ‰å‚ä¸è€…æäº¤äº‹åŠ¡
  - å¦åˆ™ï¼š
    - åè°ƒè€…å‘é€abort
    - æ‰€æœ‰å‚ä¸è€…å›æ»šäº‹åŠ¡
```

### 6.3. Sagaæ¨¡å¼

**è·¨æ¨¡å‹Saga**ï¼š

```text
Saga = {
    æ­¥éª¤1: Model1.Operation + Model1.Compensation,
    æ­¥éª¤2: Model2.Operation + Model2.Compensation,
    ...
    æ­¥éª¤N: ModelN.Operation + ModelN.Compensation
}
```

**æ‰§è¡Œ**ï¼š

- é¡ºåºæ‰§è¡Œæ‰€æœ‰æ­¥éª¤
- å¦‚æœæŸæ­¥éª¤å¤±è´¥ï¼Œæ‰§è¡Œå·²æ‰§è¡Œæ­¥éª¤çš„è¡¥å¿æ“ä½œ
- ä¿è¯æœ€ç»ˆä¸€è‡´æ€§

---

## 7. å½¢å¼åŒ–æ¡†æ¶

### 7.1. æ¨¡å‹ç±»å‹ç³»ç»Ÿ

**ç±»å‹å®šä¹‰**ï¼š

```haskell
-- æ¨¡å‹ç±»å‹
class DataModelType m where
    type Schema m :: *
    type Instance m :: *
    type Query m :: *

    -- æ¨¡å‹æ“ä½œ
    insert :: Instance m -> m -> m
    query :: Query m -> Instance m -> Result
    update :: Query m -> Update -> Instance m -> Instance m
    delete :: Query m -> Instance m -> Instance m
```

### 7.2. æ¨¡å‹è½¬æ¢å‡½å­

**è½¬æ¢å‡½å­**ï¼š

```haskell
-- æ¨¡å‹è½¬æ¢å‡½å­
data ModelTransformerF a b = ModelTransformerF {
    transformSchema :: Schema a -> Schema b,
    transformInstance :: Instance a -> Instance b,
    transformQuery :: Query b -> Query a
}

-- å‡½å­æ€§è´¨
instance Functor (ModelTransformerF a) where
    fmap f (ModelTransformerF ts ti tq) =
        ModelTransformerF ts (f . ti) tq
```

### 7.3. ç»Ÿä¸€æŸ¥è¯¢è¯­ä¹‰

**æŸ¥è¯¢è¯­ä¹‰**ï¼š

```haskell
-- ç»Ÿä¸€æŸ¥è¯¢è¯­ä¹‰
class UnifiedQuerySemantics q where
    type Model q :: DataModelType
    type Result q :: *

    semantics :: q -> Instance (Model q) -> Result q

    -- æŸ¥è¯¢ç­‰ä»·
    equivalent :: q -> q -> Bool
    equivalent q1 q2 =
        forall i. semantics q1 i == semantics q2 i
```

---

## 8. å‚è€ƒèµ„æ–™

### 8.1. å­¦æœ¯æ–‡çŒ®

- "Unified Database Management Systems: A Survey" (2016)
- "Multi-Model Databases: A New Journey to Handle the Variety of Data" (2019)
- "A Formal Framework for Multi-Model Databases" (2020)

### 8.2. ç›¸å…³èµ„æº

- [Wikipedia: Multi-Model Database](https://en.wikipedia.org/wiki/Multi-model_database)
- [ArangoDB Multi-Model Database](https://www.arangodb.com/)
- [PostgreSQL JSONæ”¯æŒ](../PostgreSQL/03-é«˜çº§ç‰¹æ€§/03.06-å›¾æ•°æ®åº“åŠŸèƒ½.md)

---

**æœ€åæ›´æ–°**ï¼š2025-01-15
**ç»´æŠ¤è€…**ï¼šData-Science Team
**çŠ¶æ€**ï¼šè§„åˆ’ä¸­
