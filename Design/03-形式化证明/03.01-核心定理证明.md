# æ ¸å¿ƒå®šç†è¯æ˜ï¼šæ•°æ®åº“è®¾è®¡æ ¸å¿ƒå®šç†çš„ä¸¥æ ¼è¯æ˜

> **åˆ›å»ºæ—¥æœŸ**ï¼š2025-01-15
> **æœ€åæ›´æ–°**ï¼š2025-12-01
> **ç‰ˆæœ¬**ï¼šv2.0
> **çŠ¶æ€**ï¼šå·²å®Œæˆ âœ…

---

## ğŸ“‹ ç›®å½•

- [æ ¸å¿ƒå®šç†è¯æ˜ï¼šæ•°æ®åº“è®¾è®¡æ ¸å¿ƒå®šç†çš„ä¸¥æ ¼è¯æ˜](#æ ¸å¿ƒå®šç†è¯æ˜æ•°æ®åº“è®¾è®¡æ ¸å¿ƒå®šç†çš„ä¸¥æ ¼è¯æ˜)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1. è¯æ˜æ–¹æ³•è®º](#11-è¯æ˜æ–¹æ³•è®º)
    - [1.2. è¯æ˜ç»“æ„æ€ç»´å¯¼å›¾](#12-è¯æ˜ç»“æ„æ€ç»´å¯¼å›¾)
    - [1.3. è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ](#13-è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ)
  - [2. Coddå®šç†è¯æ˜](#2-coddå®šç†è¯æ˜)
    - [2.1. å®šç†é™ˆè¿°](#21-å®šç†é™ˆè¿°)
    - [2.2. è¯æ˜ç»“æ„](#22-è¯æ˜ç»“æ„)
    - [2.3. éƒ¨åˆ†1ï¼šå…³ç³»ä»£æ•° âŠ† å…³ç³»æ¼”ç®—](#23-éƒ¨åˆ†1å…³ç³»ä»£æ•°--å…³ç³»æ¼”ç®—)
      - [2.3.1. é€‰æ‹©æ“ä½œï¼š`Ïƒ_Î¸(R)`](#231-é€‰æ‹©æ“ä½œÏƒ_Î¸r)
      - [2.3.2. æŠ•å½±æ“ä½œï¼š`Ï€_A(R)`](#232-æŠ•å½±æ“ä½œÏ€_ar)
      - [2.3.3. å¹¶æ“ä½œï¼š`R âˆª S`](#233-å¹¶æ“ä½œr--s)
      - [2.3.4. å·®æ“ä½œï¼š`R - S`](#234-å·®æ“ä½œr---s)
      - [2.3.5. ç¬›å¡å°”ç§¯æ“ä½œï¼š`R Ã— S`](#235-ç¬›å¡å°”ç§¯æ“ä½œr--s)
      - [2.3.6. è¿æ¥æ“ä½œï¼š`R â‹ˆ_Î¸ S`](#236-è¿æ¥æ“ä½œr-_Î¸-s)
      - [2.3.7. è‡ªç„¶è¿æ¥æ“ä½œï¼š`R â‹ˆ S`](#237-è‡ªç„¶è¿æ¥æ“ä½œr--s)
    - [2.4. éƒ¨åˆ†2ï¼šå…³ç³»æ¼”ç®— âŠ† å…³ç³»ä»£æ•°](#24-éƒ¨åˆ†2å…³ç³»æ¼”ç®—--å…³ç³»ä»£æ•°)
    - [2.5. å®šç†ç»“è®º](#25-å®šç†ç»“è®º)
  - [3. Armstrongå…¬ç†å®Œå¤‡æ€§è¯æ˜](#3-armstrongå…¬ç†å®Œå¤‡æ€§è¯æ˜)
    - [3.1. å®šç†é™ˆè¿°](#31-å®šç†é™ˆè¿°)
    - [3.2. è¯æ˜æ€è·¯](#32-è¯æ˜æ€è·¯)
    - [3.3. è¯æ˜æ­¥éª¤](#33-è¯æ˜æ­¥éª¤)
      - [æ­¥éª¤1ï¼šæ„é€ åä¾‹å…³ç³»](#æ­¥éª¤1æ„é€ åä¾‹å…³ç³»)
      - [æ­¥éª¤2ï¼šéªŒè¯Fä¸­çš„å‡½æ•°ä¾èµ–](#æ­¥éª¤2éªŒè¯fä¸­çš„å‡½æ•°ä¾èµ–)
      - [æ­¥éª¤3ï¼šéªŒè¯X â†’ Yä¸æˆç«‹](#æ­¥éª¤3éªŒè¯x--yä¸æˆç«‹)
      - [æ­¥éª¤4ï¼šå¯¼å‡ºçŸ›ç›¾](#æ­¥éª¤4å¯¼å‡ºçŸ›ç›¾)
    - [3.4. è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ](#34-è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ)
  - [4. èŒƒå¼åˆ†è§£æ­£ç¡®æ€§è¯æ˜](#4-èŒƒå¼åˆ†è§£æ­£ç¡®æ€§è¯æ˜)
    - [4.1. 3NFåˆ†è§£æ­£ç¡®æ€§](#41-3nfåˆ†è§£æ­£ç¡®æ€§)
    - [4.2. æ— æŸåˆ†è§£è¯æ˜](#42-æ— æŸåˆ†è§£è¯æ˜)
      - [4.2.1. è¿æ¥å›¾æµ‹è¯•æ–¹æ³•](#421-è¿æ¥å›¾æµ‹è¯•æ–¹æ³•)
      - [4.2.2. 3NFåˆ†è§£ç®—æ³•çš„æ— æŸæ€§ä¿è¯](#422-3nfåˆ†è§£ç®—æ³•çš„æ— æŸæ€§ä¿è¯)
    - [4.3. ä¿æŒä¾èµ–è¯æ˜](#43-ä¿æŒä¾èµ–è¯æ˜)
      - [4.3.1. å‡½æ•°ä¾èµ–æŠ•å½±å®šä¹‰](#431-å‡½æ•°ä¾èµ–æŠ•å½±å®šä¹‰)
      - [4.3.2. 3NFåˆ†è§£ç®—æ³•çš„ä¾èµ–ä¿æŒæ€§](#432-3nfåˆ†è§£ç®—æ³•çš„ä¾èµ–ä¿æŒæ€§)
    - [4.4. 3NFæ€§è´¨è¯æ˜](#44-3nfæ€§è´¨è¯æ˜)
  - [5. æŸ¥è¯¢åŒ…å«åˆ¤å®šå®šç†](#5-æŸ¥è¯¢åŒ…å«åˆ¤å®šå®šç†)
    - [5.1. å®šç†é™ˆè¿°](#51-å®šç†é™ˆè¿°)
    - [5.2. åŒæ€å®šä¹‰](#52-åŒæ€å®šä¹‰)
    - [5.3. å……åˆ†æ€§è¯æ˜](#53-å……åˆ†æ€§è¯æ˜)
      - [5.3.1. åŒæ€çš„å®šä¹‰å›é¡¾](#531-åŒæ€çš„å®šä¹‰å›é¡¾)
      - [5.3.2. åŒ¹é…çš„æ„é€ ](#532-åŒ¹é…çš„æ„é€ )
      - [5.3.3. æ¡ä»¶ä¿æŒçš„éªŒè¯](#533-æ¡ä»¶ä¿æŒçš„éªŒè¯)
      - [5.3.4. ç»“è®ºæ¨å¯¼](#534-ç»“è®ºæ¨å¯¼)
    - [5.4. å¿…è¦æ€§è¯æ˜](#54-å¿…è¦æ€§è¯æ˜)
  - [6. æŸ¥è¯¢ä¼˜åŒ–ç­‰ä»·æ€§å®šç†](#6-æŸ¥è¯¢ä¼˜åŒ–ç­‰ä»·æ€§å®šç†)
    - [6.1. å®šç†é™ˆè¿°](#61-å®šç†é™ˆè¿°)
    - [6.2. ç­‰ä»·å˜æ¢è§„åˆ™](#62-ç­‰ä»·å˜æ¢è§„åˆ™)
      - [6.2.1. è§„åˆ™1ï¼šé€‰æ‹©ä¸‹æ¨](#621-è§„åˆ™1é€‰æ‹©ä¸‹æ¨)
      - [6.2.2. è§„åˆ™2ï¼šæŠ•å½±ä¸‹æ¨](#622-è§„åˆ™2æŠ•å½±ä¸‹æ¨)
      - [6.2.3. è§„åˆ™3ï¼šè¿æ¥ç»“åˆå¾‹](#623-è§„åˆ™3è¿æ¥ç»“åˆå¾‹)
    - [6.2.4. ç­‰ä»·å˜æ¢è§„åˆ™å¯¹æ¯”çŸ©é˜µ](#624-ç­‰ä»·å˜æ¢è§„åˆ™å¯¹æ¯”çŸ©é˜µ)
    - [6.3. ä¼˜åŒ–æ­£ç¡®æ€§](#63-ä¼˜åŒ–æ­£ç¡®æ€§)
  - [7. å‘é‡æ•°æ®åº“å½¢å¼åŒ–ç†è®º](#7-å‘é‡æ•°æ®åº“å½¢å¼åŒ–ç†è®º)
    - [7.1. å‘é‡ç©ºé—´åº¦é‡å®šç†](#71-å‘é‡ç©ºé—´åº¦é‡å®šç†)
    - [7.2. è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢å®šç†](#72-è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢å®šç†)
    - [7.3. æ··åˆæ£€ç´¢èåˆå®šç†](#73-æ··åˆæ£€ç´¢èåˆå®šç†)
    - [7.4. å‘é‡ç´¢å¼•å‚æ•°ä¼˜åŒ–å®šç†](#74-å‘é‡ç´¢å¼•å‚æ•°ä¼˜åŒ–å®šç†)
    - [7.5. å‘é‡æ•°æ®åº“å®šç†æ€»ç»“çŸ©é˜µ](#75-å‘é‡æ•°æ®åº“å®šç†æ€»ç»“çŸ©é˜µ)
  - [8. å‚è€ƒèµ„æ–™](#8-å‚è€ƒèµ„æ–™)
    - [8.1. ç»å…¸æ–‡çŒ®](#81-ç»å…¸æ–‡çŒ®)
    - [8.2. 2025æ–°æ–‡çŒ®](#82-2025æ–°æ–‡çŒ®)
    - [8.3. ç›¸å…³èµ„æº](#83-ç›¸å…³èµ„æº)

---

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›æ•°æ®åº“è®¾è®¡æ ¸å¿ƒå®šç†çš„ä¸¥æ ¼æ•°å­¦è¯æ˜ï¼Œç¡®ä¿ç†è®ºçš„ä¸¥è°¨æ€§å’Œæ­£ç¡®æ€§ã€‚

### 1.1. è¯æ˜æ–¹æ³•è®º

æœ¬æ–‡æ¡£é‡‡ç”¨å¤šç§è¯æ˜æ–¹æ³•ï¼š

1. **æ„é€ æ€§è¯æ˜**ï¼šé€šè¿‡æ„é€ å…·ä½“å¯¹è±¡è¯æ˜å­˜åœ¨æ€§
2. **åè¯æ³•**ï¼šé€šè¿‡å‡è®¾ç»“è®ºä¸æˆç«‹å¯¼å‡ºçŸ›ç›¾
3. **å½’çº³æ³•**ï¼šé€šè¿‡åŸºç¡€æƒ…å†µå’Œå½’çº³æ­¥éª¤è¯æ˜ä¸€èˆ¬æ€§
4. **ç›´æ¥è¯æ˜**ï¼šé€šè¿‡é€»è¾‘æ¨ç†ç›´æ¥è¯æ˜ç»“è®º

### 1.2. è¯æ˜ç»“æ„æ€ç»´å¯¼å›¾

```mermaid
mindmap
  root((æ ¸å¿ƒå®šç†è¯æ˜))
    è¯æ˜æ–¹æ³•
      æ„é€ æ€§è¯æ˜
        Coddå®šç†
        èŒƒå¼åˆ†è§£
      åè¯æ³•
        Armstrongå…¬ç†å®Œå¤‡æ€§
        æŸ¥è¯¢åŒ…å«åˆ¤å®š
      å½’çº³æ³•
        å…³ç³»ä»£æ•°æ“ä½œ
        å…³ç³»æ¼”ç®—å…¬å¼
      ç›´æ¥è¯æ˜
        æŸ¥è¯¢ä¼˜åŒ–ç­‰ä»·æ€§
        èŒƒå¼æ€§è´¨
    è¯æ˜ç­–ç•¥
      åŒå‘è¯æ˜
        å…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—ç­‰ä»·
      åˆ†æ­¥è¯æ˜
        æ— æŸåˆ†è§£
        ä¿æŒä¾èµ–
        èŒƒå¼æ€§è´¨
      åä¾‹æ„é€ 
        Armstrongå…¬ç†å®Œå¤‡æ€§
    æ¨ç†è¿‡ç¨‹
      å‰æè¯†åˆ«
      æ¨ç†è§„åˆ™åº”ç”¨
      ç»“è®ºæ¨å¯¼
      éªŒè¯æ£€æŸ¥
```

### 1.3. è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ

| è¯æ˜æ–¹æ³• | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å¤æ‚åº¦ |
|---------|---------|------|------|--------|
| **æ„é€ æ€§è¯æ˜** | å­˜åœ¨æ€§è¯æ˜ | æä¾›å…·ä½“æ„é€  | æ„é€ å¯èƒ½å¤æ‚ | â­â­â­ |
| **åè¯æ³•** | å”¯ä¸€æ€§ã€å®Œå¤‡æ€§ | é€»è¾‘æ¸…æ™° | éœ€è¦æ„é€ åä¾‹ | â­â­â­â­ |
| **å½’çº³æ³•** | é€’å½’ç»“æ„ | ç³»ç»ŸåŒ– | éœ€è¦æ‰¾åˆ°å½’çº³ä¸å˜é‡ | â­â­â­ |
| **ç›´æ¥è¯æ˜** | ç­‰ä»·æ€§ã€åŒ…å«æ€§ | ç›´è§‚ | å¯èƒ½å†—é•¿ | â­â­ |

---

## 2. Coddå®šç†è¯æ˜

### 2.1. å®šç†é™ˆè¿°

**Coddå®šç†**ï¼šå…³ç³»ä»£æ•°ä¸å…³ç³»æ¼”ç®—ï¼ˆå®‰å…¨åŸŸé™åˆ¶ï¼‰ç­‰ä»·

```text
å…³ç³»ä»£æ•° â‰¡ å…³ç³»æ¼”ç®—ï¼ˆå®‰å…¨åŸŸé™åˆ¶ï¼‰
```

### 2.2. è¯æ˜ç»“æ„

**è¯æ˜åˆ†ä¸ºä¸¤éƒ¨åˆ†**ï¼š

1. **å…³ç³»ä»£æ•° âŠ† å…³ç³»æ¼”ç®—**ï¼šæ¯ä¸ªå…³ç³»ä»£æ•°æ“ä½œéƒ½å¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º
2. **å…³ç³»æ¼”ç®— âŠ† å…³ç³»ä»£æ•°**ï¼šæ¯ä¸ªå®‰å…¨çš„å…³ç³»æ¼”ç®—æŸ¥è¯¢éƒ½å¯ä»¥ç”¨å…³ç³»ä»£æ•°è¡¨ç¤º

### 2.3. éƒ¨åˆ†1ï¼šå…³ç³»ä»£æ•° âŠ† å…³ç³»æ¼”ç®—

**è¯æ˜ç­–ç•¥å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[è¯æ˜å…³ç³»ä»£æ•° âŠ† å…³ç³»æ¼”ç®—] --> B{æ“ä½œç±»å‹}
    B -->|åŸºæœ¬æ“ä½œ| C[ç›´æ¥æ„é€ å…³ç³»æ¼”ç®—è¡¨è¾¾å¼]
    B -->|æ´¾ç”Ÿæ“ä½œ| D[åŸºäºåŸºæœ¬æ“ä½œæ„é€ ]

    C --> C1[é€‰æ‹©æ“ä½œ]
    C --> C2[æŠ•å½±æ“ä½œ]
    C --> C3[å¹¶æ“ä½œ]
    C --> C4[å·®æ“ä½œ]
    C --> C5[ç¬›å¡å°”ç§¯æ“ä½œ]

    D --> D1[è¿æ¥æ“ä½œ]
    D --> D2[è‡ªç„¶è¿æ¥æ“ä½œ]

    C1 --> E[éªŒè¯è¯­ä¹‰ç­‰ä»·æ€§]
    C2 --> E
    C3 --> E
    C4 --> E
    C5 --> E
    D1 --> E
    D2 --> E

    E --> F{æ‰€æœ‰æ“ä½œå·²éªŒè¯?}
    F -->|æ˜¯| G[è¯æ˜å®Œæˆ]
    F -->|å¦| B
```

**è¯æ˜**ï¼šå¯¹å…³ç³»ä»£æ•°æ“ä½œè¿›è¡Œå½’çº³

**å½’çº³åŸºç¡€**ï¼šåŸºæœ¬æ“ä½œ

#### 2.3.1. é€‰æ‹©æ“ä½œï¼š`Ïƒ_Î¸(R)`

**å…³ç³»æ¼”ç®—è¡¨ç¤º**ï¼š`{t | t âˆˆ R âˆ§ Î¸(t)}`

**è¯¦ç»†è®ºè¯**ï¼š

1. **è¯­ä¹‰åˆ†æ**ï¼š
   - å…³ç³»ä»£æ•°ï¼š`Ïƒ_Î¸(R) = {t | t âˆˆ R âˆ§ Î¸(t)}`
   - å…³ç³»æ¼”ç®—ï¼š`{t | t âˆˆ R âˆ§ Î¸(t)}`
   - ä¸¤è€…è¯­ä¹‰å®Œå…¨ç›¸åŒ

2. **å½¢å¼åŒ–éªŒè¯**ï¼š

   ```text
   âˆ€t: t âˆˆ Ïƒ_Î¸(R) âŸº t âˆˆ R âˆ§ Î¸(t)
   âŸº t âˆˆ {t' | t' âˆˆ R âˆ§ Î¸(t')}
   ```

3. **ç»“è®º**ï¼šé€‰æ‹©æ“ä½œå¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º âœ…

#### 2.3.2. æŠ•å½±æ“ä½œï¼š`Ï€_A(R)`

**å…³ç³»æ¼”ç®—è¡¨ç¤º**ï¼š`{t[A] | t âˆˆ R}`

**è¯¦ç»†è®ºè¯**ï¼š

1. **è¯­ä¹‰åˆ†æ**ï¼š
   - å…³ç³»ä»£æ•°ï¼š`Ï€_A(R) = {t[A] | t âˆˆ R}`
   - å…³ç³»æ¼”ç®—ï¼š`{t[A] | t âˆˆ R}`
   - å…¶ä¸­ `t[A]` è¡¨ç¤ºå…ƒç»„ t åœ¨å±æ€§é›†åˆ A ä¸Šçš„æŠ•å½±

2. **å½¢å¼åŒ–éªŒè¯**ï¼š

   ```text
   âˆ€t: t âˆˆ Ï€_A(R) âŸº âˆƒt' âˆˆ R: t = t'[A]
   âŸº t âˆˆ {t'[A] | t' âˆˆ R}
   ```

3. **ç¤ºä¾‹éªŒè¯**ï¼š

   ```text
   è®¾ R = {(1, 'Alice', 20), (2, 'Bob', 21)}
   A = {name, age}

   å…³ç³»ä»£æ•°ï¼šÏ€_A(R) = {('Alice', 20), ('Bob', 21)}
   å…³ç³»æ¼”ç®—ï¼š{t[A] | t âˆˆ R} = {('Alice', 20), ('Bob', 21)}
   ç»“æœä¸€è‡´ âœ…
   ```

4. **ç»“è®º**ï¼šæŠ•å½±æ“ä½œå¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º âœ…

#### 2.3.3. å¹¶æ“ä½œï¼š`R âˆª S`

**å…³ç³»æ¼”ç®—è¡¨ç¤º**ï¼š`{t | t âˆˆ R âˆ¨ t âˆˆ S}`

**è¯¦ç»†è®ºè¯**ï¼š

1. **è¯­ä¹‰åˆ†æ**ï¼š
   - å…³ç³»ä»£æ•°ï¼š`R âˆª S = {t | t âˆˆ R âˆ¨ t âˆˆ S}`
   - å…³ç³»æ¼”ç®—ï¼š`{t | t âˆˆ R âˆ¨ t âˆˆ S}`
   - ä¸¤è€…è¯­ä¹‰å®Œå…¨ç›¸åŒ

2. **å½¢å¼åŒ–éªŒè¯**ï¼š

   ```text
   âˆ€t: t âˆˆ R âˆª S âŸº t âˆˆ R âˆ¨ t âˆˆ S
   âŸº t âˆˆ {t' | t' âˆˆ R âˆ¨ t' âˆˆ S}
   ```

3. **é›†åˆè®ºåŸºç¡€**ï¼š
   - å¹¶æ“ä½œåŸºäºé›†åˆè®ºçš„å¹¶è¿ç®—
   - å…³ç³»æ¼”ç®—çš„æå– `âˆ¨` å¯¹åº”é›†åˆè®ºçš„å¹¶

4. **ç»“è®º**ï¼šå¹¶æ“ä½œå¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º âœ…

#### 2.3.4. å·®æ“ä½œï¼š`R - S`

**å…³ç³»æ¼”ç®—è¡¨ç¤º**ï¼š`{t | t âˆˆ R âˆ§ t âˆ‰ S}`

**è¯¦ç»†è®ºè¯**ï¼š

1. **è¯­ä¹‰åˆ†æ**ï¼š
   - å…³ç³»ä»£æ•°ï¼š`R - S = {t | t âˆˆ R âˆ§ t âˆ‰ S}`
   - å…³ç³»æ¼”ç®—ï¼š`{t | t âˆˆ R âˆ§ t âˆ‰ S}`
   - éœ€è¦è¡¨è¾¾"å±äºRä½†ä¸å±äºS"

2. **å½¢å¼åŒ–éªŒè¯**ï¼š

   ```text
   âˆ€t: t âˆˆ R - S âŸº t âˆˆ R âˆ§ t âˆ‰ S
   âŸº t âˆˆ {t' | t' âˆˆ R âˆ§ t' âˆ‰ S}
   ```

3. **å¦å®šæ“ä½œçš„å¤„ç†**ï¼š
   - å…³ç³»æ¼”ç®—ä¸­çš„ `t âˆ‰ S` ç­‰ä»·äº `Â¬(t âˆˆ S)`
   - è¿™éœ€è¦å®‰å…¨åŸŸé™åˆ¶ç¡®ä¿ç»“æœæœ‰é™

4. **ç»“è®º**ï¼šå·®æ“ä½œå¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º âœ…

#### 2.3.5. ç¬›å¡å°”ç§¯æ“ä½œï¼š`R Ã— S`

**å…³ç³»æ¼”ç®—è¡¨ç¤º**ï¼š`{(r, s) | r âˆˆ R âˆ§ s âˆˆ S}`

**è¯¦ç»†è®ºè¯**ï¼š

1. **è¯­ä¹‰åˆ†æ**ï¼š
   - å…³ç³»ä»£æ•°ï¼š`R Ã— S = {(r, s) | r âˆˆ R âˆ§ s âˆˆ S}`
   - å…³ç³»æ¼”ç®—ï¼š`{(r, s) | r âˆˆ R âˆ§ s âˆˆ S}`
   - éœ€è¦æ„é€ æ‰€æœ‰å¯èƒ½çš„å…ƒç»„å¯¹

2. **å½¢å¼åŒ–éªŒè¯**ï¼š

   ```text
   âˆ€t: t âˆˆ R Ã— S âŸº âˆƒr âˆˆ R, âˆƒs âˆˆ S: t = (r, s)
   âŸº t âˆˆ {(r', s') | r' âˆˆ R âˆ§ s' âˆˆ S}
   ```

3. **å…ƒç»„æ„é€ **ï¼š
   - å¦‚æœ R æœ‰ m ä¸ªå…ƒç»„ï¼ŒS æœ‰ n ä¸ªå…ƒç»„
   - åˆ™ R Ã— S æœ‰ m Ã— n ä¸ªå…ƒç»„
   - å…³ç³»æ¼”ç®—é€šè¿‡å­˜åœ¨é‡è¯æšä¸¾æ‰€æœ‰ç»„åˆ

4. **ç»“è®º**ï¼šç¬›å¡å°”ç§¯æ“ä½œå¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º âœ…

**å½’çº³æ­¥éª¤**ï¼šæ´¾ç”Ÿæ“ä½œ

#### 2.3.6. è¿æ¥æ“ä½œï¼š`R â‹ˆ_Î¸ S`

**å…³ç³»æ¼”ç®—è¡¨ç¤º**ï¼š`{(r, s) | r âˆˆ R âˆ§ s âˆˆ S âˆ§ Î¸(r, s)}`

**è¯¦ç»†è®ºè¯**ï¼š

1. **åŸºäºåŸºæœ¬æ“ä½œ**ï¼š

   ```text
   R â‹ˆ_Î¸ S = Ïƒ_Î¸(R Ã— S)
   ```

2. **å…³ç³»æ¼”ç®—æ„é€ **ï¼š

   ```text
   {(r, s) | r âˆˆ R âˆ§ s âˆˆ S âˆ§ Î¸(r, s)}
   = {t | âˆƒr âˆˆ R, âˆƒs âˆˆ S:
          t = (r, s) âˆ§ Î¸(r, s)}
   ```

3. **è¯­ä¹‰ç­‰ä»·æ€§**ï¼š
   - å…ˆåšç¬›å¡å°”ç§¯ï¼Œå†åº”ç”¨æ¡ä»¶ Î¸
   - ç­‰ä»·äºç›´æ¥æ„é€ æ»¡è¶³æ¡ä»¶çš„å…ƒç»„å¯¹

4. **ç»“è®º**ï¼šè¿æ¥æ“ä½œå¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º âœ…

#### 2.3.7. è‡ªç„¶è¿æ¥æ“ä½œï¼š`R â‹ˆ S`

**å…³ç³»æ¼”ç®—è¡¨ç¤º**ï¼š

```text
{t | âˆƒr âˆˆ R, âˆƒs âˆˆ S:
    t[Attr(R)] = r âˆ§ t[Attr(S)] = s âˆ§
    r[Attr(R)âˆ©Attr(S)] = s[Attr(R)âˆ©Attr(S)]}
```

**è¯¦ç»†è®ºè¯**ï¼š

1. **è‡ªç„¶è¿æ¥çš„ç‰¹æ®Šæ€§**ï¼š
   - è‡ªåŠ¨åŒ¹é…ç›¸åŒå±æ€§åçš„å±æ€§
   - åªä¿ç•™ä¸€ä»½å…¬å…±å±æ€§

2. **å…³ç³»æ¼”ç®—æ„é€ **ï¼š

   ```text
   è®¾ Attr(R) = {A, B, C}, Attr(S) = {C, D, E}
   å…¬å…±å±æ€§ï¼šAttr(R) âˆ© Attr(S) = {C}

   è‡ªç„¶è¿æ¥æ¡ä»¶ï¼š
   - t[A, B, C] = r[A, B, C]
   - t[C, D, E] = s[C, D, E]
   - r[C] = s[C]  (å…¬å…±å±æ€§ç›¸ç­‰)
   ```

3. **å½¢å¼åŒ–éªŒè¯**ï¼š

   ```text
   âˆ€t: t âˆˆ R â‹ˆ S âŸº
       âˆƒr âˆˆ R, âˆƒs âˆˆ S:
         t[Attr(R)] = r âˆ§
         t[Attr(S)] = s âˆ§
         r[Attr(R)âˆ©Attr(S)] = s[Attr(R)âˆ©Attr(S)]
   ```

4. **ç»“è®º**ï¼šè‡ªç„¶è¿æ¥æ“ä½œå¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º âœ…

**å½’çº³ç»“è®º**ï¼š

é€šè¿‡æ•°å­¦å½’çº³æ³•ï¼Œæˆ‘ä»¬è¯æ˜äº†ï¼š

- **åŸºç¡€æƒ…å†µ**ï¼šæ‰€æœ‰åŸºæœ¬æ“ä½œéƒ½å¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º
- **å½’çº³æ­¥éª¤**ï¼šæ‰€æœ‰æ´¾ç”Ÿæ“ä½œéƒ½å¯ä»¥åŸºäºåŸºæœ¬æ“ä½œç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º

å› æ­¤ï¼š**æ‰€æœ‰å…³ç³»ä»£æ•°æ“ä½œéƒ½å¯ä»¥ç”¨å…³ç³»æ¼”ç®—è¡¨ç¤º** âœ…

### 2.4. éƒ¨åˆ†2ï¼šå…³ç³»æ¼”ç®— âŠ† å…³ç³»ä»£æ•°

**è¯æ˜**ï¼šå¯¹å…³ç³»æ¼”ç®—å…¬å¼è¿›è¡Œå½’çº³

**åŸºç¡€æƒ…å†µ**ï¼š

1. **åŸå­å…¬å¼**ï¼š`R(t)`

   ```text
   å…³ç³»ä»£æ•°è¡¨ç¤ºï¼šR
   ```

2. **æ¯”è¾ƒå…¬å¼**ï¼š`t.A = c`

   ```text
   å…³ç³»ä»£æ•°è¡¨ç¤ºï¼šÏƒ_{A=c}(R)
   ```

   **å½’çº³æ­¥éª¤**ï¼š

3. **åˆå–**ï¼š`P âˆ§ Q`

   ```text
   å…³ç³»ä»£æ•°è¡¨ç¤ºï¼šP_algebra âˆ© Q_algebra
   ```

4. **æå–**ï¼š`P âˆ¨ Q`

   ```text
   å…³ç³»ä»£æ•°è¡¨ç¤ºï¼šP_algebra âˆª Q_algebra
   ```

5. **å¦å®š**ï¼š`Â¬P`

   ```text
   å…³ç³»ä»£æ•°è¡¨ç¤ºï¼šU - P_algebra
   ï¼ˆå…¶ä¸­Uæ˜¯å…¨åŸŸå…³ç³»ï¼‰
   ```

6. **å­˜åœ¨é‡è¯**ï¼š`âˆƒx P(x)`

   ```text
   å…³ç³»ä»£æ•°è¡¨ç¤ºï¼šÏ€_{free_vars(P) - {x}}(P_algebra)
   ```

**å®‰å…¨åŸŸé™åˆ¶**ï¼š

ä¸ºäº†ç¡®ä¿å…³ç³»æ¼”ç®—æŸ¥è¯¢çš„ç»“æœæ˜¯æœ‰é™çš„ï¼Œéœ€è¦å®‰å…¨åŸŸé™åˆ¶ï¼š

- æ‰€æœ‰è‡ªç”±å˜é‡éƒ½å‡ºç°åœ¨æŸä¸ªå…³ç³»çš„å…ƒç»„ä¸­
- æ‰€æœ‰å­˜åœ¨é‡è¯å’Œå…¨ç§°é‡è¯éƒ½æœ‰ç•Œ

**ç»“è®º**ï¼šæ¯ä¸ªå®‰å…¨çš„å…³ç³»æ¼”ç®—æŸ¥è¯¢éƒ½å¯ä»¥ç”¨å…³ç³»ä»£æ•°è¡¨ç¤ºã€‚

### 2.5. å®šç†ç»“è®º

ç”±äºï¼š

- å…³ç³»ä»£æ•° âŠ† å…³ç³»æ¼”ç®—
- å…³ç³»æ¼”ç®— âŠ† å…³ç³»ä»£æ•°ï¼ˆå®‰å…¨åŸŸé™åˆ¶ï¼‰

å› æ­¤ï¼š

- **å…³ç³»ä»£æ•° â‰¡ å…³ç³»æ¼”ç®—ï¼ˆå®‰å…¨åŸŸé™åˆ¶ï¼‰** âœ…

---

## 3. Armstrongå…¬ç†å®Œå¤‡æ€§è¯æ˜

### 3.1. å®šç†é™ˆè¿°

**å®šç†**ï¼šArmstrongå…¬ç†ç³»ç»Ÿæ˜¯å®Œå¤‡çš„

å³ï¼šå¦‚æœå‡½æ•°ä¾èµ– `X â†’ Y` åœ¨è¯­ä¹‰ä¸Šæˆç«‹ï¼ˆF âŠ¨ X â†’ Yï¼‰ï¼Œåˆ™å¯ä»¥ä»Fé€šè¿‡Armstrongå…¬ç†æ¨å¯¼ï¼ˆF âŠ¢ X â†’ Yï¼‰ã€‚

### 3.2. è¯æ˜æ€è·¯

**åè¯æ³•**ï¼šå‡è®¾å­˜åœ¨å‡½æ•°ä¾èµ– `X â†’ Y` ä½¿å¾— `F âŠ¨ X â†’ Y` ä½† `F âŠ¬ X â†’ Y`ï¼Œå¯¼å‡ºçŸ›ç›¾ã€‚

### 3.3. è¯æ˜æ­¥éª¤

**è¯æ˜ç­–ç•¥å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[è¯æ˜Armstrongå…¬ç†å®Œå¤‡æ€§] --> B{å‡è®¾}
    B -->|F âŠ¨ Xâ†’Y ä½† F âŠ¬ Xâ†’Y| C[æ„é€ åä¾‹å…³ç³»]
    B -->|ä¸å­˜åœ¨è¿™æ ·çš„Xâ†’Y| G[å®Œå¤‡æ€§æˆç«‹]

    C --> D[éªŒè¯Fä¸­çš„ä¾èµ–]
    D --> E[éªŒè¯Xâ†’Yä¸æˆç«‹]
    E --> F{å¯¼å‡ºçŸ›ç›¾?}

    F -->|æ˜¯| G
    F -->|å¦| H[æ£€æŸ¥æ„é€ ]
    H --> C

    G --> I[è¯æ˜å®Œæˆ]
```

**è¯¦ç»†è¯æ˜æ­¥éª¤**ï¼š

#### æ­¥éª¤1ï¼šæ„é€ åä¾‹å…³ç³»

**ç›®æ ‡**ï¼šæ„é€ ä¸€ä¸ªå…³ç³» rï¼Œä½¿å¾—ï¼š

- r æ»¡è¶³ F ä¸­çš„æ‰€æœ‰å‡½æ•°ä¾èµ–
- r ä¸æ»¡è¶³ X â†’ Y

**æ„é€ æ–¹æ³•**ï¼š

å‡è®¾ `F âŠ¬ X â†’ Y`ï¼Œå³ `Y âŠˆ Xâº`ï¼ˆå…¶ä¸­ `Xâº` æ˜¯Xåœ¨Fä¸‹çš„é—­åŒ…ï¼‰ã€‚

**å…³ç³»æ„é€ ç®—æ³•**ï¼š

```text
è¾“å…¥ï¼šå±æ€§é›†åˆ Uï¼Œé—­åŒ… Xâº
è¾“å‡ºï¼šå…³ç³» r åŒ…å«ä¸¤ä¸ªå…ƒç»„ tâ‚ å’Œ tâ‚‚

ç®—æ³•ï¼š
1. å¯¹äºæ‰€æœ‰å±æ€§ A âˆˆ Xâºï¼š
     tâ‚[A] = 0
     tâ‚‚[A] = 0

2. å¯¹äºæ‰€æœ‰å±æ€§ A âˆˆ U - Xâºï¼š
     tâ‚[A] = 0
     tâ‚‚[A] = 1

3. è¿”å› r = {tâ‚, tâ‚‚}
```

**ç¤ºä¾‹**ï¼š

```text
è®¾ U = {A, B, C, D}
    F = {A â†’ B, B â†’ C}
    X = {A}
    Xâº = {A, B, C}  (é€šè¿‡é—­åŒ…ç®—æ³•è®¡ç®—)
    Y = {D}

ç”±äº D âˆ‰ Xâºï¼Œæ‰€ä»¥ F âŠ¬ A â†’ D

æ„é€ å…³ç³» rï¼š
   A  B  C  D
tâ‚: 0  0  0  0
tâ‚‚: 0  0  0  1
```

#### æ­¥éª¤2ï¼šéªŒè¯Fä¸­çš„å‡½æ•°ä¾èµ–

**ç›®æ ‡**ï¼šè¯æ˜å…³ç³» r æ»¡è¶³ F ä¸­çš„æ‰€æœ‰å‡½æ•°ä¾èµ–

**éªŒè¯è¿‡ç¨‹**ï¼š

å¯¹äº F ä¸­çš„æ¯ä¸ªå‡½æ•°ä¾èµ– `U â†’ V`ï¼š

**æƒ…å†µ1**ï¼š`U âŠˆ Xâº`

- å­˜åœ¨å±æ€§ `B âˆˆ U - Xâº`
- åœ¨å…³ç³» r ä¸­ï¼š`tâ‚[B] = 0 â‰  1 = tâ‚‚[B]`
- å› æ­¤ `tâ‚[U] â‰  tâ‚‚[U]`
- æ‰€ä»¥ `U â†’ V` åœ¨ r ä¸­**å¹³å‡¡æˆç«‹**ï¼ˆå‰ææ¡ä»¶ä¸æ»¡è¶³ï¼‰

**æƒ…å†µ2**ï¼š`U âŠ† Xâº`

- ç”±äº `Xâº` æ˜¯é—­åŒ…ï¼Œå¦‚æœ `U âŠ† Xâº`ï¼Œåˆ™ `V âŠ† Xâº`
- åœ¨å…³ç³» r ä¸­ï¼š
  - `tâ‚[U] = tâ‚‚[U] = 0...0`ï¼ˆå› ä¸º U âŠ† Xâºï¼‰
  - `tâ‚[V] = tâ‚‚[V] = 0...0`ï¼ˆå› ä¸º V âŠ† Xâºï¼‰
- å› æ­¤ `U â†’ V` åœ¨ r ä¸­æˆç«‹

**å½¢å¼åŒ–è¯æ˜**ï¼š

```text
âˆ€ U â†’ V âˆˆ F:
  æƒ…å†µ1ï¼šU âŠˆ Xâº
    â†’ âˆƒB âˆˆ U - Xâº: tâ‚[B] â‰  tâ‚‚[B]
    â†’ tâ‚[U] â‰  tâ‚‚[U]
    â†’ U â†’ V åœ¨ r ä¸­å¹³å‡¡æˆç«‹

  æƒ…å†µ2ï¼šU âŠ† Xâº
    â†’ V âŠ† Xâº  (å› ä¸º Xâº æ˜¯é—­åŒ…)
    â†’ tâ‚[U] = tâ‚‚[U] = 0...0
    â†’ tâ‚[V] = tâ‚‚[V] = 0...0
    â†’ U â†’ V åœ¨ r ä¸­æˆç«‹
```

**ç»“è®º**ï¼šå…³ç³» r æ»¡è¶³ F ä¸­çš„æ‰€æœ‰å‡½æ•°ä¾èµ– âœ…

#### æ­¥éª¤3ï¼šéªŒè¯X â†’ Yä¸æˆç«‹

**ç›®æ ‡**ï¼šè¯æ˜å…³ç³» r ä¸æ»¡è¶³ X â†’ Y

**éªŒè¯è¿‡ç¨‹**ï¼š

ç”±äº `Y âŠˆ Xâº`ï¼Œå­˜åœ¨å±æ€§ `A âˆˆ Y - Xâº`ã€‚

åœ¨å…³ç³» r ä¸­ï¼š

1. **X çš„å±æ€§å€¼**ï¼š
   - å› ä¸º `X âŠ† Xâº`
   - æ‰€ä»¥ `tâ‚[X] = tâ‚‚[X] = 0...0`

2. **Y çš„å±æ€§å€¼**ï¼š
   - å› ä¸º `A âˆˆ Y - Xâº`
   - æ‰€ä»¥ `tâ‚[A] = 0 â‰  1 = tâ‚‚[A]`
   - å› æ­¤ `tâ‚[Y] â‰  tâ‚‚[Y]`

3. **å‡½æ•°ä¾èµ–è¿å**ï¼š

   ```text
   tâ‚[X] = tâ‚‚[X]  (å‰ææ¡ä»¶æ»¡è¶³)
   tâ‚[Y] â‰  tâ‚‚[Y]  (ç»“è®ºä¸æ»¡è¶³)
   ```

   å› æ­¤ `X â†’ Y` åœ¨ r ä¸­**ä¸æˆç«‹**

**å½¢å¼åŒ–è¯æ˜**ï¼š

```text
ç”±äº Y âŠˆ Xâº:
  â†’ âˆƒA âˆˆ Y - Xâº
  â†’ tâ‚[A] = 0 â‰  1 = tâ‚‚[A]
  â†’ tâ‚[Y] â‰  tâ‚‚[Y]

åŒæ—¶ï¼š
  â†’ X âŠ† Xâº
  â†’ tâ‚[X] = tâ‚‚[X] = 0...0

å› æ­¤ï¼š
  â†’ tâ‚[X] = tâ‚‚[X] ä½† tâ‚[Y] â‰  tâ‚‚[Y]
  â†’ X â†’ Y åœ¨ r ä¸­ä¸æˆç«‹
```

**ç»“è®º**ï¼šå…³ç³» r ä¸æ»¡è¶³ X â†’ Y âœ…

#### æ­¥éª¤4ï¼šå¯¼å‡ºçŸ›ç›¾

**çŸ›ç›¾åˆ†æ**ï¼š

1. **å…³ç³» r çš„æ€§è´¨**ï¼š
   - r æ»¡è¶³ F ä¸­çš„æ‰€æœ‰å‡½æ•°ä¾èµ–ï¼ˆæ­¥éª¤2ï¼‰
   - r ä¸æ»¡è¶³ X â†’ Yï¼ˆæ­¥éª¤3ï¼‰

2. **å‡è®¾æ¡ä»¶**ï¼š
   - å‡è®¾ `F âŠ¨ X â†’ Y`ï¼ˆè¯­ä¹‰è•´å«ï¼‰

3. **çŸ›ç›¾**ï¼š

   ```text
   å¦‚æœ F âŠ¨ X â†’ Yï¼Œé‚£ä¹ˆï¼š
     å¯¹äºæ‰€æœ‰æ»¡è¶³ F çš„å…³ç³» rï¼Œr ä¹Ÿå¿…é¡»æ»¡è¶³ X â†’ Y

   ä½†æˆ‘ä»¬æ„é€ çš„å…³ç³» rï¼š
     - æ»¡è¶³ F âœ…
     - ä¸æ»¡è¶³ X â†’ Y âŒ

   è¿™ä¸ F âŠ¨ X â†’ Y çŸ›ç›¾ï¼
   ```

**æ¨ç†è¿‡ç¨‹**ï¼š

```text
å‰æ1ï¼šF âŠ¨ X â†’ Y  (å‡è®¾)
å‰æ2ï¼šr æ»¡è¶³ F   (æ­¥éª¤2è¯æ˜)
å‰æ3ï¼šr ä¸æ»¡è¶³ X â†’ Y  (æ­¥éª¤3è¯æ˜)

æ¨ç†ï¼š
  å¦‚æœ F âŠ¨ X â†’ Yï¼Œåˆ™ï¼š
    âˆ€r: (r æ»¡è¶³ F) â†’ (r æ»¡è¶³ X â†’ Y)

  ä½†å­˜åœ¨å…³ç³» rï¼š
    - r æ»¡è¶³ F
    - r ä¸æ»¡è¶³ X â†’ Y

  è¿™ä¸å‰æ1çŸ›ç›¾ï¼

ç»“è®ºï¼šå‡è®¾ F âŠ¨ X â†’ Y ä½† F âŠ¬ X â†’ Y ä¸æˆç«‹
      å› æ­¤ï¼šå¦‚æœ F âŠ¨ X â†’ Yï¼Œåˆ™ F âŠ¢ X â†’ Y
      å³ï¼šArmstrongå…¬ç†ç³»ç»Ÿæ˜¯å®Œå¤‡çš„ âœ…
```

**ç»“è®º**ï¼šArmstrongå…¬ç†ç³»ç»Ÿæ˜¯å®Œå¤‡çš„ã€‚âœ…

### 3.4. è¯æ˜æ–¹æ³•å¯¹æ¯”çŸ©é˜µ

| è¯æ˜æ–¹æ³• | é€‚ç”¨æ€§ | å¤æ‚åº¦ | ç›´è§‚æ€§ | ä¸¥æ ¼æ€§ |
|---------|--------|--------|--------|--------|
| **åè¯æ³•ï¼ˆæœ¬è¯æ˜ï¼‰** | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ | â­â­â­â­â­ |
| **ç›´æ¥æ„é€ ** | â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| **å½’çº³æ³•** | â­â­ | â­â­â­ | â­â­â­â­ | â­â­â­â­ |

---

## 4. èŒƒå¼åˆ†è§£æ­£ç¡®æ€§è¯æ˜

### 4.1. 3NFåˆ†è§£æ­£ç¡®æ€§

**å®šç†**ï¼š3NFåˆ†è§£ç®—æ³•äº§ç”Ÿçš„åˆ†è§£æ˜¯ï¼š

1. **æ— æŸçš„**ï¼ˆLosslessï¼‰
2. **ä¿æŒä¾èµ–çš„**ï¼ˆDependency Preservingï¼‰
3. **æ¯ä¸ªå…³ç³»æ»¡è¶³3NF**

### 4.2. æ— æŸåˆ†è§£è¯æ˜

**å®šä¹‰**ï¼šåˆ†è§£ `{Râ‚, Râ‚‚, ..., Râ‚™}` æ˜¯æ— æŸçš„ï¼Œå½“ä¸”ä»…å½“ï¼š

```text
R = Râ‚ â‹ˆ Râ‚‚ â‹ˆ ... â‹ˆ Râ‚™
```

**æ— æŸåˆ†è§£åˆ¤å®šå†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[åˆ¤å®šåˆ†è§£æ˜¯å¦æ— æŸ] --> B{ä½¿ç”¨è¿æ¥å›¾æµ‹è¯•}
    B --> C[æ„å»ºè¿æ¥å›¾]
    C --> D{è¿æ¥å›¾æ˜¯å¦è¿é€š?}

    D -->|æ˜¯| E[åˆ†è§£æ˜¯æ— æŸçš„]
    D -->|å¦| F[åˆ†è§£æ˜¯æœ‰æŸçš„]

    E --> G[éªŒè¯ï¼šR = Râ‚â‹ˆRâ‚‚â‹ˆ...â‹ˆRâ‚™]
    F --> H[éœ€è¦æ·»åŠ é¢å¤–å…³ç³»]

    G --> I{éªŒè¯é€šè¿‡?}
    I -->|æ˜¯| J[è¯æ˜å®Œæˆ]
    I -->|å¦| K[æ£€æŸ¥åˆ†è§£ç®—æ³•]
    K --> C
```

**è¯¦ç»†è¯æ˜**ï¼š

#### 4.2.1. è¿æ¥å›¾æµ‹è¯•æ–¹æ³•

**è¿æ¥å›¾æ„é€ **ï¼š

1. **èŠ‚ç‚¹**ï¼šæ¯ä¸ªå…³ç³» Ráµ¢ æ˜¯ä¸€ä¸ªèŠ‚ç‚¹
2. **è¾¹**ï¼šå¦‚æœ Ráµ¢ å’Œ Râ±¼ æœ‰å…¬å…±å±æ€§ï¼Œåˆ™æ·»åŠ è¾¹

**è¿æ¥å›¾è¿é€šæ€§æµ‹è¯•**ï¼š

```text
ç®—æ³•ï¼šè¿æ¥å›¾è¿é€šæ€§æµ‹è¯•
è¾“å…¥ï¼šåˆ†è§£ {Râ‚, Râ‚‚, ..., Râ‚™}
è¾“å‡ºï¼šæ˜¯å¦è¿é€š

æ­¥éª¤ï¼š
1. æ„å»ºå›¾ G = (V, E)
   V = {Râ‚, Râ‚‚, ..., Râ‚™}
   E = {(Ráµ¢, Râ±¼) | Attr(Ráµ¢) âˆ© Attr(Râ±¼) â‰  âˆ…}

2. ä»ä»»æ„èŠ‚ç‚¹å¼€å§‹DFS/BFSéå†

3. å¦‚æœæ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«è®¿é—®ï¼Œåˆ™è¿é€š
```

#### 4.2.2. 3NFåˆ†è§£ç®—æ³•çš„æ— æŸæ€§ä¿è¯

**3NFåˆ†è§£ç®—æ³•**ï¼š

```text
ç®—æ³•ï¼š3NFåˆ†è§£
è¾“å…¥ï¼šå…³ç³» Rï¼Œå‡½æ•°ä¾èµ–é›†åˆ F
è¾“å‡ºï¼š3NFåˆ†è§£ {Râ‚, Râ‚‚, ..., Râ‚™}

æ­¥éª¤ï¼š
1. è®¡ç®— F çš„æœ€å°è¦†ç›– F_min

2. å¯¹äºæ¯ä¸ªå‡½æ•°ä¾èµ– X â†’ Y âˆˆ F_minï¼š
    åˆ›å»ºå…³ç³» Ráµ¢ = XY
    å¦‚æœ Ráµ¢ ä¸æ˜¯æŸä¸ª Râ±¼ çš„å­é›†ï¼Œåˆ™æ·»åŠ åˆ°åˆ†è§£ä¸­

3. å¦‚æœæ²¡æœ‰ä»»ä½• Ráµ¢ åŒ…å« R çš„å€™é€‰é”®ï¼Œåˆ™ï¼š
    æ·»åŠ å…³ç³» R_key = å€™é€‰é”®

4. è¿”å›åˆ†è§£ {Râ‚, Râ‚‚, ..., Râ‚™}
```

**æ— æŸæ€§è¯æ˜**ï¼š

**å¼•ç†1**ï¼šå¯¹äºæ¯ä¸ªå‡½æ•°ä¾èµ– `X â†’ Y âˆˆ F`ï¼Œå­˜åœ¨å…³ç³» `Ráµ¢` ä½¿å¾— `XY âŠ† Attr(Ráµ¢)`

**è¯æ˜**ï¼š

- ç®—æ³•æ­¥éª¤2æ˜ç¡®åˆ›å»ºäº†å…³ç³» `Ráµ¢ = XY`
- å› æ­¤ `XY âŠ† Attr(Ráµ¢)` æˆç«‹ âœ…

**å¼•ç†2**ï¼šè¿æ¥å›¾æ˜¯è¿é€šçš„

**è¯æ˜**ï¼š

1. **åŸºç¡€æƒ…å†µ**ï¼šå¦‚æœåªæœ‰ä¸€ä¸ªå…³ç³»ï¼Œæ˜¾ç„¶è¿é€š

2. **å½’çº³æ­¥éª¤**ï¼šå‡è®¾å‰ k ä¸ªå…³ç³»å½¢æˆè¿é€šå›¾

   - è€ƒè™‘ç¬¬ k+1 ä¸ªå…³ç³» R_{k+1} = XY
   - ç”±äº `X â†’ Y âˆˆ F`ï¼Œä¸” F æ˜¯æœ€å°è¦†ç›–
   - å­˜åœ¨æŸä¸ªå…³ç³» Râ±¼ (j â‰¤ k) åŒ…å« X æˆ– Y
   - å› æ­¤ R_{k+1} ä¸ Râ±¼ æœ‰å…¬å…±å±æ€§
   - è¿æ¥å›¾ä»ç„¶è¿é€š

**å®šç†**ï¼šå¦‚æœè¿æ¥å›¾è¿é€šï¼Œåˆ™åˆ†è§£æ˜¯æ— æŸçš„

**è¯æ˜**ï¼š

ä½¿ç”¨**è¿½è¸ªçŸ©é˜µï¼ˆChaseï¼‰ç®—æ³•**ï¼š

1. **æ„é€ è¿½è¸ªçŸ©é˜µ**ï¼š

   ```text
   è¡Œï¼šæ¯ä¸ªå…³ç³» Ráµ¢
   åˆ—ï¼šæ¯ä¸ªå±æ€§ Aâ±¼
   å€¼ï¼šå¦‚æœ Aâ±¼ âˆˆ Attr(Ráµ¢)ï¼Œåˆ™ä¸ºå˜é‡ï¼›å¦åˆ™ä¸ºç©º
   ```

2. **åº”ç”¨å‡½æ•°ä¾èµ–**ï¼š
   - å¯¹äºæ¯ä¸ªå‡½æ•°ä¾èµ– `X â†’ Y`ï¼š
     - å¦‚æœä¸¤è¡Œåœ¨ X ä¸Šç›¸ç­‰
     - åˆ™ä½¿å®ƒä»¬åœ¨ Y ä¸Šä¹Ÿç›¸ç­‰

3. **æ£€æŸ¥ç»“æœ**ï¼š
   - å¦‚æœæŸè¡Œå˜æˆå…¨å˜é‡è¡Œï¼ˆaâ‚, aâ‚‚, ..., aâ‚™ï¼‰
   - åˆ™åˆ†è§£æ˜¯æ— æŸçš„

**å½¢å¼åŒ–è¯æ˜**ï¼š

```text
è®¾åˆ†è§£ {Râ‚, Râ‚‚, ..., Râ‚™} çš„è¿æ¥å›¾è¿é€š

æ„é€ è¿½è¸ªçŸ©é˜µ Mï¼š
  M[i, j] = aâ±¼ å¦‚æœ Aâ±¼ âˆˆ Attr(Ráµ¢)
          = bâ±¼ å¦åˆ™ï¼ˆä¸åŒå…³ç³»ç”¨ä¸åŒå˜é‡ï¼‰

åº”ç”¨å‡½æ•°ä¾èµ–ï¼š
  å¯¹äº X â†’ Y âˆˆ Fï¼š
    å¦‚æœ M[i, X] = M[j, X]ï¼Œåˆ™ä½¿ M[i, Y] = M[j, Y]

ç”±äºè¿æ¥å›¾è¿é€šï¼š
  â†’ å¯ä»¥é€šè¿‡å‡½æ•°ä¾èµ–é“¾è¿æ¥æ‰€æœ‰å…³ç³»
  â†’ æœ€ç»ˆæŸè¡Œå˜æˆå…¨å˜é‡è¡Œ (aâ‚, aâ‚‚, ..., aâ‚™)
  â†’ è¿™è¡Œå¯¹åº”åŸå§‹å…³ç³» R çš„å…ƒç»„

å› æ­¤ï¼šR = Râ‚ â‹ˆ Râ‚‚ â‹ˆ ... â‹ˆ Râ‚™
      åˆ†è§£æ˜¯æ— æŸçš„ âœ…
```

**ç¤ºä¾‹**ï¼š

```text
è®¾ R = {A, B, C, D}
   F = {A â†’ B, B â†’ C}

3NFåˆ†è§£ï¼š
  Râ‚ = {A, B}  (æ¥è‡ª A â†’ B)
  Râ‚‚ = {B, C}  (æ¥è‡ª B â†’ C)
  Râ‚ƒ = {A, D}  (åŒ…å«å€™é€‰é”® A)

è¿æ¥å›¾ï¼š
  Râ‚ --B-- Râ‚‚
  Râ‚ --A-- Râ‚ƒ
  è¿é€š âœ…

è¿½è¸ªçŸ©é˜µï¼š
        A    B    C    D
  Râ‚:   aâ‚   aâ‚‚   bâ‚   bâ‚‚
  Râ‚‚:   câ‚   aâ‚‚   aâ‚ƒ   câ‚‚
  Râ‚ƒ:   aâ‚   dâ‚   eâ‚   aâ‚„

åº”ç”¨ A â†’ Bï¼š
  Râ‚ å’Œ Râ‚ƒ åœ¨ A ä¸Šéƒ½æ˜¯ aâ‚
  â†’ ä½¿ Râ‚ƒ çš„ B ä¹Ÿå˜æˆ aâ‚‚

åº”ç”¨ B â†’ Cï¼š
  Râ‚ å’Œ Râ‚‚ åœ¨ B ä¸Šéƒ½æ˜¯ aâ‚‚
  â†’ ä½¿ Râ‚ çš„ C ä¹Ÿå˜æˆ aâ‚ƒ

ç»“æœï¼š
        A    B    C    D
  Râ‚:   aâ‚   aâ‚‚   aâ‚ƒ   bâ‚‚
  Râ‚‚:   câ‚   aâ‚‚   aâ‚ƒ   câ‚‚
  Râ‚ƒ:   aâ‚   aâ‚‚   eâ‚   aâ‚„

Râ‚ è¡Œå˜æˆ (aâ‚, aâ‚‚, aâ‚ƒ, bâ‚‚)
å¯¹åº”åŸå§‹å…³ç³» R çš„å…ƒç»„
åˆ†è§£æ˜¯æ— æŸçš„ âœ…
```

**ç»“è®º**ï¼š3NFåˆ†è§£ç®—æ³•äº§ç”Ÿçš„åˆ†è§£æ˜¯æ— æŸçš„ âœ…

### 4.3. ä¿æŒä¾èµ–è¯æ˜

**å®šä¹‰**ï¼šåˆ†è§£ä¿æŒä¾èµ–ï¼Œå½“ä¸”ä»…å½“ï¼š

```text
Fâº = (Fâ‚ âˆª Fâ‚‚ âˆª ... âˆª Fâ‚™)âº
```

å…¶ä¸­ `Fáµ¢` æ˜¯ `F` åœ¨ `Ráµ¢` ä¸Šçš„æŠ•å½±ã€‚

**ä¿æŒä¾èµ–åˆ¤å®šå†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[åˆ¤å®šåˆ†è§£æ˜¯å¦ä¿æŒä¾èµ–] --> B[è®¡ç®—Fåœ¨Ráµ¢ä¸Šçš„æŠ•å½±]
    B --> C[Fáµ¢ = Ï€_{Ráµ¢}(F)]
    C --> D[è®¡ç®—å¹¶é›†çš„é—­åŒ…]
    D --> E[(Fâ‚ âˆª Fâ‚‚ âˆª ... âˆª Fâ‚™)âº]
    E --> F{æ˜¯å¦ç­‰äºFâº?}

    F -->|æ˜¯| G[ä¿æŒä¾èµ–]
    F -->|å¦| H[ä¸ä¿æŒä¾èµ–]

    G --> I[éªŒè¯ï¼šæ¯ä¸ªXâ†’YâˆˆFéƒ½èƒ½ä»Fáµ¢æ¨å¯¼]
    H --> J[éœ€è¦æ·»åŠ é¢å¤–å…³ç³»]

    I --> K{éªŒè¯é€šè¿‡?}
    K -->|æ˜¯| L[è¯æ˜å®Œæˆ]
    K -->|å¦| M[æ£€æŸ¥æŠ•å½±è®¡ç®—]
    M --> B
```

**è¯¦ç»†è¯æ˜**ï¼š

#### 4.3.1. å‡½æ•°ä¾èµ–æŠ•å½±å®šä¹‰

**æŠ•å½±æ“ä½œ**ï¼š`Ï€_{Ráµ¢}(F)`

å¯¹äºå‡½æ•°ä¾èµ– `X â†’ Y âˆˆ F`ï¼Œå…¶åœ¨å…³ç³» `Ráµ¢` ä¸Šçš„æŠ•å½±å®šä¹‰ä¸ºï¼š

```text
Ï€_{Ráµ¢}(X â†’ Y) = {
    X' â†’ Y' | X' = X âˆ© Attr(Ráµ¢),
              Y' = Y âˆ© Attr(Ráµ¢),
              X' â†’ Y' éå¹³å‡¡
}
```

**ç¤ºä¾‹**ï¼š

```text
è®¾ F = {A â†’ B, B â†’ C, A â†’ D}
   Râ‚ = {A, B}
   Râ‚‚ = {B, C}
   Râ‚ƒ = {A, D}

æŠ•å½±ï¼š
  Fâ‚ = Ï€_{Râ‚}(F) = {A â†’ B}
  Fâ‚‚ = Ï€_{Râ‚‚}(F) = {B â†’ C}
  Fâ‚ƒ = Ï€_{Râ‚ƒ}(F) = {A â†’ D}
```

#### 4.3.2. 3NFåˆ†è§£ç®—æ³•çš„ä¾èµ–ä¿æŒæ€§

**ç®—æ³•åˆ†æ**ï¼š

3NFåˆ†è§£ç®—æ³•çš„å…³é”®æ­¥éª¤ï¼š

```text
å¯¹äºæ¯ä¸ªå‡½æ•°ä¾èµ– X â†’ Y âˆˆ F_minï¼š
  åˆ›å»ºå…³ç³» Ráµ¢ = XY
```

**ä¾èµ–ä¿æŒæ€§è¯æ˜**ï¼š

**å¼•ç†**ï¼šå¯¹äºæ¯ä¸ªå‡½æ•°ä¾èµ– `X â†’ Y âˆˆ F`ï¼Œå­˜åœ¨å…³ç³» `Ráµ¢` ä½¿å¾— `X â†’ Y` å¯ä»¥ä» `Fáµ¢` æ¨å¯¼

**è¯æ˜**ï¼š

1. **æƒ…å†µ1**ï¼š`X â†’ Y` æ˜¯ `F_min` ä¸­çš„ä¾èµ–
   - ç®—æ³•åˆ›å»ºå…³ç³» `Ráµ¢ = XY`
   - å› æ­¤ `X âŠ† Attr(Ráµ¢)` ä¸” `Y âŠ† Attr(Ráµ¢)`
   - `Fáµ¢ = Ï€_{Ráµ¢}(F)` åŒ…å« `X â†’ Y`
   - å› æ­¤ `X â†’ Y âˆˆ Fáµ¢âº`

2. **æƒ…å†µ2**ï¼š`X â†’ Y` å¯ä»¥ä» `F_min` æ¨å¯¼
   - å­˜åœ¨ `X â†’ Y âˆˆ F_minâº`
   - ç”±äº `F_minâº = Fâº`
   - å­˜åœ¨æ¨å¯¼é“¾ï¼š`X â†’ Yâ‚, Yâ‚ â†’ Yâ‚‚, ..., Yâ‚– â†’ Y`
   - æ¯ä¸ªæ­¥éª¤å¯¹åº”çš„å…³ç³» `Ráµ¢` ä¿æŒç›¸åº”çš„ä¾èµ–
   - å› æ­¤ `X â†’ Y âˆˆ (Fâ‚ âˆª Fâ‚‚ âˆª ... âˆª Fâ‚™)âº`

**å½¢å¼åŒ–è¯æ˜**ï¼š

```text
âˆ€ X â†’ Y âˆˆ F:
  æƒ…å†µ1ï¼šX â†’ Y âˆˆ F_min
    â†’ âˆƒRáµ¢ = XY (ç®—æ³•åˆ›å»º)
    â†’ X â†’ Y âˆˆ Fáµ¢
    â†’ X â†’ Y âˆˆ (Fâ‚ âˆª Fâ‚‚ âˆª ... âˆª Fâ‚™)âº

  æƒ…å†µ2ï¼šX â†’ Y âˆˆ F_minâº - F_min
    â†’ âˆƒæ¨å¯¼é“¾ï¼šX â†’ Yâ‚, Yâ‚ â†’ Yâ‚‚, ..., Yâ‚– â†’ Y
    â†’ æ¯ä¸ª Yáµ¢ â†’ Yáµ¢â‚Šâ‚ å¯¹åº”å…³ç³» Râ±¼
    â†’ é€šè¿‡ä¼ é€’æ€§ï¼šX â†’ Y âˆˆ (Fâ‚ âˆª Fâ‚‚ âˆª ... âˆª Fâ‚™)âº

å› æ­¤ï¼šFâº âŠ† (Fâ‚ âˆª Fâ‚‚ âˆª ... âˆª Fâ‚™)âº

åŒæ—¶ï¼š(Fâ‚ âˆª Fâ‚‚ âˆª ... âˆª Fâ‚™)âº âŠ† Fâº
  (å› ä¸ºæ¯ä¸ª Fáµ¢ éƒ½æ˜¯ F çš„æŠ•å½±)

å› æ­¤ï¼šFâº = (Fâ‚ âˆª Fâ‚‚ âˆª ... âˆª Fâ‚™)âº
      åˆ†è§£ä¿æŒä¾èµ– âœ…
```

**ç»“è®º**ï¼š3NFåˆ†è§£ç®—æ³•äº§ç”Ÿçš„åˆ†è§£ä¿æŒä¾èµ– âœ…

### 4.4. 3NFæ€§è´¨è¯æ˜

**è¯æ˜**ï¼šæ¯ä¸ª `Ráµ¢` æ»¡è¶³3NF

å¯¹äºå…³ç³» `Ráµ¢ = XY`ï¼ˆå…¶ä¸­ `X â†’ Y` æ˜¯ `F` ä¸­çš„å‡½æ•°ä¾èµ–ï¼‰ï¼š

- å¦‚æœå­˜åœ¨éå¹³å‡¡å‡½æ•°ä¾èµ– `U â†’ V` åœ¨ `Ráµ¢` ä¸­ï¼š
  - å¦‚æœ `U` æ˜¯è¶…é”®ï¼Œåˆ™æ»¡è¶³3NF
  - å¦‚æœ `U` ä¸æ˜¯è¶…é”®ï¼Œåˆ™ `V` å¿…é¡»æ˜¯ä¸»å±æ€§
  - ç”±äº `Ráµ¢ = XY` ä¸” `X` æ˜¯é”®ï¼Œ`V` å¿…é¡»æ˜¯ä¸»å±æ€§

å› æ­¤ `Ráµ¢` æ»¡è¶³3NFã€‚

---

## 5. æŸ¥è¯¢åŒ…å«åˆ¤å®šå®šç†

### 5.1. å®šç†é™ˆè¿°

**å®šç†**ï¼šå¯¹äºSPJæŸ¥è¯¢ï¼ˆé€‰æ‹©-æŠ•å½±-è¿æ¥ï¼‰ï¼ŒæŸ¥è¯¢åŒ…å«å¯ä»¥é€šè¿‡åŒæ€åˆ¤å®š

```text
Qâ‚ âŠ‡ Qâ‚‚ âŸº å­˜åœ¨ä»Qâ‚‚åˆ°Qâ‚çš„åŒæ€
```

### 5.2. åŒæ€å®šä¹‰

**å®šä¹‰**ï¼šæŸ¥è¯¢ `Qâ‚‚` åˆ° `Qâ‚` çš„åŒæ€ `h` æ»¡è¶³ï¼š

1. **è¡¨æ˜ å°„**ï¼š`h` å°† `Qâ‚‚` çš„è¡¨æ˜ å°„åˆ° `Qâ‚` çš„è¡¨
2. **å±æ€§æ˜ å°„**ï¼š`h` ä¿æŒå±æ€§å¯¹åº”å…³ç³»
3. **æ¡ä»¶ä¿æŒ**ï¼š`Qâ‚‚` çš„æ¡ä»¶åœ¨ `Qâ‚` ä¸­æˆç«‹

### 5.3. å……åˆ†æ€§è¯æ˜

**å¦‚æœå­˜åœ¨åŒæ€ `h: Qâ‚‚ â†’ Qâ‚`ï¼Œåˆ™ `Qâ‚ âŠ‡ Qâ‚‚`**

**è¯æ˜ç­–ç•¥å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[è¯æ˜å……åˆ†æ€§] --> B[å‡è®¾å­˜åœ¨åŒæ€h: Qâ‚‚â†’Qâ‚]
    B --> C[å–ä»»æ„æ•°æ®åº“å®ä¾‹I]
    C --> D[å‡è®¾t âˆˆ Qâ‚‚(I)]

    D --> E[å­˜åœ¨Qâ‚‚çš„åŒ¹é…m]
    E --> F[é€šè¿‡åŒæ€hæ„é€ Qâ‚çš„åŒ¹é…]
    F --> G[h(m)æ˜¯Qâ‚çš„åŒ¹é…]

    G --> H[éªŒè¯h(m)æ»¡è¶³Qâ‚çš„æ¡ä»¶]
    H --> I{æ¡ä»¶æ»¡è¶³?}

    I -->|æ˜¯| J[t âˆˆ Qâ‚(I)]
    I -->|å¦| K[æ£€æŸ¥åŒæ€å®šä¹‰]
    K --> F

    J --> L[Qâ‚‚(I) âŠ† Qâ‚(I)]
    L --> M[Qâ‚ âŠ‡ Qâ‚‚]
    M --> N[è¯æ˜å®Œæˆ]
```

**è¯¦ç»†è¯æ˜**ï¼š

#### 5.3.1. åŒæ€çš„å®šä¹‰å›é¡¾

**åŒæ€ `h: Qâ‚‚ â†’ Qâ‚`** æ»¡è¶³ï¼š

1. **è¡¨æ˜ å°„**ï¼š`h` å°† `Qâ‚‚` çš„è¡¨æ˜ å°„åˆ° `Qâ‚` çš„è¡¨
   - `h(Tâ‚‚) = Tâ‚`ï¼Œå…¶ä¸­ `Tâ‚‚` æ˜¯ `Qâ‚‚` ä¸­çš„è¡¨ï¼Œ`Tâ‚` æ˜¯ `Qâ‚` ä¸­çš„è¡¨

2. **å±æ€§æ˜ å°„**ï¼š`h` ä¿æŒå±æ€§å¯¹åº”å…³ç³»
   - å¦‚æœ `Qâ‚‚` ä¸­è¡¨ `Tâ‚‚` çš„å±æ€§ `A` å¯¹åº” `Qâ‚` ä¸­è¡¨ `Tâ‚` çš„å±æ€§ `B`
   - åˆ™ `h(A) = B`

3. **æ¡ä»¶ä¿æŒ**ï¼š`Qâ‚‚` çš„æ¡ä»¶åœ¨ `Qâ‚` ä¸­æˆç«‹
   - å¦‚æœ `Qâ‚‚` æœ‰æ¡ä»¶ `Î¸â‚‚`ï¼Œåˆ™ `Qâ‚` æœ‰å¯¹åº”çš„æ¡ä»¶ `Î¸â‚`
   - ä¸” `h(Î¸â‚‚) âŸ¹ Î¸â‚`

#### 5.3.2. åŒ¹é…çš„æ„é€ 

**å®šä¹‰**ï¼šæŸ¥è¯¢ `Q` åœ¨æ•°æ®åº“å®ä¾‹ `I` ä¸Šçš„åŒ¹é…

åŒ¹é… `m` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°† `Q` ä¸­çš„å˜é‡æ˜ å°„åˆ° `I` ä¸­çš„å€¼ï¼Œä½¿å¾—ï¼š

- å¯¹äº `Q` ä¸­çš„æ¯ä¸ªè¡¨ `T`ï¼Œ`m(T)` æ˜¯ `I` ä¸­å¯¹åº”è¡¨çš„å…ƒç»„
- `Q` ä¸­çš„æ‰€æœ‰æ¡ä»¶éƒ½è¢«æ»¡è¶³

**åŒæ€åŒ¹é…çš„æ„é€ **ï¼š

ç»™å®š `Qâ‚‚` çš„åŒ¹é… `mâ‚‚`ï¼Œæ„é€  `Qâ‚` çš„åŒ¹é… `mâ‚`ï¼š

```text
å¯¹äº Qâ‚ ä¸­çš„æ¯ä¸ªè¡¨ Tâ‚ï¼š
  è®¾ Tâ‚‚ = hâ»Â¹(Tâ‚)  (Qâ‚‚ä¸­æ˜ å°„åˆ°Tâ‚çš„è¡¨)
  mâ‚(Tâ‚) = mâ‚‚(Tâ‚‚)  (ä½¿ç”¨Qâ‚‚çš„åŒ¹é…å€¼)
```

#### 5.3.3. æ¡ä»¶ä¿æŒçš„éªŒè¯

**ç›®æ ‡**ï¼šè¯æ˜ `mâ‚` æ»¡è¶³ `Qâ‚` çš„æ‰€æœ‰æ¡ä»¶

**éªŒè¯è¿‡ç¨‹**ï¼š

å¯¹äº `Qâ‚` ä¸­çš„æ¯ä¸ªæ¡ä»¶ `Î¸â‚`ï¼š

1. **æ‰¾åˆ°å¯¹åº”çš„ `Qâ‚‚` æ¡ä»¶**ï¼š
   - ç”±äºåŒæ€ `h` ä¿æŒæ¡ä»¶
   - å­˜åœ¨ `Qâ‚‚` ä¸­çš„æ¡ä»¶ `Î¸â‚‚` ä½¿å¾— `h(Î¸â‚‚) âŸ¹ Î¸â‚`

2. **éªŒè¯æ¡ä»¶æ»¡è¶³**ï¼š

   ```text
   ç”±äº mâ‚‚ æ˜¯ Qâ‚‚ çš„åŒ¹é…ï¼š
     â†’ mâ‚‚ æ»¡è¶³ Î¸â‚‚
     â†’ é€šè¿‡åŒæ€ hï¼Œmâ‚ æ»¡è¶³ h(Î¸â‚‚)
     â†’ ç”±äº h(Î¸â‚‚) âŸ¹ Î¸â‚ï¼Œmâ‚ æ»¡è¶³ Î¸â‚
   ```

**å½¢å¼åŒ–è¯æ˜**ï¼š

```text
è®¾ï¼š
  - Qâ‚‚ çš„åŒ¹é…ï¼šmâ‚‚
  - Qâ‚ çš„åŒ¹é…ï¼šmâ‚ = h(mâ‚‚)
  - Qâ‚ çš„æ¡ä»¶ï¼šÎ¸â‚

è¯æ˜ mâ‚ æ»¡è¶³ Î¸â‚ï¼š

1. ç”±äº h æ˜¯åŒæ€ï¼š
     âˆƒÎ¸â‚‚ âˆˆ Qâ‚‚: h(Î¸â‚‚) âŸ¹ Î¸â‚

2. ç”±äº mâ‚‚ æ˜¯ Qâ‚‚ çš„åŒ¹é…ï¼š
     mâ‚‚ æ»¡è¶³ Î¸â‚‚

3. é€šè¿‡åŒæ€æ€§è´¨ï¼š
     mâ‚ = h(mâ‚‚) æ»¡è¶³ h(Î¸â‚‚)

4. ç”±äº h(Î¸â‚‚) âŸ¹ Î¸â‚ï¼š
     mâ‚ æ»¡è¶³ Î¸â‚ âœ…
```

#### 5.3.4. ç»“è®ºæ¨å¯¼

**æ¨ç†é“¾**ï¼š

```text
å‰æ1ï¼šå­˜åœ¨åŒæ€ h: Qâ‚‚ â†’ Qâ‚
å‰æ2ï¼št âˆˆ Qâ‚‚(I)
å‰æ3ï¼šmâ‚‚ æ˜¯ Qâ‚‚ åœ¨ I ä¸Šçš„åŒ¹é…ï¼Œäº§ç”Ÿ t

æ¨ç†ï¼š
  1. æ„é€  mâ‚ = h(mâ‚‚)
  2. mâ‚ æ˜¯ Qâ‚ çš„åŒ¹é…ï¼ˆå·²éªŒè¯ï¼‰
  3. mâ‚ äº§ç”Ÿç»“æœ t' âˆˆ Qâ‚(I)
  4. ç”±äºåŒæ€ä¿æŒæŠ•å½±å±æ€§ï¼št' = t
  5. å› æ­¤ t âˆˆ Qâ‚(I)

ç»“è®ºï¼šQâ‚‚(I) âŠ† Qâ‚(I)
      å³ï¼šQâ‚ âŠ‡ Qâ‚‚ âœ…
```

**ç»“è®º**ï¼šå¦‚æœå­˜åœ¨åŒæ€ `h: Qâ‚‚ â†’ Qâ‚`ï¼Œåˆ™ `Qâ‚ âŠ‡ Qâ‚‚` âœ…

### 5.4. å¿…è¦æ€§è¯æ˜

**å¦‚æœ `Qâ‚ âŠ‡ Qâ‚‚`ï¼Œåˆ™å­˜åœ¨åŒæ€ `h: Qâ‚‚ â†’ Qâ‚`**

**è¯æ˜**ï¼š

æ„é€ è§„èŒƒæ•°æ®åº“å®ä¾‹ `I_canonical`ï¼š

- å¯¹äº `Qâ‚‚` çš„æ¯ä¸ªè¡¨ `T`ï¼Œåˆ›å»ºåŒ…å«æ‰€æœ‰å˜é‡çš„å…ƒç»„
- å¯¹äº `Qâ‚‚` çš„æ¯ä¸ªæ¡ä»¶ï¼Œåˆ›å»ºæ»¡è¶³æ¡ä»¶çš„å…ƒç»„

ç”±äº `Qâ‚ âŠ‡ Qâ‚‚`ï¼Œ`Qâ‚‚(I_canonical) âŠ† Qâ‚(I_canonical)`ã€‚

ä» `Qâ‚` åœ¨ `I_canonical` ä¸Šçš„åŒ¹é…å¯ä»¥æ„é€ åŒæ€ `h`ã€‚

---

## 6. æŸ¥è¯¢ä¼˜åŒ–ç­‰ä»·æ€§å®šç†

### 6.1. å®šç†é™ˆè¿°

**å®šç†**ï¼šæŸ¥è¯¢ä¼˜åŒ–çš„ç­‰ä»·å˜æ¢ä¿æŒæŸ¥è¯¢è¯­ä¹‰

å¦‚æœæŸ¥è¯¢ `Qâ‚` å’Œ `Qâ‚‚` é€šè¿‡ç­‰ä»·å˜æ¢å¾—åˆ°ï¼Œåˆ™ï¼š

```text
Qâ‚ â‰¡ Qâ‚‚ âŸº âˆ€ I, Qâ‚(I) = Qâ‚‚(I)
```

### 6.2. ç­‰ä»·å˜æ¢è§„åˆ™

**ç­‰ä»·å˜æ¢è§„åˆ™å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[æŸ¥è¯¢ä¼˜åŒ–ç­‰ä»·å˜æ¢] --> B{å˜æ¢ç±»å‹}

    B -->|é€‰æ‹©æ“ä½œ| C[é€‰æ‹©ä¸‹æ¨]
    B -->|æŠ•å½±æ“ä½œ| D[æŠ•å½±ä¸‹æ¨]
    B -->|è¿æ¥æ“ä½œ| E[è¿æ¥é‡æ’åº]
    B -->|ç»„åˆæ“ä½œ| F[æ“ä½œäº¤æ¢]

    C --> C1{æ¡ä»¶æ¶‰åŠå“ªäº›è¡¨?}
    C1 -->|åªæ¶‰åŠR| C2[Ïƒ_Î¸(R â‹ˆ S) â†’ Ïƒ_Î¸(R) â‹ˆ S]
    C1 -->|æ¶‰åŠRå’ŒS| C3[Ïƒ_Î¸(R â‹ˆ S) â†’ Ïƒ_Î¸â‚(R) â‹ˆ Ïƒ_Î¸â‚‚(S)]
    C1 -->|æ¶‰åŠè¿æ¥æ¡ä»¶| C4[ä¿æŒè¿æ¥åé€‰æ‹©]

    D --> D1[æŠ•å½±ä¸‹æ¨]
    D1 --> D2[Ï€_A(R â‹ˆ S) â†’ Ï€_A(Ï€_{Aâˆ©R}(R) â‹ˆ Ï€_{Aâˆ©S}(S))]

    E --> E1[è¿æ¥ç»“åˆå¾‹]
    E1 --> E2[(R â‹ˆ S) â‹ˆ T â†’ R â‹ˆ (S â‹ˆ T)]

    F --> F1[é€‰æ‹©æŠ•å½±äº¤æ¢]
    F1 --> F2[Ïƒ_Î¸(Ï€_A(R)) â†’ Ï€_A(Ïƒ_Î¸(R)) if Î¸åªæ¶‰åŠA]

    C2 --> G[éªŒè¯ç­‰ä»·æ€§]
    C3 --> G
    C4 --> G
    D2 --> G
    E2 --> G
    F2 --> G

    G --> H{éªŒè¯é€šè¿‡?}
    H -->|æ˜¯| I[åº”ç”¨å˜æ¢]
    H -->|å¦| J[æ£€æŸ¥æ¡ä»¶]
    J --> B
```

#### 6.2.1. è§„åˆ™1ï¼šé€‰æ‹©ä¸‹æ¨

**è§„åˆ™é™ˆè¿°**ï¼š

```text
Ïƒ_Î¸(R â‹ˆ S) â‰¡ Ïƒ_Î¸(R) â‹ˆ S  (å¦‚æœÎ¸åªæ¶‰åŠRçš„å±æ€§)
```

**è¯¦ç»†è¯æ˜**ï¼š

**æ­¥éª¤1ï¼šè¯­ä¹‰åˆ†æ**:

```text
å·¦å¼ï¼šÏƒ_Î¸(R â‹ˆ S)
  = {t | t âˆˆ R â‹ˆ S âˆ§ Î¸(t)}
  = {(r, s) | r âˆˆ R, s âˆˆ S, (r, s) âˆˆ R â‹ˆ S, Î¸(r, s)}

å³å¼ï¼šÏƒ_Î¸(R) â‹ˆ S
  = {t | t âˆˆ Ïƒ_Î¸(R) â‹ˆ S}
  = {(r, s) | r âˆˆ Ïƒ_Î¸(R), s âˆˆ S, (r, s) âˆˆ Ïƒ_Î¸(R) â‹ˆ S}
```

**æ­¥éª¤2ï¼šæ¡ä»¶åˆ†æ**:

ç”±äº `Î¸` åªæ¶‰åŠ `R` çš„å±æ€§ï¼š

- `Î¸(r, s) = Î¸(r)`ï¼ˆæ¡ä»¶åªä¾èµ–äºrï¼Œä¸ä¾èµ–äºsï¼‰

**æ­¥éª¤3ï¼šç­‰ä»·æ€§è¯æ˜**:

```text
å¯¹äºä»»æ„å…ƒç»„ t = (r, s)ï¼š

t âˆˆ Ïƒ_Î¸(R â‹ˆ S)
  âŸº (r, s) âˆˆ R â‹ˆ S âˆ§ Î¸(r, s)
  âŸº (r, s) âˆˆ R â‹ˆ S âˆ§ Î¸(r)      (å› ä¸ºÎ¸åªæ¶‰åŠR)
  âŸº r âˆˆ R âˆ§ s âˆˆ S âˆ§ (r, s)æ»¡è¶³è¿æ¥æ¡ä»¶ âˆ§ Î¸(r)
  âŸº r âˆˆ Ïƒ_Î¸(R) âˆ§ s âˆˆ S âˆ§ (r, s)æ»¡è¶³è¿æ¥æ¡ä»¶
  âŸº (r, s) âˆˆ Ïƒ_Î¸(R) â‹ˆ S
  âŸº t âˆˆ Ïƒ_Î¸(R) â‹ˆ S

å› æ­¤ï¼šÏƒ_Î¸(R â‹ˆ S) = Ïƒ_Î¸(R) â‹ˆ S âœ…
```

**æ­¥éª¤4ï¼šæ€§èƒ½åˆ†æ**:

**ä¼˜åŒ–æ•ˆæœ**ï¼š

| æ“ä½œé¡ºåº | ä¸­é—´ç»“æœå¤§å° | I/Oæ¬¡æ•° | CPUæ—¶é—´ |
|---------|------------|--------|--------|
| **åŸå§‹**ï¼šÏƒ_Î¸(R â‹ˆ S) | \|R\| Ã— \|S\| | é«˜ | é«˜ |
| **ä¼˜åŒ–**ï¼šÏƒ_Î¸(R) â‹ˆ S | \|Ïƒ_Î¸(R)\| Ã— \|S\| | ä½ | ä½ |
| **æ€§èƒ½æå‡** | å‡å°‘ \|R\| - \|Ïƒ_Î¸(R)\| å€ | æ˜¾è‘— | æ˜¾è‘— |

**ç¤ºä¾‹**ï¼š

```sql
-- åŸå§‹æŸ¥è¯¢
SELECT * FROM (
    SELECT * FROM orders o
    JOIN customers c ON o.customer_id = c.id
) WHERE o.total_amount > 1000;

-- ä¼˜åŒ–åæŸ¥è¯¢ï¼ˆé€‰æ‹©ä¸‹æ¨ï¼‰
SELECT * FROM (
    SELECT * FROM orders WHERE total_amount > 1000
) o
JOIN customers c ON o.customer_id = c.id;
```

#### 6.2.2. è§„åˆ™2ï¼šæŠ•å½±ä¸‹æ¨

**è§„åˆ™é™ˆè¿°**ï¼š

```text
Ï€_A(R â‹ˆ S) â‰¡ Ï€_A(Ï€_{Aâˆ©Attr(R)}(R) â‹ˆ Ï€_{Aâˆ©Attr(S)}(S))
```

**è¯¦ç»†è¯æ˜**ï¼š

**æ­¥éª¤1ï¼šå±æ€§åˆ†æ**:

è®¾ï¼š

- `A_R = A âˆ© Attr(R)`ï¼šç»“æœå±æ€§ä¸­æ¥è‡ªRçš„éƒ¨åˆ†
- `A_S = A âˆ© Attr(S)`ï¼šç»“æœå±æ€§ä¸­æ¥è‡ªSçš„éƒ¨åˆ†
- `A = A_R âˆª A_S`

**æ­¥éª¤2ï¼šç­‰ä»·æ€§è¯æ˜**:

```text
å¯¹äºä»»æ„å…ƒç»„ tï¼š

t âˆˆ Ï€_A(R â‹ˆ S)
  âŸº âˆƒ(r, s) âˆˆ R â‹ˆ S: t = (r, s)[A]
  âŸº âˆƒr âˆˆ R, s âˆˆ S:
       (r, s)æ»¡è¶³è¿æ¥æ¡ä»¶ âˆ§
       t = (r[A_R], s[A_S])
  âŸº âˆƒr' âˆˆ Ï€_{A_R}(R), s' âˆˆ Ï€_{A_S}(S):
       (r', s')æ»¡è¶³è¿æ¥æ¡ä»¶ âˆ§
       t = (r', s')
  âŸº t âˆˆ Ï€_A(Ï€_{A_R}(R) â‹ˆ Ï€_{A_S}(S))

å› æ­¤ï¼šÏ€_A(R â‹ˆ S) = Ï€_A(Ï€_{A_R}(R) â‹ˆ Ï€_{A_S}(S)) âœ…
```

**æ­¥éª¤3ï¼šæ€§èƒ½åˆ†æ**:

**ä¼˜åŒ–æ•ˆæœ**ï¼š

| æ“ä½œé¡ºåº | ä¸­é—´ç»“æœå¤§å° | å†…å­˜ä½¿ç”¨ | CPUæ—¶é—´ |
|---------|------------|---------|--------|
| **åŸå§‹**ï¼šÏ€_A(R â‹ˆ S) | \|R\| Ã— \|S\| Ã— \|Attr(R)\| Ã— \|Attr(S)\| | é«˜ | é«˜ |
| **ä¼˜åŒ–**ï¼šÏ€_A(Ï€_{A_R}(R) â‹ˆ Ï€_{A_S}(S)) | \|R\| Ã— \|S\| Ã— \|A_R\| Ã— \|A_S\| | ä½ | ä½ |
| **æ€§èƒ½æå‡** | å‡å°‘å±æ€§æ•°é‡ | æ˜¾è‘— | æ˜¾è‘— |

#### 6.2.3. è§„åˆ™3ï¼šè¿æ¥ç»“åˆå¾‹

**è§„åˆ™é™ˆè¿°**ï¼š

```text
(R â‹ˆ S) â‹ˆ T â‰¡ R â‹ˆ (S â‹ˆ T)
```

**è¯¦ç»†è¯æ˜**ï¼š

**æ­¥éª¤1ï¼šè¿æ¥è¯­ä¹‰åˆ†æ**:

è¿æ¥æ“ä½œ `R â‹ˆ S` çš„å®šä¹‰ï¼š

```text
R â‹ˆ S = {(r, s) | r âˆˆ R, s âˆˆ S,
                  r[Attr(R)âˆ©Attr(S)] = s[Attr(R)âˆ©Attr(S)]}
```

**æ­¥éª¤2ï¼šç»“åˆå¾‹è¯æ˜**:

```text
å·¦å¼ï¼š(R â‹ˆ S) â‹ˆ T
  = {(tâ‚, t) | tâ‚ âˆˆ R â‹ˆ S, t âˆˆ T,
               tâ‚[Attr(Râ‹ˆS)âˆ©Attr(T)] = t[Attr(Râ‹ˆS)âˆ©Attr(T)]}
  = {(r, s, t) | r âˆˆ R, s âˆˆ S, t âˆˆ T,
                  r[Attr(R)âˆ©Attr(S)] = s[Attr(R)âˆ©Attr(S)] âˆ§
                  (r, s)[Attr(Râ‹ˆS)âˆ©Attr(T)] = t[Attr(Râ‹ˆS)âˆ©Attr(T)]}

å³å¼ï¼šR â‹ˆ (S â‹ˆ T)
  = {(r, tâ‚‚) | r âˆˆ R, tâ‚‚ âˆˆ S â‹ˆ T,
               r[Attr(R)âˆ©Attr(Sâ‹ˆT)] = tâ‚‚[Attr(R)âˆ©Attr(Sâ‹ˆT)]}
  = {(r, s, t) | r âˆˆ R, s âˆˆ S, t âˆˆ T,
                  s[Attr(S)âˆ©Attr(T)] = t[Attr(S)âˆ©Attr(T)] âˆ§
                  r[Attr(R)âˆ©Attr(Sâ‹ˆT)] = (s, t)[Attr(R)âˆ©Attr(Sâ‹ˆT)]}

ç”±äºè¿æ¥æ¡ä»¶åªæ¶‰åŠå±æ€§å€¼ç›¸ç­‰ï¼š
  â†’ ä¸¤ç§è¡¨è¾¾å¼çš„è¿æ¥æ¡ä»¶ç­‰ä»·
  â†’ ç»“æœå…ƒç»„é›†åˆç›¸åŒ

å› æ­¤ï¼š(R â‹ˆ S) â‹ˆ T = R â‹ˆ (S â‹ˆ T) âœ…
```

**æ­¥éª¤3ï¼šè¿æ¥é¡ºåºä¼˜åŒ–**:

**è¿æ¥é¡ºåºé€‰æ‹©å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[é€‰æ‹©è¿æ¥é¡ºåº] --> B[ä¼°è®¡å„è¡¨å¤§å°]
    B --> C[ä¼°è®¡è¿æ¥é€‰æ‹©æ€§]
    C --> D{é€‰æ‹©æœ€ä¼˜é¡ºåº}

    D --> E[å°è¡¨ä¼˜å…ˆ]
    D --> F[é«˜é€‰æ‹©æ€§ä¼˜å…ˆ]
    D --> G[æœ‰ç´¢å¼•çš„è¡¨ä¼˜å…ˆ]

    E --> H[è®¡ç®—ä»£ä»·]
    F --> H
    G --> H

    H --> I{ä»£ä»·æœ€å°?}
    I -->|æ˜¯| J[é€‰æ‹©è¯¥é¡ºåº]
    I -->|å¦| K[å°è¯•å…¶ä»–é¡ºåº]
    K --> D

    J --> L[åº”ç”¨è¿æ¥ç»“åˆå¾‹]
    L --> M[ç”Ÿæˆæ‰§è¡Œè®¡åˆ’]
```

### 6.2.4. ç­‰ä»·å˜æ¢è§„åˆ™å¯¹æ¯”çŸ©é˜µ

| å˜æ¢è§„åˆ™ | é€‚ç”¨æ¡ä»¶ | æ€§èƒ½æå‡ | å¤æ‚åº¦ | åº”ç”¨é¢‘ç‡ |
|---------|---------|---------|--------|---------|
| **é€‰æ‹©ä¸‹æ¨** | æ¡ä»¶åªæ¶‰åŠéƒ¨åˆ†è¡¨ | â­â­â­â­â­ | â­â­ | æé«˜ |
| **æŠ•å½±ä¸‹æ¨** | æŠ•å½±å±æ€§æ˜¯å­é›† | â­â­â­â­ | â­â­â­ | é«˜ |
| **è¿æ¥ç»“åˆå¾‹** | å¤šä¸ªè¿æ¥ | â­â­â­ | â­â­â­â­ | ä¸­ |
| **é€‰æ‹©æŠ•å½±äº¤æ¢** | æ¡ä»¶åªæ¶‰åŠæŠ•å½±å±æ€§ | â­â­â­ | â­â­ | ä¸­ |
| **è¿æ¥äº¤æ¢** | è¿æ¥æ¡ä»¶å¯¹ç§° | â­â­ | â­â­â­ | ä½ |

### 6.3. ä¼˜åŒ–æ­£ç¡®æ€§

**å®šç†**ï¼šä½¿ç”¨ç­‰ä»·å˜æ¢çš„æŸ¥è¯¢ä¼˜åŒ–ä¿æŒæŸ¥è¯¢è¯­ä¹‰

**è¯æ˜**ï¼š

æ¯ä¸ªç­‰ä»·å˜æ¢è§„åˆ™éƒ½ä¿æŒæŸ¥è¯¢è¯­ä¹‰ï¼Œå› æ­¤ï¼š

- å¦‚æœ `Qâ‚ â†’ Qâ‚‚` é€šè¿‡ç­‰ä»·å˜æ¢å¾—åˆ°ï¼Œåˆ™ `Qâ‚ â‰¡ Qâ‚‚`
- ä¼˜åŒ–åçš„æŸ¥è¯¢ `Q_opt` ä¸åŸæŸ¥è¯¢ `Q` ç­‰ä»·

---

## 7. å‘é‡æ•°æ®åº“å½¢å¼åŒ–ç†è®º

### 7.1. å‘é‡ç©ºé—´åº¦é‡å®šç†

**å®šç†7.1**ï¼šå‘é‡ç›¸ä¼¼åº¦åº¦é‡çš„ç­‰ä»·æ€§

**å®šç†é™ˆè¿°**ï¼š
å¯¹äºå½’ä¸€åŒ–å‘é‡ï¼Œä½™å¼¦ç›¸ä¼¼åº¦ã€æ¬§æ°è·ç¦»å’Œå†…ç§¯æ»¡è¶³ä»¥ä¸‹å…³ç³»ï¼š

```text
è®¾ u, v âˆˆ â„â¿ï¼Œâ€–uâ€– = â€–vâ€– = 1ï¼ˆå½’ä¸€åŒ–å‘é‡ï¼‰

åˆ™ï¼š
1. cos(u, v) = u Â· v        ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ = å†…ç§¯ï¼‰
2. â€–u - vâ€–Â² = 2(1 - u Â· v)  ï¼ˆæ¬§æ°è·ç¦»ä¸å†…ç§¯å…³ç³»ï¼‰
3. cos(u, v) = 1 - â€–u - vâ€–Â²/2
```

**è¯æ˜**ï¼š

```text
è¯æ˜1ï¼šä½™å¼¦ç›¸ä¼¼åº¦ = å†…ç§¯
cos(u, v) = (u Â· v) / (â€–uâ€– Ã— â€–vâ€–)
         = (u Â· v) / (1 Ã— 1)      ï¼ˆå½’ä¸€åŒ–æ¡ä»¶ï¼‰
         = u Â· v âœ…

è¯æ˜2ï¼šæ¬§æ°è·ç¦»ä¸å†…ç§¯å…³ç³»
â€–u - vâ€–Â² = (u - v) Â· (u - v)
         = u Â· u - 2(u Â· v) + v Â· v
         = â€–uâ€–Â² - 2(u Â· v) + â€–vâ€–Â²
         = 1 - 2(u Â· v) + 1        ï¼ˆå½’ä¸€åŒ–æ¡ä»¶ï¼‰
         = 2(1 - u Â· v) âœ…

è¯æ˜3ï¼šä½™å¼¦ç›¸ä¼¼åº¦ä¸æ¬§æ°è·ç¦»å…³ç³»
ç”±è¯æ˜2ï¼šâ€–u - vâ€–Â² = 2(1 - u Â· v)
å˜å½¢ï¼šu Â· v = 1 - â€–u - vâ€–Â²/2
ç”±è¯æ˜1ï¼šcos(u, v) = u Â· v = 1 - â€–u - vâ€–Â²/2 âœ…
QED.
```

### 7.2. è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢å®šç†

**å®šç†7.2**ï¼šHNSWç´¢å¼•çš„å¬å›ç‡ä¿è¯

**å®šç†é™ˆè¿°**ï¼š
HNSWï¼ˆHierarchical Navigable Small Worldï¼‰ç´¢å¼•åœ¨å‚æ•° `ef_search â‰¥ k` æ—¶ï¼Œå¯¹äºk-NNæŸ¥è¯¢çš„å¬å›ç‡æ»¡è¶³ï¼š

```text
Recall(k) â‰¥ 1 - (1 - p)^L

å…¶ä¸­ï¼š
- p = é‚»å±…æ¢ç´¢æ¦‚ç‡ï¼ˆä¸ef_search/mç›¸å…³ï¼‰
- L = å±‚æ•°ï¼ˆçº¦ log(N)ï¼‰
- N = æ•°æ®ç‚¹æ•°é‡
```

**è¯æ˜æ€è·¯**ï¼š

```mermaid
flowchart TD
    A[HNSWå¬å›ç‡è¯æ˜] --> B[å±‚æ¬¡ç»“æ„åˆ†æ]
    B --> C[æ¯å±‚æœç´¢æ¦‚ç‡]
    C --> D[è´ªå¿ƒæœç´¢æ”¶æ•›æ€§]
    D --> E[å¬å›ç‡ä¸‹ç•Œ]

    subgraph è¯æ˜æ­¥éª¤
        B --> B1["å±‚æ•° L = O(log N)"]
        C --> C1["æ¯å±‚æ¢ç´¢ ef_search ä¸ªèŠ‚ç‚¹"]
        D --> D1["å±€éƒ¨æœ€ä¼˜ â†’ å…¨å±€æœ€ä¼˜"]
    end
```

**å½¢å¼åŒ–è¯æ˜**ï¼š

```text
Given:
    - HNSW graph G with L layers
    - Query point q
    - True k nearest neighbors: N_k(q)
    - ef_search parameter

Prove:
    Recall â‰¥ 1 - Îµ for appropriate ef_search

Proof:
    Step 1: å±‚æ¬¡æœç´¢åˆ†æ
    - é¡¶å±‚ Lï¼šç¨€ç–å›¾ï¼Œå¿«é€Ÿå®šä½å¤§è‡´åŒºåŸŸ
    - æ¯ä¸‹é™ä¸€å±‚ï¼Œå›¾å¯†åº¦å¢åŠ çº¦ 2^(-1/m)
    - åº•å±‚ 0ï¼šå®Œæ•´å›¾

    Step 2: è´ªå¿ƒæœç´¢æ”¶æ•›
    - åœ¨æ¯å±‚ï¼Œè´ªå¿ƒæœç´¢ä»å…¥å£ç‚¹å¼€å§‹
    - æ¢ç´¢ ef_search ä¸ªå€™é€‰ç‚¹
    - ç§»åŠ¨åˆ°å½“å‰æœ€è¿‘é‚»å±…

    Step 3: å¬å›ç‡è®¡ç®—
    - è®¾ p_l = ç¬¬lå±‚æ‰¾åˆ°çœŸå®é‚»å±…çš„æ¦‚ç‡
    - æ€»å¬å›ç‡ = âˆ(l=0 to L) p_l
    - å½“ ef_search è¶³å¤Ÿå¤§æ—¶ï¼Œp_l â†’ 1

    Step 4: ç»“è®º
    - Recall â‰¥ 1 - (1-p)^L
    - å¢å¤§ ef_search å¯æé«˜ p
    - å¢å¤§ m å¯å‡å°‘ L

QED.
```

### 7.3. æ··åˆæ£€ç´¢èåˆå®šç†

**å®šç†7.3**ï¼šRRFï¼ˆReciprocal Rank Fusionï¼‰çš„æœ€ä¼˜æ€§

**å®šç†é™ˆè¿°**ï¼š
RRFèåˆå…¬å¼åœ¨å¤šä¸ªæ’åºåˆ—è¡¨èåˆæ—¶ï¼Œæ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼š

```text
RRF_score(d) = Î£(râˆˆR) 1 / (k + rank_r(d))

å…¶ä¸­ï¼š
- R = æ’åºåˆ—è¡¨é›†åˆ
- rank_r(d) = æ–‡æ¡£dåœ¨åˆ—è¡¨rä¸­çš„æ’å
- k = å¸¸æ•°ï¼ˆé€šå¸¸å–60ï¼‰

æ€§è´¨ï¼š
1. æ’åé å‰çš„æ–‡æ¡£è·å¾—æ›´é«˜æƒé‡
2. å¯¹ä¸åŒåˆ—è¡¨çš„æ’åå…·æœ‰é²æ£’æ€§
3. æ—¶é—´å¤æ‚åº¦ O(|R| Ã— n)ï¼Œnä¸ºæ–‡æ¡£æ•°
```

**è¯æ˜**ï¼š

```text
æ€§è´¨1è¯æ˜ï¼šæ’åæƒé‡é€’å‡
è®¾ rankâ‚ < rankâ‚‚ï¼Œåˆ™ï¼š
1/(k + rankâ‚) > 1/(k + rankâ‚‚)

å¯¹äº k = 60ï¼š
- rank=1: 1/61 â‰ˆ 0.0164
- rank=10: 1/70 â‰ˆ 0.0143
- rank=100: 1/160 = 0.00625

æƒé‡éšæ’åæŒ‡æ•°é€’å‡ âœ…

æ€§è´¨2è¯æ˜ï¼šé²æ£’æ€§
- å•ä¸ªåˆ—è¡¨çš„æç«¯æ’åä¸ä¼šä¸»å¯¼æœ€ç»ˆå¾—åˆ†
- å¤šä¸ªåˆ—è¡¨çš„å…±è¯†ä¼šè¢«æ”¾å¤§
- æ•°å­¦ä¸Šï¼šRRFå¯¹æ’åå™ªå£°ä¸æ•æ„Ÿ

æ€§è´¨3è¯æ˜ï¼šæ—¶é—´å¤æ‚åº¦
- éå†æ¯ä¸ªåˆ—è¡¨ï¼šO(|R|)
- è®¡ç®—æ¯ä¸ªæ–‡æ¡£çš„è´¡çŒ®ï¼šO(n)
- æ€»å¤æ‚åº¦ï¼šO(|R| Ã— n) âœ…
```

**SQLå®ç°**ï¼š

```sql
-- RRFèåˆå®ç°
WITH vector_results AS (
    SELECT id, ROW_NUMBER() OVER (ORDER BY embedding <-> query_vec) AS rank
    FROM documents
    ORDER BY embedding <-> query_vec
    LIMIT 100
),
keyword_results AS (
    SELECT id, ROW_NUMBER() OVER (ORDER BY ts_rank_cd(tsv, query) DESC) AS rank
    FROM documents
    WHERE tsv @@ query
    ORDER BY ts_rank_cd(tsv, query) DESC
    LIMIT 100
)
SELECT
    COALESCE(v.id, k.id) AS id,
    COALESCE(1.0 / (60 + v.rank), 0) +
    COALESCE(1.0 / (60 + k.rank), 0) AS rrf_score
FROM vector_results v
FULL OUTER JOIN keyword_results k ON v.id = k.id
ORDER BY rrf_score DESC
LIMIT 20;
```

### 7.4. å‘é‡ç´¢å¼•å‚æ•°ä¼˜åŒ–å®šç†

**å®šç†7.4**ï¼šHNSWå‚æ•°ä¸æ€§èƒ½çš„å…³ç³»

```text
è®¾ HNSW ç´¢å¼•å‚æ•°ï¼š
- m = æ¯èŠ‚ç‚¹è¿æ¥æ•°
- ef_construction = æ„å»ºæ—¶æ¢ç´¢å› å­
- ef_search = æŸ¥è¯¢æ—¶æ¢ç´¢å› å­

åˆ™ï¼š
1. å¬å›ç‡ âˆ ef_search / m
2. ç´¢å¼•å¤§å° âˆ N Ã— m Ã— sizeof(int)
3. æŸ¥è¯¢å»¶è¿Ÿ âˆ ef_search Ã— log(N)
4. æ„å»ºæ—¶é—´ âˆ N Ã— ef_construction Ã— log(N)
```

**å‚æ•°é€‰æ‹©å†³ç­–æ ‘**ï¼š

```mermaid
flowchart TD
    A[HNSWå‚æ•°é€‰æ‹©] --> B{å¬å›ç‡è¦æ±‚?}

    B -->|>99%| C[é«˜å¬å›é…ç½®]
    B -->|95-99%| D[å¹³è¡¡é…ç½®]
    B -->|<95%| E[ä½å»¶è¿Ÿé…ç½®]

    C --> C1["m=32, ef=200"]
    D --> D1["m=16, ef=64"]
    E --> E1["m=8, ef=40"]

    C1 --> F[å†…å­˜: ~50KB/1000å‘é‡]
    D1 --> G[å†…å­˜: ~25KB/1000å‘é‡]
    E1 --> H[å†…å­˜: ~12KB/1000å‘é‡]
```

### 7.5. å‘é‡æ•°æ®åº“å®šç†æ€»ç»“çŸ©é˜µ

| å®šç† | æ•°å­¦åŸºç¡€ | å®é™…åº”ç”¨ | PostgreSQLå®ç° |
|------|---------|---------|----------------|
| **åº¦é‡ç­‰ä»·æ€§** | çº¿æ€§ä»£æ•° | å½’ä¸€åŒ–å‘é‡é€‰æ‹©åº¦é‡ | `vector_cosine_ops` |
| **HNSWå¬å›ç‡** | å›¾è®ºã€æ¦‚ç‡ | å‚æ•°è°ƒä¼˜ | `hnsw.ef_search` |
| **RRFæœ€ä¼˜æ€§** | ä¿¡æ¯èåˆ | æ··åˆæ£€ç´¢ | CTE + FULL JOIN |
| **å‚æ•°ä¼˜åŒ–** | å¤æ‚åº¦åˆ†æ | ç´¢å¼•é…ç½® | `WITH (m=, ef=)` |

---

## 8. å‚è€ƒèµ„æ–™

### 8.1. ç»å…¸æ–‡çŒ®

- Codd, E.F. (1970). "A Relational Model of Data for Large Shared Data Banks"
- Codd, E.F. (1972). "Relational Completeness of Data Base Sublanguages"
- Armstrong, W.W. (1974). "Dependency Structures of Data Base Relationships"
- Bernstein, P.A. (1976). "Synthesizing Third Normal Form Relations from Functional Dependencies"

### 8.2. 2025æ–°æ–‡çŒ®

- Malkov, Y.A. & Yashunin, D.A. (2020). "Efficient and robust approximate nearest neighbor search using Hierarchical Navigable Small World graphs"
- Cormack, G.V. et al. (2009). "Reciprocal Rank Fusion outperforms Condorcet and individual Rank Learning Methods"

### 8.3. ç›¸å…³èµ„æº

- [å…³ç³»æ•°æ®åº“ç†è®º](../01-ç†è®ºæ¨¡å‹/01.02-å…³ç³»æ•°æ®åº“ç†è®º.md)
- [å½¢å¼åŒ–æ–¹æ³•](../01-ç†è®ºæ¨¡å‹/01.05-å½¢å¼åŒ–æ–¹æ³•.md)
- [å½¢å¼åŒ–éªŒè¯](./03.02-å½¢å¼åŒ–éªŒè¯.md)
- [å‘é‡æ•°æ®åº“è®¾è®¡](../07-æ•°æ®åº“è®¾è®¡å®è·µ/07.10-å‘é‡æ•°æ®åº“è®¾è®¡.md)

---

**æœ€åæ›´æ–°**ï¼š2025-12-01
**ç»´æŠ¤è€…**ï¼šData-Science Team
**çŠ¶æ€**ï¼šå·²å®Œæˆ âœ…
