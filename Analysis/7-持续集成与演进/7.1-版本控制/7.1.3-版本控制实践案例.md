# ç‰ˆæœ¬æ§åˆ¶å®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [ç‰ˆæœ¬æ§åˆ¶å®è·µæ¡ˆä¾‹](#ç‰ˆæœ¬æ§åˆ¶å®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
  - [2. GitåŸºç¡€æ“ä½œå®è·µ](#2-gitåŸºç¡€æ“ä½œå®è·µ)
    - [2.1. ä»“åº“åˆå§‹åŒ–ä¸åŸºæœ¬æ“ä½œ](#21-ä»“åº“åˆå§‹åŒ–ä¸åŸºæœ¬æ“ä½œ)
  - [3. åˆ†æ”¯ç®¡ç†å®è·µ](#3-åˆ†æ”¯ç®¡ç†å®è·µ)
  - [4. åä½œå·¥ä½œæµå®è·µ](#4-åä½œå·¥ä½œæµå®è·µ)
    - [4.1. è¿œç¨‹ä»“åº“ç®¡ç†](#41-è¿œç¨‹ä»“åº“ç®¡ç†)
  - [5. å†²çªè§£å†³å®è·µ](#5-å†²çªè§£å†³å®è·µ)
  - [6. é«˜çº§Gitæ“ä½œå®è·µ](#6-é«˜çº§gitæ“ä½œå®è·µ)
    - [6.1. ç‰ˆæœ¬å›é€€ä¸é‡ç½®](#61-ç‰ˆæœ¬å›é€€ä¸é‡ç½®)
  - [7. Gitæ ‡ç­¾ç®¡ç†](#7-gitæ ‡ç­¾ç®¡ç†)
  - [8. æ€»ç»“](#8-æ€»ç»“)

---


## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å®è·µåº”ç”¨æ¡ˆä¾‹ï¼Œæ¶µç›–GitåŸºç¡€æ“ä½œã€åˆ†æ”¯ç®¡ç†ã€åä½œå·¥ä½œæµç­‰å®é™…åœºæ™¯ã€‚

## 2. GitåŸºç¡€æ“ä½œå®è·µ

### 2.1. ä»“åº“åˆå§‹åŒ–ä¸åŸºæœ¬æ“ä½œ

```python
import subprocess
import os
from datetime import datetime
from typing import List, Dict, Optional

class GitRepository:
    def __init__(self, repo_path: str):
        self.repo_path = repo_path
        self.git_dir = os.path.join(repo_path, '.git')

    def init_repository(self) -> bool:
        """åˆå§‹åŒ–Gitä»“åº“"""
        try:
            result = subprocess.run(['git', 'init'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"åˆå§‹åŒ–ä»“åº“å¤±è´¥: {e}")
            return False

    def add_file(self, file_path: str) -> bool:
        """æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº"""
        try:
            result = subprocess.run(['git', 'add', file_path],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"æ·»åŠ æ–‡ä»¶å¤±è´¥: {e}")
            return False

    def commit_changes(self, message: str) -> bool:
        """æäº¤æ›´æ”¹"""
        try:
            result = subprocess.run(['git', 'commit', '-m', message],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"æäº¤å¤±è´¥: {e}")
            return False

    def get_status(self) -> Dict[str, List[str]]:
        """è·å–ä»“åº“çŠ¶æ€"""
        try:
            result = subprocess.run(['git', 'status', '--porcelain'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)

            status = {
                'modified': [],
                'added': [],
                'deleted': [],
                'untracked': []
            }

            for line in result.stdout.strip().split('\n'):
                if line:
                    status_code = line[:2]
                    file_path = line[3:]

                    if status_code == 'M ':
                        status['modified'].append(file_path)
                    elif status_code == 'A ':
                        status['added'].append(file_path)
                    elif status_code == 'D ':
                        status['deleted'].append(file_path)
                    elif status_code == '??':
                        status['untracked'].append(file_path)

            return status
        except Exception as e:
            print(f"è·å–çŠ¶æ€å¤±è´¥: {e}")
            return {}

    def get_commit_history(self, max_count: int = 10) -> List[Dict]:
        """è·å–æäº¤å†å²"""
        try:
            result = subprocess.run([
                'git', 'log',
                f'--max-count={max_count}',
                '--pretty=format:%H|%an|%ad|%s',
                '--date=short'
            ], cwd=self.repo_path, capture_output=True, text=True)

            commits = []
            for line in result.stdout.strip().split('\n'):
                if line:
                    parts = line.split('|')
                    if len(parts) == 4:
                        commits.append({
                            'hash': parts[0],
                            'author': parts[1],
                            'date': parts[2],
                            'message': parts[3]
                        })

            return commits
        except Exception as e:
            print(f"è·å–æäº¤å†å²å¤±è´¥: {e}")
            return []

# ä½¿ç”¨ç¤ºä¾‹
def create_sample_repository():
    """åˆ›å»ºç¤ºä¾‹ä»“åº“"""
    repo_path = "sample_project"

# åˆ›å»ºç›®å½•
    os.makedirs(repo_path, exist_ok=True)

# åˆå§‹åŒ–ä»“åº“
    repo = GitRepository(repo_path)
    if repo.init_repository():
        print("ä»“åº“åˆå§‹åŒ–æˆåŠŸ")

# åˆ›å»ºç¤ºä¾‹æ–‡ä»¶
    with open(os.path.join(repo_path, "README.md"), "w") as f:
        f.write("# ç¤ºä¾‹é¡¹ç›®\n\nè¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ã€‚")

    with open(os.path.join(repo_path, "main.py"), "w") as f:
        f.write("print('Hello, World!')\n")

# æ·»åŠ æ–‡ä»¶
    repo.add_file("README.md")
    repo.add_file("main.py")

# æäº¤æ›´æ”¹
    if repo.commit_changes("åˆå§‹æäº¤ï¼šæ·»åŠ READMEå’Œmain.py"):
        print("åˆå§‹æäº¤æˆåŠŸ")

# æŸ¥çœ‹çŠ¶æ€
    status = repo.get_status()
    print("ä»“åº“çŠ¶æ€:", status)

# æŸ¥çœ‹æäº¤å†å²
    history = repo.get_commit_history()
    print("æäº¤å†å²:", history)

# è¿è¡Œç¤ºä¾‹
create_sample_repository()
```

## 3. åˆ†æ”¯ç®¡ç†å®è·µ

```python
class GitBranchManager:
    def __init__(self, repo_path: str):
        self.repo_path = repo_path

    def create_branch(self, branch_name: str) -> bool:
        """åˆ›å»ºæ–°åˆ†æ”¯"""
        try:
            result = subprocess.run(['git', 'checkout', '-b', branch_name],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"åˆ›å»ºåˆ†æ”¯å¤±è´¥: {e}")
            return False

    def switch_branch(self, branch_name: str) -> bool:
        """åˆ‡æ¢åˆ†æ”¯"""
        try:
            result = subprocess.run(['git', 'checkout', branch_name],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"åˆ‡æ¢åˆ†æ”¯å¤±è´¥: {e}")
            return False

    def list_branches(self) -> List[str]:
        """åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯"""
        try:
            result = subprocess.run(['git', 'branch'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)

            branches = []
            for line in result.stdout.strip().split('\n'):
                if line.strip():
# ç§»é™¤å½“å‰åˆ†æ”¯çš„*æ ‡è®°
                    branch_name = line.strip().lstrip('* ').strip()
                    branches.append(branch_name)

            return branches
        except Exception as e:
            print(f"åˆ—å‡ºåˆ†æ”¯å¤±è´¥: {e}")
            return []

    def get_current_branch(self) -> str:
        """è·å–å½“å‰åˆ†æ”¯å"""
        try:
            result = subprocess.run(['git', 'branch', '--show-current'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.stdout.strip()
        except Exception as e:
            print(f"è·å–å½“å‰åˆ†æ”¯å¤±è´¥: {e}")
            return ""

    def merge_branch(self, source_branch: str) -> bool:
        """åˆå¹¶åˆ†æ”¯"""
        try:
            result = subprocess.run(['git', 'merge', source_branch],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"åˆå¹¶åˆ†æ”¯å¤±è´¥: {e}")
            return False

    def delete_branch(self, branch_name: str, force: bool = False) -> bool:
        """åˆ é™¤åˆ†æ”¯"""
        try:
            cmd = ['git', 'branch', '-D' if force else '-d', branch_name]
            result = subprocess.run(cmd,
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"åˆ é™¤åˆ†æ”¯å¤±è´¥: {e}")
            return False

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_branch_workflow():
    """æ¼”ç¤ºåˆ†æ”¯å·¥ä½œæµ"""
    repo_path = "branch_demo"
    os.makedirs(repo_path, exist_ok=True)

# åˆå§‹åŒ–ä»“åº“
    repo = GitRepository(repo_path)
    repo.init_repository()

# åˆ›å»ºåˆå§‹æ–‡ä»¶
    with open(os.path.join(repo_path, "app.py"), "w") as f:
        f.write("def main():\n    print('Hello, World!')\n\nif __name__ == '__main__':\n    main()\n")

    repo.add_file("app.py")
    repo.commit_changes("åˆå§‹æäº¤ï¼šæ·»åŠ ä¸»ç¨‹åº")

# åˆ†æ”¯ç®¡ç†
    branch_manager = GitBranchManager(repo_path)

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
    branch_manager.create_branch("feature/user-authentication")
    print(f"å½“å‰åˆ†æ”¯: {branch_manager.get_current_branch()}")

# åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šå·¥ä½œ
    with open(os.path.join(repo_path, "auth.py"), "w") as f:
        f.write("def login(username, password):\n    return True\n\ndef logout():\n    pass\n")

    repo.add_file("auth.py")
    repo.commit_changes("æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½")

# åˆ‡æ¢å›ä¸»åˆ†æ”¯
    branch_manager.switch_branch("main")
    print(f"å½“å‰åˆ†æ”¯: {branch_manager.get_current_branch()}")

# åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯
    branches = branch_manager.list_branches()
    print("æ‰€æœ‰åˆ†æ”¯:", branches)

# åˆå¹¶åŠŸèƒ½åˆ†æ”¯
    branch_manager.merge_branch("feature/user-authentication")

# åˆ é™¤åŠŸèƒ½åˆ†æ”¯
    branch_manager.delete_branch("feature/user-authentication")

# è¿è¡Œç¤ºä¾‹
demonstrate_branch_workflow()
```

## 4. åä½œå·¥ä½œæµå®è·µ

### 4.1. è¿œç¨‹ä»“åº“ç®¡ç†

```python
class GitRemoteManager:
    def __init__(self, repo_path: str):
        self.repo_path = repo_path

    def add_remote(self, name: str, url: str) -> bool:
        """æ·»åŠ è¿œç¨‹ä»“åº“"""
        try:
            result = subprocess.run(['git', 'remote', 'add', name, url],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"æ·»åŠ è¿œç¨‹ä»“åº“å¤±è´¥: {e}")
            return False

    def list_remotes(self) -> Dict[str, str]:
        """åˆ—å‡ºè¿œç¨‹ä»“åº“"""
        try:
            result = subprocess.run(['git', 'remote', '-v'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)

            remotes = {}
            for line in result.stdout.strip().split('\n'):
                if line:
                    parts = line.split()
                    if len(parts) >= 2:
                        name = parts[0]
                        url = parts[1]
                        remotes[name] = url

            return remotes
        except Exception as e:
            print(f"åˆ—å‡ºè¿œç¨‹ä»“åº“å¤±è´¥: {e}")
            return {}

    def push_to_remote(self, remote: str, branch: str) -> bool:
        """æ¨é€åˆ°è¿œç¨‹ä»“åº“"""
        try:
            result = subprocess.run(['git', 'push', remote, branch],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"æ¨é€å¤±è´¥: {e}")
            return False

    def pull_from_remote(self, remote: str, branch: str) -> bool:
        """ä»è¿œç¨‹ä»“åº“æ‹‰å–"""
        try:
            result = subprocess.run(['git', 'pull', remote, branch],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"æ‹‰å–å¤±è´¥: {e}")
            return False

    def fetch_from_remote(self, remote: str) -> bool:
        """ä»è¿œç¨‹ä»“åº“è·å–æ›´æ–°"""
        try:
            result = subprocess.run(['git', 'fetch', remote],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"è·å–æ›´æ–°å¤±è´¥: {e}")
            return False

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_remote_workflow():
    """æ¼”ç¤ºè¿œç¨‹ä»“åº“å·¥ä½œæµ"""
    repo_path = "remote_demo"
    os.makedirs(repo_path, exist_ok=True)

# åˆå§‹åŒ–ä»“åº“
    repo = GitRepository(repo_path)
    repo.init_repository()

# åˆ›å»ºåˆå§‹æ–‡ä»¶
    with open(os.path.join(repo_path, "config.py"), "w") as f:
        f.write("DEBUG = True\nDATABASE_URL = 'sqlite:///app.db'\n")

    repo.add_file("config.py")
    repo.commit_changes("æ·»åŠ é…ç½®æ–‡ä»¶")

# è¿œç¨‹ä»“åº“ç®¡ç†
    remote_manager = GitRemoteManager(repo_path)

# æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆç¤ºä¾‹URLï¼‰
# remote_manager.add_remote("origin", "https://github.com/user/repo.git")

# åˆ—å‡ºè¿œç¨‹ä»“åº“
    remotes = remote_manager.list_remotes()
    print("è¿œç¨‹ä»“åº“:", remotes)

# æ¨é€æ›´æ”¹ï¼ˆéœ€è¦å®é™…çš„è¿œç¨‹ä»“åº“ï¼‰
# remote_manager.push_to_remote("origin", "main")
```

## 5. å†²çªè§£å†³å®è·µ

```python
class GitConflictResolver:
    def __init__(self, repo_path: str):
        self.repo_path = repo_path

    def create_conflict_scenario(self):
        """åˆ›å»ºå†²çªåœºæ™¯"""
# åˆ›å»ºä¸»åˆ†æ”¯æ–‡ä»¶
        with open(os.path.join(self.repo_path, "data.py"), "w") as f:
            f.write("users = [\n    {'name': 'Alice', 'age': 25},\n    {'name': 'Bob', 'age': 30}\n]\n")

        repo = GitRepository(self.repo_path)
        repo.add_file("data.py")
        repo.commit_changes("æ·»åŠ ç”¨æˆ·æ•°æ®")

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
        branch_manager = GitBranchManager(self.repo_path)
        branch_manager.create_branch("feature/add-users")

# åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šä¿®æ”¹
        with open(os.path.join(self.repo_path, "data.py"), "w") as f:
            f.write("users = [\n    {'name': 'Alice', 'age': 25},\n    {'name': 'Bob', 'age': 30},\n    {'name': 'Charlie', 'age': 35}\n]\n")

        repo.add_file("data.py")
        repo.commit_changes("æ·»åŠ æ–°ç”¨æˆ·Charlie")

# åˆ‡æ¢å›ä¸»åˆ†æ”¯å¹¶ä¿®æ”¹åŒä¸€æ–‡ä»¶
        branch_manager.switch_branch("main")
        with open(os.path.join(self.repo_path, "data.py"), "w") as f:
            f.write("users = [\n    {'name': 'Alice', 'age': 25},\n    {'name': 'Bob', 'age': 30},\n    {'name': 'David', 'age': 28}\n]\n")

        repo.add_file("data.py")
        repo.commit_changes("æ·»åŠ æ–°ç”¨æˆ·David")

# å°è¯•åˆå¹¶ï¼ˆä¼šäº§ç”Ÿå†²çªï¼‰
        try:
            branch_manager.merge_branch("feature/add-users")
            print("åˆå¹¶æˆåŠŸï¼ˆæ— å†²çªï¼‰")
        except:
            print("æ£€æµ‹åˆ°åˆå¹¶å†²çª")

    def resolve_conflict_automatically(self, file_path: str, strategy: str = "ours"):
        """è‡ªåŠ¨è§£å†³å†²çª"""
        try:
            if strategy == "ours":
                result = subprocess.run(['git', 'checkout', '--ours', file_path],
                                      cwd=self.repo_path,
                                      capture_output=True,
                                      text=True)
            elif strategy == "theirs":
                result = subprocess.run(['git', 'checkout', '--theirs', file_path],
                                      cwd=self.repo_path,
                                      capture_output=True,
                                      text=True)

            if result.returncode == 0:
# æ ‡è®°å†²çªå·²è§£å†³
                repo = GitRepository(self.repo_path)
                repo.add_file(file_path)
                repo.commit_changes(f"è§£å†³å†²çªï¼š{file_path}")
                return True
            return False
        except Exception as e:
            print(f"è‡ªåŠ¨è§£å†³å†²çªå¤±è´¥: {e}")
            return False

    def get_conflict_files(self) -> List[str]:
        """è·å–å†²çªæ–‡ä»¶åˆ—è¡¨"""
        try:
            result = subprocess.run(['git', 'diff', '--name-only', '--diff-filter=U'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)

            conflict_files = []
            for line in result.stdout.strip().split('\n'):
                if line.strip():
                    conflict_files.append(line.strip())

            return conflict_files
        except Exception as e:
            print(f"è·å–å†²çªæ–‡ä»¶å¤±è´¥: {e}")
            return []

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_conflict_resolution():
    """æ¼”ç¤ºå†²çªè§£å†³"""
    repo_path = "conflict_demo"
    os.makedirs(repo_path, exist_ok=True)

# åˆå§‹åŒ–ä»“åº“
    repo = GitRepository(repo_path)
    repo.init_repository()

# åˆ›å»ºå†²çªåœºæ™¯
    conflict_resolver = GitConflictResolver(repo_path)
    conflict_resolver.create_conflict_scenario()

# è·å–å†²çªæ–‡ä»¶
    conflict_files = conflict_resolver.get_conflict_files()
    print("å†²çªæ–‡ä»¶:", conflict_files)

# è‡ªåŠ¨è§£å†³å†²çª
    for file_path in conflict_files:
        conflict_resolver.resolve_conflict_automatically(file_path, "ours")

# è¿è¡Œç¤ºä¾‹
demonstrate_conflict_resolution()
```

## 6. é«˜çº§Gitæ“ä½œå®è·µ

### 6.1. ç‰ˆæœ¬å›é€€ä¸é‡ç½®

```python
class GitVersionManager:
    def __init__(self, repo_path: str):
        self.repo_path = repo_path

    def reset_to_commit(self, commit_hash: str, mode: str = "soft") -> bool:
        """é‡ç½®åˆ°æŒ‡å®šæäº¤"""
        try:
            result = subprocess.run(['git', 'reset', f'--{mode}', commit_hash],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"é‡ç½®å¤±è´¥: {e}")
            return False

    def revert_commit(self, commit_hash: str) -> bool:
        """æ’¤é”€æŒ‡å®šæäº¤"""
        try:
            result = subprocess.run(['git', 'revert', commit_hash],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"æ’¤é”€æäº¤å¤±è´¥: {e}")
            return False

    def stash_changes(self, message: str = "") -> bool:
        """æš‚å­˜æ›´æ”¹"""
        try:
            cmd = ['git', 'stash', 'push', '-m', message] if message else ['git', 'stash']
            result = subprocess.run(cmd,
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"æš‚å­˜å¤±è´¥: {e}")
            return False

    def pop_stash(self, stash_index: int = 0) -> bool:
        """åº”ç”¨æš‚å­˜çš„æ›´æ”¹"""
        try:
            result = subprocess.run(['git', 'stash', 'pop', f'stash@{{{stash_index}}}'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"åº”ç”¨æš‚å­˜å¤±è´¥: {e}")
            return False

    def list_stashes(self) -> List[Dict]:
        """åˆ—å‡ºæš‚å­˜åˆ—è¡¨"""
        try:
            result = subprocess.run(['git', 'stash', 'list'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)

            stashes = []
            for line in result.stdout.strip().split('\n'):
                if line:
# è§£ææš‚å­˜ä¿¡æ¯
                    parts = line.split(':')
                    if len(parts) >= 2:
                        stash_ref = parts[0].strip()
                        message = parts[1].strip()
                        stashes.append({
                            'ref': stash_ref,
                            'message': message
                        })

            return stashes
        except Exception as e:
            print(f"åˆ—å‡ºæš‚å­˜å¤±è´¥: {e}")
            return []

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_version_management():
    """æ¼”ç¤ºç‰ˆæœ¬ç®¡ç†"""
    repo_path = "version_demo"
    os.makedirs(repo_path, exist_ok=True)

# åˆå§‹åŒ–ä»“åº“
    repo = GitRepository(repo_path)
    repo.init_repository()

# åˆ›å»ºå¤šä¸ªæäº¤
    for i in range(3):
        with open(os.path.join(repo_path, f"file_{i}.txt"), "w") as f:
            f.write(f"è¿™æ˜¯æ–‡ä»¶ {i} çš„å†…å®¹\n")

        repo.add_file(f"file_{i}.txt")
        repo.commit_changes(f"æ·»åŠ æ–‡ä»¶ {i}")

# è·å–æäº¤å†å²
    history = repo.get_commit_history()
    print("æäº¤å†å²:", history)

# ç‰ˆæœ¬ç®¡ç†
    version_manager = GitVersionManager(repo_path)

# æš‚å­˜å½“å‰æ›´æ”¹
    version_manager.stash_changes("ä¸´æ—¶ä¿å­˜æ›´æ”¹")

# åˆ—å‡ºæš‚å­˜
    stashes = version_manager.list_stashes()
    print("æš‚å­˜åˆ—è¡¨:", stashes)

# åº”ç”¨æš‚å­˜
    if stashes:
        version_manager.pop_stash(0)
```

## 7. Gitæ ‡ç­¾ç®¡ç†

```python
class GitTagManager:
    def __init__(self, repo_path: str):
        self.repo_path = repo_path

    def create_tag(self, tag_name: str, message: str = "", commit_hash: str = None) -> bool:
        """åˆ›å»ºæ ‡ç­¾"""
        try:
            if message:
                cmd = ['git', 'tag', '-a', tag_name, '-m', message]
            else:
                cmd = ['git', 'tag', tag_name]

            if commit_hash:
                cmd.append(commit_hash)

            result = subprocess.run(cmd,
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"åˆ›å»ºæ ‡ç­¾å¤±è´¥: {e}")
            return False

    def list_tags(self) -> List[str]:
        """åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾"""
        try:
            result = subprocess.run(['git', 'tag'],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)

            tags = []
            for line in result.stdout.strip().split('\n'):
                if line.strip():
                    tags.append(line.strip())

            return tags
        except Exception as e:
            print(f"åˆ—å‡ºæ ‡ç­¾å¤±è´¥: {e}")
            return []

    def delete_tag(self, tag_name: str) -> bool:
        """åˆ é™¤æ ‡ç­¾"""
        try:
            result = subprocess.run(['git', 'tag', '-d', tag_name],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"åˆ é™¤æ ‡ç­¾å¤±è´¥: {e}")
            return False

    def checkout_tag(self, tag_name: str) -> bool:
        """æ£€å‡ºæ ‡ç­¾"""
        try:
            result = subprocess.run(['git', 'checkout', tag_name],
                                  cwd=self.repo_path,
                                  capture_output=True,
                                  text=True)
            return result.returncode == 0
        except Exception as e:
            print(f"æ£€å‡ºæ ‡ç­¾å¤±è´¥: {e}")
            return False

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_tag_management():
    """æ¼”ç¤ºæ ‡ç­¾ç®¡ç†"""
    repo_path = "tag_demo"
    os.makedirs(repo_path, exist_ok=True)

# åˆå§‹åŒ–ä»“åº“
    repo = GitRepository(repo_path)
    repo.init_repository()

# åˆ›å»ºç‰ˆæœ¬æ–‡ä»¶
    with open(os.path.join(repo_path, "version.py"), "w") as f:
        f.write("VERSION = '1.0.0'\n")

    repo.add_file("version.py")
    repo.commit_changes("åˆå§‹ç‰ˆæœ¬ 1.0.0")

# æ ‡ç­¾ç®¡ç†
    tag_manager = GitTagManager(repo_path)

# åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
    tag_manager.create_tag("v1.0.0", "ç¬¬ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬")

# æ·»åŠ æ–°åŠŸèƒ½
    with open(os.path.join(repo_path, "feature.py"), "w") as f:
        f.write("def new_feature():\n    pass\n")

    repo.add_file("feature.py")
    repo.commit_changes("æ·»åŠ æ–°åŠŸèƒ½")

# åˆ›å»ºæ–°ç‰ˆæœ¬æ ‡ç­¾
    tag_manager.create_tag("v1.1.0", "æ·»åŠ æ–°åŠŸèƒ½")

# åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾
    tags = tag_manager.list_tags()
    print("æ‰€æœ‰æ ‡ç­¾:", tags)

# æ£€å‡ºç‰¹å®šç‰ˆæœ¬
    tag_manager.checkout_tag("v1.0.0")

# è¿è¡Œç¤ºä¾‹
demonstrate_tag_management()
```

## 8. æ€»ç»“

æœ¬æ–‡æ¡£æä¾›äº†ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å®è·µæ¡ˆä¾‹ï¼Œæ¶µç›–ï¼š

1. **GitåŸºç¡€æ“ä½œ**ï¼šä»“åº“åˆå§‹åŒ–ã€æ–‡ä»¶ç®¡ç†ã€æäº¤å†å²
2. **åˆ†æ”¯ç®¡ç†**ï¼šåˆ†æ”¯åˆ›å»ºã€åˆ‡æ¢ã€åˆå¹¶ã€åˆ é™¤
3. **åä½œå·¥ä½œæµ**ï¼šè¿œç¨‹ä»“åº“ã€å†²çªè§£å†³
4. **é«˜çº§æ“ä½œ**ï¼šç‰ˆæœ¬å›é€€ã€æš‚å­˜ç®¡ç†ã€æ ‡ç­¾ç®¡ç†

æ¯ä¸ªæ¡ˆä¾‹éƒ½åŒ…å«ï¼š

- å®é™…æ“ä½œæ­¥éª¤
- é”™è¯¯å¤„ç†æœºåˆ¶
- æœ€ä½³å®è·µå»ºè®®
- å®é™…åº”ç”¨åœºæ™¯

è¿™äº›å®è·µæ¡ˆä¾‹å±•ç¤ºäº†Gitç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºå›¢é˜Ÿåä½œå’Œä»£ç ç®¡ç†æä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚
