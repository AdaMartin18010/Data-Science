# 9.1.1 åˆ›å»ºå‹æ¨¡å¼æ·±åŒ–

## ğŸ“‘ ç›®å½•

- [9.1.1 åˆ›å»ºå‹æ¨¡å¼æ·±åŒ–](#911-åˆ›å»ºå‹æ¨¡å¼æ·±åŒ–)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. ç†è®ºåŸºç¡€](#1-ç†è®ºåŸºç¡€)
    - [1.1. åˆ›å»ºå‹æ¨¡å¼æ¦‚è¿°](#11-åˆ›å»ºå‹æ¨¡å¼æ¦‚è¿°)
    - [1.2. è®¾è®¡åŸåˆ™](#12-è®¾è®¡åŸåˆ™)
  - [2. æ ¸å¿ƒæ¨¡å¼](#2-æ ¸å¿ƒæ¨¡å¼)
    - [2.1. å•ä¾‹æ¨¡å¼ (Singleton Pattern)](#21-å•ä¾‹æ¨¡å¼-singleton-pattern)
  - [3. å·¥å‚æ¨¡å¼ (Factory Pattern)](#3-å·¥å‚æ¨¡å¼-factory-pattern)
  - [4. æŠ½è±¡å·¥å‚æ¨¡å¼ (Abstract Factory Pattern)](#4-æŠ½è±¡å·¥å‚æ¨¡å¼-abstract-factory-pattern)
  - [5. å»ºé€ è€…æ¨¡å¼ (Builder Pattern)](#5-å»ºé€ è€…æ¨¡å¼-builder-pattern)
  - [6. åŸå‹æ¨¡å¼ (Prototype Pattern)](#6-åŸå‹æ¨¡å¼-prototype-pattern)
  - [7. åº”ç”¨åœºæ™¯](#7-åº”ç”¨åœºæ™¯)
    - [7.1. å•ä¾‹æ¨¡å¼åº”ç”¨](#71-å•ä¾‹æ¨¡å¼åº”ç”¨)
    - [7.2. å·¥å‚æ¨¡å¼åº”ç”¨](#72-å·¥å‚æ¨¡å¼åº”ç”¨)
    - [7.3. æŠ½è±¡å·¥å‚åº”ç”¨](#73-æŠ½è±¡å·¥å‚åº”ç”¨)
    - [7.4. å»ºé€ è€…åº”ç”¨](#74-å»ºé€ è€…åº”ç”¨)
    - [7.5. åŸå‹åº”ç”¨](#75-åŸå‹åº”ç”¨)
  - [8. æ¨¡å¼ç»„åˆä¸æ‰©å±•](#8-æ¨¡å¼ç»„åˆä¸æ‰©å±•)
    - [8.1. æ¨¡å¼ç»„åˆ](#81-æ¨¡å¼ç»„åˆ)
    - [8.2. æ‰©å±•æ¨¡å¼](#82-æ‰©å±•æ¨¡å¼)
  - [9. æ€§èƒ½è€ƒè™‘](#9-æ€§èƒ½è€ƒè™‘)
    - [9.1. å†…å­˜ç®¡ç†](#91-å†…å­˜ç®¡ç†)
    - [9.2. çº¿ç¨‹å®‰å…¨](#92-çº¿ç¨‹å®‰å…¨)
  - [10. æœ€ä½³å®è·µ](#10-æœ€ä½³å®è·µ)
    - [10.1. é€‰æ‹©æŒ‡å—](#101-é€‰æ‹©æŒ‡å—)
    - [10.2. æ³¨æ„äº‹é¡¹](#102-æ³¨æ„äº‹é¡¹)
  - [11. æ€»ç»“](#11-æ€»ç»“)

---


## 1. ç†è®ºåŸºç¡€

### 1.1. åˆ›å»ºå‹æ¨¡å¼æ¦‚è¿°

åˆ›å»ºå‹æ¨¡å¼å…³æ³¨å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»ï¼Œæä¾›çµæ´»çš„å¯¹è±¡åˆ›å»ºæœºåˆ¶ï¼š

- **å°è£…å¤æ‚æ€§**ï¼šéšè—å¯¹è±¡åˆ›å»ºçš„å¤æ‚é€»è¾‘
- **æé«˜çµæ´»æ€§**ï¼šæ”¯æŒä¸åŒçš„åˆ›å»ºç­–ç•¥
- **å¢å¼ºå¯ç»´æŠ¤æ€§**ï¼šç»Ÿä¸€çš„åˆ›å»ºæ¥å£

### 1.2. è®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªæ¨¡å¼ä¸“æ³¨äºç‰¹å®šçš„åˆ›å»ºåœºæ™¯
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **ä¾èµ–å€’ç½®åŸåˆ™**ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°

## 2. æ ¸å¿ƒæ¨¡å¼

### 2.1. å•ä¾‹æ¨¡å¼ (Singleton Pattern)

ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›å…¨å±€è®¿é—®ç‚¹ã€‚

```java
// çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼
public class Singleton {
    private static volatile Singleton instance;
    private Singleton() {}

    public static Singleton getInstance() {
        if (instance == null) {
            synchronized (Singleton.class) {
                if (instance == null) {
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }
}
```

```python
# Pythonå•ä¾‹æ¨¡å¼
class Singleton:
    _instance = None
    _lock = threading.Lock()

    def __new__(cls):
        if cls._instance is None:
            with cls._lock:
                if cls._instance is None:
                    cls._instance = super().__new__(cls)
        return cls._instance
```

```cpp
// C++å•ä¾‹æ¨¡å¼
class Singleton {
private:
    static Singleton* instance;
    static std::mutex mutex;
    Singleton() {}

public:
    static Singleton* getInstance() {
        std::lock_guard<std::mutex> lock(mutex);
        if (instance == nullptr) {
            instance = new Singleton();
        }
        return instance;
    }
};
```

## 3. å·¥å‚æ¨¡å¼ (Factory Pattern)

å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚

```java
// ç®€å•å·¥å‚æ¨¡å¼
public interface Product {
    void operation();
}

public class ConcreteProductA implements Product {
    @Override
    public void operation() {
        System.out.println("Product A operation");
    }
}

public class ConcreteProductB implements Product {
    @Override
    public void operation() {
        System.out.println("Product B operation");
    }
}

public class SimpleFactory {
    public static Product createProduct(String type) {
        switch (type) {
            case "A": return new ConcreteProductA();
            case "B": return new ConcreteProductB();
            default: throw new IllegalArgumentException("Unknown type");
        }
    }
}
```

```python
# Pythonå·¥å‚æ¨¡å¼
from abc import ABC, abstractmethod

class Product(ABC):
    @abstractmethod
    def operation(self):
        pass

class ConcreteProductA(Product):
    def operation(self):
        print("Product A operation")

class ConcreteProductB(Product):
    def operation(self):
        print("Product B operation")

class SimpleFactory:
    @staticmethod
    def create_product(product_type: str) -> Product:
        if product_type == "A":
            return ConcreteProductA()
        elif product_type == "B":
            return ConcreteProductB()
        else:
            raise ValueError(f"Unknown product type: {product_type}")
```

## 4. æŠ½è±¡å·¥å‚æ¨¡å¼ (Abstract Factory Pattern)

æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ã€‚

```java
// æŠ½è±¡å·¥å‚æ¨¡å¼
public interface AbstractFactory {
    ProductA createProductA();
    ProductB createProductB();
}

public interface ProductA {
    void operationA();
}

public interface ProductB {
    void operationB();
}

public class ConcreteFactory1 implements AbstractFactory {
    @Override
    public ProductA createProductA() {
        return new ConcreteProductA1();
    }

    @Override
    public ProductB createProductB() {
        return new ConcreteProductB1();
    }
}

public class ConcreteFactory2 implements AbstractFactory {
    @Override
    public ProductA createProductA() {
        return new ConcreteProductA2();
    }

    @Override
    public ProductB createProductB() {
        return new ConcreteProductB2();
    }
}
```

```python
# PythonæŠ½è±¡å·¥å‚æ¨¡å¼
from abc import ABC, abstractmethod

class AbstractFactory(ABC):
    @abstractmethod
    def create_product_a(self):
        pass

    @abstractmethod
    def create_product_b(self):
        pass

class ProductA(ABC):
    @abstractmethod
    def operation_a(self):
        pass

class ProductB(ABC):
    @abstractmethod
    def operation_b(self):
        pass

class ConcreteFactory1(AbstractFactory):
    def create_product_a(self):
        return ConcreteProductA1()

    def create_product_b(self):
        return ConcreteProductB1()

class ConcreteFactory2(AbstractFactory):
    def create_product_a(self):
        return ConcreteProductA2()

    def create_product_b(self):
        return ConcreteProductB2()
```

## 5. å»ºé€ è€…æ¨¡å¼ (Builder Pattern)

å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚

```java
// å»ºé€ è€…æ¨¡å¼
public class Computer {
    private String cpu;
    private String memory;
    private String storage;
    private String gpu;

    private Computer(Builder builder) {
        this.cpu = builder.cpu;
        this.memory = builder.memory;
        this.storage = builder.storage;
        this.gpu = builder.gpu;
    }

    public static class Builder {
        private String cpu;
        private String memory;
        private String storage;
        private String gpu;

        public Builder cpu(String cpu) {
            this.cpu = cpu;
            return this;
        }

        public Builder memory(String memory) {
            this.memory = memory;
            return this;
        }

        public Builder storage(String storage) {
            this.storage = storage;
            return this;
        }

        public Builder gpu(String gpu) {
            this.gpu = gpu;
            return this;
        }

        public Computer build() {
            return new Computer(this);
        }
    }
}
```

```python
# Pythonå»ºé€ è€…æ¨¡å¼
class Computer:
    def __init__(self, cpu, memory, storage, gpu):
        self.cpu = cpu
        self.memory = memory
        self.storage = storage
        self.gpu = gpu

    def __str__(self):
        return f"Computer(cpu={self.cpu}, memory={self.memory}, storage={self.storage}, gpu={self.gpu})"

class ComputerBuilder:
    def __init__(self):
        self.cpu = None
        self.memory = None
        self.storage = None
        self.gpu = None

    def set_cpu(self, cpu):
        self.cpu = cpu
        return self

    def set_memory(self, memory):
        self.memory = memory
        return self

    def set_storage(self, storage):
        self.storage = storage
        return self

    def set_gpu(self, gpu):
        self.gpu = gpu
        return self

    def build(self):
        return Computer(self.cpu, self.memory, self.storage, self.gpu)
```

## 6. åŸå‹æ¨¡å¼ (Prototype Pattern)

ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œé€šè¿‡å¤åˆ¶è¿™äº›åŸå‹åˆ›å»ºæ–°å¯¹è±¡ã€‚

```java
// åŸå‹æ¨¡å¼
public interface Prototype extends Cloneable {
    Prototype clone();
}

public class ConcretePrototype implements Prototype {
    private String name;
    private List<String> properties;

    public ConcretePrototype(String name) {
        this.name = name;
        this.properties = new ArrayList<>();
    }

    @Override
    public Prototype clone() {
        ConcretePrototype clone = new ConcretePrototype(this.name);
        clone.properties = new ArrayList<>(this.properties);
        return clone;
    }

    public void addProperty(String property) {
        properties.add(property);
    }

    public String getName() {
        return name;
    }

    public List<String> getProperties() {
        return new ArrayList<>(properties);
    }
}
```

```python
# PythonåŸå‹æ¨¡å¼
import copy
from abc import ABC, abstractmethod

class Prototype(ABC):
    @abstractmethod
    def clone(self):
        pass

class ConcretePrototype(Prototype):
    def __init__(self, name):
        self.name = name
        self.properties = []

    def clone(self):
        return copy.deepcopy(self)

    def add_property(self, property_name):
        self.properties.append(property_name)

    def get_properties(self):
        return self.properties.copy()
```

## 7. åº”ç”¨åœºæ™¯

### 7.1. å•ä¾‹æ¨¡å¼åº”ç”¨

- **é…ç½®ç®¡ç†**ï¼šå…¨å±€é…ç½®å¯¹è±¡
- **æ—¥å¿—ç³»ç»Ÿ**ï¼šç»Ÿä¸€çš„æ—¥å¿—è®°å½•å™¨
- **æ•°æ®åº“è¿æ¥æ± **ï¼šå…±äº«æ•°æ®åº“è¿æ¥
- **ç¼“å­˜ç³»ç»Ÿ**ï¼šå…¨å±€ç¼“å­˜ç®¡ç†å™¨

### 7.2. å·¥å‚æ¨¡å¼åº”ç”¨

- **UIç»„ä»¶åˆ›å»º**ï¼šæ ¹æ®å¹³å°åˆ›å»ºä¸åŒçš„UIç»„ä»¶
- **æ•°æ®åº“è¿æ¥**ï¼šæ ¹æ®é…ç½®åˆ›å»ºä¸åŒç±»å‹çš„æ•°æ®åº“è¿æ¥
- **æ–‡ä»¶æ ¼å¼å¤„ç†**ï¼šæ ¹æ®æ–‡ä»¶ç±»å‹åˆ›å»ºç›¸åº”çš„å¤„ç†å™¨
- **æ’ä»¶ç³»ç»Ÿ**ï¼šåŠ¨æ€åŠ è½½å’Œåˆ›å»ºæ’ä»¶å®ä¾‹

### 7.3. æŠ½è±¡å·¥å‚åº”ç”¨

- **è·¨å¹³å°å¼€å‘**ï¼šä¸ºä¸åŒæ“ä½œç³»ç»Ÿåˆ›å»ºé€‚é…çš„ç»„ä»¶
- **ä¸»é¢˜ç³»ç»Ÿ**ï¼šåˆ›å»ºä¸€è‡´çš„ä¸»é¢˜ç»„ä»¶é›†åˆ
- **æ•°æ®åº“æŠ½è±¡**ï¼šæ”¯æŒå¤šç§æ•°æ®åº“çš„ORMæ¡†æ¶
- **GUIæ¡†æ¶**ï¼šåˆ›å»ºä¸åŒé£æ ¼çš„ç•Œé¢ç»„ä»¶

### 7.4. å»ºé€ è€…åº”ç”¨

- **å¤æ‚å¯¹è±¡æ„å»º**ï¼šå¦‚SQLæŸ¥è¯¢æ„å»ºå™¨
- **é…ç½®å¯¹è±¡**ï¼šåˆ†æ­¥éª¤æ„å»ºå¤æ‚é…ç½®
- **æ–‡æ¡£ç”Ÿæˆ**ï¼šæ„å»ºä¸åŒæ ¼å¼çš„æ–‡æ¡£
- **æ¸¸æˆå¯¹è±¡**ï¼šæ„å»ºå¤æ‚çš„æ¸¸æˆå®ä½“

### 7.5. åŸå‹åº”ç”¨

- **å¯¹è±¡å¤åˆ¶**ï¼šé¿å…é‡å¤åˆ›å»ºç›¸ä¼¼å¯¹è±¡
- **æ¨¡æ¿ç³»ç»Ÿ**ï¼šåŸºäºæ¨¡æ¿åˆ›å»ºæ–°å¯¹è±¡
- **ç¼“å­˜æœºåˆ¶**ï¼šå¿«é€Ÿåˆ›å»ºé¢„é…ç½®å¯¹è±¡
- **æ¸¸æˆå¼€å‘**ï¼šå¤åˆ¶æ¸¸æˆå¯¹è±¡æ¨¡æ¿

## 8. æ¨¡å¼ç»„åˆä¸æ‰©å±•

### 8.1. æ¨¡å¼ç»„åˆ

```java
// å•ä¾‹+å·¥å‚ç»„åˆ
public class DatabaseFactory {
    private static DatabaseFactory instance;
    private DatabaseFactory() {}

    public static DatabaseFactory getInstance() {
        if (instance == null) {
            instance = new DatabaseFactory();
        }
        return instance;
    }

    public Database createDatabase(String type) {
        switch (type) {
            case "MySQL": return new MySQLDatabase();
            case "PostgreSQL": return new PostgreSQLDatabase();
            default: throw new IllegalArgumentException("Unknown database type");
        }
    }
}
```

### 8.2. æ‰©å±•æ¨¡å¼

```java
// æ³›å‹å·¥å‚
public interface GenericFactory<T> {
    T create();
}

public class StringFactory implements GenericFactory<String> {
    @Override
    public String create() {
        return "Default String";
    }
}

public class IntegerFactory implements GenericFactory<Integer> {
    @Override
    public Integer create() {
        return 0;
    }
}
```

## 9. æ€§èƒ½è€ƒè™‘

### 9.1. å†…å­˜ç®¡ç†

- **å¯¹è±¡æ± **ï¼šå¤ç”¨å¯¹è±¡å‡å°‘GCå‹åŠ›
- **æ‡’åŠ è½½**ï¼šæŒ‰éœ€åˆ›å»ºå¯¹è±¡
- **ç¼“å­˜ç­–ç•¥**ï¼šç¼“å­˜å¸¸ç”¨å¯¹è±¡

### 9.2. çº¿ç¨‹å®‰å…¨

- **åŒé‡æ£€æŸ¥é”å®š**ï¼šç¡®ä¿å•ä¾‹çº¿ç¨‹å®‰å…¨
- **åŸå­æ“ä½œ**ï¼šä½¿ç”¨åŸå­ç±»å‹
- **åŒæ­¥æœºåˆ¶**ï¼šé€‚å½“çš„é”ç­–ç•¥

## 10. æœ€ä½³å®è·µ

### 10.1. é€‰æ‹©æŒ‡å—

1. **å•ä¾‹**ï¼šéœ€è¦å…¨å±€å”¯ä¸€å®ä¾‹æ—¶
2. **å·¥å‚**ï¼šéœ€è¦æ ¹æ®æ¡ä»¶åˆ›å»ºä¸åŒå¯¹è±¡æ—¶
3. **æŠ½è±¡å·¥å‚**ï¼šéœ€è¦åˆ›å»ºç›¸å…³å¯¹è±¡æ—æ—¶
4. **å»ºé€ è€…**ï¼šéœ€è¦åˆ†æ­¥éª¤æ„å»ºå¤æ‚å¯¹è±¡æ—¶
5. **åŸå‹**ï¼šéœ€è¦å¤åˆ¶ç°æœ‰å¯¹è±¡æ—¶

### 10.2. æ³¨æ„äº‹é¡¹

- é¿å…è¿‡åº¦è®¾è®¡
- è€ƒè™‘çº¿ç¨‹å®‰å…¨
- æ³¨æ„å†…å­˜æ³„æ¼
- ä¿æŒæ¥å£ç®€æ´

## 11. æ€»ç»“

åˆ›å»ºå‹æ¨¡å¼ä¸ºå¯¹è±¡åˆ›å»ºæä¾›äº†çµæ´»ã€å¯ç»´æŠ¤çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡åˆç†é€‰æ‹©å’Œç»„åˆè¿™äº›æ¨¡å¼ï¼Œå¯ä»¥æ„å»ºå‡ºé«˜è´¨é‡ã€å¯æ‰©å±•çš„è½¯ä»¶ç³»ç»Ÿã€‚
