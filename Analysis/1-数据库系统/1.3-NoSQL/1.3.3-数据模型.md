# 1.3.3 NoSQLæ•°æ®æ¨¡å‹

## ğŸ“‘ ç›®å½•

- [1.3.3 NoSQLæ•°æ®æ¨¡å‹](#133-nosqlæ•°æ®æ¨¡å‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
    - [1.1. NoSQLæ•°æ®æ¨¡å‹ç‰¹ç‚¹](#11-nosqlæ•°æ®æ¨¡å‹ç‰¹ç‚¹)
    - [1.2. æ•°æ®æ¨¡å‹è®¾è®¡åŸåˆ™](#12-æ•°æ®æ¨¡å‹è®¾è®¡åŸåˆ™)
  - [2. æ•°æ®ç»“æ„è®¾è®¡](#2-æ•°æ®ç»“æ„è®¾è®¡)
    - [2.1. é”®å€¼æ•°æ®ç»“æ„](#21-é”®å€¼æ•°æ®ç»“æ„)
      - [2.1.1. é”®å€¼å¯¹ç»“æ„](#211-é”®å€¼å¯¹ç»“æ„)
      - [2.1.2. å€¼ç±»å‹](#212-å€¼ç±»å‹)
    - [2.2. æ–‡æ¡£æ•°æ®ç»“æ„](#22-æ–‡æ¡£æ•°æ®ç»“æ„)
      - [2.2.1. æ–‡æ¡£ç»“æ„](#221-æ–‡æ¡£ç»“æ„)
      - [2.2.2. åµŒå¥—æ–‡æ¡£](#222-åµŒå¥—æ–‡æ¡£)
    - [2.3. åˆ—æ—æ•°æ®ç»“æ„](#23-åˆ—æ—æ•°æ®ç»“æ„)
      - [2.3.1. åˆ—æ—ç»“æ„](#231-åˆ—æ—ç»“æ„)
      - [2.3.2. åˆ—æ—è®¾è®¡](#232-åˆ—æ—è®¾è®¡)
    - [2.4. å›¾æ•°æ®ç»“æ„](#24-å›¾æ•°æ®ç»“æ„)
      - [2.4.1. èŠ‚ç‚¹ç»“æ„](#241-èŠ‚ç‚¹ç»“æ„)
      - [2.4.2. è¾¹ç»“æ„](#242-è¾¹ç»“æ„)
  - [3. ç´¢å¼•ä¸æŸ¥è¯¢](#3-ç´¢å¼•ä¸æŸ¥è¯¢)
    - [3.1. ä¸»é”®ç´¢å¼•](#31-ä¸»é”®ç´¢å¼•)
      - [3.1.1. ä¸»é”®è®¾è®¡](#311-ä¸»é”®è®¾è®¡)
    - [3.2. äºŒçº§ç´¢å¼•](#32-äºŒçº§ç´¢å¼•)
      - [3.2.1. äºŒçº§ç´¢å¼•è®¾è®¡](#321-äºŒçº§ç´¢å¼•è®¾è®¡)
    - [3.3. å¤åˆç´¢å¼•](#33-å¤åˆç´¢å¼•)
      - [3.3.1. å¤åˆç´¢å¼•è®¾è®¡](#331-å¤åˆç´¢å¼•è®¾è®¡)
    - [3.4. å›¾ç´¢å¼•](#34-å›¾ç´¢å¼•)
      - [3.4.1. å›¾ç´¢å¼•è®¾è®¡](#341-å›¾ç´¢å¼•è®¾è®¡)
  - [4. æ•°æ®æ¨¡å‹è®¾è®¡æ¨¡å¼](#4-æ•°æ®æ¨¡å‹è®¾è®¡æ¨¡å¼)
    - [4.1. åè§„èŒƒåŒ–è®¾è®¡](#41-åè§„èŒƒåŒ–è®¾è®¡)
      - [4.1.1. åè§„èŒƒåŒ–åŸåˆ™](#411-åè§„èŒƒåŒ–åŸåˆ™)
    - [4.2. åµŒå…¥vså¼•ç”¨](#42-åµŒå…¥vså¼•ç”¨)
      - [4.2.1. åµŒå…¥ç­–ç•¥](#421-åµŒå…¥ç­–ç•¥)
      - [4.2.2. å¼•ç”¨ç­–ç•¥](#422-å¼•ç”¨ç­–ç•¥)
    - [4.3. åˆ†ç‰‡é”®è®¾è®¡](#43-åˆ†ç‰‡é”®è®¾è®¡)
      - [4.3.1. åˆ†ç‰‡é”®é€‰æ‹©](#431-åˆ†ç‰‡é”®é€‰æ‹©)
  - [5. å®é™…ç³»ç»Ÿæ•°æ®æ¨¡å‹](#5-å®é™…ç³»ç»Ÿæ•°æ®æ¨¡å‹)
    - [5.1. MongoDBæ•°æ®æ¨¡å‹](#51-mongodbæ•°æ®æ¨¡å‹)
      - [5.1.1. ç”¨æˆ·æ–‡æ¡£æ¨¡å‹](#511-ç”¨æˆ·æ–‡æ¡£æ¨¡å‹)
      - [5.1.2. ç´¢å¼•è®¾è®¡](#512-ç´¢å¼•è®¾è®¡)
    - [5.2. Cassandraæ•°æ®æ¨¡å‹](#52-cassandraæ•°æ®æ¨¡å‹)
      - [5.2.1. è¡¨è®¾è®¡](#521-è¡¨è®¾è®¡)
    - [5.3. Redisæ•°æ®æ¨¡å‹](#53-redisæ•°æ®æ¨¡å‹)
      - [5.3.1. æ•°æ®ç»“æ„é€‰æ‹©](#531-æ•°æ®ç»“æ„é€‰æ‹©)
    - [5.4. Neo4jæ•°æ®æ¨¡å‹](#54-neo4jæ•°æ®æ¨¡å‹)
      - [5.4.1. å›¾æ¨¡å‹è®¾è®¡](#541-å›¾æ¨¡å‹è®¾è®¡)
  - [6. æ•°æ®æ¨¡å‹ä¼˜åŒ–](#6-æ•°æ®æ¨¡å‹ä¼˜åŒ–)
    - [6.1. æŸ¥è¯¢ä¼˜åŒ–](#61-æŸ¥è¯¢ä¼˜åŒ–)
      - [6.1.1. æŸ¥è¯¢æ¨¡å¼åˆ†æ](#611-æŸ¥è¯¢æ¨¡å¼åˆ†æ)
    - [6.2. å­˜å‚¨ä¼˜åŒ–](#62-å­˜å‚¨ä¼˜åŒ–)
      - [6.2.1. å­˜å‚¨ä¼˜åŒ–ç­–ç•¥](#621-å­˜å‚¨ä¼˜åŒ–ç­–ç•¥)
    - [6.3. æ€§èƒ½ä¼˜åŒ–](#63-æ€§èƒ½ä¼˜åŒ–)
      - [6.3.1. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#631-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
  - [7. å®é™…åº”ç”¨æ¡ˆä¾‹](#7-å®é™…åº”ç”¨æ¡ˆä¾‹)
    - [7.1. äº’è”ç½‘è¡Œä¸šï¼šMongoDBå¤åˆç´¢å¼•](#71-äº’è”ç½‘è¡Œä¸šmongodbå¤åˆç´¢å¼•)
    - [7.2. é‡‘èè¡Œä¸šï¼šHBaseåˆ—æ—è®¾è®¡](#72-é‡‘èè¡Œä¸šhbaseåˆ—æ—è®¾è®¡)
  - [8. å½¢å¼åŒ–å®šä¹‰](#8-å½¢å¼åŒ–å®šä¹‰)
    - [8.1. æ•°æ®æ¨¡å‹å½¢å¼åŒ–](#81-æ•°æ®æ¨¡å‹å½¢å¼åŒ–)
    - [8.2. ç´¢å¼•å½¢å¼åŒ–](#82-ç´¢å¼•å½¢å¼åŒ–)
  - [9. å¤šè¡¨å¾](#9-å¤šè¡¨å¾)
  - [10. æ€»ç»“ä¸å±•æœ›](#10-æ€»ç»“ä¸å±•æœ›)
    - [10.1. æ€»ç»“](#101-æ€»ç»“)
    - [10.2. å‘å±•è¶‹åŠ¿](#102-å‘å±•è¶‹åŠ¿)

---

## 1. æ¦‚è¿°

### 1.1. NoSQLæ•°æ®æ¨¡å‹ç‰¹ç‚¹

**NoSQLæ•°æ®æ¨¡å‹ç‰¹ç‚¹**ï¼š

1. **çµæ´»æ€§**ï¼šæ”¯æŒåŠ¨æ€æ¨¡å¼ï¼Œæ— éœ€é¢„å®šä¹‰schema
2. **å¯æ‰©å±•æ€§**ï¼šæ˜“äºæ°´å¹³æ‰©å±•
3. **é«˜æ€§èƒ½**ï¼šé’ˆå¯¹ç‰¹å®šåœºæ™¯ä¼˜åŒ–
4. **å¤šæ ·æ€§**ï¼šæ”¯æŒå¤šç§æ•°æ®æ¨¡å‹

### 1.2. æ•°æ®æ¨¡å‹è®¾è®¡åŸåˆ™

**NoSQLæ•°æ®æ¨¡å‹è®¾è®¡åŸåˆ™**ï¼š

1. **æŸ¥è¯¢é©±åŠ¨**ï¼šæ ¹æ®æŸ¥è¯¢æ¨¡å¼è®¾è®¡æ•°æ®æ¨¡å‹
2. **åè§„èŒƒåŒ–**ï¼šå…è®¸æ•°æ®å†—ä½™ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½
3. **åµŒå…¥ä¼˜å…ˆ**ï¼šä¼˜å…ˆè€ƒè™‘åµŒå…¥è€Œéå¼•ç”¨
4. **åˆ†ç‰‡å‹å¥½**ï¼šè€ƒè™‘åˆ†ç‰‡é”®è®¾è®¡

---

## 2. æ•°æ®ç»“æ„è®¾è®¡

### 2.1. é”®å€¼æ•°æ®ç»“æ„

#### 2.1.1. é”®å€¼å¯¹ç»“æ„

**é”®å€¼å¯¹ç»“æ„**ï¼š

```python
{
    "key": "user:123",
    "value": {
        "name": "Alice",
        "age": 30,
        "email": "alice@example.com"
    }
}
```

**é”®è®¾è®¡åŸåˆ™**ï¼š

1. **å”¯ä¸€æ€§**ï¼šé”®å¿…é¡»å”¯ä¸€
2. **å¯è¯»æ€§**ï¼šé”®åº”è¯¥æœ‰æ„ä¹‰
3. **å‘½åç©ºé—´**ï¼šä½¿ç”¨å‘½åç©ºé—´é¿å…å†²çª

**é”®å‘½åè§„èŒƒ**ï¼š

```python
# ç”¨æˆ·æ•°æ®
"user:123"
"user:123:profile"
"user:123:orders"

# ä¼šè¯æ•°æ®
"session:abc123"

# è®¡æ•°å™¨
"counter:pageviews"
```

#### 2.1.2. å€¼ç±»å‹

**å€¼ç±»å‹**ï¼š

1. **å­—ç¬¦ä¸²**ï¼šç®€å•å­—ç¬¦ä¸²å€¼
2. **å¯¹è±¡**ï¼šJSONå¯¹è±¡
3. **æ•°ç»„**ï¼šJSONæ•°ç»„
4. **äºŒè¿›åˆ¶**ï¼šäºŒè¿›åˆ¶æ•°æ®

**Rediså€¼ç±»å‹**ï¼š

```bash
# å­—ç¬¦ä¸²
SET user:1 "Alice"

# å“ˆå¸Œ
HSET user:1 name "Alice" age 30

# åˆ—è¡¨
LPUSH orders:1 "order1" "order2"

# é›†åˆ
SADD tags:1 "python" "database"

# æœ‰åºé›†åˆ
ZADD leaderboard 1000 "user:1"
```

### 2.2. æ–‡æ¡£æ•°æ®ç»“æ„

#### 2.2.1. æ–‡æ¡£ç»“æ„

**æ–‡æ¡£ç»“æ„**ï¼š

```json
{
  "_id": ObjectId("..."),
  "name": "Alice",
  "age": 30,
  "address": {
    "city": "Beijing",
    "country": "China",
    "zip": "100000"
  },
  "orders": [
    {
      "id": 101,
      "amount": 200,
      "date": ISODate("2024-01-01")
    },
    {
      "id": 102,
      "amount": 150,
      "date": ISODate("2024-01-02")
    }
  ],
  "tags": ["vip", "premium"],
  "created_at": ISODate("2024-01-01T00:00:00Z")
}
```

#### 2.2.2. åµŒå¥—æ–‡æ¡£

**åµŒå¥—æ–‡æ¡£è®¾è®¡**ï¼š

```javascript
// ç”¨æˆ·æ–‡æ¡£ï¼ˆåµŒå…¥è®¢å•ï¼‰
{
  "_id": 1,
  "name": "Alice",
  "orders": [
    { "id": 101, "amount": 200 },
    { "id": 102, "amount": 150 }
  ]
}

// ç”¨æˆ·æ–‡æ¡£ï¼ˆå¼•ç”¨è®¢å•ï¼‰
{
  "_id": 1,
  "name": "Alice",
  "order_ids": [101, 102]
}
```

### 2.3. åˆ—æ—æ•°æ®ç»“æ„

#### 2.3.1. åˆ—æ—ç»“æ„

**åˆ—æ—ç»“æ„**ï¼š

```python
# HBaseåˆ—æ—ç»“æ„
{
    "row_key": "user:123",
    "column_families": {
        "info": {
            "name": "Alice",
            "age": "30",
            "email": "alice@example.com"
        },
        "orders": {
            "order:101": "200",
            "order:102": "150"
        }
    }
}
```

#### 2.3.2. åˆ—æ—è®¾è®¡

**åˆ—æ—è®¾è®¡åŸåˆ™**ï¼š

1. **è®¿é—®æ¨¡å¼**ï¼šæ ¹æ®è®¿é—®æ¨¡å¼è®¾è®¡åˆ—æ—
2. **åˆ—æ•°é™åˆ¶**ï¼šé¿å…åˆ—æ—è¿‡å¤š
3. **ç‰ˆæœ¬æ§åˆ¶**ï¼šè€ƒè™‘ç‰ˆæœ¬æ§åˆ¶éœ€æ±‚

**Cassandraè¡¨è®¾è®¡**ï¼š

```cql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    user_id UUID PRIMARY KEY,
    name TEXT,
    email TEXT,
    age INT
);

-- è®¢å•è¡¨ï¼ˆåˆ†åŒºé”®ï¼šuser_idï¼Œèšç±»é”®ï¼šorder_dateï¼‰
CREATE TABLE orders (
    user_id UUID,
    order_date TIMESTAMP,
    order_id UUID,
    amount DECIMAL,
    PRIMARY KEY (user_id, order_date, order_id)
) WITH CLUSTERING ORDER BY (order_date DESC);
```

### 2.4. å›¾æ•°æ®ç»“æ„

#### 2.4.1. èŠ‚ç‚¹ç»“æ„

**èŠ‚ç‚¹ç»“æ„**ï¼š

```cypher
// ç”¨æˆ·èŠ‚ç‚¹
(:User {
    id: 123,
    name: "Alice",
    age: 30,
    email: "alice@example.com"
})

// äº§å“èŠ‚ç‚¹
(:Product {
    id: 456,
    name: "Laptop",
    price: 999.99
})
```

#### 2.4.2. è¾¹ç»“æ„

**è¾¹ç»“æ„**ï¼š

```cypher
// ç”¨æˆ·-è®¢å•å…³ç³»
(:User)-[:PURCHASED {
    date: "2024-01-01",
    amount: 999.99
}]->(:Order)

// ç”¨æˆ·-ç”¨æˆ·å…³ç³»
(:User)-[:FOLLOWS {
    since: "2024-01-01"
}]->(:User)
```

---

## 3. ç´¢å¼•ä¸æŸ¥è¯¢

### 3.1. ä¸»é”®ç´¢å¼•

#### 3.1.1. ä¸»é”®è®¾è®¡

**ä¸»é”®è®¾è®¡åŸåˆ™**ï¼š

1. **å”¯ä¸€æ€§**ï¼šä¿è¯å”¯ä¸€æ€§
2. **ä¸å¯å˜**ï¼šä¸»é”®ä¸å¯ä¿®æ”¹
3. **æŸ¥è¯¢å‹å¥½**ï¼šæ”¯æŒå¿«é€ŸæŸ¥è¯¢

**MongoDBä¸»é”®**ï¼š

```javascript
// è‡ªåŠ¨ç”ŸæˆObjectId
db.users.insert({
  name: "Alice"
  // _idè‡ªåŠ¨ç”Ÿæˆ
})

// è‡ªå®šä¹‰ä¸»é”®
db.users.insert({
  _id: 123,
  name: "Alice"
})
```

### 3.2. äºŒçº§ç´¢å¼•

#### 3.2.1. äºŒçº§ç´¢å¼•è®¾è®¡

**äºŒçº§ç´¢å¼•**ï¼šéä¸»é”®å­—æ®µçš„ç´¢å¼•ã€‚

**MongoDBäºŒçº§ç´¢å¼•**ï¼š

```javascript
// åˆ›å»ºå•å­—æ®µç´¢å¼•
db.users.createIndex({ email: 1 })

// åˆ›å»ºå”¯ä¸€ç´¢å¼•
db.users.createIndex({ email: 1 }, { unique: true })

// åˆ›å»ºç¨€ç–ç´¢å¼•
db.users.createIndex({ phone: 1 }, { sparse: true })
```

**CassandraäºŒçº§ç´¢å¼•**ï¼š

```cql
-- åˆ›å»ºäºŒçº§ç´¢å¼•
CREATE INDEX idx_email ON users(email);

-- ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢
SELECT * FROM users WHERE email = 'alice@example.com';
```

### 3.3. å¤åˆç´¢å¼•

#### 3.3.1. å¤åˆç´¢å¼•è®¾è®¡

**å¤åˆç´¢å¼•**ï¼šå¤šä¸ªå­—æ®µç»„æˆçš„ç´¢å¼•ã€‚

**MongoDBå¤åˆç´¢å¼•**ï¼š

```javascript
// åˆ›å»ºå¤åˆç´¢å¼•
db.orders.createIndex({ user_id: 1, order_date: -1 })

// å¯ä»¥ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢
db.orders.find({ user_id: 123 })  // ä½¿ç”¨ç´¢å¼•
db.orders.find({ user_id: 123, order_date: { $gte: ISODate("2024-01-01") } })  // ä½¿ç”¨ç´¢å¼•

// ä¸èƒ½ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢
db.orders.find({ order_date: { $gte: ISODate("2024-01-01") } })  // ä¸ä½¿ç”¨ç´¢å¼•
```

**ç´¢å¼•é€‰æ‹©åŸåˆ™**ï¼š

1. **æœ€å·¦å‰ç¼€**ï¼šéµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™
2. **å­—æ®µé¡ºåº**ï¼šè€ƒè™‘å­—æ®µé€‰æ‹©æ€§å’ŒæŸ¥è¯¢é¢‘ç‡
3. **è¦†ç›–æŸ¥è¯¢**ï¼šå°½é‡è¦†ç›–å¸¸ç”¨æŸ¥è¯¢

### 3.4. å›¾ç´¢å¼•

#### 3.4.1. å›¾ç´¢å¼•è®¾è®¡

**Neo4jç´¢å¼•**ï¼š

```cypher
// åˆ›å»ºèŠ‚ç‚¹ç´¢å¼•
CREATE INDEX ON :User(id)
CREATE INDEX ON :User(email)

// åˆ›å»ºå¤åˆç´¢å¼•
CREATE INDEX ON :User(id, name)

// ä½¿ç”¨ç´¢å¼•
MATCH (u:User {id: 123})
RETURN u
```

---

## 4. æ•°æ®æ¨¡å‹è®¾è®¡æ¨¡å¼

### 4.1. åè§„èŒƒåŒ–è®¾è®¡

#### 4.1.1. åè§„èŒƒåŒ–åŸåˆ™

**åè§„èŒƒåŒ–**ï¼šå…è®¸æ•°æ®å†—ä½™ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚

**åè§„èŒƒåŒ–ç¤ºä¾‹**ï¼š

```javascript
// è§„èŒƒåŒ–è®¾è®¡ï¼ˆéœ€è¦JOINï¼‰
// usersé›†åˆ
{ _id: 1, name: "Alice" }

// ordersé›†åˆ
{ _id: 101, user_id: 1, amount: 200 }

// åè§„èŒƒåŒ–è®¾è®¡ï¼ˆåµŒå…¥ç”¨æˆ·ä¿¡æ¯ï¼‰
// ordersé›†åˆ
{
  _id: 101,
  user_id: 1,
  user_name: "Alice",  // å†—ä½™å­—æ®µ
  amount: 200
}
```

### 4.2. åµŒå…¥vså¼•ç”¨

#### 4.2.1. åµŒå…¥ç­–ç•¥

**åµŒå…¥é€‚ç”¨åœºæ™¯**ï¼š

1. **ä¸€å¯¹ä¸€å…³ç³»**ï¼šç”¨æˆ·-é…ç½®æ–‡ä»¶
2. **ä¸€å¯¹å°‘å…³ç³»**ï¼šç”¨æˆ·-å°‘é‡è®¢å•
3. **é¢‘ç¹è®¿é—®**ï¼šç»å¸¸ä¸€èµ·è®¿é—®çš„æ•°æ®

**åµŒå…¥ç¤ºä¾‹**ï¼š

```javascript
// åµŒå…¥è®¢å•åˆ°ç”¨æˆ·æ–‡æ¡£
{
  _id: 1,
  name: "Alice",
  orders: [
    { id: 101, amount: 200 },
    { id: 102, amount: 150 }
  ]
}
```

#### 4.2.2. å¼•ç”¨ç­–ç•¥

**å¼•ç”¨é€‚ç”¨åœºæ™¯**ï¼š

1. **ä¸€å¯¹å¤šå…³ç³»**ï¼šç”¨æˆ·-å¤§é‡è®¢å•
2. **å¤šå¯¹å¤šå…³ç³»**ï¼šç”¨æˆ·-äº§å“
3. **ç‹¬ç«‹è®¿é—®**ï¼šç‹¬ç«‹è®¿é—®çš„æ•°æ®

**å¼•ç”¨ç¤ºä¾‹**ï¼š

```javascript
// ç”¨æˆ·æ–‡æ¡£
{
  _id: 1,
  name: "Alice",
  order_ids: [101, 102, 103, ...]  // å¼•ç”¨è®¢å•ID
}

// è®¢å•æ–‡æ¡£
{
  _id: 101,
  user_id: 1,
  amount: 200
}
```

### 4.3. åˆ†ç‰‡é”®è®¾è®¡

#### 4.3.1. åˆ†ç‰‡é”®é€‰æ‹©

**åˆ†ç‰‡é”®é€‰æ‹©åŸåˆ™**ï¼š

1. **å‡åŒ€åˆ†å¸ƒ**ï¼šæ•°æ®å‡åŒ€åˆ†å¸ƒåˆ°å„åˆ†ç‰‡
2. **æŸ¥è¯¢æ¨¡å¼åŒ¹é…**ï¼šåŒ¹é…ä¸»è¦æŸ¥è¯¢æ¨¡å¼
3. **é¿å…çƒ­ç‚¹**ï¼šé¿å…å•åˆ†ç‰‡æˆä¸ºçƒ­ç‚¹

**MongoDBåˆ†ç‰‡é”®**ï¼š

```javascript
// åˆ†ç‰‡é”®ï¼šuser_id
sh.shardCollection("mydb.orders", { user_id: 1 })

// å¤åˆåˆ†ç‰‡é”®ï¼šuser_id + order_date
sh.shardCollection("mydb.orders", { user_id: 1, order_date: 1 })
```

---

## 5. å®é™…ç³»ç»Ÿæ•°æ®æ¨¡å‹

### 5.1. MongoDBæ•°æ®æ¨¡å‹

#### 5.1.1. ç”¨æˆ·æ–‡æ¡£æ¨¡å‹

**ç”¨æˆ·æ–‡æ¡£**ï¼š

```javascript
{
  _id: ObjectId("..."),
  username: "alice",
  email: "alice@example.com",
  profile: {
    firstName: "Alice",
    lastName: "Smith",
    age: 30,
    address: {
      city: "Beijing",
      country: "China"
    }
  },
  orders: [
    {
      orderId: 101,
      amount: 200,
      items: [
        { productId: 1, quantity: 2, price: 100 }
      ],
      date: ISODate("2024-01-01")
    }
  ],
  tags: ["vip", "premium"],
  createdAt: ISODate("2024-01-01T00:00:00Z"),
  updatedAt: ISODate("2024-01-01T00:00:00Z")
}
```

#### 5.1.2. ç´¢å¼•è®¾è®¡

**ç´¢å¼•è®¾è®¡**ï¼š

```javascript
// ä¸»é”®ç´¢å¼•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
// _id: 1

// å”¯ä¸€ç´¢å¼•
db.users.createIndex({ email: 1 }, { unique: true })

// å¤åˆç´¢å¼•
db.users.createIndex({ username: 1, createdAt: -1 })

// æ–‡æœ¬ç´¢å¼•
db.users.createIndex({ username: "text", email: "text" })
```

### 5.2. Cassandraæ•°æ®æ¨¡å‹

#### 5.2.1. è¡¨è®¾è®¡

**ç”¨æˆ·è¡¨**ï¼š

```cql
CREATE TABLE users (
    user_id UUID PRIMARY KEY,
    username TEXT,
    email TEXT,
    age INT,
    created_at TIMESTAMP
);
```

**è®¢å•è¡¨**ï¼š

```cql
CREATE TABLE orders (
    user_id UUID,
    order_date TIMESTAMP,
    order_id UUID,
    amount DECIMAL,
    items LIST<FROZEN<MAP<TEXT, TEXT>>>,
    PRIMARY KEY (user_id, order_date, order_id)
) WITH CLUSTERING ORDER BY (order_date DESC);
```

### 5.3. Redisæ•°æ®æ¨¡å‹

#### 5.3.1. æ•°æ®ç»“æ„é€‰æ‹©

**æ•°æ®ç»“æ„é€‰æ‹©**ï¼š

```bash
# ç”¨æˆ·ä¿¡æ¯ï¼ˆHashï¼‰
HSET user:1 name "Alice" age 30 email "alice@example.com"

# ç”¨æˆ·è®¢å•åˆ—è¡¨ï¼ˆListï¼‰
LPUSH orders:1 "order:101" "order:102"

# ç”¨æˆ·æ ‡ç­¾ï¼ˆSetï¼‰
SADD tags:1 "vip" "premium"

# ç”¨æˆ·ç§¯åˆ†ï¼ˆSorted Setï¼‰
ZADD leaderboard 1000 "user:1"
```

### 5.4. Neo4jæ•°æ®æ¨¡å‹

#### 5.4.1. å›¾æ¨¡å‹è®¾è®¡

**ç”¨æˆ·-è®¢å•å›¾æ¨¡å‹**ï¼š

```cypher
// åˆ›å»ºç”¨æˆ·èŠ‚ç‚¹
CREATE (u:User {
    id: 123,
    name: "Alice",
    email: "alice@example.com"
})

// åˆ›å»ºè®¢å•èŠ‚ç‚¹
CREATE (o:Order {
    id: 101,
    amount: 200,
    date: "2024-01-01"
})

// åˆ›å»ºå…³ç³»
MATCH (u:User {id: 123}), (o:Order {id: 101})
CREATE (u)-[:PURCHASED {
    date: "2024-01-01"
}]->(o)
```

---

## 6. æ•°æ®æ¨¡å‹ä¼˜åŒ–

### 6.1. æŸ¥è¯¢ä¼˜åŒ–

#### 6.1.1. æŸ¥è¯¢æ¨¡å¼åˆ†æ

**æŸ¥è¯¢æ¨¡å¼åˆ†æ**ï¼š

```javascript
// åˆ†ææŸ¥è¯¢æ¨¡å¼
db.orders.find({ user_id: 123 }).explain("executionStats")

// ä¼˜åŒ–æŸ¥è¯¢
// 1. ä½¿ç”¨ç´¢å¼•
db.orders.createIndex({ user_id: 1, order_date: -1 })

// 2. ä½¿ç”¨è¦†ç›–ç´¢å¼•
db.orders.find(
  { user_id: 123 },
  { user_id: 1, order_date: 1, amount: 1, _id: 0 }
)
```

### 6.2. å­˜å‚¨ä¼˜åŒ–

#### 6.2.1. å­˜å‚¨ä¼˜åŒ–ç­–ç•¥

**å­˜å‚¨ä¼˜åŒ–**ï¼š

1. **å­—æ®µåå‹ç¼©**ï¼šä½¿ç”¨çŸ­å­—æ®µå
2. **æ•°æ®ç±»å‹ä¼˜åŒ–**ï¼šé€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹
3. **æ–‡æ¡£å¤§å°æ§åˆ¶**ï¼šæ§åˆ¶æ–‡æ¡£å¤§å°

**å­—æ®µåä¼˜åŒ–**ï¼š

```javascript
// ä¼˜åŒ–å‰
{
  "user_identification_number": 123,
  "user_email_address": "alice@example.com"
}

// ä¼˜åŒ–å
{
  "uid": 123,
  "email": "alice@example.com"
}
```

### 6.3. æ€§èƒ½ä¼˜åŒ–

#### 6.3.1. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

**æ€§èƒ½ä¼˜åŒ–**ï¼š

1. **ç´¢å¼•ä¼˜åŒ–**ï¼šåˆ›å»ºåˆé€‚çš„ç´¢å¼•
2. **æŸ¥è¯¢ä¼˜åŒ–**ï¼šä¼˜åŒ–æŸ¥è¯¢è¯­å¥
3. **åˆ†ç‰‡ä¼˜åŒ–**ï¼šä¼˜åŒ–åˆ†ç‰‡é”®

---

## 7. å®é™…åº”ç”¨æ¡ˆä¾‹

### 7.1. äº’è”ç½‘è¡Œä¸šï¼šMongoDBå¤åˆç´¢å¼•

**åœºæ™¯**ï¼š

- ç”µå•†è®¢å•ç³»ç»Ÿ
- é«˜å¹¶å‘æŸ¥è¯¢
- å¤æ‚æŸ¥è¯¢æ¡ä»¶

**æ•°æ®æ¨¡å‹**ï¼š

```javascript
// è®¢å•æ–‡æ¡£
{
  _id: ObjectId("..."),
  user_id: 123,
  order_date: ISODate("2024-01-01"),
  status: "paid",
  amount: 200,
  items: [...]
}

// å¤åˆç´¢å¼•
db.orders.createIndex({ user_id: 1, order_date: -1, status: 1 })
```

### 7.2. é‡‘èè¡Œä¸šï¼šHBaseåˆ—æ—è®¾è®¡

**åœºæ™¯**ï¼š

- äº¤æ˜“è®°å½•å­˜å‚¨
- æ—¶é—´åºåˆ—æ•°æ®
- é«˜ååé‡å†™å…¥

**æ•°æ®æ¨¡å‹**ï¼š

```python
# äº¤æ˜“è®°å½•
{
    "row_key": "account:123:20240101",
    "column_families": {
        "transactions": {
            "txn:001": "100.00",
            "txn:002": "200.00"
        },
        "metadata": {
            "balance": "1000.00",
            "last_update": "2024-01-01T12:00:00Z"
        }
    }
}
```

---

## 8. å½¢å¼åŒ–å®šä¹‰

### 8.1. æ•°æ®æ¨¡å‹å½¢å¼åŒ–

**æ•°æ®æ¨¡å‹å®šä¹‰**ï¼š

è®¾æ•°æ®æ¨¡å‹ $M = (S, I, Q)$ï¼Œå…¶ä¸­ï¼š

- $S$ï¼šæ•°æ®ç»“æ„ï¼ˆStructureï¼‰
- $I$ï¼šç´¢å¼•é›†åˆï¼ˆIndex Setï¼‰
- $Q$ï¼šæŸ¥è¯¢è¯­è¨€ï¼ˆQuery Languageï¼‰

### 8.2. ç´¢å¼•å½¢å¼åŒ–

**ç´¢å¼•å®šä¹‰**ï¼š

è®¾ç´¢å¼• $I = \{(k, loc) | k \in K, loc \in L\}$ï¼Œå…¶ä¸­ï¼š

- $K$ï¼šé”®é›†åˆ
- $L$ï¼šä½ç½®é›†åˆ

---

## 9. å¤šè¡¨å¾

æœ¬ä¸»é¢˜æ”¯æŒå¤šç§è¡¨å¾æ–¹å¼ï¼š

1. **ç¬¦å·è¡¨å¾**ï¼šå½¢å¼åŒ–å®šä¹‰ã€æ•°å­¦å…¬å¼
2. **å›¾ç»“æ„**ï¼šæ•°æ®æ¨¡å‹å›¾ã€ERå›¾
3. **ä»£ç å®ç°**ï¼šæ•°æ®æ¨¡å‹ä»£ç 
4. **è‡ªç„¶è¯­è¨€**ï¼šæ¦‚å¿µå®šä¹‰ã€è®¾è®¡åŸåˆ™
5. **å¯è§†åŒ–**ï¼šæ•°æ®å¯è§†åŒ–ã€æŸ¥è¯¢å¯è§†åŒ–

---

## 10. æ€»ç»“ä¸å±•æœ›

### 10.1. æ€»ç»“

NoSQLæ•°æ®æ¨¡å‹çš„æ ¸å¿ƒè¦ç‚¹ï¼š

1. **æ•°æ®ç»“æ„**ï¼šé”®å€¼ã€æ–‡æ¡£ã€åˆ—æ—ã€å›¾æ•°æ®ç»“æ„
2. **ç´¢å¼•è®¾è®¡**ï¼šä¸»é”®ã€äºŒçº§ã€å¤åˆã€å›¾ç´¢å¼•
3. **è®¾è®¡æ¨¡å¼**ï¼šåè§„èŒƒåŒ–ã€åµŒå…¥vså¼•ç”¨ã€åˆ†ç‰‡é”®è®¾è®¡
4. **ä¼˜åŒ–ç­–ç•¥**ï¼šæŸ¥è¯¢ã€å­˜å‚¨ã€æ€§èƒ½ä¼˜åŒ–

### 10.2. å‘å±•è¶‹åŠ¿

**æœªæ¥å‘å±•æ–¹å‘**ï¼š

1. **å¤šæ¨¡å‹æ”¯æŒ**ï¼šæ”¯æŒå¤šç§æ•°æ®æ¨¡å‹
2. **æ™ºèƒ½ä¼˜åŒ–**ï¼šAIé©±åŠ¨çš„æ•°æ®æ¨¡å‹ä¼˜åŒ–
3. **è‡ªåŠ¨ç´¢å¼•**ï¼šè‡ªåŠ¨ç´¢å¼•é€‰æ‹©å’Œä¼˜åŒ–

---

**å‚è€ƒæ–‡çŒ®**ï¼š

1. MongoDB Data Modeling: <https://docs.mongodb.com/manual/core/data-modeling-introduction/>
2. Cassandra Data Modeling: <https://cassandra.apache.org/doc/latest/cassandra/data_modeling/>

---

[è¿”å›NoSQLå¯¼èˆª](README.md)
