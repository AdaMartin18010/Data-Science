---
title: 故障切换与订阅重建
slug: 故障切换与订阅重建
tags: []
pg_version: 16
status: draft
last_review: 2025-09-12
owner: TBD
---

# Runbook：故障切换与订阅重建（PostgreSQL 17.x 占位）

## 场景

主库故障，启用从库并平滑恢复逻辑订阅。

## 步骤（示意）

1. 切主：Promote 只读副本；确认复制延迟
2. 更新连接：应用与订阅指向新主
3. 刷新：`ALTER SUBSCRIPTION ... REFRESH PUBLICATION`，校验复制槽
4. 验证：延迟、冲突、缺失表与权限

## 检查清单

- 订阅状态、复制槽状态、冲突与重放、应用可用性
- 复制延迟与缺失对象核对
- 应用连接池刷新与错误率

## 演练频率（建议）

- 月度：只读副本 Promote 与回切
- 双月：订阅刷新/重建演练
