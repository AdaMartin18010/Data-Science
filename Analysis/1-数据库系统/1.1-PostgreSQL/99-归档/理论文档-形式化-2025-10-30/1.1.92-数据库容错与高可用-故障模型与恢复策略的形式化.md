# 1.1.92 数据库容错与高可用：故障模型与恢复策略的形式化

## 1. 故障模型

- 节点故障、网络分区、磁盘损坏、进程崩溃；
- 故障检测：心跳/探针、超时与仲裁；
- 一致性级别：同步/异步复制、半同步变体。

## 2. 复制与仲裁

- 流复制：同步副本保障 RPO=0；异步副本提升吞吐；
- 仲裁/选主：外部协调（etcd/Consul/Patroni）；
- 日志位点：`primary_slot_name`、`lsn` 追赶。

## 3. 故障切换策略

- 自动：检测→隔离→提升→重加副本；
- 手动：计划维护/演练；
- 脑裂防护：仲裁多数、fencing。

## 4. 恢复与一致性

- WAL 重放与一致性检查；
- 同步复制下的确认规则；
- 跨区域：延迟副本与只读路由。

## 5. 指标与演练

- RTO/RPO、可用性达成率、切换时长；
- 定期演练与回顾；
- 观测：复制延迟、冲突/回放错误。

## 6. 交叉引用

- `04-部署运维/04.05-备份与恢复.md`
- `1.1.57-ARIES日志恢复-正确性与不变式.md`
