# 1.1.55 两阶段提交：可恢复性与阻塞特性证明（纯形式化）

## 目录

1. 模型与角色
2. 可恢复性
3. 阻塞性与故障

## 1. 模型

- 协调者 C、参与者 P_i；消息：VOTE-REQ、VOTE、COMMIT/ABORT、ACK；

## 2. 可恢复性

- 定理 2.1：若参与者在投赞成票后记录预提交日志并遵循协调者决议，则崩溃恢复后决议一致（不分裂）。
  证明纲要：基于WAL与决议持久化，参与者重启后依据日志恢复相同状态。□

## 3. 阻塞性

- 定理 3.1：在协调者崩溃且网络分区的情况下，2PC 可能阻塞（参与者等待决议）。
- 命题 3.2：引入超时/仲裁可降低阻塞但改变一致性假设（超出2PC基本模型）。
