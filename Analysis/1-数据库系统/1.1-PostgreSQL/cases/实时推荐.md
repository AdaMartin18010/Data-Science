# 案例：实时推荐（占位）

## 架构

- 流式 ETL（Kafka/CDC）→ PostgreSQL → 物化视图/增量聚合

## 关键点

- 去重与窗口聚合、热点写入、物化视图刷新策略

## 验证

- 延迟、吞吐、资源占用、推荐准确度近似指标

## 最小可复现（占位）

```sql
CREATE TABLE events(user_id bigint, item_id bigint, ts timestamptz, score numeric);
CREATE MATERIALIZED VIEW mv_topk AS
SELECT item_id, count(*) AS cnt
FROM events WHERE ts > now() - interval '5 minutes'
GROUP BY item_id ORDER BY cnt DESC LIMIT 100;
-- 刷新策略：CONCURRENTLY + 定时任务（示意）
```
