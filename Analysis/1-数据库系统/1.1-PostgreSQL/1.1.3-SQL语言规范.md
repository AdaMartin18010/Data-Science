# SQL语言规范

## 1. 定义

**中文**: SQL是用于管理关系数据库的标准语言，支持数据定义、操作、查询和控制功能。

**English**: SQL is a standard language for managing relational databases, supporting data definition, manipulation, query, and control functions.

## 2. 形式化定义

```latex
\newcommand{\sql}{\mathcal{SQL}}
\sql = \{DDL, DML, DQL, DCL\}
```

## 3. 核心属性

- **声明性**: 描述要做什么，而不是如何做
- **标准化**: 符合ANSI/ISO SQL标准
- **完整性**: 支持ACID事务特性

## 4. 理论基础

```latex
\begin{theorem}[SQL完备性]
SQL语言包含：
1. 数据定义语句 (CREATE, ALTER, DROP)
2. 数据操作语句 (INSERT, UPDATE, DELETE)
3. 数据查询语句 (SELECT)
4. 数据控制语句 (GRANT, REVOKE)
\end{theorem}
```

## 5. 算法实现

### 5.1 数据定义

```sql
CREATE TABLE employees (
    emp_id INTEGER PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    dept_id INTEGER REFERENCES departments(dept_id),
    salary DECIMAL(10,2) CHECK (salary > 0)
);
```

### 5.2 数据操作

```sql
-- 插入
INSERT INTO employees VALUES (1001, '张三', 1, 50000);

-- 更新
UPDATE employees SET salary = salary * 1.1 WHERE dept_id = 1;

-- 删除
DELETE FROM employees WHERE hire_date < '2020-01-01';
```

### 5.3 数据查询

```sql
-- 基本查询
SELECT emp_id, name, salary FROM employees WHERE salary > 50000;

-- 连接查询
SELECT e.name, d.dept_name FROM employees e 
JOIN departments d ON e.dept_id = d.dept_id;

-- 聚合查询
SELECT dept_id, COUNT(*), AVG(salary) 
FROM employees GROUP BY dept_id;
```

## 6. 应用实例

```sql
-- 企业管理系统
CREATE TABLE departments (dept_id INTEGER PRIMARY KEY, dept_name VARCHAR(50));
CREATE TABLE employees (emp_id INTEGER PRIMARY KEY, name VARCHAR(50), dept_id INTEGER);

-- 复杂查询
SELECT d.dept_name, COUNT(*), AVG(e.salary)
FROM departments d JOIN employees e ON d.dept_id = e.dept_id
GROUP BY d.dept_id, d.dept_name;
```

## 7. 性能分析

- **简单查询**: O(n)
- **连接查询**: O(n×m)
- **聚合查询**: O(n log n)

## 8. 相关概念

- **上位概念**: 查询语言、关系代数
- **下位概念**: DDL、DML、DQL、DCL
- **平行概念**: NoSQL查询语言、图查询语言

## 9. 参考文献

1. Melton, J., & Simon, A. R. (2002). SQL:1999 understanding relational language components.
2. PostgreSQL Global Development Group. (2024). PostgreSQL 16.2 Documentation.

## 10. Wikidata对齐

- **ID**: Q193321 (SQL)
- **属性**: query language, database language
- **链接**: <https://en.wikipedia.org/wiki/SQL>
