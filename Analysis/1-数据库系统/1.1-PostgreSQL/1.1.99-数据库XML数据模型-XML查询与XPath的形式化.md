# 1.1.99-数据库XML数据模型-XML查询与XPath的形式化

## 摘要

- 目标：刻画XML树模型与XPath查询的形式语义，并给出PostgreSQL中xml/xmltable最小实践。

## 问题定义（形式化）

- XML 以有序带标记树 T=(V,E,label,order) 表示；XPath 表达式 e 的语义为从上下文节点集到目标节点集的映射 ⟦e⟧: P(V)→P(V)。

## 最小示例（可运行）

```sql
-- 示例XML
WITH x(data) AS (
  VALUES ('<orders><order id="1" amount="100"/><order id="2" amount="200"/></orders>'::xml)
)
SELECT *
FROM x, XMLTABLE('/orders/order'
  PASSING x.data
  COLUMNS id int PATH '@id', amount numeric PATH '@amount') AS t;
```

## 实务要点

- 存储：小规模建议存xml列；大规模或频繁查询可做关系化拆分。
- 索引：利用表达式索引缓存关键XPath结果或使用生成列。
- 校验：结合XML Schema/XPath函数做模式校验与约束。

## 交叉引用

- `1.1.3-数据模型.md`
- `02-查询处理/02.06-半结构化数据处理.md`
- `1.1.98-数据库JSON数据模型-JSON查询与模式验证的形式化.md`
