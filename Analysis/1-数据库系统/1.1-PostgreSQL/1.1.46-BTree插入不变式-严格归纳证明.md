# 1.1.46 B-Tree 插入不变式：严格归纳证明（纯形式化）

## 目录

1. 模型与不变式
2. 插入算法的分情况定义
3. 归纳不变量与证明

## 1. 模型与不变式

- 阶 m 的B-Tree：
  - 每节点键数 ∈[⌈m/2⌉−1, m−1]（根除外）；
  - 叶同深；
  - 键有序，区间不交且覆盖；父分隔键界定子区间。

## 2. 插入算法（概要）

- 自顶向下避免下溢：若子满则先分裂再下降；叶插入后如超界则分裂并上推中键。

## 3. 严格归纳证明

- 归纳假设：对高度 h 的树，插入保持不变式；
- 基例 h=0（空树/单节点）：插入后如超界分裂产生两叶与新根，叶同深成立；
- 归纳步：
  1) 有序/覆盖保持：分裂将键集划分为左<中<右，父分隔键更新维持区间分解；
  2) 高度与平衡：分裂只在一条根到叶路径上发生；若根分裂，高度整体+1，所有叶仍同深；
  3) 容量界：分裂确保子节点键数 ≤ m−1，父节点经必要分裂仍满足界；
  4) 父子区间一致：上推中键使父分隔键恰界定左右子域；
- 结论：插入后所有不变式保持。□
