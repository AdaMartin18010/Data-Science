# 1.1.47 增量物化视图：代数差分与正确性（纯形式化）

## 目录

1. 代数差分规则（Δ算子）
2. 视图增量维护语义
3. 正确性定理与证明纲要
4. 复杂度与边界

## 1. Δ 规则

- 基元：Δ(R∪S)=ΔR∪ΔS；Δ(R−S)=ΔR−ΔS；
- 选择：Δ(σ_φ R)=σ_φ(ΔR)；
- 投影：Δ(π_A R)=π_A(ΔR)；
- 连接：Δ(R⋈S)= (ΔR⋈S) ∪ (R⋈ΔS) ∪ (ΔR⋈ΔS)；
- 聚合：对可加聚合 f，有 Δ(f∘GB_G)(R)= f(GB_G(ΔR)) + 校正项（按聚合定义给出）。

## 2. 语义

- 给定物化 V=⟦E⟧(D)，更新 ΔD 使新库为 D'；定义 ΔV=⟦E⟧(D')−⟦E⟧(D)。

## 3. 正确性

- 定理 3.1：按 1 节 Δ 规则自底向上传播，所得 ΔV 与定义一致：⟦E⟧(D⊕ΔD)=⟦E⟧(D)⊕ΔV。
  证明纲要：对 E 结构归纳；各算子使用对应 Δ 规则的语义保持性；连接与聚合分别用分配律与聚合定义证明。

## 4. 复杂度

- 命题 4.1：若 ΔD 规模远小于 D，则 ΔV 可在 O(|ΔD|·poly(log|D|)) 时间内计算（取决于索引与算子性质）。
