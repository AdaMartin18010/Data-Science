# 1.1.39 关系代数与关系演算：Codd 定理与可表达性（纯形式化）

## 目录

1. 语言定义（RA, TRC, DRC）
2. 安全公式与域独立性
3. Codd 定理：表达等价
4. 可表达性边界与不可定义性质

## 1. 语言定义

- 关系代数（RA）：由 σ, π, ρ, ∪, −, ×, ⋈ 等算子闭包的表达式语言。
- 元组关系演算（TRC）/域关系演算（DRC）：一阶逻辑片段，公式在关系结构上求值。

## 2. 安全与域独立

- 定义 2.1（域独立）：公式结果仅依赖于数据库活动域（active domain）。
- 定义 2.2（安全公式）：输出有限且来自活动域；排除非受限变量导致的无限输出。
- 定理 2.3：TRC/DRC 的安全子集与 RA 在可表达性上一致。

## 3. Codd 定理

- 定理 3.1（Codd）：安全的 TRC（或 DRC）与 RA 等表达能力；存在从任意安全公式到 RA 表达式的有效变换，反之亦然。
  证明纲要：
  1) 归纳地将 TRC 安全公式正规化为前束范式与连接/选择/投影构造；
  2) 构造对应 RA 表达式，使用等价律保持语义；
  3) 反向由 RA 到 TRC 使用存在量词模拟连接与投影。

## 4. 可表达性边界

- 命题 4.1：RA/TRC 不可表达传递闭包（需递归/Datalog）。
- 命题 4.2：聚合与排序不在一阶框架内（需扩展语义或算子）。
