# 1.1.60 物化视图选择：查询重写等价与代价界（纯形式化）

## 目录

1. 重写等价判据
2. 代价上界

## 1. 等价

- 定义：给定视图 V=⟦E_V⟧，查询 Q=⟦E_Q⟧，若存在表达式 E' 使得 ⟦E'⟧(V)=⟦E_Q⟧(D) 对所有 D 成立，则称 Q 可由 V 完全重写；
- 定理 1.1：在 SPJ 片段，若存在同态映射使 E_Q 包含于 E_V 的连接-投影闭包，则完全可重写；否则至多部分重写（带补差）。

## 2. 代价

- 定理 2.1：完全重写时，访问代价 ≤ 直接求值代价的上界（忽略维护开销）；
- 命题 2.2：加入维护成本后为双目标优化，存在阈值策略。
