# 1.1.45 BCNF 与 3NF：完整证明稿（纯形式化）

## 目录

1. 预备：FD 闭包与无损判据
2. BCNF 无损分解的完整证明
3. 3NF 合成算法的保持依赖与无损性证明

## 1. 预备

- 定义 1.1（Armstrong 公理、闭包 X^+）略；
- 引理 1.2（两表无损判据）：R→R1,R2 无损 ⇔ (R1∩R2)→R1 或 (R1∩R2)→R2 ∈ F^+。

## 2. BCNF 无损分解

- 算法：若存在非平凡 FD X→Y 违背 BCNF（X 非超键），则将 R 分解为 R1=X∪Y 与 R2=R−(Y−X)。
- 定理 2.1（每步无损）：上述一步分解满足无损。
  证明：R1∩R2=X；因 X→Y∈F^+，得 X→R1 成立，满足引理1.2条件，故无损。□
- 定理 2.2（终止与正确）：有限步迭代得 BCNF；每步无损，最终自然连接等于原关系。
  证明：每步消除至少一处违背；有限属性集保证终止；无损性由2.1逐步传递。□

## 3. 3NF 合成

- 算法（最小覆盖 G，经右侧单属性、约简前件与依赖）：
  1) 对每条 X→A∈G 生成模式 X∪{A}；
  2) 若不存在包含任一候选键的模式，则另加一含候选键的模式；
  3) 删除被包含的冗余模式。
- 定理 3.1（保持依赖）：对任意 X→A∈F^+，在合成后的分解中可由局部投影的 FDs 推得 X→A。
  证明：G 与 F 等价；每条 X→A 出现在某子模式内或由包含关系导出；候选键模式保证关键依赖得以投影与推演。□
- 定理 3.2（无损）：存在包含候选键 K 的子模式，且任一连接复原包含 K 的同名属性一致，故整体无损。
  证明：由两表无损判据扩展至多表情形（归纳于连接次序），关键在于 K 的保留。□
