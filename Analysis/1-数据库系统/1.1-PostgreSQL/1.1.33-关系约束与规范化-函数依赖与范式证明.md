# 1.1.33 关系约束与规范化：函数依赖与范式证明（纯形式化）

## 目录

1. 函数依赖与Armstrong公理
2. 闭包与最小覆盖
3. 无损分解与保持依赖
4. 3NF/BCNF/4NF判定与充分必要条件
5. 规范化的代价与权衡

## 1. 函数依赖与Armstrong公理

- 定义 1.1（函数依赖）: 在关系模式 R 上，X→Y 表示对任意实例 r∈I(R)，若 t1|_X=t2|_X 则 t1|_Y=t2|_Y。
- 公理 1.2（Armstrong）: 自反、增广、传递。
- 定理 1.3（完备性）: Armstrong公理对FD蕴含是完备与可靠的。
  证明纲要：可靠性易得；完备性通过构造标准模型证明。

## 2. 闭包与最小覆盖

- 定义 2.1（属性闭包）: X^+ 为在 F 下由 X 可推出的所有属性。
- 定理 2.2（候选键判定）: 若 X^+=R 则 X 为超键；若无真子集满足则为候选键。
- 定义 2.3（最小覆盖）: 等价FD集，满足每条右侧单属性、无冗余前件与无冗余依赖。

## 3. 无损分解与保持依赖

- 定义 3.1（无损分解）: R 分解为 R1,R2,…，若自然连接复原等于原关系，对任意实例成立。
- 定理 3.2（两表分解无损判据）: R→R1,R2 无损当且仅当 R1∩R2 → R1 或 R1∩R2 → R2 在 F^+ 中成立。
  证明：根据连接-投影等价与FD定义，分别证明充分必要性。□
- 定理 3.3（保持依赖）: 若分解后各子模式FD并集蕴含原FD集，则称保持依赖；给出判定算法基于属性闭包检查。

## 4. 范式判定

- 定义 4.1（BCNF）: 对任意非平凡 FD X→Y，X 为超键。
- 定理 4.2（BCNF分解）: 迭代按违反FD分解可达BCNF，且每步无损。
  证明纲要：利用定理3.2判据与传递闭包性质保证无损；终止由有限性给出。
- 定义 4.3（3NF）: 每条FD满足 Y⊆X 或 X 为超键 或 每个 Y 属性是候选键属性。
- 定理 4.4（3NF合成保持依赖）: 3NF 合成可保持全部FD且无损。

## 5. 权衡

- 命题 5.1：BCNF可能不保持依赖；3NF在保持依赖与降低冗余间折衷。
- 命题 5.2：规范化与查询性能间存在代价权衡，属工程层面，不在本文展开。
