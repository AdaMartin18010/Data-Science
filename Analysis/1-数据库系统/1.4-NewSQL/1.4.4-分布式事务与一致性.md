# 1.4.4 åˆ†å¸ƒå¼äº‹åŠ¡ä¸ä¸€è‡´æ€§

## ğŸ“‘ ç›®å½•

- [1.4.4 åˆ†å¸ƒå¼äº‹åŠ¡ä¸ä¸€è‡´æ€§](#144-åˆ†å¸ƒå¼äº‹åŠ¡ä¸ä¸€è‡´æ€§)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. åˆ†å¸ƒå¼äº‹åŠ¡åŸç†](#1-åˆ†å¸ƒå¼äº‹åŠ¡åŸç†)
  - [2. ä¸€è‡´æ€§åè®®ä¸å®ç°](#2-ä¸€è‡´æ€§åè®®ä¸å®ç°)
  - [3. è¡Œä¸šæ¡ˆä¾‹ä¸å¤šè¡¨å¾](#3-è¡Œä¸šæ¡ˆä¾‹ä¸å¤šè¡¨å¾)
    - [3.1. é‡‘èè¡Œä¸šï¼š2PCåˆ†å¸ƒå¼äº‹åŠ¡](#31-é‡‘èè¡Œä¸š2pcåˆ†å¸ƒå¼äº‹åŠ¡)
    - [3.2. äº’è”ç½‘è¡Œä¸šï¼šRaftä¸€è‡´æ€§åè®®](#32-äº’è”ç½‘è¡Œä¸šraftä¸€è‡´æ€§åè®®)
    - [3.3. Latexå…¬å¼](#33-latexå…¬å¼)
    - [3.4. é…ç½®ç¤ºä¾‹](#34-é…ç½®ç¤ºä¾‹)

---


## 1. åˆ†å¸ƒå¼äº‹åŠ¡åŸç†

- è·¨èŠ‚ç‚¹/åˆ†åŒºçš„åŸå­æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ã€‚
- ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰ã€ä¸‰é˜¶æ®µæäº¤ï¼ˆ3PCï¼‰ã€Paxos/Raftç­‰åè®®ã€‚

## 2. ä¸€è‡´æ€§åè®®ä¸å®ç°

| åè®® | ç‰¹ç‚¹ | å…¸å‹ç³»ç»Ÿ |
|------|------|----------|
| 2PC   | ç®€å•ã€é˜»å¡ | OceanBaseã€TiDB |
| 3PC   | éé˜»å¡ï¼Œå¤æ‚ | NewSQLéƒ¨åˆ†å®ç° |
| Paxos | å®¹é”™æ€§å¼º | CockroachDB |
| Raft  | æ˜“å®ç°ï¼Œå¼ºä¸€è‡´ | TiDBã€YugabyteDB |

## 3. è¡Œä¸šæ¡ˆä¾‹ä¸å¤šè¡¨å¾

### 3.1. é‡‘èè¡Œä¸šï¼š2PCåˆ†å¸ƒå¼äº‹åŠ¡

```mermaid
flowchart TD
  C[å®¢æˆ·ç«¯] --> TC[äº‹åŠ¡åè°ƒå™¨]
  TC --> P1[å‚ä¸è€…1]
  TC --> P2[å‚ä¸è€…2]
  P1 --> TC
  P2 --> TC
```

### 3.2. äº’è”ç½‘è¡Œä¸šï¼šRaftä¸€è‡´æ€§åè®®

- è§[1.4.1-å½¢å¼æ¨¡å‹](1.4.1-å½¢å¼æ¨¡å‹.md)

### 3.3. Latexå…¬å¼

$$
\text{Commit}_{2PC} = \text{Prepare} + \text{Commit}
$$

### 3.4. é…ç½®ç¤ºä¾‹

```yaml
transaction:
  protocol: 2PC
  timeout: 30s
```

[è¿”å›NewSQLå¯¼èˆª](README.md)
