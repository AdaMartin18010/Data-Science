# 8.3.6 Petriç½‘å·¥å…·ä¸å®ç°æ·±åŒ–

## ğŸ“‘ ç›®å½•

- [8.3.6 Petriç½‘å·¥å…·ä¸å®ç°æ·±åŒ–](#836-petriç½‘å·¥å…·ä¸å®ç°æ·±åŒ–)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. ä¸»æµPetriç½‘å·¥å…·ç»¼è¿°](#1-ä¸»æµpetriç½‘å·¥å…·ç»¼è¿°)
    - [1.1. CPN Tools](#11-cpn-tools)
    - [1.2. PIPE (Platform Independent Petri net Editor)](#12-pipe-platform-independent-petri-net-editor)
    - [1.3. WoPeD (Workflow Petri Net Designer)](#13-woped-workflow-petri-net-designer)
    - [1.4. TINA (TIme petri Net Analyzer)](#14-tina-time-petri-net-analyzer)
    - [1.5. Renew (Reference Net Workshop)](#15-renew-reference-net-workshop)
  - [2. å¼€æºPetriç½‘å®ç°](#2-å¼€æºpetriç½‘å®ç°)
    - [2.1. Pythonå®ç°ç¤ºä¾‹](#21-pythonå®ç°ç¤ºä¾‹)
  - [3. JavaScriptå®ç°ç¤ºä¾‹](#3-javascriptå®ç°ç¤ºä¾‹)
  - [4. å·¥å…·å¯¹æ¯”ä¸é€‰æ‹©](#4-å·¥å…·å¯¹æ¯”ä¸é€‰æ‹©)
  - [5. å¼€å‘å®è·µä¸è‡ªåŠ¨åŒ–](#5-å¼€å‘å®è·µä¸è‡ªåŠ¨åŒ–)
    - [5.1. Petriç½‘å»ºæ¨¡è‡ªåŠ¨åŒ–](#51-petriç½‘å»ºæ¨¡è‡ªåŠ¨åŒ–)
    - [5.2. ä¸CI/CDé›†æˆ](#52-ä¸cicdé›†æˆ)
    - [5.3. å¯è§†åŒ–ä¸äº¤äº’](#53-å¯è§†åŒ–ä¸äº¤äº’)
  - [6. å­¦ä¹ ä¸èµ„æº](#6-å­¦ä¹ ä¸èµ„æº)
    - [6.1. å®˜æ–¹æ–‡æ¡£](#61-å®˜æ–¹æ–‡æ¡£)
    - [6.2. ç»å…¸ä¹¦ç±](#62-ç»å…¸ä¹¦ç±)
    - [6.3. å¼€æºé¡¹ç›®](#63-å¼€æºé¡¹ç›®)
  - [7. æ€»ç»“](#7-æ€»ç»“)

---


## 1. ä¸»æµPetriç½‘å·¥å…·ç»¼è¿°

### 1.1. CPN Tools

- æ”¯æŒæœ‰è‰²Petriç½‘ï¼ˆCPNï¼‰å»ºæ¨¡ã€ä»¿çœŸä¸åˆ†æ
- å›¾å½¢åŒ–ç•Œé¢ï¼Œæ”¯æŒå±‚æ¬¡åŒ–å»ºæ¨¡
- ä¸°å¯Œçš„åˆ†æåŠŸèƒ½ï¼ˆå¯è¾¾æ€§ã€æ´»æ€§ã€æ€§èƒ½ç­‰ï¼‰
- è„šæœ¬æ‰©å±•ä¸è‡ªåŠ¨åŒ–

### 1.2. PIPE (Platform Independent Petri net Editor)

- æ”¯æŒåŸºç¡€Petriç½‘ã€æ‰©å±•Petriç½‘å»ºæ¨¡
- å¯è¾¾æ€§åˆ†æã€æ­»é”æ£€æµ‹ã€ä»¿çœŸ
- Javaå®ç°ï¼Œè·¨å¹³å°

### 1.3. WoPeD (Workflow Petri Net Designer)

- ä¸“æ³¨äºå·¥ä½œæµPetriç½‘
- å›¾å½¢åŒ–å»ºæ¨¡ã€ä»¿çœŸã€åŠ¨ç”»
- æ”¯æŒBPMNä¸Petriç½‘äº’è½¬

### 1.4. TINA (TIme petri Net Analyzer)

- æ”¯æŒæ—¶é—´Petriç½‘
- æ€§èƒ½åˆ†æã€æ¨¡å‹æ£€æŸ¥
- å‘½ä»¤è¡Œä¸å›¾å½¢ç•Œé¢

### 1.5. Renew (Reference Net Workshop)

- é¢å‘å¯¹è±¡Petriç½‘
- Javaé›†æˆï¼Œæ”¯æŒæ’ä»¶å¼€å‘

## 2. å¼€æºPetriç½‘å®ç°

### 2.1. Pythonå®ç°ç¤ºä¾‹

```python
class PetriNet:
    def __init__(self):
        self.places = set()
        self.transitions = set()
        self.arcs = []
        self.marking = {}

    def add_place(self, name, tokens=0):
        self.places.add(name)
        self.marking[name] = tokens

    def add_transition(self, name):
        self.transitions.add(name)

    def add_arc(self, src, dst):
        self.arcs.append((src, dst))

    def fire(self, transition):
        """è§¦å‘å˜è¿"""
# è·å–å‰ç½®å’Œåç½®åº“æ‰€
        pre_places = [src for src, dst in self.arcs if dst == transition]
        post_places = [dst for src, dst in self.arcs if src == transition]

# æ£€æŸ¥å‰ç½®æ¡ä»¶
        if all(self.marking[p] > 0 for p in pre_places):
# æ¶ˆè€—å‰ç½®åº“æ‰€çš„æ ‡è®°
            for p in pre_places:
                self.marking[p] -= 1

# äº§ç”Ÿåç½®åº“æ‰€çš„æ ‡è®°
            for p in post_places:
                self.marking[p] += 1

            return True
        return False

    def can_fire(self, transition):
        """æ£€æŸ¥å˜è¿æ˜¯å¦å¯ä»¥è§¦å‘"""
        pre_places = [src for src, dst in self.arcs if dst == transition]
        return all(self.marking[p] > 0 for p in pre_places)

    def get_enabled_transitions(self):
        """è·å–æ‰€æœ‰å¯è§¦å‘çš„å˜è¿"""
        enabled = []
        for transition in self.transitions:
            if self.can_fire(transition):
                enabled.append(transition)
        return enabled

    def get_marking(self):
        """è·å–å½“å‰æ ‡è®°"""
        return self.marking.copy()

    def set_marking(self, marking):
        """è®¾ç½®æ ‡è®°"""
        self.marking = marking.copy()

    def add_weighted_arc(self, src, dst, weight=1):
        """æ·»åŠ åŠ æƒå¼§"""
        self.arcs.append((src, dst, weight))

    def fire_weighted(self, transition):
        """è§¦å‘åŠ æƒå˜è¿"""
# è·å–åŠ æƒå¼§
        pre_arcs = [(src, weight) for src, dst, weight in self.arcs if dst == transition]
        post_arcs = [(dst, weight) for src, dst, weight in self.arcs if src == transition]

# æ£€æŸ¥å‰ç½®æ¡ä»¶
        if all(self.marking[p] >= weight for p, weight in pre_arcs):
# æ¶ˆè€—å‰ç½®åº“æ‰€çš„æ ‡è®°
            for p, weight in pre_arcs:
                self.marking[p] -= weight

# äº§ç”Ÿåç½®åº“æ‰€çš„æ ‡è®°
            for p, weight in post_arcs:
                self.marking[p] += weight

            return True
        return False
```

## 3. JavaScriptå®ç°ç¤ºä¾‹

```javascript
class PetriNet {
  constructor() {
    this.places = new Set();
    this.transitions = new Set();
    this.arcs = [];
    this.marking = {};
  }
  addPlace(name, tokens = 0) {
    this.places.add(name);
    this.marking[name] = tokens;
  }
  addTransition(name) {
    this.transitions.add(name);
  }
  addArc(src, dst) {
    this.arcs.push([src, dst]);
  }
  fire(transition) {
    const pre = this.arcs.filter(([src, dst]) => dst === transition).map(([src]) => src);
    const post = this.arcs.filter(([src, dst]) => src === transition).map(([, dst]) => dst);
    if (pre.every(p => this.marking[p] > 0)) {
      pre.forEach(p => this.marking[p]--);
      post.forEach(p => this.marking[p]++);
      return true;
    }
    return false;
  }
}
```

## 4. å·¥å…·å¯¹æ¯”ä¸é€‰æ‹©

| å·¥å…·      | æ”¯æŒç±»å‹         | åˆ†æåŠŸèƒ½         | å¯è§†åŒ– | è„šæœ¬/æ‰©å±• | é€‚ç”¨åœºæ™¯         |
|-----------|------------------|------------------|--------|-----------|------------------|
| CPN Tools | æœ‰è‰²/å±‚æ¬¡Petriç½‘ | å¼º               | å¼º     | å¼º        | æ•™å­¦/ç ”ç©¶/å·¥ä¸š   |
| PIPE      | åŸºç¡€/æ‰©å±•Petriç½‘ | ä¸­               | ä¸­     | ä¸€èˆ¬      | æ•™å­¦/åŸºç¡€åˆ†æ    |
| WoPeD     | å·¥ä½œæµPetriç½‘     | ä¸€èˆ¬             | å¼º     | ä¸€èˆ¬      | æµç¨‹å»ºæ¨¡/æ•™å­¦    |
| TINA      | æ—¶é—´Petriç½‘       | å¼º               | ä¸€èˆ¬   | ä¸€èˆ¬      | å®æ—¶ç³»ç»Ÿ/ç ”ç©¶    |
| Renew     | é¢å‘å¯¹è±¡Petriç½‘   | ä¸€èˆ¬             | ä¸­     | å¼º        | ç ”ç©¶/å¼€å‘        |

## 5. å¼€å‘å®è·µä¸è‡ªåŠ¨åŒ–

### 5.1. Petriç½‘å»ºæ¨¡è‡ªåŠ¨åŒ–

- ä½¿ç”¨Python/JavaScriptè„šæœ¬æ‰¹é‡ç”ŸæˆPetriç½‘ç»“æ„
- åˆ©ç”¨CPN Tools/PIPEçš„APIè¿›è¡Œè‡ªåŠ¨åŒ–åˆ†æ

### 5.2. ä¸CI/CDé›†æˆ

- åœ¨è½¯ä»¶å¼€å‘æµç¨‹ä¸­é›†æˆPetriç½‘æ¨¡å‹éªŒè¯
- è‡ªåŠ¨åŒ–æ£€æµ‹å¹¶å‘ç¼ºé™·ã€æ­»é”ç­‰

### 5.3. å¯è§†åŒ–ä¸äº¤äº’

- åˆ©ç”¨Graphvizã€D3.jsç­‰å·¥å…·å®ç°Petriç½‘å¯è§†åŒ–
- å¼€å‘Webå¯è§†åŒ–ç¼–è¾‘å™¨

## 6. å­¦ä¹ ä¸èµ„æº

### 6.1. å®˜æ–¹æ–‡æ¡£

- [CPN Tools](https://cpntools.org/)
- [PIPE](https://pipe2.sourceforge.net/)
- [WoPeD](https://woped.dhbw.de/)
- [TINA](https://projects.laas.fr/tina/)
- [Renew](https://www.renew.de/)

### 6.2. ç»å…¸ä¹¦ç±

- ã€ŠPetri Nets: Properties, Analysis and Applicationsã€‹
- ã€ŠModeling and Analysis of Real-Time and Embedded Systems with Petri Netsã€‹
- ã€ŠHigh-level Petri Nets: Theory and Applicationã€‹

### 6.3. å¼€æºé¡¹ç›®

- [snakes](https://pypi.org/project/snakes/)ï¼šPython Petriç½‘åº“
- [petrinet-js](https://github.com/robinsonkwame/petrinet-js)ï¼šJavaScriptå®ç°

## 7. æ€»ç»“

Petriç½‘å·¥å…·ä¸å®ç°ä¸ºç†è®ºç ”ç©¶å’Œå·¥ç¨‹åº”ç”¨æä¾›äº†åšå®åŸºç¡€ã€‚é€šè¿‡é€‰æ‹©åˆé€‚çš„å·¥å…·å’Œè‡ªåŠ¨åŒ–å®è·µï¼Œå¯ä»¥é«˜æ•ˆå®Œæˆç³»ç»Ÿå»ºæ¨¡ã€åˆ†æä¸éªŒè¯ä»»åŠ¡ã€‚
