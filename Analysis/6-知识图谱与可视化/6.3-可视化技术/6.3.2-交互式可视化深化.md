# äº¤äº’å¼å¯è§†åŒ–æ·±åŒ–

## ğŸ“‘ ç›®å½•

- [äº¤äº’å¼å¯è§†åŒ–æ·±åŒ–](#äº¤äº’å¼å¯è§†åŒ–æ·±åŒ–)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. äº¤äº’è®¾è®¡åŸåˆ™](#1-äº¤äº’è®¾è®¡åŸåˆ™)
    - [1.1. ç”¨æˆ·äº¤äº’æ¨¡å¼](#11-ç”¨æˆ·äº¤äº’æ¨¡å¼)
    - [1.2. å“åº”å¼è®¾è®¡](#12-å“åº”å¼è®¾è®¡)
  - [2. åŠ¨æ€å¯è§†åŒ–æŠ€æœ¯](#2-åŠ¨æ€å¯è§†åŒ–æŠ€æœ¯)
    - [2.1. åŠ¨ç”»ç³»ç»Ÿ](#21-åŠ¨ç”»ç³»ç»Ÿ)
    - [2.2. å®æ—¶æ•°æ®æ›´æ–°](#22-å®æ—¶æ•°æ®æ›´æ–°)
  - [3. å¤šç»´åº¦å±•ç¤º](#3-å¤šç»´åº¦å±•ç¤º)
    - [3.1. åˆ†å±‚å¯è§†åŒ–](#31-åˆ†å±‚å¯è§†åŒ–)
  - [4. ç”¨æˆ·ç•Œé¢ç»„ä»¶](#4-ç”¨æˆ·ç•Œé¢ç»„ä»¶)
    - [4.1. æ§åˆ¶é¢æ¿](#41-æ§åˆ¶é¢æ¿)
    - [4.2. å·¥å…·æ ](#42-å·¥å…·æ )
  - [5. æ€§èƒ½ä¼˜åŒ–](#5-æ€§èƒ½ä¼˜åŒ–)
    - [5.1. æ¸²æŸ“ä¼˜åŒ–](#51-æ¸²æŸ“ä¼˜åŒ–)
    - [5.2. å†…å­˜ç®¡ç†](#52-å†…å­˜ç®¡ç†)
  - [6. åº”ç”¨æ¡ˆä¾‹](#6-åº”ç”¨æ¡ˆä¾‹)
    - [6.1. çŸ¥è¯†å›¾è°±æµè§ˆå™¨](#61-çŸ¥è¯†å›¾è°±æµè§ˆå™¨)
  - [7. å·¥å…·ä¸å¹³å°](#7-å·¥å…·ä¸å¹³å°)
    - [7.1. å‰ç«¯æ¡†æ¶](#71-å‰ç«¯æ¡†æ¶)
    - [7.2. å¯è§†åŒ–åº“](#72-å¯è§†åŒ–åº“)
    - [7.3. äº¤äº’æ¡†æ¶](#73-äº¤äº’æ¡†æ¶)
  - [8. å‘å±•è¶‹åŠ¿](#8-å‘å±•è¶‹åŠ¿)
    - [8.1. æŠ€æœ¯è¶‹åŠ¿](#81-æŠ€æœ¯è¶‹åŠ¿)
    - [8.2. åº”ç”¨è¶‹åŠ¿](#82-åº”ç”¨è¶‹åŠ¿)
  - [9. å­¦ä¹ èµ„æº](#9-å­¦ä¹ èµ„æº)
    - [9.1. ç»å…¸æ•™æ](#91-ç»å…¸æ•™æ)
    - [9.2. åœ¨çº¿èµ„æº](#92-åœ¨çº¿èµ„æº)
    - [9.3. å®è·µé¡¹ç›®](#93-å®è·µé¡¹ç›®)
  - [10. å¤šè¡¨å¾](#10-å¤šè¡¨å¾)
  - [11. å½¢å¼åŒ–è¯­ä¹‰](#11-å½¢å¼åŒ–è¯­ä¹‰)
  - [12. å½¢å¼åŒ–è¯­æ³•ä¸è¯æ˜](#12-å½¢å¼åŒ–è¯­æ³•ä¸è¯æ˜)

---


## 1. äº¤äº’è®¾è®¡åŸåˆ™

### 1.1. ç”¨æˆ·äº¤äº’æ¨¡å¼

```javascript
// äº¤äº’å¼å¯è§†åŒ–åŸºç¡€æ¡†æ¶
class InteractiveVisualization {
    constructor(container, data) {
        this.container = container;
        this.data = data;
        this.interactions = new Map();
        this.state = {
            selectedNodes: new Set(),
            highlightedEdges: new Set(),
            zoomLevel: 1,
            panOffset: { x: 0, y: 0 }
        };

        this.initInteractions();
    }

    initInteractions() {
        // é¼ æ ‡äº¤äº’
        this.interactions.set('click', this.handleClick.bind(this));
        this.interactions.set('hover', this.handleHover.bind(this));
        this.interactions.set('drag', this.handleDrag.bind(this));

        // é”®ç›˜äº¤äº’
        this.interactions.set('keydown', this.handleKeydown.bind(this));

        // è§¦æ‘¸äº¤äº’
        this.interactions.set('touchstart', this.handleTouchStart.bind(this));
        this.interactions.set('touchmove', this.handleTouchMove.bind(this));

        this.bindEvents();
    }

    bindEvents() {
        this.container.addEventListener('click', this.interactions.get('click'));
        this.container.addEventListener('mouseover', this.interactions.get('hover'));
        this.container.addEventListener('mousedown', this.startDrag.bind(this));
        this.container.addEventListener('keydown', this.interactions.get('keydown'));
        this.container.addEventListener('touchstart', this.interactions.get('touchstart'));
    }

    handleClick(event) {
        const target = event.target;
        if (target.classList.contains('node')) {
            this.toggleNodeSelection(target.dataset.nodeId);
        } else if (target.classList.contains('edge')) {
            this.toggleEdgeHighlight(target.dataset.edgeId);
        }
        this.updateVisualization();
    }

    handleHover(event) {
        const target = event.target;
        if (target.classList.contains('node')) {
            this.showNodeTooltip(target);
        } else if (target.classList.contains('edge')) {
            this.showEdgeTooltip(target);
        }
    }

    handleDrag(event) {
        if (this.state.isDragging) {
            const deltaX = event.clientX - this.state.dragStart.x;
            const deltaY = event.clientY - this.state.dragStart.y;

            this.state.panOffset.x += deltaX;
            this.state.panOffset.y += deltaY;

            this.updateTransform();
        }
    }

    updateTransform() {
        const transform = `translate(${this.state.panOffset.x}px, ${this.state.panOffset.y}px) scale(${this.state.zoomLevel})`;
        this.container.style.transform = transform;
    }
}
```

### 1.2. å“åº”å¼è®¾è®¡

```javascript
// å“åº”å¼å¯è§†åŒ–ç»„ä»¶
class ResponsiveVisualization {
    constructor(container, data) {
        this.container = container;
        this.data = data;
        this.breakpoints = {
            mobile: 768,
            tablet: 1024,
            desktop: 1200
        };

        this.initResponsive();
    }

    initResponsive() {
        this.updateLayout();
        window.addEventListener('resize', this.debounce(this.updateLayout.bind(this), 250));
    }

    updateLayout() {
        const width = this.container.clientWidth;
        const height = this.container.clientHeight;

        if (width < this.breakpoints.mobile) {
            this.setMobileLayout();
        } else if (width < this.breakpoints.tablet) {
            this.setTabletLayout();
        } else {
            this.setDesktopLayout();
        }

        this.updateVisualization();
    }

    setMobileLayout() {
        this.config = {
            nodeSize: 8,
            fontSize: 12,
            showLabels: false,
            layout: 'force',
            maxNodes: 50
        };
    }

    setTabletLayout() {
        this.config = {
            nodeSize: 12,
            fontSize: 14,
            showLabels: true,
            layout: 'force',
            maxNodes: 100
        };
    }

    setDesktopLayout() {
        this.config = {
            nodeSize: 16,
            fontSize: 16,
            showLabels: true,
            layout: 'hierarchical',
            maxNodes: 200
        };
    }

    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
}
```

## 2. åŠ¨æ€å¯è§†åŒ–æŠ€æœ¯

### 2.1. åŠ¨ç”»ç³»ç»Ÿ

```javascript
// åŠ¨ç”»ç³»ç»Ÿ
class AnimationSystem {
    constructor() {
        this.animations = new Map();
        this.easingFunctions = {
            linear: t => t,
            easeInQuad: t => t * t,
            easeOutQuad: t => t * (2 - t),
            easeInOutQuad: t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t
        };
    }

    animate(property, fromValue, toValue, duration, easing = 'linear', callback) {
        const animationId = Date.now() + Math.random();
        const startTime = performance.now();
        const easingFunc = this.easingFunctions[easing];

        const animate = (currentTime) => {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const easedProgress = easingFunc(progress);

            const currentValue = fromValue + (toValue - fromValue) * easedProgress;

            if (callback) {
                callback(currentValue);
            }

            if (progress < 1) {
                requestAnimationFrame(animate);
            } else {
                this.animations.delete(animationId);
            }
        };

        this.animations.set(animationId, animate);
        requestAnimationFrame(animate);

        return animationId;
    }

    stopAnimation(animationId) {
        this.animations.delete(animationId);
    }

    stopAllAnimations() {
        this.animations.clear();
    }
}

// èŠ‚ç‚¹åŠ¨ç”»ç¤ºä¾‹
class NodeAnimation {
    constructor(node, animationSystem) {
        this.node = node;
        this.animationSystem = animationSystem;
    }

    fadeIn(duration = 500) {
        this.node.style.opacity = '0';
        this.node.style.display = 'block';

        return this.animationSystem.animate(
            'opacity', 0, 1, duration, 'easeOutQuad',
            (value) => {
                this.node.style.opacity = value;
            }
        );
    }

    fadeOut(duration = 500) {
        return this.animationSystem.animate(
            'opacity', 1, 0, duration, 'easeInQuad',
            (value) => {
                this.node.style.opacity = value;
            }
        );
    }

    scaleIn(duration = 300) {
        this.node.style.transform = 'scale(0)';

        return this.animationSystem.animate(
            'scale', 0, 1, duration, 'easeOutQuad',
            (value) => {
                this.node.style.transform = `scale(${value})`;
            }
        );
    }

    moveTo(x, y, duration = 500) {
        const currentX = parseFloat(this.node.style.left) || 0;
        const currentY = parseFloat(this.node.style.top) || 0;

        return this.animationSystem.animate(
            'position', 0, 1, duration, 'easeInOutQuad',
            (progress) => {
                const newX = currentX + (x - currentX) * progress;
                const newY = currentY + (y - currentY) * progress;
                this.node.style.left = `${newX}px`;
                this.node.style.top = `${newY}px`;
            }
        );
    }
}
```

### 2.2. å®æ—¶æ•°æ®æ›´æ–°

```javascript
// å®æ—¶æ•°æ®å¯è§†åŒ–
class RealTimeVisualization {
    constructor(container, dataSource) {
        this.container = container;
        this.dataSource = dataSource;
        this.updateQueue = [];
        this.isUpdating = false;

        this.initRealTimeUpdates();
    }

    initRealTimeUpdates() {
        // è®¾ç½®æ•°æ®æºç›‘å¬
        this.dataSource.on('dataUpdate', this.handleDataUpdate.bind(this));
        this.dataSource.on('nodeAdded', this.handleNodeAdded.bind(this));
        this.dataSource.on('nodeRemoved', this.handleNodeRemoved.bind(this));
        this.dataSource.on('edgeAdded', this.handleEdgeAdded.bind(this));
        this.dataSource.on('edgeRemoved', this.handleEdgeRemoved.bind(this));
    }

    handleDataUpdate(updateData) {
        this.updateQueue.push(updateData);

        if (!this.isUpdating) {
            this.processUpdateQueue();
        }
    }

    processUpdateQueue() {
        if (this.updateQueue.length === 0) {
            this.isUpdating = false;
            return;
        }

        this.isUpdating = true;
        const updates = this.updateQueue.splice(0, 10); // æ‰¹é‡å¤„ç†

        updates.forEach(update => {
            this.applyUpdate(update);
        });

        this.updateVisualization();

        // ç»§ç»­å¤„ç†é˜Ÿåˆ—
        requestAnimationFrame(() => {
            this.processUpdateQueue();
        });
    }

    applyUpdate(update) {
        switch (update.type) {
            case 'nodeUpdate':
                this.updateNode(update.nodeId, update.data);
                break;
            case 'edgeUpdate':
                this.updateEdge(update.edgeId, update.data);
                break;
            case 'nodeAdd':
                this.addNode(update.node);
                break;
            case 'nodeRemove':
                this.removeNode(update.nodeId);
                break;
            case 'edgeAdd':
                this.addEdge(update.edge);
                break;
            case 'edgeRemove':
                this.removeEdge(update.edgeId);
                break;
        }
    }

    updateNode(nodeId, data) {
        const nodeElement = this.container.querySelector(`[data-node-id="${nodeId}"]`);
        if (nodeElement) {
            // åº”ç”¨æ•°æ®æ›´æ–°
            Object.keys(data).forEach(key => {
                if (key === 'position') {
                    this.animateNodePosition(nodeElement, data[key]);
                } else if (key === 'size') {
                    this.animateNodeSize(nodeElement, data[key]);
                } else if (key === 'color') {
                    this.animateNodeColor(nodeElement, data[key]);
                }
            });
        }
    }

    animateNodePosition(nodeElement, newPosition) {
        const currentX = parseFloat(nodeElement.style.left) || 0;
        const currentY = parseFloat(nodeElement.style.top) || 0;

        this.animationSystem.animate(
            'position', 0, 1, 300, 'easeOutQuad',
            (progress) => {
                const x = currentX + (newPosition.x - currentX) * progress;
                const y = currentY + (newPosition.y - currentY) * progress;
                nodeElement.style.left = `${x}px`;
                nodeElement.style.top = `${y}px`;
            }
        );
    }
}
```

## 3. å¤šç»´åº¦å±•ç¤º

### 3.1. åˆ†å±‚å¯è§†åŒ–

```javascript
// åˆ†å±‚å¯è§†åŒ–ç³»ç»Ÿ
class LayeredVisualization {
    constructor(container) {
        this.container = container;
        this.layers = new Map();
        this.layerOrder = [];

        this.initLayers();
    }

    initLayers() {
        // åˆ›å»ºåŸºç¡€å›¾å±‚
        this.createLayer('background', 0);
        this.createLayer('grid', 1);
        this.createLayer('edges', 2);
        this.createLayer('nodes', 3);
        this.createLayer('labels', 4);
        this.createLayer('overlay', 5);
        this.createLayer('tooltip', 6);
    }

    createLayer(name, zIndex) {
        const layer = document.createElement('div');
        layer.className = `layer layer-${name}`;
        layer.style.position = 'absolute';
        layer.style.top = '0';
        layer.style.left = '0';
        layer.style.width = '100%';
        layer.style.height = '100%';
        layer.style.zIndex = zIndex;
        layer.style.pointerEvents = 'none';

        this.container.appendChild(layer);
        this.layers.set(name, layer);
        this.layerOrder.push(name);
    }

    getLayer(name) {
        return this.layers.get(name);
    }

    addToLayer(layerName, element) {
        const layer = this.getLayer(layerName);
        if (layer) {
            layer.appendChild(element);
            element.style.pointerEvents = 'auto';
        }
    }

    removeFromLayer(layerName, element) {
        const layer = this.getLayer(layerName);
        if (layer && element.parentNode === layer) {
            layer.removeChild(element);
        }
    }

    setLayerVisibility(layerName, visible) {
        const layer = this.getLayer(layerName);
        if (layer) {
            layer.style.display = visible ? 'block' : 'none';
        }
    }

    setLayerOpacity(layerName, opacity) {
        const layer = this.getLayer(layerName);
        if (layer) {
            layer.style.opacity = opacity;
        }
    }
}

// å¤šç»´æ•°æ®å±•ç¤º
class MultiDimensionalVisualization {
    constructor(container, data) {
        this.container = container;
        this.data = data;
        this.dimensions = new Map();
        this.currentView = 'default';

        this.initDimensions();
    }

    initDimensions() {
        // å®šä¹‰ä¸åŒç»´åº¦çš„è§†å›¾
        this.dimensions.set('temporal', this.createTemporalView.bind(this));
        this.dimensions.set('hierarchical', this.createHierarchicalView.bind(this));
        this.dimensions.set('spatial', this.createSpatialView.bind(this));
        this.dimensions.set('categorical', this.createCategoricalView.bind(this));
        this.dimensions.set('network', this.createNetworkView.bind(this));
    }

    switchView(viewName) {
        if (this.dimensions.has(viewName)) {
            this.currentView = viewName;
            this.clearContainer();
            this.dimensions.get(viewName)();
        }
    }

    createTemporalView() {
        // æ—¶é—´ç»´åº¦è§†å›¾
        const timeline = document.createElement('div');
        timeline.className = 'timeline-view';

        // åˆ›å»ºæ—¶é—´è½´
        const timeAxis = this.createTimeAxis();
        timeline.appendChild(timeAxis);

        // åˆ›å»ºæ—¶é—´ç‚¹æ ‡è®°
        this.data.forEach(item => {
            const timePoint = this.createTimePoint(item);
            timeline.appendChild(timePoint);
        });

        this.container.appendChild(timeline);
    }

    createHierarchicalView() {
        // å±‚æ¬¡ç»“æ„è§†å›¾
        const tree = document.createElement('div');
        tree.className = 'hierarchical-view';

        // åˆ›å»ºæ ‘å½¢ç»“æ„
        const treeRoot = this.createTreeStructure(this.data);
        tree.appendChild(treeRoot);

        this.container.appendChild(tree);
    }

    createSpatialView() {
        // ç©ºé—´ç»´åº¦è§†å›¾
        const map = document.createElement('div');
        map.className = 'spatial-view';

        // åˆ›å»ºåœ°å›¾å®¹å™¨
        const mapContainer = this.createMapContainer();
        map.appendChild(mapContainer);

        // æ·»åŠ ç©ºé—´æ ‡è®°
        this.data.forEach(item => {
            if (item.coordinates) {
                const marker = this.createSpatialMarker(item);
                mapContainer.appendChild(marker);
            }
        });

        this.container.appendChild(map);
    }

    createCategoricalView() {
        // åˆ†ç±»ç»´åº¦è§†å›¾
        const categories = document.createElement('div');
        categories.className = 'categorical-view';

        // æŒ‰ç±»åˆ«åˆ†ç»„
        const groupedData = this.groupByCategory(this.data);

        Object.keys(groupedData).forEach(category => {
            const categoryGroup = this.createCategoryGroup(category, groupedData[category]);
            categories.appendChild(categoryGroup);
        });

        this.container.appendChild(categories);
    }

    createNetworkView() {
        // ç½‘ç»œå…³ç³»è§†å›¾
        const network = document.createElement('div');
        network.className = 'network-view';

        // åˆ›å»ºåŠ›å¯¼å‘å›¾
        const forceGraph = this.createForceDirectedGraph(this.data);
        network.appendChild(forceGraph);

        this.container.appendChild(network);
    }
}
```

## 4. ç”¨æˆ·ç•Œé¢ç»„ä»¶

### 4.1. æ§åˆ¶é¢æ¿

```javascript
// äº¤äº’æ§åˆ¶é¢æ¿
class ControlPanel {
    constructor(container, visualization) {
        this.container = container;
        this.visualization = visualization;
        this.controls = new Map();

        this.createControlPanel();
    }

    createControlPanel() {
        const panel = document.createElement('div');
        panel.className = 'control-panel';
        panel.style.cssText = `
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        `;

        // æ·»åŠ è§†å›¾åˆ‡æ¢æ§åˆ¶
        this.addViewSelector(panel);

        // æ·»åŠ ç¼©æ”¾æ§åˆ¶
        this.addZoomControls(panel);

        // æ·»åŠ è¿‡æ»¤å™¨
        this.addFilters(panel);

        // æ·»åŠ æœç´¢æ¡†
        this.addSearchBox(panel);

        this.container.appendChild(panel);
    }

    addViewSelector(panel) {
        const viewSelector = document.createElement('div');
        viewSelector.className = 'view-selector';
        viewSelector.innerHTML = `
            <label>è§†å›¾æ¨¡å¼:</label>
            <select id="viewMode">
                <option value="network">ç½‘ç»œå›¾</option>
                <option value="hierarchical">å±‚æ¬¡å›¾</option>
                <option value="temporal">æ—¶é—´è½´</option>
                <option value="spatial">ç©ºé—´å›¾</option>
            </select>
        `;

        viewSelector.querySelector('#viewMode').addEventListener('change', (e) => {
            this.visualization.switchView(e.target.value);
        });

        panel.appendChild(viewSelector);
    }

    addZoomControls(panel) {
        const zoomControls = document.createElement('div');
        zoomControls.className = 'zoom-controls';
        zoomControls.innerHTML = `
            <button id="zoomIn">+</button>
            <span id="zoomLevel">100%</span>
            <button id="zoomOut">-</button>
            <button id="resetZoom">é‡ç½®</button>
        `;

        zoomControls.querySelector('#zoomIn').addEventListener('click', () => {
            this.visualization.zoomIn();
        });

        zoomControls.querySelector('#zoomOut').addEventListener('click', () => {
            this.visualization.zoomOut();
        });

        zoomControls.querySelector('#resetZoom').addEventListener('click', () => {
            this.visualization.resetZoom();
        });

        panel.appendChild(zoomControls);
    }

    addFilters(panel) {
        const filters = document.createElement('div');
        filters.className = 'filters';
        filters.innerHTML = `
            <label>èŠ‚ç‚¹ç±»å‹:</label>
            <div class="filter-group">
                <input type="checkbox" id="filterPerson" checked>
                <label for="filterPerson">äººå‘˜</label>
                <input type="checkbox" id="filterCompany" checked>
                <label for="filterCompany">å…¬å¸</label>
                <input type="checkbox" id="filterLocation" checked>
                <label for="filterLocation">åœ°ç‚¹</label>
            </div>
        `;

        // æ·»åŠ è¿‡æ»¤å™¨äº‹ä»¶ç›‘å¬
        filters.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                this.updateFilters();
            });
        });

        panel.appendChild(filters);
    }

    addSearchBox(panel) {
        const searchBox = document.createElement('div');
        searchBox.className = 'search-box';
        searchBox.innerHTML = `
            <input type="text" id="searchInput" placeholder="æœç´¢èŠ‚ç‚¹...">
            <button id="searchBtn">æœç´¢</button>
        `;

        searchBox.querySelector('#searchBtn').addEventListener('click', () => {
            const query = searchBox.querySelector('#searchInput').value;
            this.visualization.searchNodes(query);
        });

        searchBox.querySelector('#searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const query = e.target.value;
                this.visualization.searchNodes(query);
            }
        });

        panel.appendChild(searchBox);
    }

    updateFilters() {
        const filters = {
            person: this.container.querySelector('#filterPerson').checked,
            company: this.container.querySelector('#filterCompany').checked,
            location: this.container.querySelector('#filterLocation').checked
        };

        this.visualization.applyFilters(filters);
    }
}
```

### 4.2. å·¥å…·æ 

```javascript
// å¯è§†åŒ–å·¥å…·æ 
class Toolbar {
    constructor(container, visualization) {
        this.container = container;
        this.visualization = visualization;
        this.tools = new Map();

        this.createToolbar();
    }

    createToolbar() {
        const toolbar = document.createElement('div');
        toolbar.className = 'toolbar';
        toolbar.style.cssText = `
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        `;

        // æ·»åŠ å·¥å…·æŒ‰é’®
        this.addToolButton(toolbar, 'select', 'é€‰æ‹©', 'cursor');
        this.addToolButton(toolbar, 'pan', 'å¹³ç§»', 'move');
        this.addToolButton(toolbar, 'zoom', 'ç¼©æ”¾', 'search');
        this.addToolButton(toolbar, 'lasso', 'å¥—ç´¢', 'polygon');
        this.addToolButton(toolbar, 'measure', 'æµ‹é‡', 'ruler');

        this.container.appendChild(toolbar);
    }

    addToolButton(toolbar, toolId, label, icon) {
        const button = document.createElement('button');
        button.className = 'tool-button';
        button.dataset.tool = toolId;
        button.innerHTML = `<i class="icon-${icon}"></i> ${label}`;
        button.style.cssText = `
            display: block;
            width: 100%;
            margin: 2px 0;
            padding: 8px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        `;

        button.addEventListener('click', () => {
            this.activateTool(toolId);
        });

        button.addEventListener('mouseenter', () => {
            button.style.backgroundColor = '#f0f0f0';
        });

        button.addEventListener('mouseleave', () => {
            if (!button.classList.contains('active')) {
                button.style.backgroundColor = 'transparent';
            }
        });

        toolbar.appendChild(button);
        this.tools.set(toolId, button);
    }

    activateTool(toolId) {
        // åœç”¨æ‰€æœ‰å·¥å…·
        this.tools.forEach((button, id) => {
            button.classList.remove('active');
            button.style.backgroundColor = 'transparent';
        });

        // æ¿€æ´»é€‰ä¸­çš„å·¥å…·
        const activeButton = this.tools.get(toolId);
        if (activeButton) {
            activeButton.classList.add('active');
            activeButton.style.backgroundColor = '#e0e0e0';
        }

        // é€šçŸ¥å¯è§†åŒ–ç»„ä»¶åˆ‡æ¢å·¥å…·
        this.visualization.setActiveTool(toolId);
    }
}
```

## 5. æ€§èƒ½ä¼˜åŒ–

### 5.1. æ¸²æŸ“ä¼˜åŒ–

```javascript
// é«˜æ€§èƒ½æ¸²æŸ“ç³»ç»Ÿ
class HighPerformanceRenderer {
    constructor(container) {
        this.container = container;
        this.renderQueue = [];
        this.isRendering = false;
        this.frameCount = 0;
        this.lastFrameTime = 0;

        this.initRenderer();
    }

    initRenderer() {
        // ä½¿ç”¨requestAnimationFrameè¿›è¡Œæ¸²æŸ“
        this.renderLoop();

        // è®¾ç½®æ€§èƒ½ç›‘æ§
        this.setupPerformanceMonitoring();
    }

    renderLoop() {
        const currentTime = performance.now();
        const deltaTime = currentTime - this.lastFrameTime;

        if (deltaTime >= 16.67) { // 60 FPS
            this.processRenderQueue();
            this.lastFrameTime = currentTime;
            this.frameCount++;
        }

        requestAnimationFrame(() => this.renderLoop());
    }

    processRenderQueue() {
        if (this.renderQueue.length === 0) {
            return;
        }

        // æ‰¹é‡å¤„ç†æ¸²æŸ“ä»»åŠ¡
        const batchSize = Math.min(10, this.renderQueue.length);
        const batch = this.renderQueue.splice(0, batchSize);

        batch.forEach(task => {
            this.executeRenderTask(task);
        });
    }

    executeRenderTask(task) {
        switch (task.type) {
            case 'createNode':
                this.createNodeElement(task.data);
                break;
            case 'updateNode':
                this.updateNodeElement(task.nodeId, task.data);
                break;
            case 'removeNode':
                this.removeNodeElement(task.nodeId);
                break;
            case 'createEdge':
                this.createEdgeElement(task.data);
                break;
            case 'updateEdge':
                this.updateEdgeElement(task.edgeId, task.data);
                break;
            case 'removeEdge':
                this.removeEdgeElement(task.edgeId);
                break;
        }
    }

    addRenderTask(task) {
        this.renderQueue.push(task);
    }

    setupPerformanceMonitoring() {
        // ç›‘æ§æ¸²æŸ“æ€§èƒ½
        setInterval(() => {
            const fps = this.frameCount;
            this.frameCount = 0;

            if (fps < 30) {
                console.warn(`Low FPS detected: ${fps}`);
                this.optimizeRendering();
            }
        }, 1000);
    }

    optimizeRendering() {
        // å‡å°‘æ¸²æŸ“è´¨é‡
        this.container.style.imageRendering = 'pixelated';

        // å‡å°‘åŠ¨ç”»
        this.container.style.transition = 'none';

        // éšè—ä¸å¿…è¦çš„å…ƒç´ 
        const labels = this.container.querySelectorAll('.node-label');
        labels.forEach(label => {
            label.style.display = 'none';
        });
    }
}

// è™šæ‹ŸåŒ–æ¸²æŸ“
class VirtualizedRenderer {
    constructor(container, data) {
        this.container = container;
        this.data = data;
        this.visibleElements = new Set();
        this.elementPool = new Map();

        this.initVirtualization();
    }

    initVirtualization() {
        // åˆ›å»ºè§†å£
        this.viewport = {
            x: 0,
            y: 0,
            width: this.container.clientWidth,
            height: this.container.clientHeight
        };

        // ç›‘å¬æ»šåŠ¨äº‹ä»¶
        this.container.addEventListener('scroll', this.handleScroll.bind(this));

        // åˆå§‹æ¸²æŸ“
        this.updateVisibleElements();
    }

    handleScroll() {
        this.updateViewport();
        this.updateVisibleElements();
    }

    updateViewport() {
        this.viewport.x = this.container.scrollLeft;
        this.viewport.y = this.container.scrollTop;
        this.viewport.width = this.container.clientWidth;
        this.viewport.height = this.container.clientHeight;
    }

    updateVisibleElements() {
        const newVisibleElements = new Set();

        this.data.forEach(item => {
            if (this.isElementVisible(item)) {
                newVisibleElements.add(item.id);
                this.ensureElementRendered(item);
            } else {
                this.hideElement(item.id);
            }
        });

        // ç§»é™¤ä¸å¯è§çš„å…ƒç´ 
        this.visibleElements.forEach(elementId => {
            if (!newVisibleElements.has(elementId)) {
                this.removeElement(elementId);
            }
        });

        this.visibleElements = newVisibleElements;
    }

    isElementVisible(item) {
        const elementBounds = this.getElementBounds(item);

        return (
            elementBounds.x < this.viewport.x + this.viewport.width &&
            elementBounds.x + elementBounds.width > this.viewport.x &&
            elementBounds.y < this.viewport.y + this.viewport.height &&
            elementBounds.y + elementBounds.height > this.viewport.y
        );
    }

    getElementBounds(item) {
        // è®¡ç®—å…ƒç´ è¾¹ç•Œ
        return {
            x: item.x || 0,
            y: item.y || 0,
            width: item.width || 50,
            height: item.height || 50
        };
    }

    ensureElementRendered(item) {
        if (!this.elementPool.has(item.id)) {
            const element = this.createElement(item);
            this.elementPool.set(item.id, element);
            this.container.appendChild(element);
        }
    }

    hideElement(elementId) {
        const element = this.elementPool.get(elementId);
        if (element) {
            element.style.display = 'none';
        }
    }

    removeElement(elementId) {
        const element = this.elementPool.get(elementId);
        if (element) {
            this.container.removeChild(element);
            this.elementPool.delete(elementId);
        }
    }
}
```

### 5.2. å†…å­˜ç®¡ç†

```javascript
// å†…å­˜ç®¡ç†ç³»ç»Ÿ
class MemoryManager {
    constructor() {
        this.cache = new Map();
        this.cacheSize = 0;
        this.maxCacheSize = 50 * 1024 * 1024; // 50MB
        this.accessCount = new Map();

        this.setupMemoryMonitoring();
    }

    setupMemoryMonitoring() {
        // ç›‘æ§å†…å­˜ä½¿ç”¨
        setInterval(() => {
            this.checkMemoryUsage();
        }, 5000);
    }

    checkMemoryUsage() {
        if (this.cacheSize > this.maxCacheSize) {
            this.cleanupCache();
        }
    }

    cleanupCache() {
        // LRUç¼“å­˜æ¸…ç†
        const entries = Array.from(this.cache.entries());
        entries.sort((a, b) => {
            const countA = this.accessCount.get(a[0]) || 0;
            const countB = this.accessCount.get(b[0]) || 0;
            return countA - countB;
        });

        // ç§»é™¤æœ€ä¸å¸¸ç”¨çš„ç¼“å­˜é¡¹
        const itemsToRemove = Math.floor(entries.length * 0.3);
        for (let i = 0; i < itemsToRemove; i++) {
            const [key] = entries[i];
            this.removeFromCache(key);
        }
    }

    addToCache(key, value) {
        const size = this.estimateSize(value);

        if (this.cacheSize + size > this.maxCacheSize) {
            this.cleanupCache();
        }

        this.cache.set(key, value);
        this.cacheSize += size;
        this.accessCount.set(key, 0);
    }

    getFromCache(key) {
        const value = this.cache.get(key);
        if (value) {
            const count = this.accessCount.get(key) || 0;
            this.accessCount.set(key, count + 1);
        }
        return value;
    }

    removeFromCache(key) {
        const value = this.cache.get(key);
        if (value) {
            const size = this.estimateSize(value);
            this.cacheSize -= size;
            this.cache.delete(key);
            this.accessCount.delete(key);
        }
    }

    estimateSize(obj) {
        // ç®€å•çš„å¤§å°ä¼°ç®—
        const str = JSON.stringify(obj);
        return str.length * 2; // å‡è®¾æ¯ä¸ªå­—ç¬¦2å­—èŠ‚
    }
}
```

## 6. åº”ç”¨æ¡ˆä¾‹

### 6.1. çŸ¥è¯†å›¾è°±æµè§ˆå™¨

```javascript
// çŸ¥è¯†å›¾è°±äº¤äº’å¼æµè§ˆå™¨
class KnowledgeGraphBrowser {
    constructor(container, graphData) {
        this.container = container;
        this.graphData = graphData;
        this.selectedNode = null;
        this.highlightedPath = [];

        this.initBrowser();
    }

    initBrowser() {
        // åˆ›å»ºä¸»è§†å›¾
        this.createMainView();

        // åˆ›å»ºä¾§è¾¹æ 
        this.createSidebar();

        // åˆ›å»ºè¯¦æƒ…é¢æ¿
        this.createDetailPanel();

        // ç»‘å®šäº‹ä»¶
        this.bindEvents();
    }

    createMainView() {
        this.mainView = document.createElement('div');
        this.mainView.className = 'main-view';
        this.mainView.style.cssText = `
            flex: 1;
            position: relative;
            overflow: hidden;
        `;

        // åˆ›å»ºå›¾å½¢æ¸²æŸ“åŒºåŸŸ
        this.graphContainer = document.createElement('div');
        this.graphContainer.className = 'graph-container';
        this.mainView.appendChild(this.graphContainer);

        this.container.appendChild(this.mainView);
    }

    createSidebar() {
        this.sidebar = document.createElement('div');
        this.sidebar.className = 'sidebar';
        this.sidebar.style.cssText = `
            width: 300px;
            background: #f5f5f5;
            border-right: 1px solid #ddd;
            overflow-y: auto;
        `;

        // æ·»åŠ æœç´¢æ¡†
        this.addSearchBox();

        // æ·»åŠ è¿‡æ»¤å™¨
        this.addFilters();

        // æ·»åŠ ç»Ÿè®¡ä¿¡æ¯
        this.addStatistics();

        this.container.appendChild(this.sidebar);
    }

    createDetailPanel() {
        this.detailPanel = document.createElement('div');
        this.detailPanel.className = 'detail-panel';
        this.detailPanel.style.cssText = `
            position: absolute;
            right: 0;
            top: 0;
            width: 400px;
            height: 100%;
            background: white;
            border-left: 1px solid #ddd;
            transform: translateX(100%);
            transition: transform 0.3s;
            z-index: 1000;
        `;

        this.container.appendChild(this.detailPanel);
    }

    addSearchBox() {
        const searchBox = document.createElement('div');
        searchBox.className = 'search-box';
        searchBox.innerHTML = `
            <input type="text" placeholder="æœç´¢å®ä½“..." id="searchInput">
            <button id="searchBtn">æœç´¢</button>
        `;

        searchBox.querySelector('#searchBtn').addEventListener('click', () => {
            const query = searchBox.querySelector('#searchInput').value;
            this.searchEntities(query);
        });

        this.sidebar.appendChild(searchBox);
    }

    addFilters() {
        const filters = document.createElement('div');
        filters.className = 'filters';
        filters.innerHTML = `
            <h3>è¿‡æ»¤å™¨</h3>
            <div class="filter-group">
                <label>
                    <input type="checkbox" id="filterPerson" checked>
                    äººå‘˜
                </label>
                <label>
                    <input type="checkbox" id="filterCompany" checked>
                    å…¬å¸
                </label>
                <label>
                    <input type="checkbox" id="filterLocation" checked>
                    åœ°ç‚¹
                </label>
            </div>
        `;

        filters.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                this.applyFilters();
            });
        });

        this.sidebar.appendChild(filters);
    }

    addStatistics() {
        const stats = document.createElement('div');
        stats.className = 'statistics';
        stats.innerHTML = `
            <h3>ç»Ÿè®¡ä¿¡æ¯</h3>
            <div class="stat-item">
                <span>èŠ‚ç‚¹æ•°é‡:</span>
                <span id="nodeCount">0</span>
            </div>
            <div class="stat-item">
                <span>è¾¹æ•°é‡:</span>
                <span id="edgeCount">0</span>
            </div>
            <div class="stat-item">
                <span>é€‰ä¸­èŠ‚ç‚¹:</span>
                <span id="selectedCount">0</span>
            </div>
        `;

        this.sidebar.appendChild(stats);
        this.updateStatistics();
    }

    bindEvents() {
        // èŠ‚ç‚¹ç‚¹å‡»äº‹ä»¶
        this.graphContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('node')) {
                this.selectNode(e.target.dataset.nodeId);
            }
        });

        // èŠ‚ç‚¹æ‚¬åœäº‹ä»¶
        this.graphContainer.addEventListener('mouseover', (e) => {
            if (e.target.classList.contains('node')) {
                this.highlightNode(e.target.dataset.nodeId);
            }
        });

        // èŠ‚ç‚¹ç¦»å¼€äº‹ä»¶
        this.graphContainer.addEventListener('mouseout', (e) => {
            if (e.target.classList.contains('node')) {
                this.unhighlightNode(e.target.dataset.nodeId);
            }
        });
    }

    selectNode(nodeId) {
        this.selectedNode = nodeId;
        this.showNodeDetails(nodeId);
        this.highlightConnectedNodes(nodeId);
        this.updateStatistics();
    }

    showNodeDetails(nodeId) {
        const node = this.graphData.nodes.find(n => n.id === nodeId);
        if (node) {
            this.detailPanel.innerHTML = `
                <div class="detail-header">
                    <h2>${node.name}</h2>
                    <button class="close-btn" onclick="this.parentElement.parentElement.style.transform='translateX(100%)'">Ã—</button>
                </div>
                <div class="detail-content">
                    <div class="detail-section">
                        <h3>åŸºæœ¬ä¿¡æ¯</h3>
                        <p><strong>ç±»å‹:</strong> ${node.type}</p>
                        <p><strong>ID:</strong> ${node.id}</p>
                        ${node.description ? `<p><strong>æè¿°:</strong> ${node.description}</p>` : ''}
                    </div>
                    <div class="detail-section">
                        <h3>è¿æ¥å…³ç³»</h3>
                        <div id="connections"></div>
                    </div>
                </div>
            `;

            this.detailPanel.style.transform = 'translateX(0)';
            this.loadNodeConnections(nodeId);
        }
    }

    loadNodeConnections(nodeId) {
        const connections = this.graphData.edges.filter(edge =>
            edge.source === nodeId || edge.target === nodeId
        );

        const connectionsContainer = this.detailPanel.querySelector('#connections');
        connectionsContainer.innerHTML = connections.map(edge => {
            const otherNode = edge.source === nodeId ? edge.target : edge.source;
            const node = this.graphData.nodes.find(n => n.id === otherNode);
            return `
                <div class="connection-item">
                    <span class="connection-type">${edge.type}</span>
                    <span class="connection-target">${node ? node.name : otherNode}</span>
                </div>
            `;
        }).join('');
    }

    highlightConnectedNodes(nodeId) {
        // é«˜äº®è¿æ¥çš„èŠ‚ç‚¹
        const connectedEdges = this.graphData.edges.filter(edge =>
            edge.source === nodeId || edge.target === nodeId
        );

        connectedEdges.forEach(edge => {
            const edgeElement = this.graphContainer.querySelector(`[data-edge-id="${edge.id}"]`);
            if (edgeElement) {
                edgeElement.classList.add('highlighted');
            }
        });
    }

    searchEntities(query) {
        const results = this.graphData.nodes.filter(node =>
            node.name.toLowerCase().includes(query.toLowerCase()) ||
            (node.description && node.description.toLowerCase().includes(query.toLowerCase()))
        );

        this.showSearchResults(results);
    }

    showSearchResults(results) {
        const resultsContainer = document.createElement('div');
        resultsContainer.className = 'search-results';
        resultsContainer.innerHTML = `
            <h3>æœç´¢ç»“æœ (${results.length})</h3>
            ${results.map(node => `
                <div class="search-result-item" onclick="this.parentElement.parentElement.remove(); this.selectNode('${node.id}')">
                    <strong>${node.name}</strong>
                    <span class="node-type">${node.type}</span>
                </div>
            `).join('')}
        `;

        this.sidebar.appendChild(resultsContainer);
    }

    updateStatistics() {
        const nodeCount = this.graphData.nodes.length;
        const edgeCount = this.graphData.edges.length;
        const selectedCount = this.selectedNode ? 1 : 0;

        this.sidebar.querySelector('#nodeCount').textContent = nodeCount;
        this.sidebar.querySelector('#edgeCount').textContent = edgeCount;
        this.sidebar.querySelector('#selectedCount').textContent = selectedCount;
    }
}
```

## 7. å·¥å…·ä¸å¹³å°

### 7.1. å‰ç«¯æ¡†æ¶

1. **D3.js**ï¼šæ•°æ®é©±åŠ¨æ–‡æ¡£
2. **Three.js**ï¼š3Då›¾å½¢åº“
3. **PixiJS**ï¼š2Dæ¸²æŸ“å¼•æ“
4. **Canvas API**ï¼šåŸç”Ÿç”»å¸ƒAPI

### 7.2. å¯è§†åŒ–åº“

1. **Vis.js**ï¼šåŠ¨æ€å¯è§†åŒ–åº“
2. **Cytoscape.js**ï¼šå›¾è®ºå¯è§†åŒ–
3. **Sigma.js**ï¼šå›¾å½¢å¯è§†åŒ–
4. **Gephi**ï¼šç½‘ç»œåˆ†æå¹³å°

### 7.3. äº¤äº’æ¡†æ¶

1. **React**ï¼šç”¨æˆ·ç•Œé¢åº“
2. **Vue.js**ï¼šæ¸è¿›å¼æ¡†æ¶
3. **Angular**ï¼šå®Œæ•´æ¡†æ¶
4. **Svelte**ï¼šç¼–è¯‘æ—¶æ¡†æ¶

## 8. å‘å±•è¶‹åŠ¿

### 8.1. æŠ€æœ¯è¶‹åŠ¿

1. **WebGLåŠ é€Ÿ**ï¼šç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“
2. **WebAssembly**ï¼šé«˜æ€§èƒ½è®¡ç®—
3. **VR/ARé›†æˆ**ï¼šæ²‰æµ¸å¼å¯è§†åŒ–
4. **AIè¾…åŠ©äº¤äº’**ï¼šæ™ºèƒ½äº¤äº’è®¾è®¡

### 8.2. åº”ç”¨è¶‹åŠ¿

1. **å®æ—¶åä½œ**ï¼šå¤šäººåŒæ—¶ç¼–è¾‘
2. **ç§»åŠ¨ç«¯ä¼˜åŒ–**ï¼šå“åº”å¼è®¾è®¡
3. **æ— éšœç¢è®¿é—®**ï¼šåŒ…å®¹æ€§è®¾è®¡
4. **æ•°æ®éšç§**ï¼šå®‰å…¨å¯è§†åŒ–

## 9. å­¦ä¹ èµ„æº

### 9.1. ç»å…¸æ•™æ

1. **ã€ŠInteractive Data Visualizationã€‹** - äº¤äº’å¼æ•°æ®å¯è§†åŒ–
2. **ã€ŠVisualization Analysis and Designã€‹** - å¯è§†åŒ–åˆ†æä¸è®¾è®¡
3. **ã€ŠThe Visual Display of Quantitative Informationã€‹** - å®šé‡ä¿¡æ¯å¯è§†åŒ–

### 9.2. åœ¨çº¿èµ„æº

1. **Observable**ï¼šäº¤äº’å¼ç¬”è®°æœ¬å¹³å°
2. **D3 Gallery**ï¼šD3.jsç¤ºä¾‹åº“
3. **Visualization Universe**ï¼šå¯è§†åŒ–é¡¹ç›®é›†åˆ

### 9.3. å®è·µé¡¹ç›®

1. **æ•°æ®ä»ªè¡¨æ¿**ï¼šæ„å»ºäº¤äº’å¼ä»ªè¡¨æ¿
2. **æ•…äº‹åŒ–å¯è§†åŒ–**ï¼šåˆ›å»ºæ•°æ®æ•…äº‹
3. **å®æ—¶ç›‘æ§ç³»ç»Ÿ**ï¼šå¼€å‘å®æ—¶æ•°æ®ç›‘æ§

## 10. å¤šè¡¨å¾

äº¤äº’å¼å¯è§†åŒ–æ”¯æŒå¤šç§è¡¨å¾æ–¹å¼ï¼ŒåŒ…æ‹¬ï¼š

- åŠ¨æ€å›¾å½¢/åŠ¨ç”»ï¼ˆäº¤äº’èŠ‚ç‚¹ã€åŠ¨æ€å¸ƒå±€ï¼‰
- äº‹ä»¶æµ/çŠ¶æ€æœºï¼ˆäº¤äº’é€»è¾‘ï¼‰
- å‘é‡/çŸ©é˜µï¼ˆåŠ¨æ€åµŒå…¥ã€å¸ƒå±€ï¼‰
- è‡ªç„¶è¯­è¨€ä¸å›¾åƒ
è¿™äº›è¡¨å¾å¯äº’æ˜ ï¼Œæå‡äº¤äº’è¡¨è¾¾åŠ›ã€‚

## 11. å½¢å¼åŒ–è¯­ä¹‰

- è¯­ä¹‰åŸŸï¼š$D$ï¼Œå¦‚äº¤äº’å¯¹è±¡é›†ã€äº‹ä»¶é›†ã€çŠ¶æ€ç©ºé—´
- è§£é‡Šå‡½æ•°ï¼š$I: S \to D$ï¼Œå°†äº¤äº’ç»“æ„/ç¬¦å·æ˜ å°„åˆ°å…·ä½“äº¤äº’å¯¹è±¡
- è¯­ä¹‰ä¸€è‡´æ€§ï¼šæ¯ä¸ªäº¤äº’å…ƒç´ /äº‹ä»¶åœ¨$D$ä¸­æœ‰æ˜ç¡®å®šä¹‰

## 12. å½¢å¼åŒ–è¯­æ³•ä¸è¯æ˜

- è¯­æ³•è§„åˆ™ï¼šå¦‚äº¤äº’å…ƒç´ äº§ç”Ÿå¼ã€äº‹ä»¶è§„åˆ™ã€çŠ¶æ€è½¬ç§»è§„åˆ™
- **å®šç†**ï¼šäº¤äº’å¼å¯è§†åŒ–çš„è¯­æ³•ç³»ç»Ÿå…·ä¸€è‡´æ€§ä¸å¯æ‰©å±•æ€§ã€‚
- **è¯æ˜**ï¼šç”±äº¤äº’è¯­æ³•ä¸è§„åˆ™é€’å½’å®šä¹‰ï¼Œä¿è¯ç³»ç»Ÿä¸€è‡´ä¸å¯æ‰©å±•ã€‚
