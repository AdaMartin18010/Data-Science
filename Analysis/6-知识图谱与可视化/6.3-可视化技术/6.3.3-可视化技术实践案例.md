# å¯è§†åŒ–æŠ€æœ¯å®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [å¯è§†åŒ–æŠ€æœ¯å®è·µæ¡ˆä¾‹](#å¯è§†åŒ–æŠ€æœ¯å®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
  - [2. ç½‘ç»œå›¾å¯è§†åŒ–](#2-ç½‘ç»œå›¾å¯è§†åŒ–)
    - [2.1. åŸºç¡€ç½‘ç»œå›¾å¯è§†åŒ–](#21-åŸºç¡€ç½‘ç»œå›¾å¯è§†åŒ–)
  - [3. åˆ†å±‚ç½‘ç»œå›¾å¯è§†åŒ–](#3-åˆ†å±‚ç½‘ç»œå›¾å¯è§†åŒ–)
  - [4. ç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–](#4-ç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–)
    - [4.1. çŸ¥è¯†å›¾è°±ç»Ÿè®¡å›¾è¡¨](#41-çŸ¥è¯†å›¾è°±ç»Ÿè®¡å›¾è¡¨)
  - [5. æ—¶é—´åºåˆ—å¯è§†åŒ–](#5-æ—¶é—´åºåˆ—å¯è§†åŒ–)
  - [6. äº¤äº’å¼å¯è§†åŒ–](#6-äº¤äº’å¼å¯è§†åŒ–)
    - [6.1. åŠ¨æ€äº¤äº’å¼ç½‘ç»œå›¾](#61-åŠ¨æ€äº¤äº’å¼ç½‘ç»œå›¾)
  - [7. æ€»ç»“](#7-æ€»ç»“)

---


## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›çŸ¥è¯†å›¾è°±å¯è§†åŒ–æŠ€æœ¯çš„å®è·µåº”ç”¨æ¡ˆä¾‹ï¼Œæ¶µç›–ç½‘ç»œå›¾å¯è§†åŒ–ã€ç»Ÿè®¡å›¾è¡¨ã€äº¤äº’å¼å¯è§†åŒ–ç­‰å®é™…åœºæ™¯ã€‚

## 2. ç½‘ç»œå›¾å¯è§†åŒ–

### 2.1. åŸºç¡€ç½‘ç»œå›¾å¯è§†åŒ–

```python
import networkx as nx
import matplotlib.pyplot as plt
import plotly.graph_objects as go
import plotly.express as px
from typing import Dict, List, Tuple
import numpy as np

class NetworkVisualizer:
    def __init__(self):
        self.graph = nx.Graph()
        self.node_colors = {}
        self.edge_colors = {}
        self.node_sizes = {}

    def add_node(self, node_id: str, node_type: str = "default",
                 attributes: Dict = None):
        """æ·»åŠ èŠ‚ç‚¹"""
        self.graph.add_node(node_id,
                           type=node_type,
                           **(attributes or {}))

# è®¾ç½®é»˜è®¤é¢œè‰²å’Œå¤§å°
        if node_type == "person":
            self.node_colors[node_id] = "lightblue"
            self.node_sizes[node_id] = 500
        elif node_type == "organization":
            self.node_colors[node_id] = "lightgreen"
            self.node_sizes[node_id] = 800
        elif node_type == "concept":
            self.node_colors[node_id] = "lightcoral"
            self.node_sizes[node_id] = 400
        else:
            self.node_colors[node_id] = "lightgray"
            self.node_sizes[node_id] = 300

    def add_edge(self, node1: str, node2: str,
                 relation_type: str = "default", weight: float = 1.0):
        """æ·»åŠ è¾¹"""
        self.graph.add_edge(node1, node2,
                           relation=relation_type,
                           weight=weight)

# è®¾ç½®è¾¹çš„é¢œè‰²
        if relation_type == "friend":
            self.edge_colors[(node1, node2)] = "blue"
        elif relation_type == "work":
            self.edge_colors[(node1, node2)] = "green"
        elif relation_type == "study":
            self.edge_colors[(node1, node2)] = "orange"
        else:
            self.edge_colors[(node1, node2)] = "gray"

    def visualize_matplotlib(self, layout: str = "spring",
                           figsize: Tuple[int, int] = (12, 8)):
        """ä½¿ç”¨matplotlibå¯è§†åŒ–"""
        plt.figure(figsize=figsize)

# é€‰æ‹©å¸ƒå±€ç®—æ³•
        if layout == "spring":
            pos = nx.spring_layout(self.graph)
        elif layout == "circular":
            pos = nx.circular_layout(self.graph)
        elif layout == "random":
            pos = nx.random_layout(self.graph)
        elif layout == "shell":
            pos = nx.shell_layout(self.graph)
        else:
            pos = nx.spring_layout(self.graph)

# å‡†å¤‡èŠ‚ç‚¹é¢œè‰²å’Œå¤§å°
        node_colors = [self.node_colors.get(node, "lightgray")
                      for node in self.graph.nodes()]
        node_sizes = [self.node_sizes.get(node, 300)
                     for node in self.graph.nodes()]

# å‡†å¤‡è¾¹é¢œè‰²
        edge_colors = [self.edge_colors.get(edge, "gray")
                      for edge in self.graph.edges()]

# ç»˜åˆ¶ç½‘ç»œ
        nx.draw(self.graph, pos,
                node_color=node_colors,
                node_size=node_sizes,
                edge_color=edge_colors,
                with_labels=True,
                font_size=8,
                font_weight='bold',
                alpha=0.8)

        plt.title("çŸ¥è¯†å›¾è°±ç½‘ç»œå¯è§†åŒ–")
        plt.axis('off')
        plt.show()

    def visualize_plotly(self, layout: str = "spring"):
        """ä½¿ç”¨plotlyäº¤äº’å¼å¯è§†åŒ–"""
# é€‰æ‹©å¸ƒå±€ç®—æ³•
        if layout == "spring":
            pos = nx.spring_layout(self.graph)
        elif layout == "circular":
            pos = nx.circular_layout(self.graph)
        else:
            pos = nx.spring_layout(self.graph)

# å‡†å¤‡èŠ‚ç‚¹æ•°æ®
        node_x = []
        node_y = []
        node_text = []
        node_colors = []
        node_sizes = []

        for node in self.graph.nodes():
            x, y = pos[node]
            node_x.append(x)
            node_y.append(y)
            node_text.append(f"{node}<br>ç±»å‹: {self.graph.nodes[node].get('type', 'default')}")
            node_colors.append(self.node_colors.get(node, "lightgray"))
            node_sizes.append(self.node_sizes.get(node, 300))

# å‡†å¤‡è¾¹æ•°æ®
        edge_x = []
        edge_y = []
        edge_text = []

        for edge in self.graph.edges():
            x0, y0 = pos[edge[0]]
            x1, y1 = pos[edge[1]]
            edge_x.extend([x0, x1, None])
            edge_y.extend([y0, y1, None])
            edge_text.append(f"{edge[0]} -> {edge[1]}<br>å…³ç³»: {self.graph.edges[edge]['relation']}")

# åˆ›å»ºå›¾å½¢
        fig = go.Figure()

# æ·»åŠ è¾¹
        fig.add_trace(go.Scatter(
            x=edge_x, y=edge_y,
            line=dict(width=1, color='gray'),
            hoverinfo='none',
            mode='lines'))

# æ·»åŠ èŠ‚ç‚¹
        fig.add_trace(go.Scatter(
            x=node_x, y=node_y,
            mode='markers+text',
            hoverinfo='text',
            text=node_text,
            textposition="middle center",
            marker=dict(
                size=node_sizes,
                color=node_colors,
                line=dict(width=2, color='white')
            )))

        fig.update_layout(
            title="çŸ¥è¯†å›¾è°±äº¤äº’å¼å¯è§†åŒ–",
            showlegend=False,
            hovermode='closest',
            margin=dict(b=20,l=5,r=5,t=40),
            xaxis=dict(showgrid=False, zeroline=False, showticklabels=False),
            yaxis=dict(showgrid=False, zeroline=False, showticklabels=False)
        )

        fig.show()

# ä½¿ç”¨ç¤ºä¾‹
visualizer = NetworkVisualizer()

# æ·»åŠ èŠ‚ç‚¹
visualizer.add_node("å¼ ä¸‰", "person", {"age": 30, "department": "æŠ€æœ¯éƒ¨"})
visualizer.add_node("æå››", "person", {"age": 28, "department": "æ•°æ®éƒ¨"})
visualizer.add_node("ç‹äº”", "person", {"age": 35, "department": "æŠ€æœ¯éƒ¨"})
visualizer.add_node("å…¬å¸A", "organization", {"industry": "ç§‘æŠ€"})
visualizer.add_node("æœºå™¨å­¦ä¹ ", "concept", {"category": "AI"})

# æ·»åŠ è¾¹
visualizer.add_edge("å¼ ä¸‰", "æå››", "friend", 0.8)
visualizer.add_edge("å¼ ä¸‰", "ç‹äº”", "work", 0.9)
visualizer.add_edge("æå››", "æœºå™¨å­¦ä¹ ", "study", 0.7)
visualizer.add_edge("å¼ ä¸‰", "å…¬å¸A", "work", 0.9)

# å¯è§†åŒ–
visualizer.visualize_matplotlib("spring", (10, 8))
```

## 3. åˆ†å±‚ç½‘ç»œå›¾å¯è§†åŒ–

```python
class HierarchicalNetworkVisualizer:
    def __init__(self):
        self.graph = nx.DiGraph()
        self.hierarchy_levels = {}
        self.node_positions = {}

    def add_hierarchical_node(self, node_id: str, level: int,
                             node_type: str = "default", attributes: Dict = None):
        """æ·»åŠ åˆ†å±‚èŠ‚ç‚¹"""
        self.graph.add_node(node_id,
                           level=level,
                           type=node_type,
                           **(attributes or {}))

        if level not in self.hierarchy_levels:
            self.hierarchy_levels[level] = []
        self.hierarchy_levels[level].append(node_id)

    def add_hierarchical_edge(self, from_node: str, to_node: str,
                             relation_type: str = "default"):
        """æ·»åŠ åˆ†å±‚è¾¹"""
        self.graph.add_edge(from_node, to_node, relation=relation_type)

    def calculate_hierarchical_layout(self, level_spacing: float = 2.0):
        """è®¡ç®—åˆ†å±‚å¸ƒå±€"""
        max_level = max(self.hierarchy_levels.keys())

        for level in self.hierarchy_levels:
            nodes = self.hierarchy_levels[level]
            y_pos = (max_level - level) * level_spacing

            for i, node in enumerate(nodes):
                x_pos = (i - len(nodes) / 2) * 1.5
                self.node_positions[node] = (x_pos, y_pos)

    def visualize_hierarchical(self, figsize: Tuple[int, int] = (12, 10)):
        """å¯è§†åŒ–åˆ†å±‚ç½‘ç»œ"""
        self.calculate_hierarchical_layout()

        plt.figure(figsize=figsize)

# ç»˜åˆ¶è¾¹
        for edge in self.graph.edges():
            x1, y1 = self.node_positions[edge[0]]
            x2, y2 = self.node_positions[edge[1]]
            plt.plot([x1, x2], [y1, y2], 'gray', alpha=0.6, linewidth=1)

# ç»˜åˆ¶èŠ‚ç‚¹
        for node in self.graph.nodes():
            x, y = self.node_positions[node]
            node_type = self.graph.nodes[node].get('type', 'default')

            if node_type == "root":
                color = "red"
                size = 1000
            elif node_type == "branch":
                color = "orange"
                size = 600
            elif node_type == "leaf":
                color = "lightblue"
                size = 400
            else:
                color = "lightgray"
                size = 500

            plt.scatter(x, y, c=color, s=size, alpha=0.8, edgecolors='black')
            plt.text(x, y, node, ha='center', va='center', fontsize=8, fontweight='bold')

        plt.title("åˆ†å±‚çŸ¥è¯†å›¾è°±å¯è§†åŒ–")
        plt.axis('off')
        plt.show()

# ä½¿ç”¨ç¤ºä¾‹
hierarchical_viz = HierarchicalNetworkVisualizer()

# æ·»åŠ åˆ†å±‚èŠ‚ç‚¹
hierarchical_viz.add_hierarchical_node("AI", 0, "root")
hierarchical_viz.add_hierarchical_node("æœºå™¨å­¦ä¹ ", 1, "branch")
hierarchical_viz.add_hierarchical_node("æ·±åº¦å­¦ä¹ ", 1, "branch")
hierarchical_viz.add_hierarchical_node("ç›‘ç£å­¦ä¹ ", 2, "leaf")
hierarchical_viz.add_hierarchical_node("æ— ç›‘ç£å­¦ä¹ ", 2, "leaf")
hierarchical_viz.add_hierarchical_node("CNN", 2, "leaf")
hierarchical_viz.add_hierarchical_node("RNN", 2, "leaf")

# æ·»åŠ åˆ†å±‚è¾¹
hierarchical_viz.add_hierarchical_edge("AI", "æœºå™¨å­¦ä¹ ")
hierarchical_viz.add_hierarchical_edge("AI", "æ·±åº¦å­¦ä¹ ")
hierarchical_viz.add_hierarchical_edge("æœºå™¨å­¦ä¹ ", "ç›‘ç£å­¦ä¹ ")
hierarchical_viz.add_hierarchical_edge("æœºå™¨å­¦ä¹ ", "æ— ç›‘ç£å­¦ä¹ ")
hierarchical_viz.add_hierarchical_edge("æ·±åº¦å­¦ä¹ ", "CNN")
hierarchical_viz.add_hierarchical_edge("æ·±åº¦å­¦ä¹ ", "RNN")

# å¯è§†åŒ–
hierarchical_viz.visualize_hierarchical()
```

## 4. ç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–

### 4.1. çŸ¥è¯†å›¾è°±ç»Ÿè®¡å›¾è¡¨

```python
import pandas as pd
import seaborn as sns
from collections import Counter

class KnowledgeGraphAnalytics:
    def __init__(self, graph: nx.Graph):
        self.graph = graph
        self.analytics_data = {}

    def calculate_basic_statistics(self):
        """è®¡ç®—åŸºç¡€ç»Ÿè®¡ä¿¡æ¯"""
        self.analytics_data['basic_stats'] = {
            'total_nodes': self.graph.number_of_nodes(),
            'total_edges': self.graph.number_of_edges(),
            'density': nx.density(self.graph),
            'average_degree': sum(dict(self.graph.degree()).values()) / self.graph.number_of_nodes(),
            'connected_components': nx.number_connected_components(self.graph)
        }
        return self.analytics_data['basic_stats']

    def calculate_centrality_metrics(self):
        """è®¡ç®—ä¸­å¿ƒæ€§æŒ‡æ ‡"""
        self.analytics_data['centrality'] = {
            'degree_centrality': nx.degree_centrality(self.graph),
            'betweenness_centrality': nx.betweenness_centrality(self.graph),
            'closeness_centrality': nx.closeness_centrality(self.graph),
            'eigenvector_centrality': nx.eigenvector_centrality(self.graph, max_iter=1000)
        }
        return self.analytics_data['centrality']

    def analyze_node_types(self):
        """åˆ†æèŠ‚ç‚¹ç±»å‹åˆ†å¸ƒ"""
        node_types = [self.graph.nodes[node].get('type', 'unknown')
                     for node in self.graph.nodes()]
        type_counts = Counter(node_types)

        self.analytics_data['node_types'] = dict(type_counts)
        return self.analytics_data['node_types']

    def analyze_edge_types(self):
        """åˆ†æè¾¹ç±»å‹åˆ†å¸ƒ"""
        edge_types = [self.graph.edges[edge].get('relation', 'unknown')
                     for edge in self.graph.edges()]
        type_counts = Counter(edge_types)

        self.analytics_data['edge_types'] = dict(type_counts)
        return self.analytics_data['edge_types']

    def visualize_statistics(self):
        """å¯è§†åŒ–ç»Ÿè®¡ä¿¡æ¯"""
        fig, axes = plt.subplots(2, 2, figsize=(15, 12))

# 1. èŠ‚ç‚¹ç±»å‹åˆ†å¸ƒ
        node_types = self.analyze_node_types()
        axes[0, 0].pie(node_types.values(), labels=node_types.keys(), autopct='%1.1f%%')
        axes[0, 0].set_title('èŠ‚ç‚¹ç±»å‹åˆ†å¸ƒ')

# 2. è¾¹ç±»å‹åˆ†å¸ƒ
        edge_types = self.analyze_edge_types()
        axes[0, 1].bar(edge_types.keys(), edge_types.values())
        axes[0, 1].set_title('è¾¹ç±»å‹åˆ†å¸ƒ')
        axes[0, 1].tick_params(axis='x', rotation=45)

# 3. åº¦åˆ†å¸ƒ
        degrees = [d for n, d in self.graph.degree()]
        axes[1, 0].hist(degrees, bins=20, alpha=0.7)
        axes[1, 0].set_title('èŠ‚ç‚¹åº¦åˆ†å¸ƒ')
        axes[1, 0].set_xlabel('åº¦')
        axes[1, 0].set_ylabel('é¢‘æ¬¡')

# 4. ä¸­å¿ƒæ€§åˆ†å¸ƒ
        centrality = self.calculate_centrality_metrics()
        degree_centrality = list(centrality['degree_centrality'].values())
        axes[1, 1].hist(degree_centrality, bins=20, alpha=0.7)
        axes[1, 1].set_title('åº¦ä¸­å¿ƒæ€§åˆ†å¸ƒ')
        axes[1, 1].set_xlabel('åº¦ä¸­å¿ƒæ€§')
        axes[1, 1].set_ylabel('é¢‘æ¬¡')

        plt.tight_layout()
        plt.show()

    def create_summary_dashboard(self):
        """åˆ›å»ºæ±‡æ€»ä»ªè¡¨æ¿"""
        basic_stats = self.calculate_basic_statistics()

# åˆ›å»ºæ±‡æ€»è¡¨æ ¼
        summary_data = {
            'æŒ‡æ ‡': ['æ€»èŠ‚ç‚¹æ•°', 'æ€»è¾¹æ•°', 'ç½‘ç»œå¯†åº¦', 'å¹³å‡åº¦', 'è¿é€šåˆ†é‡æ•°'],
            'æ•°å€¼': [
                basic_stats['total_nodes'],
                basic_stats['total_edges'],
                f"{basic_stats['density']:.4f}",
                f"{basic_stats['average_degree']:.2f}",
                basic_stats['connected_components']
            ]
        }

        df = pd.DataFrame(summary_data)

# åˆ›å»ºå¯è§†åŒ–
        fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))

# å·¦ä¾§ï¼šæ±‡æ€»è¡¨æ ¼
        ax1.axis('tight')
        ax1.axis('off')
        table = ax1.table(cellText=df.values, colLabels=df.columns,
                         cellLoc='center', loc='center')
        table.auto_set_font_size(False)
        table.set_fontsize(12)
        table.scale(1.2, 1.5)
        ax1.set_title('çŸ¥è¯†å›¾è°±ç»Ÿè®¡æ‘˜è¦', fontsize=16, fontweight='bold')

# å³ä¾§ï¼šç½‘ç»œç»“æ„å›¾
        pos = nx.spring_layout(self.graph)
        nx.draw(self.graph, pos, ax=ax2,
                node_color='lightblue',
                node_size=300,
                with_labels=True,
                font_size=8)
        ax2.set_title('ç½‘ç»œç»“æ„å›¾', fontsize=16, fontweight='bold')

        plt.tight_layout()
        plt.show()

# ä½¿ç”¨ç¤ºä¾‹
# åˆ›å»ºç¤ºä¾‹å›¾
example_graph = nx.Graph()
example_graph.add_nodes_from(['A', 'B', 'C', 'D', 'E', 'F'])
example_graph.add_edges_from([('A', 'B'), ('A', 'C'), ('B', 'D'),
                             ('C', 'E'), ('D', 'F'), ('E', 'F')])

# æ·»åŠ èŠ‚ç‚¹å±æ€§
for node in example_graph.nodes():
    example_graph.nodes[node]['type'] = np.random.choice(['person', 'concept', 'organization'])

# æ·»åŠ è¾¹å±æ€§
for edge in example_graph.edges():
    example_graph.edges[edge]['relation'] = np.random.choice(['friend', 'work', 'study'])

# åˆ›å»ºåˆ†æå™¨
analytics = KnowledgeGraphAnalytics(example_graph)

# å¯è§†åŒ–ç»Ÿè®¡ä¿¡æ¯
analytics.visualize_statistics()
analytics.create_summary_dashboard()
```

## 5. æ—¶é—´åºåˆ—å¯è§†åŒ–

```python
class TemporalKnowledgeGraphVisualizer:
    def __init__(self):
        self.temporal_data = []
        self.graph_evolution = {}

    def add_temporal_event(self, timestamp: str, event_type: str,
                          source: str, target: str, weight: float = 1.0):
        """æ·»åŠ æ—¶é—´äº‹ä»¶"""
        self.temporal_data.append({
            'timestamp': timestamp,
            'event_type': event_type,
            'source': source,
            'target': target,
            'weight': weight
        })

    def build_temporal_graph(self, time_window: str = 'D'):
        """æ„å»ºæ—¶é—´åºåˆ—å›¾"""
        df = pd.DataFrame(self.temporal_data)
        df['timestamp'] = pd.to_datetime(df['timestamp'])
        df = df.set_index('timestamp')

# æŒ‰æ—¶é—´çª—å£åˆ†ç»„
        grouped = df.groupby(pd.Grouper(freq=time_window))

        for time_period, group in grouped:
            if not group.empty:
                period_str = time_period.strftime('%Y-%m-%d')
                self.graph_evolution[period_str] = {
                    'events': len(group),
                    'unique_sources': group['source'].nunique(),
                    'unique_targets': group['target'].nunique(),
                    'total_weight': group['weight'].sum()
                }

    def visualize_temporal_evolution(self):
        """å¯è§†åŒ–æ—¶é—´æ¼”åŒ–"""
        if not self.graph_evolution:
            self.build_temporal_graph()

        df_evolution = pd.DataFrame.from_dict(self.graph_evolution, orient='index')
        df_evolution.index = pd.to_datetime(df_evolution.index)

        fig, axes = plt.subplots(2, 2, figsize=(15, 10))

# 1. äº‹ä»¶æ•°é‡æ—¶é—´åºåˆ—
        df_evolution['events'].plot(ax=axes[0, 0], marker='o')
        axes[0, 0].set_title('äº‹ä»¶æ•°é‡æ—¶é—´åºåˆ—')
        axes[0, 0].set_ylabel('äº‹ä»¶æ•°é‡')

# 2. èŠ‚ç‚¹æ•°é‡æ—¶é—´åºåˆ—
        df_evolution[['unique_sources', 'unique_targets']].plot(ax=axes[0, 1], marker='o')
        axes[0, 1].set_title('èŠ‚ç‚¹æ•°é‡æ—¶é—´åºåˆ—')
        axes[0, 1].set_ylabel('èŠ‚ç‚¹æ•°é‡')
        axes[0, 1].legend(['æºèŠ‚ç‚¹', 'ç›®æ ‡èŠ‚ç‚¹'])

# 3. æƒé‡æ€»å’Œæ—¶é—´åºåˆ—
        df_evolution['total_weight'].plot(ax=axes[1, 0], marker='o', color='green')
        axes[1, 0].set_title('æƒé‡æ€»å’Œæ—¶é—´åºåˆ—')
        axes[1, 0].set_ylabel('æƒé‡æ€»å’Œ')

# 4. äº‹ä»¶ç±»å‹åˆ†å¸ƒ
        df_temporal = pd.DataFrame(self.temporal_data)
        event_counts = df_temporal['event_type'].value_counts()
        axes[1, 1].pie(event_counts.values, labels=event_counts.index, autopct='%1.1f%%')
        axes[1, 1].set_title('äº‹ä»¶ç±»å‹åˆ†å¸ƒ')

        plt.tight_layout()
        plt.show()

# ä½¿ç”¨ç¤ºä¾‹
temporal_viz = TemporalKnowledgeGraphVisualizer()

# æ·»åŠ æ—¶é—´äº‹ä»¶
temporal_viz.add_temporal_event('2023-01-01', 'friend', 'å¼ ä¸‰', 'æå››', 0.8)
temporal_viz.add_temporal_event('2023-01-02', 'work', 'å¼ ä¸‰', 'ç‹äº”', 0.9)
temporal_viz.add_temporal_event('2023-01-03', 'study', 'æå››', 'æœºå™¨å­¦ä¹ ', 0.7)
temporal_viz.add_temporal_event('2023-01-04', 'friend', 'ç‹äº”', 'æå››', 0.6)
temporal_viz.add_temporal_event('2023-01-05', 'work', 'å¼ ä¸‰', 'å…¬å¸A', 0.9)

# å¯è§†åŒ–æ—¶é—´æ¼”åŒ–
temporal_viz.visualize_temporal_evolution()
```

## 6. äº¤äº’å¼å¯è§†åŒ–

### 6.1. åŠ¨æ€äº¤äº’å¼ç½‘ç»œå›¾

```python
class InteractiveNetworkVisualizer:
    def __init__(self):
        self.graph = nx.Graph()
        self.node_data = {}
        self.edge_data = {}

    def add_interactive_node(self, node_id: str, node_type: str,
                           attributes: Dict = None):
        """æ·»åŠ äº¤äº’å¼èŠ‚ç‚¹"""
        self.graph.add_node(node_id, type=node_type, **(attributes or {}))
        self.node_data[node_id] = {
            'id': node_id,
            'type': node_type,
            'attributes': attributes or {}
        }

    def add_interactive_edge(self, node1: str, node2: str,
                           relation_type: str, weight: float = 1.0):
        """æ·»åŠ äº¤äº’å¼è¾¹"""
        self.graph.add_edge(node1, node2, relation=relation_type, weight=weight)
        self.edge_data[(node1, node2)] = {
            'source': node1,
            'target': node2,
            'relation': relation_type,
            'weight': weight
        }

    def create_interactive_visualization(self):
        """åˆ›å»ºäº¤äº’å¼å¯è§†åŒ–"""
# è®¡ç®—å¸ƒå±€
        pos = nx.spring_layout(self.graph)

# å‡†å¤‡èŠ‚ç‚¹æ•°æ®
        node_trace = go.Scatter(
            x=[],
            y=[],
            text=[],
            mode='markers',
            hoverinfo='text',
            marker=dict(
                showscale=True,
                colorscale='YlGnBu',
                reversescale=True,
                color=[],
                size=[],
                colorbar=dict(
                    thickness=15,
                    title='èŠ‚ç‚¹è¿æ¥æ•°',
                    xanchor='left',
                    titleside='right'
                ),
                line_width=2))

# å‡†å¤‡è¾¹æ•°æ®
        edge_trace = go.Scatter(
            x=[],
            y=[],
            line=dict(width=0.5, color='#888'),
            hoverinfo='none',
            mode='lines')

# å¡«å……èŠ‚ç‚¹æ•°æ®
        for node in self.graph.nodes():
            x, y = pos[node]
            node_trace['x'] += tuple([x])
            node_trace['y'] += tuple([y])

# èŠ‚ç‚¹ä¿¡æ¯
            node_info = f"èŠ‚ç‚¹: {node}<br>ç±»å‹: {self.graph.nodes[node]['type']}"
            if 'attributes' in self.graph.nodes[node]:
                for key, value in self.graph.nodes[node]['attributes'].items():
                    node_info += f"<br>{key}: {value}"
            node_trace['text'] += tuple([node_info])

# èŠ‚ç‚¹é¢œè‰²å’Œå¤§å°
            node_adjacencies = list(self.graph.neighbors(node))
            node_trace['marker']['color'] += tuple([len(node_adjacencies)])
            node_trace['marker']['size'] += tuple([len(node_adjacencies) * 10 + 10])

# å¡«å……è¾¹æ•°æ®
        for edge in self.graph.edges():
            x0, y0 = pos[edge[0]]
            x1, y1 = pos[edge[1]]
            edge_trace['x'] += tuple([x0, x1, None])
            edge_trace['y'] += tuple([y0, y1, None])

# åˆ›å»ºå›¾å½¢
        fig = go.Figure(data=[edge_trace, node_trace],
                       layout=go.Layout(
                           title='äº¤äº’å¼çŸ¥è¯†å›¾è°±å¯è§†åŒ–',
                           titlefont_size=16,
                           showlegend=False,
                           hovermode='closest',
                           margin=dict(b=20,l=5,r=5,t=40),
                           annotations=[dict(
                               text="ç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯",
                               showarrow=False,
                               xref="paper", yref="paper",
                               x=0.005, y=-0.002,
                               xanchor='left', yanchor='bottom',
                               font=dict(size=14)
                           )],
                           xaxis=dict(showgrid=False, zeroline=False, showticklabels=False),
                           yaxis=dict(showgrid=False, zeroline=False, showticklabels=False))
                       )

        fig.show()

    def create_filterable_visualization(self):
        """åˆ›å»ºå¯è¿‡æ»¤çš„å¯è§†åŒ–"""
# è·å–æ‰€æœ‰èŠ‚ç‚¹ç±»å‹
        node_types = set(self.graph.nodes[node]['type'] for node in self.graph.nodes())

# åˆ›å»ºè¿‡æ»¤æŒ‰é’®
        buttons = []
        for node_type in node_types:
            buttons.append(
                dict(
                    label=node_type,
                    method="update",
                    args=[{"visible": [True if self.graph.nodes[node]['type'] == node_type
                                      else False for node in self.graph.nodes()]}]
                )
            )

# æ·»åŠ "æ˜¾ç¤ºå…¨éƒ¨"æŒ‰é’®
        buttons.append(
            dict(
                label="æ˜¾ç¤ºå…¨éƒ¨",
                method="update",
                args=[{"visible": [True] * len(self.graph.nodes())}]
            )
        )

# è®¡ç®—å¸ƒå±€
        pos = nx.spring_layout(self.graph)

# åˆ›å»ºèŠ‚ç‚¹è½¨è¿¹
        node_traces = []
        for node_type in node_types:
            node_trace = go.Scatter(
                x=[],
                y=[],
                text=[],
                mode='markers',
                name=node_type,
                hoverinfo='text',
                marker=dict(size=10),
                visible=True
            )

            for node in self.graph.nodes():
                if self.graph.nodes[node]['type'] == node_type:
                    x, y = pos[node]
                    node_trace['x'] += tuple([x])
                    node_trace['y'] += tuple([y])
                    node_trace['text'] += tuple([f"{node} ({node_type})"])

            node_traces.append(node_trace)

# åˆ›å»ºè¾¹è½¨è¿¹
        edge_trace = go.Scatter(
            x=[],
            y=[],
            line=dict(width=0.5, color='#888'),
            hoverinfo='none',
            mode='lines')

        for edge in self.graph.edges():
            x0, y0 = pos[edge[0]]
            x1, y1 = pos[edge[1]]
            edge_trace['x'] += tuple([x0, x1, None])
            edge_trace['y'] += tuple([y0, y1, None])

# åˆ›å»ºå›¾å½¢
        fig = go.Figure(data=[edge_trace] + node_traces,
                       layout=go.Layout(
                           title='å¯è¿‡æ»¤çš„çŸ¥è¯†å›¾è°±å¯è§†åŒ–',
                           titlefont_size=16,
                           showlegend=True,
                           hovermode='closest',
                           margin=dict(b=20,l=5,r=5,t=40),
                           updatemenus=[dict(
                               buttons=buttons,
                               direction="down",
                               showactive=True,
                               x=0.1,
                               xanchor="left",
                               y=1.1,
                               yanchor="top"
                           )],
                           xaxis=dict(showgrid=False, zeroline=False, showticklabels=False),
                           yaxis=dict(showgrid=False, zeroline=False, showticklabels=False))
                       )

        fig.show()

# ä½¿ç”¨ç¤ºä¾‹
interactive_viz = InteractiveNetworkVisualizer()

# æ·»åŠ èŠ‚ç‚¹
interactive_viz.add_interactive_node("å¼ ä¸‰", "person", {"age": 30, "department": "æŠ€æœ¯éƒ¨"})
interactive_viz.add_interactive_node("æå››", "person", {"age": 28, "department": "æ•°æ®éƒ¨"})
interactive_viz.add_interactive_node("ç‹äº”", "person", {"age": 35, "department": "æŠ€æœ¯éƒ¨"})
interactive_viz.add_interactive_node("å…¬å¸A", "organization", {"industry": "ç§‘æŠ€"})
interactive_viz.add_interactive_node("æœºå™¨å­¦ä¹ ", "concept", {"category": "AI"})

# æ·»åŠ è¾¹
interactive_viz.add_interactive_edge("å¼ ä¸‰", "æå››", "friend", 0.8)
interactive_viz.add_interactive_edge("å¼ ä¸‰", "ç‹äº”", "work", 0.9)
interactive_viz.add_interactive_edge("æå››", "æœºå™¨å­¦ä¹ ", "study", 0.7)
interactive_viz.add_interactive_edge("å¼ ä¸‰", "å…¬å¸A", "work", 0.9)

# åˆ›å»ºäº¤äº’å¼å¯è§†åŒ–
interactive_viz.create_interactive_visualization()
interactive_viz.create_filterable_visualization()
```

## 7. æ€»ç»“

æœ¬æ–‡æ¡£æä¾›äº†çŸ¥è¯†å›¾è°±å¯è§†åŒ–æŠ€æœ¯çš„å®è·µæ¡ˆä¾‹ï¼Œæ¶µç›–ï¼š

1. **ç½‘ç»œå›¾å¯è§†åŒ–**ï¼šåŸºç¡€ç½‘ç»œå›¾ã€åˆ†å±‚ç½‘ç»œå›¾
2. **ç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–**ï¼šåŸºç¡€ç»Ÿè®¡ã€æ—¶é—´åºåˆ—åˆ†æ
3. **äº¤äº’å¼å¯è§†åŒ–**ï¼šåŠ¨æ€äº¤äº’ã€å¯è¿‡æ»¤å¯è§†åŒ–

æ¯ä¸ªæ¡ˆä¾‹éƒ½åŒ…å«ï¼š

- æ•°æ®å‡†å¤‡å’Œé¢„å¤„ç†
- å¯è§†åŒ–ç®—æ³•å®ç°
- äº¤äº’åŠŸèƒ½è®¾è®¡
- å®é™…åº”ç”¨åœºæ™¯

è¿™äº›å®è·µæ¡ˆä¾‹å±•ç¤ºäº†çŸ¥è¯†å›¾è°±å¯è§†åŒ–çš„å¤šç§æŠ€æœ¯å’Œæ–¹æ³•ï¼Œä¸ºæ„å»ºç›´è§‚ã€äº¤äº’å¼çš„çŸ¥è¯†å›¾è°±å±•ç¤ºç³»ç»Ÿæä¾›äº†å‚è€ƒã€‚
