# çŸ¥è¯†å›¾è°±ä¸å¯è§†åŒ–å®è·µæ¡ˆä¾‹

## ğŸ“‘ ç›®å½•

- [çŸ¥è¯†å›¾è°±ä¸å¯è§†åŒ–å®è·µæ¡ˆä¾‹](#çŸ¥è¯†å›¾è°±ä¸å¯è§†åŒ–å®è·µæ¡ˆä¾‹)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
  - [2. çŸ¥è¯†å›¾è°±æ„å»ºå®è·µæ¡ˆä¾‹](#2-çŸ¥è¯†å›¾è°±æ„å»ºå®è·µæ¡ˆä¾‹)
    - [2.1. å­¦æœ¯çŸ¥è¯†å›¾è°±æ„å»º](#21-å­¦æœ¯çŸ¥è¯†å›¾è°±æ„å»º)
  - [3. ä¼ä¸šçŸ¥è¯†å›¾è°±æ„å»º](#3-ä¼ä¸šçŸ¥è¯†å›¾è°±æ„å»º)
  - [4. çŸ¥è¯†å›¾è°±å¯è§†åŒ–å®è·µæ¡ˆä¾‹](#4-çŸ¥è¯†å›¾è°±å¯è§†åŒ–å®è·µæ¡ˆä¾‹)
    - [4.1. åŸºç¡€å¯è§†åŒ–](#41-åŸºç¡€å¯è§†åŒ–)
  - [5. ç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–](#5-ç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–)
  - [6. æ€»ç»“](#6-æ€»ç»“)

---


## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›çŸ¥è¯†å›¾è°±ä¸å¯è§†åŒ–åœ¨å®é™…é¡¹ç›®ä¸­çš„å…·ä½“åº”ç”¨æ¡ˆä¾‹ï¼Œæ¶µç›–çŸ¥è¯†å›¾è°±æ„å»ºã€å¯è§†åŒ–å±•ç¤ºç­‰å„ä¸ªæ–¹é¢çš„å®é™…åº”ç”¨ã€‚

## 2. çŸ¥è¯†å›¾è°±æ„å»ºå®è·µæ¡ˆä¾‹

### 2.1. å­¦æœ¯çŸ¥è¯†å›¾è°±æ„å»º

```python
# å­¦æœ¯çŸ¥è¯†å›¾è°±æ„å»º
import networkx as nx
import matplotlib.pyplot as plt
from typing import Dict, List
from dataclasses import dataclass

@dataclass
class AcademicEntity:
    """å­¦æœ¯å®ä½“"""
    id: str
    name: str
    entity_type: str
    properties: Dict

@dataclass
class AcademicRelation:
    """å­¦æœ¯å…³ç³»"""
    source_id: str
    target_id: str
    relation_type: str

class AcademicKnowledgeGraph:
    """å­¦æœ¯çŸ¥è¯†å›¾è°±"""

    def __init__(self):
        self.entities: Dict[str, AcademicEntity] = {}
        self.relations: List[AcademicRelation] = []
        self.graph = nx.DiGraph()

    def add_entity(self, entity: AcademicEntity):
        """æ·»åŠ å®ä½“"""
        self.entities[entity.id] = entity
        self.graph.add_node(entity.id, name=entity.name, type=entity.entity_type)

    def add_relation(self, relation: AcademicRelation):
        """æ·»åŠ å…³ç³»"""
        self.relations.append(relation)
        self.graph.add_edge(relation.source_id, relation.target_id, type=relation.relation_type)

    def get_related_entities(self, entity_id: str) -> List[str]:
        """è·å–ç›¸å…³å®ä½“"""
        return list(self.graph.neighbors(entity_id))

    def visualize(self, title: str = "å­¦æœ¯çŸ¥è¯†å›¾è°±"):
        """å¯è§†åŒ–"""
        plt.figure(figsize=(12, 8))
        pos = nx.spring_layout(self.graph)

        nx.draw(self.graph, pos,
               node_color='lightblue',
               node_size=1000,
               with_labels=True,
               labels={node: self.graph.nodes[node]['name'] for node in self.graph.nodes()})

        plt.title(title)
        plt.show()

# ä½¿ç”¨ç¤ºä¾‹
def academic_kg_example():
    """å­¦æœ¯çŸ¥è¯†å›¾è°±ç¤ºä¾‹"""
    kg = AcademicKnowledgeGraph()

# æ·»åŠ å®ä½“
    entities = [
        AcademicEntity("A001", "å¼ ä¸‰", "author", {}),
        AcademicEntity("P001", "æ·±åº¦å­¦ä¹ è®ºæ–‡", "paper", {}),
        AcademicEntity("J001", "ICML", "journal", {}),
    ]

    for entity in entities:
        kg.add_entity(entity)

# æ·»åŠ å…³ç³»
    relations = [
        AcademicRelation("A001", "P001", "writes"),
        AcademicRelation("P001", "J001", "published_in"),
    ]

    for relation in relations:
        kg.add_relation(relation)

# å¯è§†åŒ–
    kg.visualize()

# æŸ¥è¯¢ç›¸å…³å®ä½“
    related = kg.get_related_entities("A001")
    print(f"å¼ ä¸‰çš„ç›¸å…³å®ä½“: {related}")

academic_kg_example()
```

## 3. ä¼ä¸šçŸ¥è¯†å›¾è°±æ„å»º

```python
# ä¼ä¸šçŸ¥è¯†å›¾è°±æ„å»º
@dataclass
class CompanyEntity:
    """å…¬å¸å®ä½“"""
    id: str
    name: str
    entity_type: str
    properties: Dict

class CompanyKnowledgeGraph:
    """ä¼ä¸šçŸ¥è¯†å›¾è°±"""

    def __init__(self):
        self.entities: Dict[str, CompanyEntity] = {}
        self.relations: List[AcademicRelation] = []
        self.graph = nx.DiGraph()

    def add_entity(self, entity: CompanyEntity):
        """æ·»åŠ å®ä½“"""
        self.entities[entity.id] = entity
        self.graph.add_node(entity.id, name=entity.name, type=entity.entity_type)

    def add_relation(self, relation: AcademicRelation):
        """æ·»åŠ å…³ç³»"""
        self.relations.append(relation)
        self.graph.add_edge(relation.source_id, relation.target_id, type=relation.relation_type)

    def find_competitors(self, company_id: str) -> List[str]:
        """æŸ¥æ‰¾ç«äº‰å¯¹æ‰‹"""
        competitors = []
        for neighbor in self.graph.neighbors(company_id):
            edge_data = self.graph.get_edge_data(company_id, neighbor)
            if edge_data.get('type') == 'competes_with':
                competitors.append(neighbor)
        return competitors

# ä½¿ç”¨ç¤ºä¾‹
def company_kg_example():
    """ä¼ä¸šçŸ¥è¯†å›¾è°±ç¤ºä¾‹"""
    kg = CompanyKnowledgeGraph()

# æ·»åŠ å…¬å¸
    companies = [
        CompanyEntity("C001", "è…¾è®¯", "company", {}),
        CompanyEntity("C002", "é˜¿é‡Œå·´å·´", "company", {}),
    ]

    for company in companies:
        kg.add_entity(company)

# æ·»åŠ ç«äº‰å…³ç³»
    relation = AcademicRelation("C001", "C002", "competes_with")
    kg.add_relation(relation)

# æŸ¥æ‰¾ç«äº‰å¯¹æ‰‹
    competitors = kg.find_competitors("C001")
    print(f"è…¾è®¯çš„ç«äº‰å¯¹æ‰‹: {competitors}")

company_kg_example()
```

## 4. çŸ¥è¯†å›¾è°±å¯è§†åŒ–å®è·µæ¡ˆä¾‹

### 4.1. åŸºç¡€å¯è§†åŒ–

```python
# åŸºç¡€å¯è§†åŒ–
import plotly.graph_objects as go
import plotly.express as px

class KGVisualizer:
    """çŸ¥è¯†å›¾è°±å¯è§†åŒ–å™¨"""

    def __init__(self, kg):
        self.kg = kg

    def create_network_graph(self):
        """åˆ›å»ºç½‘ç»œå›¾"""
# å‡†å¤‡èŠ‚ç‚¹æ•°æ®
        node_x = []
        node_y = []
        node_text = []

# è®¡ç®—èŠ‚ç‚¹ä½ç½®
        pos = nx.spring_layout(self.kg.graph, k=1, iterations=50)

        for entity_id, entity in self.kg.entities.items():
            if entity_id in pos:
                x, y = pos[entity_id]
                node_x.append(x)
                node_y.append(y)
                node_text.append(entity.name)

# å‡†å¤‡è¾¹æ•°æ®
        edge_x = []
        edge_y = []

        for relation in self.kg.relations:
            if (relation.source_id in pos and relation.target_id in pos):
                x0, y0 = pos[relation.source_id]
                x1, y1 = pos[relation.target_id]
                edge_x.extend([x0, x1, None])
                edge_y.extend([y0, y1, None])

# åˆ›å»ºå›¾å½¢
        fig = go.Figure()

# æ·»åŠ è¾¹
        fig.add_trace(go.Scatter(
            x=edge_x, y=edge_y,
            line=dict(width=0.5, color='#888'),
            hoverinfo='none',
            mode='lines'))

# æ·»åŠ èŠ‚ç‚¹
        fig.add_trace(go.Scatter(
            x=node_x, y=node_y,
            mode='markers+text',
            hoverinfo='text',
            text=node_text,
            marker=dict(size=20, color='lightblue'),
            textposition="bottom center"
        ))

        fig.update_layout(
            title='çŸ¥è¯†å›¾è°±ç½‘ç»œå›¾',
            showlegend=False,
            hovermode='closest',
            margin=dict(b=20,l=5,r=5,t=40),
            xaxis=dict(showgrid=False, zeroline=False, showticklabels=False),
            yaxis=dict(showgrid=False, zeroline=False, showticklabels=False)
        )

        return fig

    def show(self):
        """æ˜¾ç¤ºå›¾å½¢"""
        fig = self.create_network_graph()
        fig.show()

# ä½¿ç”¨ç¤ºä¾‹
def visualization_example():
    """å¯è§†åŒ–ç¤ºä¾‹"""
    kg = AcademicKnowledgeGraph()

# æ·»åŠ å®ä½“å’Œå…³ç³»
    entities = [
        AcademicEntity("A001", "å¼ ä¸‰", "author", {}),
        AcademicEntity("P001", "è®ºæ–‡", "paper", {}),
        AcademicEntity("J001", "æœŸåˆŠ", "journal", {}),
    ]

    for entity in entities:
        kg.add_entity(entity)

    relations = [
        AcademicRelation("A001", "P001", "writes"),
        AcademicRelation("P001", "J001", "published_in"),
    ]

    for relation in relations:
        kg.add_relation(relation)

# å¯è§†åŒ–
    visualizer = KGVisualizer(kg)
    visualizer.show()

visualization_example()
```

## 5. ç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–

```python
# ç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–
class KGStatisticsVisualizer:
    """çŸ¥è¯†å›¾è°±ç»Ÿè®¡å¯è§†åŒ–å™¨"""

    def __init__(self, kg):
        self.kg = kg

    def create_entity_type_chart(self):
        """åˆ›å»ºå®ä½“ç±»å‹ç»Ÿè®¡å›¾"""
        type_counts = {}
        for entity in self.kg.entities.values():
            type_counts[entity.entity_type] = type_counts.get(entity.entity_type, 0) + 1

        fig = px.bar(
            x=list(type_counts.keys()),
            y=list(type_counts.values()),
            title="å®ä½“ç±»å‹åˆ†å¸ƒ",
            labels={'x': 'å®ä½“ç±»å‹', 'y': 'æ•°é‡'}
        )
        return fig

    def create_relation_type_chart(self):
        """åˆ›å»ºå…³ç³»ç±»å‹ç»Ÿè®¡å›¾"""
        type_counts = {}
        for relation in self.kg.relations:
            type_counts[relation.relation_type] = type_counts.get(relation.relation_type, 0) + 1

        fig = px.pie(
            values=list(type_counts.values()),
            names=list(type_counts.keys()),
            title="å…³ç³»ç±»å‹åˆ†å¸ƒ"
        )
        return fig

    def show_statistics(self):
        """æ˜¾ç¤ºç»Ÿè®¡å›¾è¡¨"""
        entity_fig = self.create_entity_type_chart()
        relation_fig = self.create_relation_type_chart()

        entity_fig.show()
        relation_fig.show()

# ä½¿ç”¨ç¤ºä¾‹
def statistics_example():
    """ç»Ÿè®¡å¯è§†åŒ–ç¤ºä¾‹"""
    kg = AcademicKnowledgeGraph()

# æ·»åŠ æ›´å¤šæ•°æ®
    entities = [
        AcademicEntity("A001", "å¼ ä¸‰", "author", {}),
        AcademicEntity("A002", "æå››", "author", {}),
        AcademicEntity("P001", "è®ºæ–‡1", "paper", {}),
        AcademicEntity("P002", "è®ºæ–‡2", "paper", {}),
        AcademicEntity("J001", "æœŸåˆŠ1", "journal", {}),
    ]

    for entity in entities:
        kg.add_entity(entity)

    relations = [
        AcademicRelation("A001", "P001", "writes"),
        AcademicRelation("A002", "P002", "writes"),
        AcademicRelation("P001", "J001", "published_in"),
        AcademicRelation("P002", "J001", "published_in"),
    ]

    for relation in relations:
        kg.add_relation(relation)

# æ˜¾ç¤ºç»Ÿè®¡
    stats_viz = KGStatisticsVisualizer(kg)
    stats_viz.show_statistics()

statistics_example()
```

## 6. æ€»ç»“

æœ¬æ–‡æ¡£æä¾›äº†çŸ¥è¯†å›¾è°±ä¸å¯è§†åŒ–åœ¨å®é™…é¡¹ç›®ä¸­çš„å…·ä½“åº”ç”¨æ¡ˆä¾‹ï¼ŒåŒ…æ‹¬ï¼š

1. **çŸ¥è¯†å›¾è°±æ„å»ºå®è·µ**ï¼šå­¦æœ¯çŸ¥è¯†å›¾è°±å’Œä¼ä¸šçŸ¥è¯†å›¾è°±çš„æ„å»º
2. **çŸ¥è¯†å›¾è°±å¯è§†åŒ–å®è·µ**ï¼šåŸºç¡€å¯è§†åŒ–å’Œç»Ÿè®¡å›¾è¡¨å¯è§†åŒ–

è¿™äº›æ¡ˆä¾‹å±•ç¤ºäº†çŸ¥è¯†å›¾è°±æŠ€æœ¯åœ¨å­¦æœ¯ç ”ç©¶ã€ä¼ä¸šåˆ†æç­‰é¢†åŸŸçš„å®é™…åº”ç”¨ï¼Œä¸ºçŸ¥è¯†å›¾è°±é¡¹ç›®çš„å¼€å‘å’Œéƒ¨ç½²æä¾›äº†å…·ä½“çš„å‚è€ƒå’ŒæŒ‡å¯¼ã€‚
